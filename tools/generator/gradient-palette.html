<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸å˜è‰²å¡ç”Ÿæˆå™¨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        [data-theme="dark"] {
            --card-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        body {
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        header h1 {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--primary-gradient);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s;
            z-index: 1000;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 2rem;
            align-items: start;
        }
        
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .controls {
            background: var(--pico-card-background-color);
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: var(--card-shadow);
        }
        
        .control-group {
            margin-bottom: 1.5rem;
        }
        
        .control-group label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .color-stops {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .color-stop {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--pico-card-background-color);
            padding: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--pico-muted-border-color);
        }
        
        .color-stop input[type="color"] {
            width: 50px;
            height: 40px;
            padding: 0;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
        }
        
        .color-stop input[type="range"] {
            flex: 1;
        }
        
        .color-stop .remove-btn {
            background: #ff6b6b;
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .add-color-btn {
            width: 100%;
            margin-top: 0.5rem;
        }
        
        .gradient-types {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }
        
        .type-btn {
            padding: 0.5rem;
            border: 2px solid var(--pico-muted-border-color);
            border-radius: 0.5rem;
            background: transparent;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        
        .type-btn:hover, .type-btn.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .slider-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .slider-group input[type="range"] {
            flex: 1;
        }
        
        .slider-value {
            min-width: 50px;
            text-align: right;
        }
        
        .preset-gradients {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
        }
        
        .preset-btn {
            aspect-ratio: 2;
            border: 2px solid var(--pico-muted-border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .preset-btn:hover {
            transform: scale(1.05);
            border-color: var(--pico-primary);
        }
        
        .preview-area {
            background: var(--pico-card-background-color);
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: var(--card-shadow);
        }
        
        .gradient-preview {
            width: 100%;
            height: 300px;
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            margin-bottom: 1rem;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .palette-color {
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
            font-size: 0.8rem;
            font-family: monospace;
        }
        
        .palette-color:hover {
            transform: scale(1.05);
        }
        
        .palette-color.light {
            color: #333;
        }
        
        .palette-color.dark {
            color: #fff;
        }
        
        .code-output {
            background: var(--pico-code-background-color);
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .btn-group {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .btn-group button {
            flex: 1;
        }
        
        .btn-primary {
            background: var(--primary-gradient);
            border: none;
        }
        
        .output-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .output-tab {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .output-tab:hover, .output-tab.active {
            border-bottom-color: #667eea;
            color: #667eea;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
    
    <div class="container">
        <a href="../../index.html" style="display:inline-block;margin-bottom:1rem;color:var(--pico-primary);text-decoration:none;">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>ğŸŒˆ æ¸å˜è‰²å¡ç”Ÿæˆå™¨</h1>
            <p>åˆ›å»ºæ¼‚äº®çš„æ¸å˜è‰²å¹¶å¯¼å‡ºé¢œè‰²ä»£ç </p>
        </header>
        
        <div class="main-content">
            <div class="controls">
                <div class="control-group">
                    <label>ğŸ¨ é¢„è®¾æ¸å˜</label>
                    <div class="preset-gradients" id="presetGradients"></div>
                </div>
                
                <div class="control-group">
                    <label>ğŸ¨ é¢œè‰²èŠ‚ç‚¹</label>
                    <div class="color-stops" id="colorStops"></div>
                    <button class="add-color-btn" onclick="addColorStop()">+ æ·»åŠ é¢œè‰²</button>
                </div>
                
                <div class="control-group">
                    <label>ğŸ“ æ¸å˜ç±»å‹</label>
                    <div class="gradient-types" id="gradientTypes"></div>
                </div>
                
                <div class="control-group">
                    <label>ğŸ”„ è§’åº¦</label>
                    <div class="slider-group">
                        <input type="range" id="angle" min="0" max="360" value="135">
                        <span class="slider-value" id="angleValue">135Â°</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>ğŸ“Š è‰²å¡æ•°é‡</label>
                    <div class="slider-group">
                        <input type="range" id="paletteCount" min="3" max="12" value="5">
                        <span class="slider-value" id="paletteCountValue">5</span>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn-primary" onclick="downloadImage()">ğŸ“¥ ä¸‹è½½å›¾ç‰‡</button>
                    <button onclick="randomGradient()">ğŸ² éšæœºç”Ÿæˆ</button>
                </div>
            </div>
            
            <div class="preview-area">
                <h3>æ¸å˜é¢„è§ˆ</h3>
                <div class="gradient-preview" id="gradientPreview"></div>
                
                <h4>æå–çš„é¢œè‰²</h4>
                <div class="color-palette" id="colorPalette"></div>
                
                <h4 style="margin-top: 1.5rem;">ä»£ç è¾“å‡º</h4>
                <div class="output-tabs" id="outputTabs"></div>
                <div class="code-output" id="codeOutput"></div>
                <div class="btn-group">
                    <button onclick="copyCode()">ğŸ“‹ å¤åˆ¶ä»£ç </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Theme management
        window.toggleTheme = function() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        };
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        let state = {
            colorStops: [
                { color: '#667eea', position: 0 },
                { color: '#764ba2', position: 100 }
            ],
            type: 'linear',
            angle: 135,
            paletteCount: 5,
            outputType: 'css'
        };
        
        const presets = [
            { colors: ['#667eea', '#764ba2'], gradient: 'linear-gradient(135deg, #667eea, #764ba2)' },
            { colors: ['#f093fb', '#f5576c'], gradient: 'linear-gradient(135deg, #f093fb, #f5576c)' },
            { colors: ['#4facfe', '#00f2fe'], gradient: 'linear-gradient(135deg, #4facfe, #00f2fe)' },
            { colors: ['#43e97b', '#38f9d7'], gradient: 'linear-gradient(135deg, #43e97b, #38f9d7)' },
            { colors: ['#fa709a', '#fee140'], gradient: 'linear-gradient(135deg, #fa709a, #fee140)' },
            { colors: ['#30cfd0', '#330867'], gradient: 'linear-gradient(135deg, #30cfd0, #330867)' },
            { colors: ['#a8edea', '#fed6e3'], gradient: 'linear-gradient(135deg, #a8edea, #fed6e3)' },
            { colors: ['#ff9a9e', '#fecfef'], gradient: 'linear-gradient(135deg, #ff9a9e, #fecfef)' }
        ];
        
        const gradientTypes = [
            { type: 'linear', label: 'çº¿æ€§' },
            { type: 'radial', label: 'å¾„å‘' },
            { type: 'conic', label: 'é”¥å½¢' }
        ];
        
        const outputTypes = [
            { type: 'css', label: 'CSS' },
            { type: 'tailwind', label: 'Tailwind' },
            { type: 'sass', label: 'SASS' }
        ];
        
        function initUI() {
            // Presets
            const presetsContainer = document.getElementById('presetGradients');
            presets.forEach((preset, i) => {
                const btn = document.createElement('div');
                btn.className = 'preset-btn';
                btn.style.background = preset.gradient;
                btn.addEventListener('click', () => {
                    state.colorStops = preset.colors.map((color, idx) => ({
                        color,
                        position: Math.round(idx / (preset.colors.length - 1) * 100)
                    }));
                    renderColorStops();
                    render();
                });
                presetsContainer.appendChild(btn);
            });
            
            // Gradient types
            const typesContainer = document.getElementById('gradientTypes');
            gradientTypes.forEach(gt => {
                const btn = document.createElement('button');
                btn.className = 'type-btn' + (gt.type === state.type ? ' active' : '');
                btn.textContent = gt.label;
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.type = gt.type;
                    render();
                });
                typesContainer.appendChild(btn);
            });
            
            // Output tabs
            const tabsContainer = document.getElementById('outputTabs');
            outputTypes.forEach(ot => {
                const btn = document.createElement('button');
                btn.className = 'output-tab' + (ot.type === state.outputType ? ' active' : '');
                btn.textContent = ot.label;
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.output-tab').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.outputType = ot.type;
                    updateCodeOutput();
                });
                tabsContainer.appendChild(btn);
            });
        }
        
        function renderColorStops() {
            const container = document.getElementById('colorStops');
            container.textContent = '';
            
            state.colorStops.forEach((stop, index) => {
                const div = document.createElement('div');
                div.className = 'color-stop';
                
                const colorInput = document.createElement('input');
                colorInput.type = 'color';
                colorInput.value = stop.color;
                colorInput.addEventListener('change', () => {
                    state.colorStops[index].color = colorInput.value;
                    render();
                });
                
                const rangeInput = document.createElement('input');
                rangeInput.type = 'range';
                rangeInput.min = '0';
                rangeInput.max = '100';
                rangeInput.value = stop.position;
                
                const posLabel = document.createElement('span');
                posLabel.textContent = stop.position + '%';
                
                rangeInput.addEventListener('input', () => {
                    state.colorStops[index].position = parseInt(rangeInput.value);
                    posLabel.textContent = rangeInput.value + '%';
                    state.colorStops.sort((a, b) => a.position - b.position);
                    render();
                });
                
                div.appendChild(colorInput);
                div.appendChild(rangeInput);
                div.appendChild(posLabel);
                
                if (state.colorStops.length > 2) {
                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-btn';
                    removeBtn.textContent = 'Ã—';
                    removeBtn.addEventListener('click', () => {
                        state.colorStops.splice(index, 1);
                        renderColorStops();
                        render();
                    });
                    div.appendChild(removeBtn);
                }
                
                container.appendChild(div);
            });
        }
        
        window.addColorStop = function() {
            const lastColor = state.colorStops[state.colorStops.length - 1];
            const newPosition = Math.min(100, lastColor.position + 20);
            state.colorStops.push({
                color: '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0'),
                position: newPosition
            });
            state.colorStops.sort((a, b) => a.position - b.position);
            renderColorStops();
            render();
        };
        
        document.getElementById('angle').addEventListener('input', e => {
            state.angle = parseInt(e.target.value);
            document.getElementById('angleValue').textContent = e.target.value + 'Â°';
            render();
        });
        
        document.getElementById('paletteCount').addEventListener('input', e => {
            state.paletteCount = parseInt(e.target.value);
            document.getElementById('paletteCountValue').textContent = e.target.value;
            render();
        });
        
        function getGradientCSS() {
            const stops = state.colorStops.map(s => s.color + ' ' + s.position + '%').join(', ');
            switch (state.type) {
                case 'linear':
                    return 'linear-gradient(' + state.angle + 'deg, ' + stops + ')';
                case 'radial':
                    return 'radial-gradient(circle, ' + stops + ')';
                case 'conic':
                    return 'conic-gradient(from ' + state.angle + 'deg, ' + stops + ')';
            }
        }
        
        function hexToRgb(hex) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return { r, g, b };
        }
        
        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => Math.round(x).toString(16).padStart(2, '0')).join('');
        }
        
        function interpolateColor(color1, color2, factor) {
            const c1 = hexToRgb(color1);
            const c2 = hexToRgb(color2);
            return rgbToHex(
                c1.r + (c2.r - c1.r) * factor,
                c1.g + (c2.g - c1.g) * factor,
                c1.b + (c2.b - c1.b) * factor
            );
        }
        
        function getColorAtPosition(position) {
            const stops = state.colorStops;
            if (position <= stops[0].position) return stops[0].color;
            if (position >= stops[stops.length - 1].position) return stops[stops.length - 1].color;
            
            for (let i = 0; i < stops.length - 1; i++) {
                if (position >= stops[i].position && position <= stops[i + 1].position) {
                    const factor = (position - stops[i].position) / (stops[i + 1].position - stops[i].position);
                    return interpolateColor(stops[i].color, stops[i + 1].color, factor);
                }
            }
            return stops[0].color;
        }
        
        function getLuminance(hex) {
            const rgb = hexToRgb(hex);
            return (0.299 * rgb.r + 0.587 * rgb.g + 0.114 * rgb.b) / 255;
        }
        
        function render() {
            const preview = document.getElementById('gradientPreview');
            preview.style.background = getGradientCSS();
            
            const palette = document.getElementById('colorPalette');
            palette.textContent = '';
            
            for (let i = 0; i < state.paletteCount; i++) {
                const position = (i / (state.paletteCount - 1)) * 100;
                const color = getColorAtPosition(position);
                const isLight = getLuminance(color) > 0.5;
                
                const div = document.createElement('div');
                div.className = 'palette-color ' + (isLight ? 'light' : 'dark');
                div.style.background = color;
                div.textContent = color;
                div.addEventListener('click', () => {
                    navigator.clipboard.writeText(color).then(() => {
                        alert('é¢œè‰² ' + color + ' å·²å¤åˆ¶ï¼');
                    });
                });
                palette.appendChild(div);
            }
            
            updateCodeOutput();
        }
        
        function updateCodeOutput() {
            const output = document.getElementById('codeOutput');
            const gradient = getGradientCSS();
            const colors = [];
            for (let i = 0; i < state.paletteCount; i++) {
                colors.push(getColorAtPosition((i / (state.paletteCount - 1)) * 100));
            }
            
            let code = '';
            switch (state.outputType) {
                case 'css':
                    code = '.gradient {\n    background: ' + gradient + ';\n}\n\n/* é¢œè‰²å˜é‡ */\n:root {\n';
                    colors.forEach((c, i) => {
                        code += '    --color-' + (i + 1) + ': ' + c + ';\n';
                    });
                    code += '}';
                    break;
                case 'tailwind':
                    code = '// tailwind.config.js\nmodule.exports = {\n    theme: {\n        extend: {\n            colors: {\n';
                    colors.forEach((c, i) => {
                        code += "                'gradient-" + (i + 1) + "': '" + c + "',\n";
                    });
                    code += "            },\n            backgroundImage: {\n                'custom-gradient': '" + gradient + "',\n            }\n        }\n    }\n}";
                    break;
                case 'sass':
                    code = '// Variables\n';
                    colors.forEach((c, i) => {
                        code += '$color-' + (i + 1) + ': ' + c + ';\n';
                    });
                    code += '\n// Gradient mixin\n@mixin gradient-bg {\n    background: ' + gradient + ';\n}\n\n// Usage\n.element {\n    @include gradient-bg;\n}';
                    break;
            }
            output.textContent = code;
        }
        
        window.copyCode = function() {
            const code = document.getElementById('codeOutput').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        };
        
        window.randomGradient = function() {
            const randomColor = () => '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');
            const count = Math.floor(Math.random() * 3) + 2;
            state.colorStops = [];
            for (let i = 0; i < count; i++) {
                state.colorStops.push({
                    color: randomColor(),
                    position: Math.round(i / (count - 1) * 100)
                });
            }
            state.angle = Math.floor(Math.random() * 360);
            document.getElementById('angle').value = state.angle;
            document.getElementById('angleValue').textContent = state.angle + 'Â°';
            renderColorStops();
            render();
        };
        
        window.downloadImage = function() {
            const canvas = document.createElement('canvas');
            canvas.width = 1200;
            canvas.height = 800;
            const ctx = canvas.getContext('2d');
            
            let gradient;
            if (state.type === 'linear') {
                const rad = state.angle * Math.PI / 180;
                const x1 = canvas.width / 2 - Math.cos(rad) * canvas.width;
                const y1 = canvas.height / 2 - Math.sin(rad) * canvas.height;
                const x2 = canvas.width / 2 + Math.cos(rad) * canvas.width;
                const y2 = canvas.height / 2 + Math.sin(rad) * canvas.height;
                gradient = ctx.createLinearGradient(x1, y1, x2, y2);
            } else if (state.type === 'radial') {
                gradient = ctx.createRadialGradient(
                    canvas.width / 2, canvas.height / 2, 0,
                    canvas.width / 2, canvas.height / 2, canvas.width / 2
                );
            } else {
                gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            }
            
            state.colorStops.forEach(stop => {
                gradient.addColorStop(stop.position / 100, stop.color);
            });
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            const link = document.createElement('a');
            link.download = 'gradient.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        };
        
        // Initialize
        initUI();
        renderColorStops();
        render();
    </script>
</body>
</html>
