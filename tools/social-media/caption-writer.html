<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ç¤¾äº¤åª’ä½“æ–‡æ¡ˆç”Ÿæˆå™¨ - WebUtils</title>
    <meta name="description" content="æ ¹æ®ä¸»é¢˜å’Œé£æ ¼ç”Ÿæˆç¤¾äº¤åª’ä½“æ–‡æ¡ˆ" />
    <meta name="keywords" content="æ–‡æ¡ˆ caption ç¤¾äº¤åª’ä½“ æ–‡æ¡ˆç”Ÿæˆ" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-pink: #f72585;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;

        /* å­—ä½“å˜é‡ */
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
      }
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
          linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
        z-index: 0;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 24px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      .header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
      }
      .breadcrumb a {
        color: var(--color-text-secondary);
        text-decoration: none;
        transition: color 0.2s ease;
      }
      .breadcrumb a:hover {
        color: var(--color-accent-cyan);
      }
      .breadcrumb-separator {
        color: var(--color-text-muted);
      }
      .breadcrumb-current {
        color: var(--color-text-primary);
        font-weight: 500;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }
      .title-section {
        flex: 1;
      }
      .title-section h1 {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .title-icon {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--accent-pink), #ff6b6b);
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: #fff;
      }
      .title-section .desc {
        font-size: 0.9rem;
        color: var(--color-text-secondary);
        margin-top: 4px;
      }
      .main-card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
        flex: 1;
      }
      .form-group {
        margin-bottom: 20px;
      }
      .form-group label {
        display: block;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 8px;
      }
      input[type="text"],
      textarea,
      select {
        width: 100%;
        padding: 12px 16px;
        font-family: var(--font-mono);
        font-size: 0.9rem;
        background: var(--bg-input);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--color-text-primary);
        transition: all 0.2s;
      }
      input:focus,
      textarea:focus,
      select:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
        box-shadow: 0 0 0 4px var(--glow-cyan);
      }
      input::placeholder,
      textarea::placeholder {
        color: var(--color-text-muted);
      }
      textarea {
        min-height: 100px;
        resize: vertical;
      }
      .options-row {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }
      .options-row .form-group {
        flex: 1;
        min-width: 150px;
      }
      .style-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 8px;
      }
      .style-tag {
        padding: 6px 14px;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: 20px;
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }
      .style-tag:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      .style-tag.active {
        background: var(--color-accent-cyan);
        border-color: var(--color-accent-cyan);
        color: var(--color-bg-deep);
      }
      .toolbar {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin: 20px 0;
        padding: 20px 0;
        border-top: 1px solid var(--border-subtle);
        border-bottom: 1px solid var(--border-subtle);
      }
      button {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        font-weight: 500;
        padding: 10px 16px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }
      button:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      button.primary {
        background: var(--color-accent-cyan);
        border-color: var(--color-accent-cyan);
        color: var(--color-bg-deep);
      }
      button.primary:hover {
        background: #00dfc4;
        box-shadow: 0 0 20px var(--glow-cyan);
      }
      .output-section {
        margin-top: 20px;
      }
      .output-label {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 10px;
      }
      .caption-card {
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 16px;
        margin-bottom: 12px;
        position: relative;
      }
      .caption-card:hover {
        border-color: var(--color-accent-cyan);
      }
      .caption-text {
        font-size: 0.95rem;
        line-height: 1.8;
        color: var(--color-text-primary);
        white-space: pre-wrap;
      }
      .caption-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid var(--border-subtle);
      }
      .caption-length {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        color: var(--color-text-muted);
      }
      .caption-copy {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        padding: 6px 12px;
        background: transparent;
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-secondary);
        cursor: pointer;
      }
      .caption-copy:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      .status {
        font-family: var(--font-mono);
        font-size: 0.85rem;
        color: var(--color-text-muted);
        margin-top: 16px;
      }
      .status.success {
        color: var(--accent-green);
      }
      .status.error {
        color: var(--accent-red);
      }
      footer {
        text-align: center;
        margin-top: 24px;
        padding-top: 16px;
        border-top: 1px solid var(--border-subtle);
      }
      footer p {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      footer a {
        color: var(--color-accent-cyan);
        text-decoration: none;
      }
      footer a:hover {
        color: var(--color-text-primary);
      }
      @media (max-width: 640px) {
        .container {
          padding: 16px;
        }
        .header {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
        }
        .options-row {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-grid"></div>

    <div class="container">
      <div class="header">
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <a href="../../index.html">é¦–é¡µ</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">æ–‡æ¡ˆç”Ÿæˆå™¨</span>
        </nav>
        <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
        <div class="title-section">
          <h1>
            <span class="title-icon">âœï¸</span>
            ç¤¾äº¤åª’ä½“æ–‡æ¡ˆç”Ÿæˆå™¨
          </h1>
          <p class="desc">æ ¹æ®ä¸»é¢˜å’Œé£æ ¼ç”Ÿæˆå¸å¼•äººçš„ç¤¾äº¤åª’ä½“æ–‡æ¡ˆ</p>
        </div>
      </div>

      <div class="main-card">
        <div class="form-group">
          <label>ä¸»é¢˜/å…³é”®è¯</label>
          <input type="text" id="topic" placeholder="ä¾‹å¦‚: å‘¨æœ«æ—…è¡Œã€æ–°å“ä¸Šå¸‚ã€å¥èº«æ‰“å¡..." />
        </div>

        <div class="form-group">
          <label>è¡¥å……è¯´æ˜ï¼ˆå¯é€‰ï¼‰</label>
          <textarea id="details" placeholder="æ·»åŠ æ›´å¤šç»†èŠ‚ï¼Œå¦‚åœ°ç‚¹ã€æ„Ÿå—ã€äº§å“ç‰¹ç‚¹ç­‰..."></textarea>
        </div>

        <div class="options-row">
          <div class="form-group">
            <label>å¹³å°</label>
            <select id="platform">
              <option value="instagram">Instagram</option>
              <option value="twitter">Twitter/X</option>
              <option value="weibo">å¾®åš</option>
              <option value="xiaohongshu">å°çº¢ä¹¦</option>
              <option value="douyin">æŠ–éŸ³</option>
            </select>
          </div>
          <div class="form-group">
            <label>è¯­è¨€</label>
            <select id="language">
              <option value="chinese">ä¸­æ–‡</option>
              <option value="english">English</option>
              <option value="mixed">ä¸­è‹±æ··åˆ</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>æ–‡æ¡ˆé£æ ¼</label>
          <div class="style-tags" id="styleTags">
            <span class="style-tag active" data-style="casual">è½»æ¾æ—¥å¸¸</span>
            <span class="style-tag" data-style="inspiring">åŠ±å¿—æ­£èƒ½é‡</span>
            <span class="style-tag" data-style="funny">å¹½é»˜æç¬‘</span>
            <span class="style-tag" data-style="poetic">æ–‡è‰ºè¯—æ„</span>
            <span class="style-tag" data-style="professional">ä¸“ä¸šæ­£å¼</span>
            <span class="style-tag" data-style="cute">å¯çˆ±è½¯èŒ</span>
            <span class="style-tag" data-style="mysterious">ç¥ç§˜é«˜å†·</span>
          </div>
        </div>

        <div class="toolbar">
          <button class="primary" id="btnGenerate">ç”Ÿæˆæ–‡æ¡ˆ</button>
          <button id="btnClear">æ¸…ç©º</button>
          <button id="btnShare">åˆ†äº«</button>
        </div>

        <div class="output-section">
          <div class="output-label">ç”Ÿæˆçš„æ–‡æ¡ˆ</div>
          <div id="captionsContainer"></div>
        </div>

        <div id="status" class="status"></div>
      </div>

      <footer>
        <p>
          <a href="https://github.com/nicogong/html-tools" target="_blank" rel="noreferrer">
            GitHub
          </a>
          <span>Â·</span>
          <span>çº¯å‰ç«¯ Â· æ— æœåŠ¡å™¨</span>
          <span>Â·</span>
          <a href="../../index.html">WebUtils</a>
        </p>
      </footer>
    </div>

    <script>
      const topicEl = document.getElementById("topic");
      const detailsEl = document.getElementById("details");
      const platformEl = document.getElementById("platform");
      const languageEl = document.getElementById("language");
      const styleTagsEl = document.getElementById("styleTags");
      const captionsContainerEl = document.getElementById("captionsContainer");
      const statusEl = document.getElementById("status");

      const LS_KEY = "caption_writer_v1";

      let selectedStyle = "casual";

      const captionTemplates = {
        casual: {
          chinese: [
            "ä»Šå¤©çš„{topic}ï¼Œç®€å•ä½†å¿«ä¹ âœ¨",
            "è®°å½•ä¸€ä¸‹{topic}çš„ç¾å¥½ç¬é—´~",
            "æ—¥å¸¸{topic}æ‰“å¡ ğŸ“",
            "{topic}çš„ä¸€å¤©ï¼Œæ»¡è¶³ï¼",
            "åˆæ˜¯{topic}çš„å¥½æ—¥å­~",
            "åˆ†äº«ä»Šå¤©çš„{topic} ğŸŒŸ",
            "{topic}ä¸­... å¹¸ç¦æ„Ÿçˆ†æ£š",
            "å¹³å¹³æ·¡æ·¡æ‰æ˜¯çœŸï¼Œ{topic}æ—¥å¸¸",
            "ä»Šæ—¥ä»½{topic}å·²ç­¾æ”¶ âœ“",
            "ç”Ÿæ´»å°±æ˜¯{topic}çš„ç‚¹ç‚¹æ»´æ»´"
          ],
          english: [
            "Just another {topic} day âœ¨",
            "{topic} vibes only",
            "Living my best {topic} life",
            "Currently: {topic} mode ON",
            "{topic} is my therapy",
            "Making memories with {topic}",
            "This is what {topic} looks like",
            "{topic} state of mind",
            "Caught in the moment of {topic}",
            "Simple pleasures: {topic}"
          ]
        },
        inspiring: {
          chinese: [
            "{topic}ï¼Œæ˜¯æˆ‘ç»™è‡ªå·±æœ€å¥½çš„ç¤¼ç‰©",
            "æ¯ä¸€æ¬¡{topic}ï¼Œéƒ½æ˜¯æˆé•¿çš„å°è®°",
            "ä¸è´Ÿæ—¶å…‰ï¼Œä¸è´Ÿ{topic}",
            "{topic}æ•™ä¼šæˆ‘ï¼šåšæŒå°±æ˜¯åŠ›é‡",
            "ä»{topic}å¼€å§‹ï¼Œé‡è§æ›´å¥½çš„è‡ªå·±",
            "è¿½é€{topic}çš„è·¯ä¸Šï¼Œæˆ‘ä»ä¸å­¤å•",
            "{topic}çš„æ„ä¹‰ï¼Œåœ¨äºé‚£ä»½çƒ­çˆ±",
            "æ„¿æ‰€æœ‰çš„{topic}ï¼Œéƒ½èƒ½å¦‚æ„¿ä»¥å¿",
            "ä¸ºäº†{topic}ï¼Œå€¼å¾—å…¨åŠ›ä»¥èµ´",
            "{topic}ï¼Œè®©æˆ‘ç›¸ä¿¡ä¸€åˆ‡çš†æœ‰å¯èƒ½"
          ],
          english: [
            "{topic} is not just a goal, it is a journey",
            "Every {topic} brings me closer to my dreams",
            "Embrace the challenge of {topic}",
            "{topic} taught me that growth never stops",
            "The best time for {topic} is now",
            "Transform your {topic} into your superpower",
            "{topic}: where passion meets purpose",
            "Be fearless in the pursuit of {topic}",
            "{topic} is proof that I am capable",
            "Let {topic} be your motivation"
          ]
        },
        funny: {
          chinese: [
            "æœ¬äººåœ¨{topic}æ–¹é¢ï¼Œå·²ç»è¾¾åˆ°äº†èœé¸Ÿçš„å·…å³°",
            "{topic}ï¼Ÿæˆ‘ä»¥ä¸ºæ˜¯{topic}å‘¢ï¼",
            "ä»Šå¤©çš„{topic}å‘Šè¯‰æˆ‘ï¼šæˆ‘æœç„¶æ˜¯ä¸ªäººæ‰",
            "{topic}ä¹‹åï¼Œæˆ‘çš„é’±åŒ…è¡¨ç¤ºå¾ˆå—ä¼¤",
            "åœ¨{topic}çš„è·¯ä¸Šï¼Œæˆ‘è¿·è·¯äº†",
            "æˆåŠŸé¿å¼€äº†æ‰€æœ‰æ­£ç¡®çš„{topic}é€‰é¡¹",
            "{topic}ä½¿æˆ‘å¿«ä¹ï¼Œä¹Ÿä½¿æˆ‘è´«ç©·",
            "é—®ï¼š{topic}æ€ä¹ˆæ ·ï¼Ÿç­”ï¼šä¸‹æ¬¡å†ä¹Ÿä¸äº†",
            "ä»Šå¤©{topic}çš„å¿ƒæƒ…ï¼šæƒ³å¼€ï¼Œä½†æ²¡å®Œå…¨æƒ³å¼€",
            "{topic}æœ¬å¿«ä¹ï¼Œ{topic}æœ¬æ— ç½ª"
          ],
          english: [
            "Tried {topic}, instructions unclear",
            "My {topic} skills are still loading...",
            "{topic}? More like chaos in disguise",
            "Professional {topic} rookie here",
            "Did {topic}, regret nothing, learned nothing",
            "{topic}: expectations vs reality",
            "Warning: {topic} may cause happiness",
            "Plot twist: I actually enjoyed {topic}",
            "{topic} level: confused but optimistic",
            "Dear {topic}, we need to talk"
          ]
        },
        poetic: {
          chinese: [
            "åœ¨{topic}çš„æ—¶å…‰é‡Œï¼Œä¸ç¾å¥½ä¸æœŸè€Œé‡",
            "{topic}å¦‚è¯—ï¼Œå²æœˆå¦‚æ­Œ",
            "æ„¿ä»¥{topic}ä¸ºç¬”ï¼Œä¹¦å†™ç”Ÿå‘½çš„ç¯‡ç« ",
            "äº{topic}ä¹‹ä¸­ï¼Œå¯»å¾—ä¸€æ–¹å®é™",
            "{topic}æ˜¯é£ï¼Œæ˜¯é›¨ï¼Œæ˜¯äººé—´çƒŸç«",
            "æ—¶å…‰æ¸©æŸ”ï¼Œ{topic}äº¦ç„¶",
            "åœ¨{topic}çš„è§’è½ï¼Œè—ç€ä¸–é—´çš„æ¸©æŸ”",
            "ä»¥{topic}ä¹‹åï¼Œèµ´ä¸€åœºå¿ƒçµä¹‹çº¦",
            "{topic}è½»è½»è½ä¸‹ï¼Œå¸¦èµ°äº†æ‰€æœ‰å–§åš£",
            "å€Ÿä¸€ç¼•{topic}ï¼Œæ¸©æš–æ•´ä¸ªå†¬å¤©"
          ],
          english: [
            "In the poetry of {topic}, I found peace",
            "{topic} whispers what words cannot say",
            "Lost in the art of {topic}",
            "Where {topic} meets the soul",
            "{topic} paints the sky of my dreams",
            "In every {topic}, there is a story untold",
            "Dancing with {topic} under moonlight",
            "{topic} is the music of silence",
            "Through {topic}, I see the universe",
            "Let {topic} be my sanctuary"
          ]
        },
        professional: {
          chinese: [
            "æ·±åº¦è§£æ{topic}ï¼Œå¸¦ä½ äº†è§£è¡Œä¸šè¶‹åŠ¿",
            "{topic}å®è·µåˆ†äº«ï¼Œå¹²è´§æ»¡æ»¡",
            "å…³äº{topic}ï¼Œè¿™äº›è¦ç‚¹å€¼å¾—å…³æ³¨",
            "{topic}é¢†åŸŸæœ€æ–°åŠ¨æ€ï¼Œé€Ÿè§ˆ",
            "ä¸“ä¸šè§†è§’çœ‹{topic}ï¼šæœºé‡ä¸æŒ‘æˆ˜å¹¶å­˜",
            "{topic}è¡Œä¸šæŠ¥å‘Šï¼Œæ•°æ®è¯´è¯",
            "ä»{topic}çœ‹æœªæ¥å‘å±•æ–¹å‘",
            "{topic}æœ€ä½³å®è·µï¼Œç»éªŒæ€»ç»“",
            "æ·±è€•{topic}ï¼ŒæŒç»­è¾“å‡ºä»·å€¼",
            "{topic}ä¸“é¢˜ï¼šä»å…¥é—¨åˆ°ç²¾é€š"
          ],
          english: [
            "Deep dive into {topic}: Key insights",
            "{topic} trends you should know about",
            "Professional take on {topic}",
            "{topic} best practices for success",
            "Industry perspective: {topic} in focus",
            "Mastering {topic}: A comprehensive guide",
            "{topic} analysis: What the data tells us",
            "Strategic approach to {topic}",
            "{topic} expertise: Lessons learned",
            "Elevating {topic} to the next level"
          ]
        },
        cute: {
          chinese: [
            "{topic}ä¹Ÿå¤ªå¯çˆ±äº†å­ï¼",
            "ä»Šå¤©çš„{topic}ï¼Œç”œåº¦è¶…æ ‡~",
            "è¢«{topic}èŒåŒ–äº†å‘œå‘œå‘œ",
            "{topic}å†²é¸­ï¼åŠ æ²¹é¸­ï¼",
            "å°å°çš„{topic}ï¼Œå¤§å¤§çš„å¿«ä¹",
            "å˜¿å˜¿ï¼Œ{topic}ä½¿æˆ‘å¿«ä¹~",
            "{topic}å¥½è€¶ï¼å¼€å¿ƒï¼",
            "ä»Šæ—¥ä»½{topic}å·²åˆ°è´¦ï¼Œè¯·æŸ¥æ”¶~",
            "{topic}æ˜ŸäººæŠ¥é“ï¼",
            "è¢«{topic}æ²»æ„ˆçš„ä¸€å¤©~"
          ],
          english: [
            "{topic} is just too cute!",
            "Feeling fluffy about {topic} today",
            "{topic} makes my heart go uwu",
            "Tiny {topic}, big happiness",
            "Sending {topic} hugs to everyone",
            "{topic} vibes are adorable",
            "Having a {topic} moment rn",
            "So much love for {topic}!",
            "{topic} = instant serotonin",
            "Cuteness overload: {topic} edition"
          ]
        },
        mysterious: {
          chinese: [
            "{topic}çš„èƒŒåï¼Œè—ç€ä¸ä¸ºäººçŸ¥çš„ç§˜å¯†",
            "å…³äº{topic}ï¼Œæˆ‘æœ‰è¯è¯´...",
            "å¦‚æœä½ ä¹Ÿæ‡‚{topic}ï¼Œè¯·ç»™æˆ‘ä¸€ä¸ªçœ¼ç¥",
            "{topic}ï¼Œæ‡‚çš„éƒ½æ‡‚",
            "ä»Šå¤©çš„{topic}ï¼Œæœ‰ç‚¹æ„æ€",
            "ä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½ç†è§£{topic}çš„é­…åŠ›",
            "{topic}ï¼Œæ˜¯æˆ‘æœ€åçš„å€”å¼º",
            "åœ¨{topic}çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä¸»å®°ä¸€åˆ‡",
            "æœ‰äº›{topic}ï¼Œåªå¯æ„ä¼šä¸å¯è¨€ä¼ ",
            "{topic}ï¼šæ­¤å¤„çœç•¥ä¸€ä¸‡å­—"
          ],
          english: [
            "{topic} has its secrets",
            "The untold story of {topic}",
            "If you know, you know: {topic}",
            "{topic} speaks louder than words",
            "Some things about {topic} remain unspoken",
            "Enter the realm of {topic}",
            "{topic}: not for the faint of heart",
            "Decoding the mystery of {topic}",
            "Between the lines of {topic}",
            "{topic}. No further explanation needed."
          ]
        }
      };

      const emojisByStyle = {
        casual: ["âœ¨", "ğŸŒŸ", "ğŸ’«", "ğŸ‰", "ğŸŒˆ", "â˜€ï¸", "ğŸŒ¸", "ğŸ’•", "ğŸµ", "ğŸ“¸"],
        inspiring: ["ğŸ’ª", "ğŸ”¥", "â­", "ğŸŒ±", "ğŸš€", "ğŸ’¡", "âœŠ", "ğŸ†", "ğŸ’", "ğŸŒ…"],
        funny: ["ğŸ˜‚", "ğŸ¤£", "ğŸ˜…", "ğŸ™ƒ", "ğŸ˜œ", "ğŸ¤ª", "ğŸ’€", "ğŸ˜­", "ğŸ¤¦", "ğŸ‘€"],
        poetic: ["ğŸŒ™", "âœ¨", "ğŸƒ", "ğŸŒŠ", "ğŸ¦‹", "ğŸŒ¸", "ğŸ’«", "â˜ï¸", "ğŸŒ¿", "ğŸ•Šï¸"],
        professional: ["ğŸ“Š", "ğŸ’¼", "ğŸ“ˆ", "ğŸ¯", "ğŸ’¡", "ğŸ”", "ğŸ“Œ", "âœ…", "ğŸ…", "ğŸ“"],
        cute: ["ğŸ’•", "ğŸ¥°", "ğŸ’–", "ğŸŒ¸", "âœ¨", "ğŸ€", "ğŸ§¸", "ğŸ°", "ğŸŒˆ", "ğŸ’—"],
        mysterious: ["ğŸŒ™", "âœ¨", "ğŸ”®", "ğŸ‘ï¸", "ğŸ–¤", "ğŸ’«", "ğŸŒŒ", "âš¡", "ğŸƒ", "ğŸ­"]
      };

      function getRandomEmojis(style, count) {
        const emojis = emojisByStyle[style] || emojisByStyle.casual;
        const shuffled = emojis.slice().sort(function () {
          return 0.5 - Math.random();
        });
        return shuffled.slice(0, count).join(" ");
      }

      function generateCaptions() {
        const topic = topicEl.value.trim();
        if (!topic) {
          showStatus("è¯·è¾“å…¥ä¸»é¢˜æˆ–å…³é”®è¯", "error");
          return;
        }

        const platform = platformEl.value;
        const language = languageEl.value;
        const details = detailsEl.value.trim();

        const templates = captionTemplates[selectedStyle];
        if (!templates) {
          showStatus("è¯·é€‰æ‹©æ–‡æ¡ˆé£æ ¼", "error");
          return;
        }

        const captions = [];
        let templateList;

        if (language === "chinese") {
          templateList = templates.chinese;
        } else if (language === "english") {
          templateList = templates.english;
        } else {
          templateList = templates.chinese.concat(templates.english);
        }

        const shuffled = templateList.slice().sort(function () {
          return 0.5 - Math.random();
        });
        const selected = shuffled.slice(0, 5);

        for (const template of selected) {
          let caption = template.replace(/{topic}/g, topic);

          if (details) {
            caption += "\n\n" + details;
          }

          caption += "\n\n" + getRandomEmojis(selectedStyle, 3);

          captions.push(caption);
        }

        displayCaptions(captions);
        saveToStorage();
        showStatus("å·²ç”Ÿæˆ " + captions.length + " æ¡æ–‡æ¡ˆ", "success");
      }

      function displayCaptions(captions) {
        captionsContainerEl.textContent = "";

        for (let i = 0; i < captions.length; i++) {
          const caption = captions[i];
          const card = document.createElement("div");
          card.className = "caption-card";

          const text = document.createElement("div");
          text.className = "caption-text";
          text.textContent = caption;

          const meta = document.createElement("div");
          meta.className = "caption-meta";

          const length = document.createElement("span");
          length.className = "caption-length";
          length.textContent = caption.length + " å­—ç¬¦";

          const copyBtn = document.createElement("button");
          copyBtn.className = "caption-copy";
          copyBtn.textContent = "å¤åˆ¶";
          copyBtn.addEventListener("click", function () {
            copyToClipboard(caption);
          });

          meta.appendChild(length);
          meta.appendChild(copyBtn);

          card.appendChild(text);
          card.appendChild(meta);
          captionsContainerEl.appendChild(card);
        }
      }

      function copyToClipboard(text) {
        navigator.clipboard
          .writeText(text)
          .then(function () {
            showStatus("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿", "success");
          })
          .catch(function () {
            showStatus("å¤åˆ¶å¤±è´¥", "error");
          });
      }

      function showStatus(msg, type) {
        statusEl.textContent = msg;
        statusEl.className = "status " + (type || "");
      }

      function saveToStorage() {
        const data = {
          topic: topicEl.value,
          details: detailsEl.value,
          platform: platformEl.value,
          language: languageEl.value,
          style: selectedStyle
        };
        localStorage.setItem(LS_KEY, JSON.stringify(data));
      }

      function loadFromStorage() {
        try {
          const saved = localStorage.getItem(LS_KEY);
          if (saved) {
            const data = JSON.parse(saved);
            if (data.topic) topicEl.value = data.topic;
            if (data.details) detailsEl.value = data.details;
            if (data.platform) platformEl.value = data.platform;
            if (data.language) languageEl.value = data.language;
            if (data.style) {
              selectedStyle = data.style;
              updateStyleTags();
            }
          }
        } catch (e) {}
      }

      function updateStyleTags() {
        const tags = styleTagsEl.querySelectorAll(".style-tag");
        for (const tag of tags) {
          if (tag.dataset.style === selectedStyle) {
            tag.classList.add("active");
          } else {
            tag.classList.remove("active");
          }
        }
      }

      styleTagsEl.addEventListener("click", function (e) {
        if (e.target.classList.contains("style-tag")) {
          selectedStyle = e.target.dataset.style;
          updateStyleTags();
          saveToStorage();
        }
      });

      document.getElementById("btnGenerate").addEventListener("click", generateCaptions);

      document.getElementById("btnClear").addEventListener("click", function () {
        topicEl.value = "";
        detailsEl.value = "";
        captionsContainerEl.textContent = "";
        statusEl.textContent = "";
        statusEl.className = "status";
        localStorage.removeItem(LS_KEY);
      });

      document.getElementById("btnShare").addEventListener("click", function () {
        try {
          const encoded = btoa(encodeURIComponent(topicEl.value));
          history.replaceState(null, "", "#" + encoded);
          navigator.clipboard.writeText(location.href).then(function () {
            showStatus("é“¾æ¥å·²å¤åˆ¶", "success");
          });
        } catch (e) {
          showStatus("åˆ†äº«å¤±è´¥", "error");
        }
      });

      topicEl.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          generateCaptions();
        }
      });

      (function () {
        const hash = location.hash.slice(1);
        if (hash) {
          try {
            topicEl.value = decodeURIComponent(atob(hash));
          } catch (e) {}
        } else {
          loadFromStorage();
        }
      })();

      window.toggleTheme = function () {
        const html = document.documentElement;
        const btn = document.querySelector(".theme-toggle");
        const next = html.getAttribute("data-theme") === "light" ? "dark" : "light";
        html.setAttribute("data-theme", next);
        btn.textContent = next === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", next);
      };

      (function () {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.setAttribute("data-theme", saved);
          const btn = document.querySelector(".theme-toggle");
          if (btn) btn.textContent = saved === "light" ? "â˜€ï¸" : "ğŸŒ™";
        }
      })();
    </script>
  </body>
</html>
