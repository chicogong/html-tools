<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æˆªå›¾ç¾åŒ–å·¥å…· - WebUtils</title>
  <meta name="description" content="ç»™æˆªå›¾æ·»åŠ ç²¾ç¾èƒŒæ™¯ã€é˜´å½±å’Œåœ†è§’ï¼Œä¸€é”®ç”Ÿæˆç¤¾äº¤åª’ä½“åˆ†äº«å›¾ç‰‡" />
  <meta name="keywords" content="æˆªå›¾ç¾åŒ–,screenshot beautifier,å›¾ç‰‡èƒŒæ™¯,é˜´å½±æ•ˆæœ,åœ†è§’,carbon" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --bg-card: #1a1a24;
      --bg-card-hover: #22222e;
      --bg-input: #0e0e14;
      --text-primary: #e8e8ed;
      --text-secondary: #8888a0;
      --text-muted: #55556a;
      --border-subtle: #2a2a3a;
      --border-strong: #3a3a4a;
      --accent-cyan: #00f5d4;
      --accent-green: #10b981;
      --accent-red: #f43f5e;
      --accent-yellow: #fbbf24;
      --accent-blue: #4cc9f0;
      --glow-cyan: rgb(0, 245, 212, 0.15);
      --glow-green: rgb(16, 185, 129, 0.15);
      --glow-red: rgb(244, 63, 94, 0.15);
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --transition-fast: 0.15s ease;
      --transition-normal: 0.2s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      background: var(--bg-deep);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }

    .bg-grid {
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
      min-height: 100vh;
    }

    .header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 8px 14px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      transition: all var(--transition-normal);
    }

    .back-link:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }

    .title-section h1 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .title-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .title-section .desc {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-top: 4px;
    }

    .main-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 24px;
    }

    @media (max-width: 900px) {
      .main-layout {
        grid-template-columns: 1fr;
      }
    }

    /* æ§åˆ¶é¢æ¿ */
    .control-panel {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: 20px;
      height: fit-content;
      position: sticky;
      top: 24px;
    }

    .control-section {
      margin-bottom: 20px;
    }

    .control-section:last-child {
      margin-bottom: 0;
    }

    .control-section h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .control-row {
      margin-bottom: 12px;
    }

    .control-row label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--text-muted);
      display: block;
      margin-bottom: 6px;
    }

    input[type="range"] {
      width: 100%;
      height: 6px;
      background: var(--bg-input);
      border-radius: 3px;
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      background: var(--accent-cyan);
      border-radius: 50%;
      cursor: pointer;
    }

    input[type="color"] {
      width: 100%;
      height: 36px;
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      background: var(--bg-input);
      cursor: pointer;
    }

    select {
      width: 100%;
      padding: 10px 12px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      background: var(--bg-input);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      cursor: pointer;
      outline: none;
    }

    select:focus {
      border-color: var(--accent-cyan);
    }

    .gradient-presets {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }

    .gradient-btn {
      width: 100%;
      aspect-ratio: 1;
      border: 2px solid transparent;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .gradient-btn:hover {
      transform: scale(1.1);
    }

    .gradient-btn.active {
      border-color: var(--accent-cyan);
    }

    /* é¢„è§ˆåŒºåŸŸ */
    .preview-panel {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: 24px;
      display: flex;
      flex-direction: column;
    }

    .preview-toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    button {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      font-weight: 500;
      padding: 10px 16px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all var(--transition-normal);
      white-space: nowrap;
    }

    button:hover {
      background: var(--bg-card-hover);
      color: var(--text-primary);
      border-color: var(--accent-cyan);
    }

    button.primary {
      background: var(--accent-cyan);
      border-color: var(--accent-cyan);
      color: var(--bg-deep);
    }

    button.primary:hover {
      background: #00dfc4;
      box-shadow: 0 0 20px var(--glow-cyan);
    }

    .preview-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 400px;
      border: 2px dashed var(--border-subtle);
      border-radius: var(--radius-md);
      position: relative;
      overflow: hidden;
    }

    .preview-container.has-image {
      border-style: solid;
    }

    .drop-hint {
      text-align: center;
      color: var(--text-muted);
    }

    .drop-hint-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .drop-hint-text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
    }

    .drop-hint-sub {
      font-size: 0.8rem;
      margin-top: 8px;
    }

    #canvas-container {
      display: none;
      padding: 40px;
    }

    #preview-canvas {
      max-width: 100%;
      max-height: 600px;
      border-radius: var(--radius-md);
    }

    .preview-container.dragover {
      border-color: var(--accent-cyan);
      background: var(--glow-cyan);
    }

    /* éšè—çš„æ–‡ä»¶è¾“å…¥ */
    #file-input {
      display: none;
    }

    .message {
      padding: 12px 16px;
      border-radius: var(--radius-sm);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      margin-top: 12px;
      display: none;
    }

    .message.success {
      display: block;
      background: var(--glow-green);
      border: 1px solid var(--accent-green);
      color: var(--accent-green);
    }

    .value-display {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--accent-cyan);
      float: right;
    }
  </style>
</head>

<body>
  <div class="bg-grid"></div>

  <div class="container">
    <div class="header">
      <a href="../../index.html" class="back-link">â† è¿”å›</a>
      <div class="title-section">
        <h1>
          <span class="title-icon">ğŸ–¼ï¸</span>
          æˆªå›¾ç¾åŒ–å·¥å…·
        </h1>
        <p class="desc">ç»™æˆªå›¾æ·»åŠ ç²¾ç¾èƒŒæ™¯ã€é˜´å½±å’Œåœ†è§’ï¼Œä¸€é”®ç”Ÿæˆåˆ†äº«å›¾ç‰‡</p>
      </div>
    </div>

    <div class="main-layout">
      <!-- æ§åˆ¶é¢æ¿ -->
      <div class="control-panel">
        <div class="control-section">
          <h3>èƒŒæ™¯</h3>
          <div class="control-row">
            <label>æ¸å˜é¢„è®¾</label>
            <div class="gradient-presets">
              <button class="gradient-btn active" data-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)"></button>
              <button class="gradient-btn" data-gradient="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"></button>
              <button class="gradient-btn" data-gradient="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"></button>
              <button class="gradient-btn" data-gradient="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"></button>
              <button class="gradient-btn" data-gradient="linear-gradient(135deg, #fa709a 0%, #fee140 100%)" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%)"></button>
              <button class="gradient-btn" data-gradient="linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"></button>
              <button class="gradient-btn" data-gradient="linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)"></button>
              <button class="gradient-btn" data-gradient="linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%)" style="background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%)"></button>
            </div>
          </div>
          <div class="control-row">
            <label>è‡ªå®šä¹‰é¢œè‰²</label>
            <input type="color" id="bg-color" value="#667eea">
          </div>
        </div>

        <div class="control-section">
          <h3>å†…è¾¹è·</h3>
          <div class="control-row">
            <label>è¾¹è·å¤§å° <span class="value-display" id="padding-value">64px</span></label>
            <input type="range" id="padding" min="16" max="128" value="64">
          </div>
        </div>

        <div class="control-section">
          <h3>åœ†è§’</h3>
          <div class="control-row">
            <label>åœ†è§’å¤§å° <span class="value-display" id="radius-value">12px</span></label>
            <input type="range" id="border-radius" min="0" max="32" value="12">
          </div>
        </div>

        <div class="control-section">
          <h3>é˜´å½±</h3>
          <div class="control-row">
            <label>é˜´å½±å¼ºåº¦ <span class="value-display" id="shadow-value">30%</span></label>
            <input type="range" id="shadow" min="0" max="100" value="30">
          </div>
        </div>

        <div class="control-section">
          <h3>ç¼©æ”¾</h3>
          <div class="control-row">
            <label>å›¾ç‰‡ç¼©æ”¾ <span class="value-display" id="scale-value">100%</span></label>
            <input type="range" id="scale" min="50" max="150" value="100">
          </div>
        </div>

        <div class="control-section">
          <h3>è¾“å‡º</h3>
          <div class="control-row">
            <label>è¾“å‡ºæ ¼å¼</label>
            <select id="output-format">
              <option value="png">PNG (é€æ˜èƒŒæ™¯æ”¯æŒ)</option>
              <option value="jpeg">JPEG (æ›´å°æ–‡ä»¶)</option>
              <option value="webp">WebP (ç°ä»£æ ¼å¼)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- é¢„è§ˆåŒºåŸŸ -->
      <div class="preview-panel">
        <div class="preview-toolbar">
          <button id="upload-btn">ğŸ“ ä¸Šä¼ å›¾ç‰‡</button>
          <button id="paste-btn">ğŸ“‹ ç²˜è´´å›¾ç‰‡</button>
          <button id="download-btn" class="primary" disabled>ğŸ’¾ ä¸‹è½½å›¾ç‰‡</button>
          <button id="copy-btn" disabled>ğŸ“„ å¤åˆ¶åˆ°å‰ªè´´æ¿</button>
        </div>

        <div class="preview-container" id="preview-container">
          <div class="drop-hint" id="drop-hint">
            <div class="drop-hint-icon">ğŸ“·</div>
            <div class="drop-hint-text">æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œï¼Œæˆ–ç‚¹å‡»ä¸Šä¼ </div>
            <div class="drop-hint-sub">æ”¯æŒ PNGã€JPGã€WebP æ ¼å¼ | ä¹Ÿå¯ä»¥ç›´æ¥ç²˜è´´æˆªå›¾</div>
          </div>
          <div id="canvas-container">
            <canvas id="preview-canvas"></canvas>
          </div>
        </div>

        <div id="message" class="message"></div>
      </div>
    </div>

    <input type="file" id="file-input" accept="image/*">
  </div>

  <script>
    // çŠ¶æ€
    const state = {
      image: null,
      gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
      bgColor: '#667eea',
      padding: 64,
      borderRadius: 12,
      shadow: 30,
      scale: 100,
      format: 'png'
    };

    // DOM å…ƒç´ 
    const fileInput = document.getElementById('file-input');
    const previewContainer = document.getElementById('preview-container');
    const canvasContainer = document.getElementById('canvas-container');
    const dropHint = document.getElementById('drop-hint');
    const canvas = document.getElementById('preview-canvas');
    const ctx = canvas.getContext('2d');
    const messageEl = document.getElementById('message');

    // æ§åˆ¶å…ƒç´ 
    const paddingInput = document.getElementById('padding');
    const radiusInput = document.getElementById('border-radius');
    const shadowInput = document.getElementById('shadow');
    const scaleInput = document.getElementById('scale');
    const bgColorInput = document.getElementById('bg-color');
    const formatSelect = document.getElementById('output-format');
    const gradientBtns = document.querySelectorAll('.gradient-btn');

    // æŒ‰é’®
    const uploadBtn = document.getElementById('upload-btn');
    const pasteBtn = document.getElementById('paste-btn');
    const downloadBtn = document.getElementById('download-btn');
    const copyBtn = document.getElementById('copy-btn');

    // å€¼æ˜¾ç¤º
    const paddingValue = document.getElementById('padding-value');
    const radiusValue = document.getElementById('radius-value');
    const shadowValue = document.getElementById('shadow-value');
    const scaleValue = document.getElementById('scale-value');

    // æ¸²æŸ“ç”»å¸ƒ
    function render() {
      if (!state.image) return;

      const img = state.image;
      const scale = state.scale / 100;
      const imgWidth = img.width * scale;
      const imgHeight = img.height * scale;
      const padding = state.padding;
      const radius = state.borderRadius;
      const shadowBlur = state.shadow;

      // è®¾ç½®ç”»å¸ƒå¤§å°
      canvas.width = imgWidth + padding * 2;
      canvas.height = imgHeight + padding * 2;

      // ç»˜åˆ¶èƒŒæ™¯
      if (state.gradient.startsWith('linear-gradient')) {
        // è§£ææ¸å˜
        const gradientMatch = state.gradient.match(/linear-gradient\((\d+)deg,\s*([#\w]+)\s*\d*%?,\s*([#\w]+)\s*\d*%?\)/);
        if (gradientMatch) {
          const angle = parseInt(gradientMatch[1]) * Math.PI / 180;
          const color1 = gradientMatch[2].trim();
          const color2 = gradientMatch[3].trim();
          
          const x1 = canvas.width / 2 - Math.cos(angle) * canvas.width;
          const y1 = canvas.height / 2 - Math.sin(angle) * canvas.height;
          const x2 = canvas.width / 2 + Math.cos(angle) * canvas.width;
          const y2 = canvas.height / 2 + Math.sin(angle) * canvas.height;
          
          const gradient = ctx.createLinearGradient(x1, y1, x2, y2);
          gradient.addColorStop(0, color1);
          gradient.addColorStop(1, color2);
          ctx.fillStyle = gradient;
        }
      } else {
        ctx.fillStyle = state.bgColor;
      }
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // å…ˆç»˜åˆ¶å¸¦é˜´å½±çš„åœ†è§’çŸ©å½¢ï¼ˆé˜´å½±å¿…é¡»åœ¨ clip ä¹‹å‰ç»˜åˆ¶ï¼‰
      if (shadowBlur > 0) {
        ctx.save();
        ctx.shadowColor = 'rgba(0, 0, 0, 0.4)';
        ctx.shadowBlur = shadowBlur;
        ctx.shadowOffsetX = 0;
        ctx.shadowOffsetY = shadowBlur / 3;
        ctx.fillStyle = '#fff';
        ctx.beginPath();
        roundRect(ctx, padding, padding, imgWidth, imgHeight, radius);
        ctx.closePath();
        ctx.fill();
        ctx.restore();
      }

      // ç»˜åˆ¶åœ†è§’çŸ©å½¢è£å‰ªåŒºåŸŸ
      ctx.save();
      ctx.beginPath();
      roundRect(ctx, padding, padding, imgWidth, imgHeight, radius);
      ctx.closePath();
      ctx.clip();

      // ç»˜åˆ¶å›¾ç‰‡
      ctx.drawImage(img, padding, padding, imgWidth, imgHeight);
      ctx.restore();
    }

    // ç»˜åˆ¶åœ†è§’çŸ©å½¢
    function roundRect(ctx, x, y, width, height, radius) {
      ctx.moveTo(x + radius, y);
      ctx.lineTo(x + width - radius, y);
      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
      ctx.lineTo(x + width, y + height - radius);
      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
      ctx.lineTo(x + radius, y + height);
      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
      ctx.lineTo(x, y + radius);
      ctx.quadraticCurveTo(x, y, x + radius, y);
    }

    // åŠ è½½å›¾ç‰‡
    function loadImage(file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        const img = new Image();
        img.onload = () => {
          state.image = img;
          dropHint.style.display = 'none';
          canvasContainer.style.display = 'block';
          previewContainer.classList.add('has-image');
          downloadBtn.disabled = false;
          copyBtn.disabled = false;
          render();
          showMessage('å›¾ç‰‡åŠ è½½æˆåŠŸ', 'success');
        };
        img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }

    // ä»å‰ªè´´æ¿åŠ è½½å›¾ç‰‡
    async function loadFromClipboard() {
      try {
        const items = await navigator.clipboard.read();
        for (const item of items) {
          for (const type of item.types) {
            if (type.startsWith('image/')) {
              const blob = await item.getType(type);
              loadImage(blob);
              return;
            }
          }
        }
        showMessage('å‰ªè´´æ¿ä¸­æ²¡æœ‰å›¾ç‰‡', 'error');
      } catch (err) {
        showMessage('æ— æ³•è¯»å–å‰ªè´´æ¿: ' + err.message, 'error');
      }
    }

    // ä¸‹è½½å›¾ç‰‡
    function downloadImage() {
      if (!state.image) return;
      
      const format = state.format;
      const mimeType = format === 'jpeg' ? 'image/jpeg' : format === 'webp' ? 'image/webp' : 'image/png';
      const quality = format === 'jpeg' ? 0.92 : 1;
      
      canvas.toBlob((blob) => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `screenshot-beautified.${format}`;
        a.click();
        URL.revokeObjectURL(url);
        showMessage('å›¾ç‰‡å·²ä¸‹è½½', 'success');
      }, mimeType, quality);
    }

    // å¤åˆ¶åˆ°å‰ªè´´æ¿
    async function copyToClipboard() {
      if (!state.image) return;
      
      try {
        canvas.toBlob(async (blob) => {
          await navigator.clipboard.write([
            new ClipboardItem({ 'image/png': blob })
          ]);
          showMessage('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
        }, 'image/png');
      } catch (err) {
        showMessage('å¤åˆ¶å¤±è´¥: ' + err.message, 'error');
      }
    }

    // æ˜¾ç¤ºæ¶ˆæ¯
    function showMessage(text, type) {
      messageEl.textContent = text;
      messageEl.className = 'message ' + type;
      setTimeout(() => {
        messageEl.className = 'message';
      }, 3000);
    }

    // äº‹ä»¶ç›‘å¬
    uploadBtn.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', (e) => {
      if (e.target.files[0]) loadImage(e.target.files[0]);
    });
    pasteBtn.addEventListener('click', loadFromClipboard);
    downloadBtn.addEventListener('click', downloadImage);
    copyBtn.addEventListener('click', copyToClipboard);

    // æ‹–æ‹½ä¸Šä¼ 
    previewContainer.addEventListener('dragover', (e) => {
      e.preventDefault();
      previewContainer.classList.add('dragover');
    });
    previewContainer.addEventListener('dragleave', () => {
      previewContainer.classList.remove('dragover');
    });
    previewContainer.addEventListener('drop', (e) => {
      e.preventDefault();
      previewContainer.classList.remove('dragover');
      if (e.dataTransfer.files[0]) loadImage(e.dataTransfer.files[0]);
    });

    // ç²˜è´´äº‹ä»¶
    document.addEventListener('paste', (e) => {
      const items = e.clipboardData?.items;
      if (!items) return;
      for (const item of items) {
        if (item.type.startsWith('image/')) {
          loadImage(item.getAsFile());
          break;
        }
      }
    });

    // æ§åˆ¶é¢æ¿äº‹ä»¶
    paddingInput.addEventListener('input', (e) => {
      state.padding = parseInt(e.target.value);
      paddingValue.textContent = state.padding + 'px';
      render();
    });

    radiusInput.addEventListener('input', (e) => {
      state.borderRadius = parseInt(e.target.value);
      radiusValue.textContent = state.borderRadius + 'px';
      render();
    });

    shadowInput.addEventListener('input', (e) => {
      state.shadow = parseInt(e.target.value);
      shadowValue.textContent = state.shadow + '%';
      render();
    });

    scaleInput.addEventListener('input', (e) => {
      state.scale = parseInt(e.target.value);
      scaleValue.textContent = state.scale + '%';
      render();
    });

    bgColorInput.addEventListener('input', (e) => {
      state.bgColor = e.target.value;
      state.gradient = '';
      gradientBtns.forEach(btn => btn.classList.remove('active'));
      render();
    });

    formatSelect.addEventListener('change', (e) => {
      state.format = e.target.value;
    });

    // æ¸å˜é¢„è®¾
    gradientBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        gradientBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        state.gradient = btn.dataset.gradient;
        render();
      });
    });
  </script>
</body>
</html>
