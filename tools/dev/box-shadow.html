<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Box Shadow ç”Ÿæˆå™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="å¯è§†åŒ–åˆ›å»º CSS box-shadowï¼Œæ”¯æŒå¤šå±‚é˜´å½±å’Œé¢„è®¾æ ·å¼" />
    <meta name="keywords" content="box-shadow é˜´å½± css ç”Ÿæˆå™¨ é¢„è®¾ å¤šå±‚" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/dev/box-shadow.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="Box Shadow ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:description" content="å¯è§†åŒ–åˆ›å»º CSS box-shadowï¼Œæ”¯æŒå¤šå±‚é˜´å½±å’Œé¢„è®¾æ ·å¼" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tools.realtime-ai.chat/tools/dev/box-shadow.html" />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Box Shadow ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:description" content="å¯è§†åŒ–åˆ›å»º CSS box-shadowï¼Œæ”¯æŒå¤šå±‚é˜´å½±å’Œé¢„è®¾æ ·å¼" />
    <!-- OG Image -->
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-card-hover: #22222e;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-magenta: #f72585;
        --accent-yellow: #fee440;
        --accent-blue: #4cc9f0;
        --accent-purple: #7b2cbf;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-magenta: rgb(247, 37, 133, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }
      [data-theme="light"] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Space Grotesk", system-ui, sans-serif;
        background: var(--bg-deep);
        color: var(--text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }

      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgb(0, 245, 212, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgb(0, 245, 212, 0.03) 1px, transparent 1px);
        background-size: 50px 50px;
        pointer-events: none;
        z-index: 0;
      }

      .container {
        position: relative;
        z-index: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: 24px;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.9rem;
        color: var(--text-secondary);
        text-decoration: none;
        margin-bottom: 24px;
        transition: color 0.2s;
      }

      .back-link:hover {
        color: var(--accent-cyan);
      }

      header {
        margin-bottom: 32px;
      }

      h1 {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 8px;
        background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .desc {
        color: var(--text-secondary);
        font-size: 0.95rem;
      }

      .main-layout {
        display: grid;
        grid-template-columns: 1fr 380px;
        gap: 24px;
      }

      @media (width <= 900px) {
        .main-layout {
          grid-template-columns: 1fr;
        }
      }

      .card {
        background: var(--bg-card);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
      }

      .card-title {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Preview Area */
      .preview-section {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .preview-container {
        background: var(--preview-bg, #1a1a2e);
        border-radius: var(--radius-md);
        min-height: 300px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        transition: background 0.3s;
      }

      .preview-box {
        width: var(--box-size, 160px);
        height: var(--box-size, 160px);
        background: var(--box-color, #3a3a5a);
        border-radius: var(--box-radius, 16px);
        transition: all 0.3s ease;
      }

      .preview-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 12px;
      }

      .preview-control {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .preview-control label {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
      }

      .preview-control input[type="color"] {
        width: 100%;
        height: 36px;
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        background: var(--bg-surface);
        cursor: pointer;
        padding: 2px;
      }

      .preview-control input[type="color"]:hover {
        border-color: var(--accent-cyan);
      }

      .preview-control input[type="number"] {
        width: 100%;
        padding: 8px 12px;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.9rem;
        background: var(--bg-surface);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--text-primary);
        outline: none;
      }

      .preview-control input[type="number"]:focus {
        border-color: var(--accent-cyan);
        box-shadow: 0 0 0 3px var(--glow-cyan);
      }

      /* CSS Output */
      .css-output {
        margin-top: 20px;
      }

      .code-block {
        background: var(--bg-surface);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 16px;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
        color: var(--accent-cyan);
        white-space: pre-wrap;
        word-break: break-all;
        max-height: 150px;
        overflow-y: auto;
      }

      .output-actions {
        display: flex;
        gap: 8px;
        margin-top: 12px;
      }

      /* Controls Panel */
      .controls-panel {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      /* Presets */
      .presets-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 8px;
      }

      .preset-btn {
        aspect-ratio: 1;
        background: var(--bg-surface);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        cursor: pointer;
        position: relative;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .preset-btn:hover {
        border-color: var(--accent-cyan);
        transform: translateY(-2px);
      }

      .preset-btn.active {
        border-color: var(--accent-cyan);
        box-shadow: 0 0 12px var(--glow-cyan);
      }

      .preset-preview {
        width: 24px;
        height: 24px;
        background: var(--bg-card);
        border-radius: 4px;
      }

      .preset-btn[title]::after {
        content: attr(title);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: var(--bg-card);
        color: var(--text-primary);
        font-size: 0.7rem;
        padding: 4px 8px;
        border-radius: var(--radius-sm);
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s;
        z-index: 10;
      }

      .preset-btn:hover::after {
        opacity: 1;
      }

      /* Layers Management */
      .layers-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
      }

      .layers-list {
        display: flex;
        flex-direction: column;
        gap: 6px;
        max-height: 150px;
        overflow-y: auto;
      }

      .layer-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        background: var(--bg-surface);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.2s;
      }

      .layer-item:hover {
        border-color: var(--border-strong);
      }

      .layer-item.active {
        border-color: var(--accent-cyan);
        background: rgb(0, 245, 212, 0.05);
      }

      .layer-color {
        width: 16px;
        height: 16px;
        border-radius: 4px;
        flex-shrink: 0;
      }

      .layer-name {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
        color: var(--text-primary);
        flex: 1;
      }

      .layer-toggle {
        width: 20px;
        height: 20px;
        background: transparent;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        font-size: 0.9rem;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layer-toggle:hover {
        color: var(--text-primary);
      }

      .layer-toggle.hidden {
        opacity: 0.4;
      }

      .layer-delete {
        width: 20px;
        height: 20px;
        background: transparent;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        font-size: 1rem;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layer-delete:hover {
        color: var(--accent-magenta);
      }

      /* Sliders */
      .slider-group {
        margin-bottom: 16px;
      }

      .slider-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }

      .slider-label {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
        color: var(--text-secondary);
      }

      .slider-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
        color: var(--accent-cyan);
        background: var(--bg-surface);
        padding: 2px 8px;
        border-radius: var(--radius-sm);
      }

      .slider-input {
        width: 100%;
        height: 6px;
        appearance: none;
        background: var(--border-subtle);
        border-radius: 3px;
        outline: none;
      }

      .slider-input::-webkit-slider-thumb {
        appearance: none;
        width: 16px;
        height: 16px;
        background: var(--accent-cyan);
        border-radius: 50%;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .slider-input::-webkit-slider-thumb:hover {
        transform: scale(1.2);
      }

      .slider-input::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: var(--accent-cyan);
        border-radius: 50%;
        cursor: pointer;
        border: none;
      }

      /* Color and Inset Row */
      .color-inset-row {
        display: flex;
        gap: 12px;
        align-items: flex-end;
        margin-bottom: 16px;
      }

      .color-picker-group {
        flex: 1;
      }

      .color-picker-group label {
        display: block;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
        color: var(--text-secondary);
        margin-bottom: 8px;
      }

      .color-picker-group input[type="color"] {
        width: 100%;
        height: 36px;
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        background: var(--bg-surface);
        cursor: pointer;
        padding: 2px;
      }

      .color-picker-group input[type="color"]:hover {
        border-color: var(--accent-cyan);
      }

      .inset-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: var(--bg-surface);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.2s;
      }

      .inset-toggle:hover {
        border-color: var(--border-strong);
      }

      .inset-toggle.active {
        border-color: var(--accent-cyan);
        background: rgb(0, 245, 212, 0.1);
      }

      .inset-toggle input {
        display: none;
      }

      .inset-toggle span {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
        color: var(--text-secondary);
      }

      .inset-toggle.active span {
        color: var(--accent-cyan);
      }

      /* Buttons */
      .btn {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
        font-weight: 500;
        padding: 10px 16px;
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        background: var(--bg-surface);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn:hover {
        border-color: var(--accent-cyan);
        color: var(--accent-cyan);
      }

      .btn-primary {
        background: var(--accent-cyan);
        border-color: var(--accent-cyan);
        color: var(--bg-deep);
      }

      .btn-primary:hover {
        background: transparent;
        color: var(--accent-cyan);
      }

      .btn-small {
        padding: 6px 12px;
        font-size: 0.75rem;
      }

      .btn-icon {
        width: 32px;
        height: 32px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
      }

      /* Status Message */
      .status {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
        padding: 8px 12px;
        border-radius: var(--radius-sm);
        margin-top: 12px;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .status.show {
        opacity: 1;
      }

      .status.success {
        background: rgb(0, 245, 212, 0.1);
        color: var(--accent-cyan);
      }

      .status.error {
        background: rgb(247, 37, 133, 0.1);
        color: var(--accent-magenta);
      }

      /* Footer */
      footer {
        text-align: center;
        margin-top: 48px;
        padding: 24px 0;
        border-top: 1px solid var(--border-subtle);
      }

      footer p {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      footer a {
        color: var(--accent-cyan);
        text-decoration: none;
      }

      footer a:hover {
        text-decoration: underline;
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }

      ::-webkit-scrollbar-track {
        background: var(--bg-surface);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--border-strong);
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--text-muted);
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      Box Shadow ç”Ÿæˆå™¨
    </nav>
    <div class="bg-grid"></div>

    <div class="container">
      <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>

      <header>
        <h1>Box Shadow ç”Ÿæˆå™¨</h1>
        <p class="desc">å¯è§†åŒ–åˆ›å»º CSS box-shadowï¼Œæ”¯æŒå¤šå±‚é˜´å½±å’Œé¢„è®¾æ ·å¼</p>
      </header>

      <div class="main-layout">
        <!-- Left: Preview -->
        <div class="preview-section">
          <div class="card">
            <div class="card-title">
              <span>é¢„è§ˆ</span>
            </div>
            <div class="preview-container" id="previewContainer">
              <div class="preview-box" id="previewBox"></div>
            </div>
            <div class="preview-controls">
              <div class="preview-control">
                <label>èƒŒæ™¯è‰²</label>
                <input type="color" id="bgColor" value="#1a1a2e" />
              </div>
              <div class="preview-control">
                <label>æ–¹å—è‰²</label>
                <input type="color" id="boxColor" value="#3a3a5a" />
              </div>
              <div class="preview-control">
                <label>å°ºå¯¸ (px)</label>
                <input type="number" id="boxSize" value="160" min="40" max="300" />
              </div>
              <div class="preview-control">
                <label>åœ†è§’ (px)</label>
                <input type="number" id="boxRadius" value="16" min="0" max="150" />
              </div>
            </div>
          </div>

          <!-- CSS Output -->
          <div class="card css-output">
            <div class="card-title">
              <span>CSS ä»£ç </span>
            </div>
            <div class="code-block" id="codeOutput">
              box-shadow: 0px 4px 12px 0px rgba(0, 0, 0, 0.25);
            </div>
            <div class="output-actions">
              <button class="btn btn-primary" id="copyBtn">å¤åˆ¶ä»£ç </button>
              <button class="btn" id="shareBtn">åˆ†äº«é“¾æ¥</button>
              <button class="btn" id="resetBtn">é‡ç½®</button>
            </div>
            <div class="status" id="status"></div>
          </div>
        </div>

        <!-- Right: Controls -->
        <div class="controls-panel">
          <!-- Presets -->
          <div class="card">
            <div class="card-title">
              <span>é¢„è®¾æ ·å¼</span>
            </div>
            <div class="presets-grid" id="presetsGrid"></div>
          </div>

          <!-- Layers -->
          <div class="card">
            <div class="layers-header">
              <div class="card-title" style="margin-bottom: 0">
                <span>é˜´å½±å±‚</span>
              </div>
              <button class="btn btn-small btn-icon" id="addLayerBtn" title="æ·»åŠ å±‚">+</button>
            </div>
            <div class="layers-list" id="layersList"></div>
          </div>

          <!-- Shadow Controls -->
          <div class="card">
            <div class="card-title">
              <span>é˜´å½±å‚æ•°</span>
            </div>

            <div class="slider-group">
              <div class="slider-header">
                <span class="slider-label">X åç§»</span>
                <span class="slider-value" id="offsetXValue">0px</span>
              </div>
              <input
                type="range"
                class="slider-input"
                id="offsetX"
                min="-100"
                max="100"
                value="0"
              />
            </div>

            <div class="slider-group">
              <div class="slider-header">
                <span class="slider-label">Y åç§»</span>
                <span class="slider-value" id="offsetYValue">4px</span>
              </div>
              <input
                type="range"
                class="slider-input"
                id="offsetY"
                min="-100"
                max="100"
                value="4"
              />
            </div>

            <div class="slider-group">
              <div class="slider-header">
                <span class="slider-label">æ¨¡ç³ŠåŠå¾„</span>
                <span class="slider-value" id="blurValue">12px</span>
              </div>
              <input type="range" class="slider-input" id="blur" min="0" max="100" value="12" />
            </div>

            <div class="slider-group">
              <div class="slider-header">
                <span class="slider-label">æ‰©å±•åŠå¾„</span>
                <span class="slider-value" id="spreadValue">0px</span>
              </div>
              <input type="range" class="slider-input" id="spread" min="-50" max="50" value="0" />
            </div>

            <div class="slider-group">
              <div class="slider-header">
                <span class="slider-label">é€æ˜åº¦</span>
                <span class="slider-value" id="opacityValue">25%</span>
              </div>
              <input type="range" class="slider-input" id="opacity" min="0" max="100" value="25" />
            </div>

            <div class="color-inset-row">
              <div class="color-picker-group">
                <label>é˜´å½±é¢œè‰²</label>
                <input type="color" id="shadowColor" value="#000000" />
              </div>
              <label class="inset-toggle" id="insetToggle">
                <input type="checkbox" id="inset" />
                <span>Inset</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <p>
          <a href="https://github.com/chicogong/html-tools" target="_blank" rel="noreferrer">
            GitHub
          </a>
          Â· çº¯å‰ç«¯å·¥å…· Â· æ— æœåŠ¡å™¨ Â·
          <a href="../../index.html">WebUtils</a>
        </p>
      </footer>
    </div>

    <script>
      // Constants
      const LS_KEY = "box_shadow_state_v1";

      // Preset styles
      const PRESETS = [
        {
          name: "æŸ”å’Œ",
          layers: [
            {
              offsetX: 0,
              offsetY: 2,
              blur: 8,
              spread: 0,
              color: "#000000",
              opacity: 15,
              inset: false
            }
          ]
        },
        {
          name: "æ‚¬æµ®",
          layers: [
            {
              offsetX: 0,
              offsetY: 8,
              blur: 24,
              spread: -4,
              color: "#000000",
              opacity: 30,
              inset: false
            }
          ]
        },
        {
          name: "æ·±å±‚",
          layers: [
            {
              offsetX: 0,
              offsetY: 4,
              blur: 6,
              spread: -1,
              color: "#000000",
              opacity: 10,
              inset: false
            },
            {
              offsetX: 0,
              offsetY: 10,
              blur: 15,
              spread: -3,
              color: "#000000",
              opacity: 10,
              inset: false
            },
            {
              offsetX: 0,
              offsetY: 20,
              blur: 25,
              spread: -5,
              color: "#000000",
              opacity: 10,
              inset: false
            }
          ]
        },
        {
          name: "é”åˆ©",
          layers: [
            {
              offsetX: 4,
              offsetY: 4,
              blur: 0,
              spread: 0,
              color: "#000000",
              opacity: 100,
              inset: false
            }
          ]
        },
        {
          name: "æ–°æ‹Ÿæ€å‡¸",
          layers: [
            {
              offsetX: 6,
              offsetY: 6,
              blur: 12,
              spread: 0,
              color: "#000000",
              opacity: 30,
              inset: false
            },
            {
              offsetX: -6,
              offsetY: -6,
              blur: 12,
              spread: 0,
              color: "#ffffff",
              opacity: 8,
              inset: false
            }
          ]
        },
        {
          name: "æ–°æ‹Ÿæ€å‡¹",
          layers: [
            {
              offsetX: 4,
              offsetY: 4,
              blur: 8,
              spread: 0,
              color: "#000000",
              opacity: 25,
              inset: true
            },
            {
              offsetX: -4,
              offsetY: -4,
              blur: 8,
              spread: 0,
              color: "#ffffff",
              opacity: 5,
              inset: true
            }
          ]
        },
        {
          name: "é’è‰²å‘å…‰",
          layers: [
            {
              offsetX: 0,
              offsetY: 0,
              blur: 20,
              spread: 2,
              color: "#00f5d4",
              opacity: 50,
              inset: false
            }
          ]
        },
        {
          name: "å“çº¢å‘å…‰",
          layers: [
            {
              offsetX: 0,
              offsetY: 0,
              blur: 20,
              spread: 2,
              color: "#f72585",
              opacity: 50,
              inset: false
            }
          ]
        },
        {
          name: "å¤šå±‚æŸ”å’Œ",
          layers: [
            {
              offsetX: 0,
              offsetY: 1,
              blur: 2,
              spread: 0,
              color: "#000000",
              opacity: 5,
              inset: false
            },
            {
              offsetX: 0,
              offsetY: 2,
              blur: 4,
              spread: 0,
              color: "#000000",
              opacity: 5,
              inset: false
            },
            {
              offsetX: 0,
              offsetY: 4,
              blur: 8,
              spread: 0,
              color: "#000000",
              opacity: 5,
              inset: false
            },
            {
              offsetX: 0,
              offsetY: 8,
              blur: 16,
              spread: 0,
              color: "#000000",
              opacity: 5,
              inset: false
            }
          ]
        },
        {
          name: "è¾¹æ¡†å‘å…‰",
          layers: [
            {
              offsetX: 0,
              offsetY: 0,
              blur: 0,
              spread: 1,
              color: "#00f5d4",
              opacity: 80,
              inset: false
            },
            {
              offsetX: 0,
              offsetY: 0,
              blur: 10,
              spread: 0,
              color: "#00f5d4",
              opacity: 40,
              inset: false
            }
          ]
        }
      ];

      // State
      let state = {
        layers: [
          {
            offsetX: 0,
            offsetY: 4,
            blur: 12,
            spread: 0,
            color: "#000000",
            opacity: 25,
            inset: false,
            visible: true
          }
        ],
        currentLayer: 0,
        preview: { bgColor: "#1a1a2e", boxColor: "#3a3a5a", boxSize: 160, boxRadius: 16 }
      };

      // DOM Elements
      const previewContainer = document.getElementById("previewContainer");
      const previewBox = document.getElementById("previewBox");
      const codeOutput = document.getElementById("codeOutput");
      const statusEl = document.getElementById("status");
      const presetsGrid = document.getElementById("presetsGrid");
      const layersList = document.getElementById("layersList");

      // Sliders
      const sliders = {
        offsetX: document.getElementById("offsetX"),
        offsetY: document.getElementById("offsetY"),
        blur: document.getElementById("blur"),
        spread: document.getElementById("spread"),
        opacity: document.getElementById("opacity")
      };

      const sliderValues = {
        offsetX: document.getElementById("offsetXValue"),
        offsetY: document.getElementById("offsetYValue"),
        blur: document.getElementById("blurValue"),
        spread: document.getElementById("spreadValue"),
        opacity: document.getElementById("opacityValue")
      };

      // Preview controls
      const bgColorInput = document.getElementById("bgColor");
      const boxColorInput = document.getElementById("boxColor");
      const boxSizeInput = document.getElementById("boxSize");
      const boxRadiusInput = document.getElementById("boxRadius");
      const shadowColorInput = document.getElementById("shadowColor");
      const insetCheckbox = document.getElementById("inset");
      const insetToggle = document.getElementById("insetToggle");

      // Buttons
      const copyBtn = document.getElementById("copyBtn");
      const shareBtn = document.getElementById("shareBtn");
      const resetBtn = document.getElementById("resetBtn");
      const addLayerBtn = document.getElementById("addLayerBtn");

      // Helper: convert hex to rgba
      function hexToRgba(hex, opacity) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return "rgba(" + r + ", " + g + ", " + b + ", " + (opacity / 100).toFixed(2) + ")";
      }

      // Generate box-shadow CSS
      function generateShadowCSS() {
        const visibleLayers = state.layers.filter(function (l) {
          return l.visible !== false;
        });
        if (visibleLayers.length === 0) return "none";

        return visibleLayers
          .map(function (layer) {
            const inset = layer.inset ? "inset " : "";
            const color = hexToRgba(layer.color, layer.opacity);
            return (
              inset +
              layer.offsetX +
              "px " +
              layer.offsetY +
              "px " +
              layer.blur +
              "px " +
              layer.spread +
              "px " +
              color
            );
          })
          .join(",\n             ");
      }

      // Update preview
      window.updatePreview = function () {
        const shadow = generateShadowCSS();
        previewBox.style.boxShadow = shadow;
        previewContainer.style.background = state.preview.bgColor;
        previewBox.style.background = state.preview.boxColor;
        previewBox.style.setProperty("--box-size", state.preview.boxSize + "px");
        previewBox.style.width = state.preview.boxSize + "px";
        previewBox.style.height = state.preview.boxSize + "px";
        previewBox.style.borderRadius = state.preview.boxRadius + "px";

        // Update code output
        const cssValue = generateShadowCSS();
        codeOutput.textContent = "box-shadow: " + cssValue + ";";

        // Save state
        saveState();
      };

      // Update slider values display
      function updateSliderDisplay() {
        const layer = state.layers[state.currentLayer];
        if (!layer) return;

        sliders.offsetX.value = layer.offsetX;
        sliders.offsetY.value = layer.offsetY;
        sliders.blur.value = layer.blur;
        sliders.spread.value = layer.spread;
        sliders.opacity.value = layer.opacity;
        shadowColorInput.value = layer.color;
        insetCheckbox.checked = layer.inset;
        insetToggle.classList.toggle("active", layer.inset);

        sliderValues.offsetX.textContent = layer.offsetX + "px";
        sliderValues.offsetY.textContent = layer.offsetY + "px";
        sliderValues.blur.textContent = layer.blur + "px";
        sliderValues.spread.textContent = layer.spread + "px";
        sliderValues.opacity.textContent = layer.opacity + "%";
      }

      // Create layer item element
      function createLayerItem(layer, index) {
        const item = document.createElement("div");
        item.className = "layer-item" + (index === state.currentLayer ? " active" : "");

        const colorDiv = document.createElement("div");
        colorDiv.className = "layer-color";
        colorDiv.style.background = hexToRgba(layer.color, layer.opacity);

        const nameSpan = document.createElement("span");
        nameSpan.className = "layer-name";
        nameSpan.textContent = (layer.inset ? "Inset " : "") + "å±‚ " + (index + 1);

        const toggleBtn = document.createElement("button");
        toggleBtn.className = "layer-toggle" + (layer.visible === false ? " hidden" : "");
        toggleBtn.setAttribute("data-index", index);
        toggleBtn.title = "åˆ‡æ¢å¯è§æ€§";
        toggleBtn.textContent = layer.visible === false ? "â—¯" : "â—‰";
        toggleBtn.addEventListener("click", function (e) {
          e.stopPropagation();
          state.layers[index].visible = state.layers[index].visible === false;
          renderLayers();
          updatePreview();
        });

        const deleteBtn = document.createElement("button");
        deleteBtn.className = "layer-delete";
        deleteBtn.setAttribute("data-index", index);
        deleteBtn.title = "åˆ é™¤å±‚";
        deleteBtn.textContent = "Ã—";
        deleteBtn.addEventListener("click", function (e) {
          e.stopPropagation();
          if (state.layers.length > 1) {
            state.layers.splice(index, 1);
            if (state.currentLayer >= state.layers.length) {
              state.currentLayer = state.layers.length - 1;
            }
            renderLayers();
            updateSliderDisplay();
            updatePreview();
          }
        });

        item.appendChild(colorDiv);
        item.appendChild(nameSpan);
        item.appendChild(toggleBtn);
        item.appendChild(deleteBtn);

        item.addEventListener("click", function (e) {
          if (
            !e.target.classList.contains("layer-toggle") &&
            !e.target.classList.contains("layer-delete")
          ) {
            state.currentLayer = index;
            renderLayers();
            updateSliderDisplay();
          }
        });

        return item;
      }

      // Render layers list
      function renderLayers() {
        // Clear existing layers
        while (layersList.firstChild) {
          layersList.removeChild(layersList.firstChild);
        }

        state.layers.forEach(function (layer, index) {
          const item = createLayerItem(layer, index);
          layersList.appendChild(item);
        });
      }

      // Create preset button element
      function createPresetBtn(preset, index) {
        const btn = document.createElement("button");
        btn.className = "preset-btn";
        btn.title = preset.name;

        const preview = document.createElement("div");
        preview.className = "preset-preview";

        // Generate shadow for preview
        const shadowCSS = preset.layers
          .map(function (layer) {
            const inset = layer.inset ? "inset " : "";
            const color = hexToRgba(layer.color, layer.opacity);
            return (
              inset +
              layer.offsetX * 0.3 +
              "px " +
              layer.offsetY * 0.3 +
              "px " +
              layer.blur * 0.3 +
              "px " +
              layer.spread * 0.3 +
              "px " +
              color
            );
          })
          .join(", ");
        preview.style.boxShadow = shadowCSS;

        btn.appendChild(preview);
        btn.addEventListener("click", function () {
          applyPreset(index);
        });

        return btn;
      }

      // Render presets
      function renderPresets() {
        // Clear existing presets
        while (presetsGrid.firstChild) {
          presetsGrid.removeChild(presetsGrid.firstChild);
        }

        PRESETS.forEach(function (preset, index) {
          const btn = createPresetBtn(preset, index);
          presetsGrid.appendChild(btn);
        });
      }

      // Apply preset
      window.applyPreset = function (index) {
        const preset = PRESETS[index];
        state.layers = preset.layers.map(function (l) {
          return Object.assign({}, l, { visible: true });
        });
        state.currentLayer = 0;
        renderLayers();
        updateSliderDisplay();
        updatePreview();
        showStatus("å·²åº”ç”¨é¢„è®¾: " + preset.name, "success");
      };

      // Show status message
      function showStatus(msg, type) {
        statusEl.textContent = msg;
        statusEl.className = "status show " + type;
        setTimeout(function () {
          statusEl.classList.remove("show");
        }, 2000);
      }

      // Save state to localStorage
      function saveState() {
        try {
          localStorage.setItem(LS_KEY, JSON.stringify(state));
        } catch (e) {
          // Ignore storage errors
        }
      }

      // Load state from localStorage
      function loadState() {
        try {
          const saved = localStorage.getItem(LS_KEY);
          if (saved) {
            const parsed = JSON.parse(saved);
            state = Object.assign({}, state, parsed);
            return true;
          }
        } catch (e) {
          // Ignore parse errors
        }
        return false;
      }

      // Load from URL hash
      window.loadFromUrl = function () {
        const hash = location.hash.slice(1);
        if (hash) {
          try {
            const decoded = decodeURIComponent(atob(hash));
            const parsed = JSON.parse(decoded);
            state = Object.assign({}, state, parsed);
            return true;
          } catch (e) {
            // Invalid hash, ignore
          }
        }
        return false;
      };

      // Save to URL hash
      function saveToUrl() {
        try {
          const encoded = btoa(encodeURIComponent(JSON.stringify(state)));
          history.replaceState(null, "", "#" + encoded);
        } catch (e) {
          // Ignore errors
        }
      }

      // Copy to clipboard
      window.copyCode = function () {
        const code = codeOutput.textContent;
        navigator.clipboard
          .writeText(code)
          .then(function () {
            showStatus("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿", "success");
          })
          .catch(function () {
            showStatus("å¤åˆ¶å¤±è´¥", "error");
          });
      };

      // Share link
      function shareLink() {
        saveToUrl();
        const url = window.location.href;
        navigator.clipboard
          .writeText(url)
          .then(function () {
            showStatus("é“¾æ¥å·²å¤åˆ¶", "success");
          })
          .catch(function () {
            showStatus("å¤åˆ¶å¤±è´¥", "error");
          });
      }

      // Reset to default
      function resetState() {
        state = {
          layers: [
            {
              offsetX: 0,
              offsetY: 4,
              blur: 12,
              spread: 0,
              color: "#000000",
              opacity: 25,
              inset: false,
              visible: true
            }
          ],
          currentLayer: 0,
          preview: { bgColor: "#1a1a2e", boxColor: "#3a3a5a", boxSize: 160, boxRadius: 16 }
        };
        bgColorInput.value = state.preview.bgColor;
        boxColorInput.value = state.preview.boxColor;
        boxSizeInput.value = state.preview.boxSize;
        boxRadiusInput.value = state.preview.boxRadius;
        renderLayers();
        updateSliderDisplay();
        updatePreview();
        history.replaceState(null, "", location.pathname);
        showStatus("å·²é‡ç½®", "success");
      }

      // Add new layer
      window.addLayer = function () {
        if (state.layers.length >= 10) {
          showStatus("æœ€å¤šæ”¯æŒ 10 å±‚é˜´å½±", "error");
          return;
        }
        state.layers.push({
          offsetX: 0,
          offsetY: 4,
          blur: 12,
          spread: 0,
          color: "#000000",
          opacity: 25,
          inset: false,
          visible: true
        });
        state.currentLayer = state.layers.length - 1;
        renderLayers();
        updateSliderDisplay();
        updatePreview();
      };

      // Event Listeners - Sliders
      Object.keys(sliders).forEach(function (key) {
        sliders[key].addEventListener("input", function () {
          const value = parseInt(sliders[key].value);
          state.layers[state.currentLayer][key] = value;
          sliderValues[key].textContent = value + (key === "opacity" ? "%" : "px");
          renderLayers();
          updatePreview();
        });
      });

      // Shadow color
      shadowColorInput.addEventListener("input", function () {
        state.layers[state.currentLayer].color = shadowColorInput.value;
        renderLayers();
        updatePreview();
      });

      // Inset toggle
      insetToggle.addEventListener("click", function () {
        const newValue = !insetCheckbox.checked;
        insetCheckbox.checked = newValue;
        insetToggle.classList.toggle("active", newValue);
        state.layers[state.currentLayer].inset = newValue;
        renderLayers();
        updatePreview();
      });

      // Preview controls
      bgColorInput.addEventListener("input", function () {
        state.preview.bgColor = bgColorInput.value;
        updatePreview();
      });

      boxColorInput.addEventListener("input", function () {
        state.preview.boxColor = boxColorInput.value;
        updatePreview();
      });

      boxSizeInput.addEventListener("input", function () {
        state.preview.boxSize = parseInt(boxSizeInput.value) || 160;
        updatePreview();
      });

      boxRadiusInput.addEventListener("input", function () {
        state.preview.boxRadius = parseInt(boxRadiusInput.value) || 0;
        updatePreview();
      });

      // Buttons
      copyBtn.addEventListener("click", copyCode);
      shareBtn.addEventListener("click", shareLink);
      resetBtn.addEventListener("click", resetState);
      addLayerBtn.addEventListener("click", addLayer);

      // Initialize
      function init() {
        // Try to load from URL first, then localStorage
        if (!loadFromUrl()) {
          loadState();
        }

        // Update preview controls
        bgColorInput.value = state.preview.bgColor;
        boxColorInput.value = state.preview.boxColor;
        boxSizeInput.value = state.preview.boxSize;
        boxRadiusInput.value = state.preview.boxRadius;

        renderPresets();
        renderLayers();
        updateSliderDisplay();
        updatePreview();
      }

      init();

      window.toggleTheme = function () {
        const html = document.documentElement;
        const btn = document.querySelector(".theme-toggle");
        const next = html.getAttribute("data-theme") === "light" ? "dark" : "light";
        html.setAttribute("data-theme", next);
        btn.textContent = next === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", next);
      };
      (function () {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.setAttribute("data-theme", saved);
          const btn = document.querySelector(".theme-toggle");
          if (btn) btn.textContent = saved === "light" ? "â˜€ï¸" : "ğŸŒ™";
        }
      })();
    </script>
  </body>
</html>
