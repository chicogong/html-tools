<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>çƒ­é—¨è¯é¢˜æ ‡ç­¾ç”Ÿæˆå™¨ - WebUtils</title>
    <meta name="description" content="æ ¹æ®å…³é”®è¯ç”Ÿæˆçƒ­é—¨ç¤¾äº¤åª’ä½“è¯é¢˜æ ‡ç­¾" />
    <meta name="keywords" content="hashtag è¯é¢˜æ ‡ç­¾ æ ‡ç­¾ç”Ÿæˆ ç¤¾äº¤åª’ä½“" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-pink: #f72585;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
          linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
        z-index: 0;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 24px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      .header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
      }
      .breadcrumb a {
        color: var(--color-text-secondary);
        text-decoration: none;
        transition: color 0.2s ease;
      }
      .breadcrumb a:hover {
        color: var(--color-accent-cyan);
      }
      .breadcrumb-separator {
        color: var(--color-text-muted);
      }
      .breadcrumb-current {
        color: var(--color-text-primary);
        font-weight: 500;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }
      .title-section {
        flex: 1;
      }
      .title-section h1 {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .title-icon {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--accent-pink), #ff6b6b);
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: #fff;
      }
      .title-section .desc {
        font-size: 0.9rem;
        color: var(--color-text-secondary);
        margin-top: 4px;
      }
      .main-card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
        flex: 1;
      }
      .input-section {
        margin-bottom: 20px;
      }
      .input-section label {
        display: block;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 8px;
      }
      .input-row {
        display: flex;
        gap: 10px;
      }
      input[type="text"] {
        flex: 1;
        padding: 12px 16px;
        font-family: var(--font-mono);
        font-size: 0.9rem;
        background: var(--bg-input);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--color-text-primary);
        transition: all 0.2s;
      }
      input[type="text"]:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
        box-shadow: 0 0 0 4px var(--glow-cyan);
      }
      input::placeholder {
        color: var(--color-text-muted);
      }
      .toolbar {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }
      button {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        font-weight: 500;
        padding: 10px 16px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }
      button:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      button.primary {
        background: var(--color-accent-cyan);
        border-color: var(--color-accent-cyan);
        color: var(--color-bg-deep);
      }
      button.primary:hover {
        background: #00dfc4;
        box-shadow: 0 0 20px var(--glow-cyan);
      }
      .options {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border-subtle);
      }
      .options label {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.85rem;
        color: var(--color-text-secondary);
        cursor: pointer;
      }
      .options select {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        padding: 6px 10px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-primary);
        cursor: pointer;
      }
      .options select:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
      }
      .output-section {
        margin-top: 20px;
      }
      .output-label {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 10px;
      }
      .hashtags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        padding: 16px;
        background: var(--bg-input);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        min-height: 100px;
      }
      .hashtag {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: 20px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        color: var(--color-accent-cyan);
        cursor: pointer;
        transition: all 0.2s;
      }
      .hashtag:hover {
        border-color: var(--color-accent-cyan);
        background: var(--glow-cyan);
      }
      .hashtag.popular {
        border-color: var(--accent-pink);
        color: var(--accent-pink);
      }
      .hashtag.popular:hover {
        background: rgb(247, 37, 133, 0.15);
      }
      .hashtag-count {
        font-size: 0.7rem;
        color: var(--color-text-muted);
      }
      .copy-all-section {
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid var(--border-subtle);
      }
      .copy-all-section textarea {
        width: 100%;
        min-height: 80px;
        padding: 12px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        background: var(--bg-input);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--color-text-primary);
        resize: vertical;
      }
      .copy-all-section textarea:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
      }
      .status {
        font-family: var(--font-mono);
        font-size: 0.85rem;
        color: var(--color-text-muted);
        margin-top: 16px;
      }
      .status.success {
        color: var(--accent-green);
      }
      .status.error {
        color: var(--accent-red);
      }
      footer {
        text-align: center;
        margin-top: 24px;
        padding-top: 16px;
        border-top: 1px solid var(--border-subtle);
      }
      footer p {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      footer a {
        color: var(--color-accent-cyan);
        text-decoration: none;
      }
      footer a:hover {
        color: var(--color-text-primary);
      }
      @media (max-width: 640px) {
        .container {
          padding: 16px;
        }
        .header {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
        }
        .input-row {
          flex-direction: column;
        }
        .options {
          flex-direction: column;
          gap: 12px;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-grid"></div>

    <div class="container">
      <div class="header">
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <a href="../../index.html">é¦–é¡µ</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">è¯é¢˜æ ‡ç­¾ç”Ÿæˆå™¨</span>
        </nav>
        <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
        <div class="title-section">
          <h1>
            <span class="title-icon">#</span>
            çƒ­é—¨è¯é¢˜æ ‡ç­¾ç”Ÿæˆå™¨
          </h1>
          <p class="desc">æ ¹æ®å…³é”®è¯æ™ºèƒ½ç”Ÿæˆç¤¾äº¤åª’ä½“çƒ­é—¨è¯é¢˜æ ‡ç­¾</p>
        </div>
      </div>

      <div class="main-card">
        <div class="input-section">
          <label>è¾“å…¥å…³é”®è¯ï¼ˆç”¨é€—å·æˆ–ç©ºæ ¼åˆ†éš”ï¼‰</label>
          <div class="input-row">
            <input type="text" id="keywords" placeholder="ä¾‹å¦‚: æ—…è¡Œ, ç¾é£Ÿ, photography" />
            <button class="primary" id="btnGenerate">ç”Ÿæˆæ ‡ç­¾</button>
          </div>
        </div>

        <div class="options">
          <label>
            å¹³å°:
            <select id="platform">
              <option value="instagram">Instagram</option>
              <option value="twitter">Twitter/X</option>
              <option value="tiktok">TikTok</option>
              <option value="weibo">å¾®åš</option>
              <option value="xiaohongshu">å°çº¢ä¹¦</option>
            </select>
          </label>
          <label>
            æ•°é‡:
            <select id="count">
              <option value="10">10 ä¸ª</option>
              <option value="20">20 ä¸ª</option>
              <option value="30" selected>30 ä¸ª</option>
            </select>
          </label>
          <label>
            è¯­è¨€:
            <select id="language">
              <option value="mixed">ä¸­è‹±æ··åˆ</option>
              <option value="chinese">ä»…ä¸­æ–‡</option>
              <option value="english">ä»…è‹±æ–‡</option>
            </select>
          </label>
        </div>

        <div class="toolbar">
          <button id="btnCopy">å¤åˆ¶å…¨éƒ¨</button>
          <button id="btnShare">åˆ†äº«</button>
          <button id="btnClear">æ¸…ç©º</button>
        </div>

        <div class="output-section">
          <div class="output-label">ç”Ÿæˆçš„æ ‡ç­¾ï¼ˆç‚¹å‡»æ ‡ç­¾å¤åˆ¶å•ä¸ªï¼‰</div>
          <div class="hashtags-container" id="hashtagsContainer"></div>
        </div>

        <div class="copy-all-section">
          <div class="output-label">å…¨éƒ¨æ ‡ç­¾æ–‡æœ¬</div>
          <textarea id="allHashtags" readonly placeholder="ç”Ÿæˆçš„æ ‡ç­¾å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
        </div>

        <div id="status" class="status"></div>
      </div>

      <footer>
        <p>
          <a href="https://github.com/nicogong/html-tools" target="_blank" rel="noreferrer">
            GitHub
          </a>
          <span>Â·</span>
          <span>çº¯å‰ç«¯ Â· æ— æœåŠ¡å™¨</span>
          <span>Â·</span>
          <a href="../../index.html">WebUtils</a>
        </p>
      </footer>
    </div>

    <script>
      const keywordsEl = document.getElementById("keywords");
      const platformEl = document.getElementById("platform");
      const countEl = document.getElementById("count");
      const languageEl = document.getElementById("language");
      const hashtagsContainerEl = document.getElementById("hashtagsContainer");
      const allHashtagsEl = document.getElementById("allHashtags");
      const statusEl = document.getElementById("status");

      const LS_KEY = "hashtag_generator_v1";

      const hashtagDatabase = {
        travel: {
          en: [
            "travel",
            "wanderlust",
            "travelgram",
            "instatravel",
            "travelphotography",
            "explore",
            "adventure",
            "vacation",
            "trip",
            "traveling",
            "traveler",
            "traveltheworld",
            "travelblogger",
            "traveladdict",
            "travelholic"
          ],
          zh: [
            "æ—…è¡Œ",
            "æ—…æ¸¸",
            "åº¦å‡",
            "å‡ºè¡Œ",
            "è‡ªç”±è¡Œ",
            "ç©·æ¸¸",
            "èƒŒåŒ…å®¢",
            "æ—…è¡Œæ—¥è®°",
            "æ—…è¡Œåˆ†äº«",
            "ç¯æ¸¸ä¸–ç•Œ",
            "æ‰“å¡",
            "ç½‘çº¢æ™¯ç‚¹",
            "æ—…æ‹",
            "é£æ™¯",
            "ç›®çš„åœ°"
          ]
        },
        food: {
          en: [
            "food",
            "foodie",
            "foodporn",
            "foodphotography",
            "instafood",
            "yummy",
            "delicious",
            "foodstagram",
            "foodlover",
            "cooking",
            "homemade",
            "recipe",
            "foodblogger",
            "eatlocal",
            "foodgasm"
          ],
          zh: [
            "ç¾é£Ÿ",
            "åƒè´§",
            "å¹²é¥­äºº",
            "ç¾é£Ÿåˆ†äº«",
            "ç¾é£Ÿæ¢åº—",
            "ç§æˆ¿èœ",
            "ä¸‹åˆèŒ¶",
            "ç”œå“",
            "çƒ˜ç„™",
            "ç«é”…",
            "çƒ§çƒ¤",
            "ç½‘çº¢åº—",
            "æ‰“å¡ç¾é£Ÿ",
            "å¥½åƒåˆ°å“­",
            "å‡è‚¥ä»€ä¹ˆçš„æ˜å¤©å†è¯´"
          ]
        },
        photography: {
          en: [
            "photography",
            "photo",
            "photooftheday",
            "photographer",
            "instagood",
            "picoftheday",
            "portrait",
            "landscape",
            "nature",
            "art",
            "streetphotography",
            "ig_captures",
            "visualsoflife",
            "shoot",
            "camera"
          ],
          zh: [
            "æ‘„å½±",
            "æ‹ç…§",
            "å†™çœŸ",
            "äººåƒ",
            "é£å…‰æ‘„å½±",
            "è¡—æ‹",
            "ç›¸æœº",
            "é•œå¤´",
            "å…‰å½±",
            "æ„å›¾",
            "åæœŸ",
            "æ‘„å½±å¸ˆ",
            "æ‰‹æœºæ‘„å½±",
            "æ—¥ç³»",
            "èƒ¶ç‰‡"
          ]
        },
        fashion: {
          en: [
            "fashion",
            "style",
            "ootd",
            "fashionblogger",
            "outfit",
            "streetstyle",
            "fashionista",
            "instafashion",
            "lookbook",
            "stylish",
            "whatiwore",
            "fashionstyle",
            "trendy",
            "fashionweek",
            "designer"
          ],
          zh: [
            "ç©¿æ­",
            "æ—¶å°š",
            "æ½®æµ",
            "æ­é…",
            "ä»Šæ—¥ç©¿æ­",
            "è¡—æ‹",
            "ç©¿æ­åˆ†äº«",
            "æ—¶è£…",
            "æ½®ç‰Œ",
            "å¤å¤",
            "æ—¥ç³»ç©¿æ­",
            "éŸ©ç³»",
            "å°ä¼—",
            "ootd",
            "æ˜¾ç˜¦ç©¿æ­"
          ]
        },
        fitness: {
          en: [
            "fitness",
            "gym",
            "workout",
            "fitnessmotivation",
            "fit",
            "training",
            "health",
            "healthy",
            "bodybuilding",
            "fitfam",
            "exercise",
            "muscle",
            "gains",
            "lifestyle",
            "motivation"
          ],
          zh: [
            "å¥èº«",
            "å‡è‚¥",
            "è¿åŠ¨",
            "å¥èº«æ‰“å¡",
            "é©¬ç”²çº¿",
            "è…¹è‚Œ",
            "å¢è‚Œ",
            "å¡‘å½¢",
            "è·‘æ­¥",
            "ç‘œä¼½",
            "æœ‰æ°§",
            "æ’¸é“",
            "å¥èº«æ—¥è®°",
            "è‡ªå¾‹",
            "èœœæ¡ƒè‡€"
          ]
        },
        beauty: {
          en: [
            "beauty",
            "makeup",
            "skincare",
            "beautyblogger",
            "cosmetics",
            "makeupartist",
            "beautytips",
            "glam",
            "lipstick",
            "eyeshadow",
            "makeuptutorial",
            "skincareroutine",
            "glow",
            "naturalmakeup",
            "beautyhacks"
          ],
          zh: [
            "ç¾å¦†",
            "æŠ¤è‚¤",
            "åŒ–å¦†",
            "å¦†å®¹",
            "å£çº¢",
            "çœ¼å½±",
            "ç²‰åº•",
            "ç´ é¢œ",
            "å˜ç¾",
            "ç§è‰",
            "æ‹”è‰",
            "å¥½ç‰©åˆ†äº«",
            "å¹³ä»·æ›¿ä»£",
            "å¦†å®¹æ•™ç¨‹",
            "ç©ºç“¶è®°"
          ]
        },
        tech: {
          en: [
            "tech",
            "technology",
            "gadgets",
            "innovation",
            "coding",
            "developer",
            "programming",
            "software",
            "ai",
            "smartphone",
            "digital",
            "startup",
            "geek",
            "techie",
            "apps"
          ],
          zh: [
            "ç§‘æŠ€",
            "æ•°ç ",
            "æ™ºèƒ½",
            "ç¼–ç¨‹",
            "å¼€å‘è€…",
            "æå®¢",
            "æ‰‹æœº",
            "ç”µè„‘",
            "æ•°ç å¥½ç‰©",
            "ç§‘æŠ€åœˆ",
            "æµ‹è¯„",
            "å¼€ç®±",
            "æ•ˆç‡å·¥å…·",
            "é»‘ç§‘æŠ€",
            "AI"
          ]
        },
        life: {
          en: [
            "life",
            "lifestyle",
            "daily",
            "mood",
            "happy",
            "love",
            "instagood",
            "photooftheday",
            "beautiful",
            "picoftheday",
            "instadaily",
            "me",
            "selfie",
            "friends",
            "smile"
          ],
          zh: [
            "ç”Ÿæ´»",
            "æ—¥å¸¸",
            "è®°å½•ç”Ÿæ´»",
            "ç”Ÿæ´»æ–¹å¼",
            "æ…¢ç”Ÿæ´»",
            "å°ç¡®å¹¸",
            "ä»ªå¼æ„Ÿ",
            "æ²»æ„ˆ",
            "å¿ƒæƒ…",
            "éšæ‰‹æ‹",
            "ç¢ç¢å¿µ",
            "å²æœˆé™å¥½",
            "ç®€å•ç”Ÿæ´»",
            "ç‹¬å±…",
            "å®…å®¶"
          ]
        }
      };

      function detectCategory(keywords) {
        const keywordLower = keywords.toLowerCase();
        const categories = [];

        const categoryMap = {
          travel: ["travel", "trip", "vacation", "æ—…è¡Œ", "æ—…æ¸¸", "åº¦å‡", "å‡ºè¡Œ", "æ™¯ç‚¹"],
          food: ["food", "eat", "cook", "recipe", "ç¾é£Ÿ", "åƒ", "é¤", "çƒ¹é¥ª", "ç”œå“", "ç«é”…"],
          photography: ["photo", "camera", "shoot", "æ‘„å½±", "æ‹ç…§", "é•œå¤´", "ç›¸æœº"],
          fashion: ["fashion", "style", "outfit", "clothes", "ç©¿æ­", "æ—¶å°š", "æ½®æµ", "è¡£æœ"],
          fitness: [
            "fitness",
            "gym",
            "workout",
            "exercise",
            "å¥èº«",
            "è¿åŠ¨",
            "å‡è‚¥",
            "è·‘æ­¥",
            "ç‘œä¼½"
          ],
          beauty: ["beauty", "makeup", "skincare", "cosmetic", "ç¾å¦†", "æŠ¤è‚¤", "åŒ–å¦†", "å£çº¢"],
          tech: [
            "tech",
            "code",
            "programming",
            "app",
            "digital",
            "ç§‘æŠ€",
            "æ•°ç ",
            "ç¼–ç¨‹",
            "æ‰‹æœº",
            "ç”µè„‘"
          ],
          life: ["life", "daily", "lifestyle", "ç”Ÿæ´»", "æ—¥å¸¸", "å¿ƒæƒ…", "è®°å½•"]
        };

        for (const [cat, triggers] of Object.entries(categoryMap)) {
          for (const trigger of triggers) {
            if (keywordLower.includes(trigger)) {
              if (!categories.includes(cat)) {
                categories.push(cat);
              }
            }
          }
        }

        return categories.length > 0 ? categories : ["life"];
      }

      function generateHashtags() {
        const keywords = keywordsEl.value.trim();
        if (!keywords) {
          showStatus("è¯·è¾“å…¥å…³é”®è¯", "error");
          return;
        }

        const platform = platformEl.value;
        const count = parseInt(countEl.value, 10);
        const language = languageEl.value;

        const categories = detectCategory(keywords);
        const generatedTags = new Set();

        // Add keyword-based hashtags
        const keywordList = keywords.split(/[,ï¼Œ\s]+/).filter(Boolean);
        for (const kw of keywordList) {
          const cleanKw = kw.replace(/[#ï¼ƒ]/g, "").trim();
          if (cleanKw) {
            generatedTags.add("#" + cleanKw);
          }
        }

        // Add category-based hashtags
        for (const cat of categories) {
          const catData = hashtagDatabase[cat];
          if (catData) {
            if (language === "english" || language === "mixed") {
              for (const tag of catData.en) {
                generatedTags.add("#" + tag);
              }
            }
            if (language === "chinese" || language === "mixed") {
              for (const tag of catData.zh) {
                generatedTags.add("#" + tag);
              }
            }
          }
        }

        // Platform-specific tags
        const platformTags = {
          instagram: ["#instagram", "#instagood", "#instadaily", "#igdaily"],
          twitter: ["#TwitterTips", "#Tweet"],
          tiktok: ["#fyp", "#foryou", "#foryoupage", "#viral", "#trending", "#tiktok"],
          weibo: ["#å¾®åš", "#çƒ­é—¨"],
          xiaohongshu: ["#å°çº¢ä¹¦", "#ç¬”è®°çµæ„Ÿ", "#æˆ‘çš„æ—¥å¸¸"]
        };

        if (platformTags[platform]) {
          for (const tag of platformTags[platform]) {
            generatedTags.add(tag);
          }
        }

        // Convert to array and limit
        let tagsArray = Array.from(generatedTags);
        tagsArray = shuffleArray(tagsArray).slice(0, count);

        displayHashtags(tagsArray);
        saveToStorage();
        showStatus("å·²ç”Ÿæˆ " + tagsArray.length + " ä¸ªæ ‡ç­¾", "success");
      }

      function shuffleArray(array) {
        const arr = array.slice();
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          const temp = arr[i];
          arr[i] = arr[j];
          arr[j] = temp;
        }
        return arr;
      }

      function displayHashtags(tags) {
        hashtagsContainerEl.textContent = "";

        for (let i = 0; i < tags.length; i++) {
          const tag = tags[i];
          const span = document.createElement("span");
          span.className = "hashtag" + (i < 5 ? " popular" : "");
          span.textContent = tag;
          span.addEventListener("click", function () {
            copyToClipboard(tag);
          });
          hashtagsContainerEl.appendChild(span);
        }

        allHashtagsEl.value = tags.join(" ");
      }

      function copyToClipboard(text) {
        navigator.clipboard
          .writeText(text)
          .then(function () {
            showStatus("å·²å¤åˆ¶: " + text, "success");
          })
          .catch(function () {
            showStatus("å¤åˆ¶å¤±è´¥", "error");
          });
      }

      function showStatus(msg, type) {
        statusEl.textContent = msg;
        statusEl.className = "status " + (type || "");
      }

      function saveToStorage() {
        const data = {
          keywords: keywordsEl.value,
          platform: platformEl.value,
          count: countEl.value,
          language: languageEl.value
        };
        localStorage.setItem(LS_KEY, JSON.stringify(data));
      }

      function loadFromStorage() {
        try {
          const saved = localStorage.getItem(LS_KEY);
          if (saved) {
            const data = JSON.parse(saved);
            if (data.keywords) keywordsEl.value = data.keywords;
            if (data.platform) platformEl.value = data.platform;
            if (data.count) countEl.value = data.count;
            if (data.language) languageEl.value = data.language;
          }
        } catch (e) {}
      }

      function loadFromUrl() {
        const hash = location.hash.slice(1);
        if (!hash) return false;
        try {
          keywordsEl.value = decodeURIComponent(atob(hash));
          return true;
        } catch (e) {
          return false;
        }
      }

      function saveToUrl() {
        try {
          if (keywordsEl.value.length > 500) return;
          const encoded = btoa(encodeURIComponent(keywordsEl.value));
          history.replaceState(null, "", "#" + encoded);
        } catch (e) {}
      }

      document.getElementById("btnGenerate").addEventListener("click", generateHashtags);

      document.getElementById("btnCopy").addEventListener("click", function () {
        const text = allHashtagsEl.value;
        if (!text) {
          showStatus("æ²¡æœ‰æ ‡ç­¾å¯å¤åˆ¶", "error");
          return;
        }
        copyToClipboard(text);
      });

      document.getElementById("btnShare").addEventListener("click", function () {
        saveToUrl();
        navigator.clipboard
          .writeText(location.href)
          .then(function () {
            showStatus("é“¾æ¥å·²å¤åˆ¶", "success");
          })
          .catch(function () {
            showStatus("å¤åˆ¶å¤±è´¥", "error");
          });
      });

      document.getElementById("btnClear").addEventListener("click", function () {
        keywordsEl.value = "";
        hashtagsContainerEl.textContent = "";
        allHashtagsEl.value = "";
        statusEl.textContent = "";
        statusEl.className = "status";
        localStorage.removeItem(LS_KEY);
        history.replaceState(null, "", location.pathname);
      });

      keywordsEl.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          generateHashtags();
        }
      });

      if (!loadFromUrl()) {
        loadFromStorage();
      }

      window.toggleTheme = function () {
        const html = document.documentElement;
        const btn = document.querySelector(".theme-toggle");
        const next = html.getAttribute("data-theme") === "light" ? "dark" : "light";
        html.setAttribute("data-theme", next);
        btn.textContent = next === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", next);
      };

      (function () {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.setAttribute("data-theme", saved);
          const btn = document.querySelector(".theme-toggle");
          if (btn) btn.textContent = saved === "light" ? "â˜€ï¸" : "ğŸŒ™";
        }
      })();
    </script>
  </body>
</html>
