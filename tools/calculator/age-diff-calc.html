<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹´é¾„å·®è®¡ç®—å™¨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --spacing-card: 1.5rem;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .theme-toggle {
            cursor: pointer;
            background: none;
            border: none;
            font-size: 1.5rem;
            padding: 0.5rem;
        }
        .person-card {
            background: var(--pico-card-background-color);
            border-radius: var(--pico-border-radius);
            padding: var(--spacing-card);
            margin-bottom: 1rem;
        }
        .person-card h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .result-card {
            background: var(--pico-card-background-color);
            border-radius: var(--pico-border-radius);
            padding: var(--spacing-card);
            margin-top: 1.5rem;
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--pico-muted-border-color);
        }
        .result-row:last-child {
            border-bottom: none;
        }
        .result-label {
            color: var(--pico-muted-color);
        }
        .result-value {
            font-weight: bold;
            font-size: 1.1rem;
        }
        .highlight {
            color: var(--pico-primary);
            font-size: 1.3rem;
        }
        .age-display {
            text-align: center;
            padding: 1rem;
            background: var(--pico-muted-border-color);
            border-radius: var(--pico-border-radius);
            margin-top: 0.5rem;
        }
        .age-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--pico-primary);
        }
        .age-unit {
            font-size: 0.9rem;
            color: var(--pico-muted-color);
        }
        .zodiac-info {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        .zodiac-item {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 0.75rem;
            background: var(--pico-muted-border-color);
            border-radius: var(--pico-border-radius);
        }
        .zodiac-icon {
            font-size: 1.5rem;
        }
        .diff-highlight {
            text-align: center;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .diff-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--pico-primary);
        }
        .diff-detail {
            color: var(--pico-muted-color);
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <main class="container">
        <header>
            <h1>ğŸ‘¥ å¹´é¾„å·®è®¡ç®—å™¨</h1>
            <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>
        </header>

        <div class="person-card">
            <h3>ğŸ‘¤ ç¬¬ä¸€ä¸ªäºº</h3>
            <label for="date1">
                å‡ºç”Ÿæ—¥æœŸ
                <input type="date" id="date1" onchange="calculate()">
            </label>
            <div class="age-display">
                <div class="age-number" id="age1">--</div>
                <div class="age-unit">å‘¨å²</div>
            </div>
            <div class="zodiac-info">
                <div class="zodiac-item">
                    <div class="zodiac-icon" id="zodiac1">--</div>
                    <div>ç”Ÿè‚–</div>
                </div>
                <div class="zodiac-item">
                    <div class="zodiac-icon" id="constellation1">--</div>
                    <div>æ˜Ÿåº§</div>
                </div>
            </div>
        </div>

        <div class="person-card">
            <h3>ğŸ‘¤ ç¬¬äºŒä¸ªäºº</h3>
            <label for="date2">
                å‡ºç”Ÿæ—¥æœŸ
                <input type="date" id="date2" onchange="calculate()">
            </label>
            <div class="age-display">
                <div class="age-number" id="age2">--</div>
                <div class="age-unit">å‘¨å²</div>
            </div>
            <div class="zodiac-info">
                <div class="zodiac-item">
                    <div class="zodiac-icon" id="zodiac2">--</div>
                    <div>ç”Ÿè‚–</div>
                </div>
                <div class="zodiac-item">
                    <div class="zodiac-icon" id="constellation2">--</div>
                    <div>æ˜Ÿåº§</div>
                </div>
            </div>
        </div>

        <div class="result-card">
            <h3>å¹´é¾„å·®</h3>
            <div class="diff-highlight">
                <div class="diff-number" id="diffYears">--</div>
                <div class="diff-detail" id="diffDetail">è¯·è¾“å…¥ä¸¤ä¸ªå‡ºç”Ÿæ—¥æœŸ</div>
            </div>
            <div class="result-row">
                <span class="result-label">ç›¸å·®æœˆæ•°</span>
                <span class="result-value" id="diffMonths">--</span>
            </div>
            <div class="result-row">
                <span class="result-label">ç›¸å·®å¤©æ•°</span>
                <span class="result-value" id="diffDays">--</span>
            </div>
            <div class="result-row">
                <span class="result-label">ç›¸å·®å‘¨æ•°</span>
                <span class="result-value" id="diffWeeks">--</span>
            </div>
            <div class="result-row">
                <span class="result-label">è°æ›´å¹´é•¿</span>
                <span class="result-value" id="whoOlder">--</span>
            </div>
        </div>
    </main>

    <script>
        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();

        // è®¡ç®—å‘¨å²
        function calculateAge(birthDate) {
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age;
        }

        // è·å–ç”Ÿè‚–
        function getZodiac(year) {
            const zodiacs = ['ğŸ€é¼ ', 'ğŸ‚ç‰›', 'ğŸ…è™', 'ğŸ‡å…”', 'ğŸ‰é¾™', 'ğŸè›‡', 
                           'ğŸ´é©¬', 'ğŸ‘ç¾Š', 'ğŸµçŒ´', 'ğŸ”é¸¡', 'ğŸ•ç‹—', 'ğŸ·çŒª'];
            return zodiacs[(year - 4) % 12];
        }

        // è·å–æ˜Ÿåº§
        function getConstellation(month, day) {
            const constellations = [
                { name: 'â™‘æ‘©ç¾¯', start: [1, 1], end: [1, 19] },
                { name: 'â™’æ°´ç“¶', start: [1, 20], end: [2, 18] },
                { name: 'â™“åŒé±¼', start: [2, 19], end: [3, 20] },
                { name: 'â™ˆç™½ç¾Š', start: [3, 21], end: [4, 19] },
                { name: 'â™‰é‡‘ç‰›', start: [4, 20], end: [5, 20] },
                { name: 'â™ŠåŒå­', start: [5, 21], end: [6, 21] },
                { name: 'â™‹å·¨èŸ¹', start: [6, 22], end: [7, 22] },
                { name: 'â™Œç‹®å­', start: [7, 23], end: [8, 22] },
                { name: 'â™å¤„å¥³', start: [8, 23], end: [9, 22] },
                { name: 'â™å¤©ç§¤', start: [9, 23], end: [10, 23] },
                { name: 'â™å¤©è', start: [10, 24], end: [11, 22] },
                { name: 'â™å°„æ‰‹', start: [11, 23], end: [12, 21] },
                { name: 'â™‘æ‘©ç¾¯', start: [12, 22], end: [12, 31] }
            ];

            for (const c of constellations) {
                if ((month === c.start[0] && day >= c.start[1]) || 
                    (month === c.end[0] && day <= c.end[1])) {
                    return c.name;
                }
            }
            return 'â™‘æ‘©ç¾¯';
        }

        // è®¡ç®—å¹´æœˆæ—¥å·®
        function getDateDiff(date1, date2) {
            const earlier = date1 < date2 ? date1 : date2;
            const later = date1 < date2 ? date2 : date1;
            
            let years = later.getFullYear() - earlier.getFullYear();
            let months = later.getMonth() - earlier.getMonth();
            let days = later.getDate() - earlier.getDate();
            
            if (days < 0) {
                months--;
                const prevMonth = new Date(later.getFullYear(), later.getMonth(), 0);
                days += prevMonth.getDate();
            }
            
            if (months < 0) {
                years--;
                months += 12;
            }
            
            return { years, months, days };
        }

        // è®¡ç®—
        function calculate() {
            const date1Input = document.getElementById('date1').value;
            const date2Input = document.getElementById('date2').value;
            
            if (date1Input) {
                const birthDate1 = new Date(date1Input);
                const age1 = calculateAge(birthDate1);
                document.getElementById('age1').textContent = age1;
                document.getElementById('zodiac1').textContent = getZodiac(birthDate1.getFullYear());
                document.getElementById('constellation1').textContent = getConstellation(
                    birthDate1.getMonth() + 1, birthDate1.getDate()
                );
            }
            
            if (date2Input) {
                const birthDate2 = new Date(date2Input);
                const age2 = calculateAge(birthDate2);
                document.getElementById('age2').textContent = age2;
                document.getElementById('zodiac2').textContent = getZodiac(birthDate2.getFullYear());
                document.getElementById('constellation2').textContent = getConstellation(
                    birthDate2.getMonth() + 1, birthDate2.getDate()
                );
            }
            
            if (date1Input && date2Input) {
                const birthDate1 = new Date(date1Input);
                const birthDate2 = new Date(date2Input);
                
                const diff = getDateDiff(birthDate1, birthDate2);
                const totalDays = Math.abs(Math.floor((birthDate2 - birthDate1) / (1000 * 60 * 60 * 24)));
                const totalMonths = diff.years * 12 + diff.months;
                const totalWeeks = Math.floor(totalDays / 7);
                
                document.getElementById('diffYears').textContent = diff.years + 'å²';
                document.getElementById('diffDetail').textContent = 
                    `${diff.years}å¹´${diff.months}ä¸ªæœˆ${diff.days}å¤©`;
                document.getElementById('diffMonths').textContent = totalMonths + 'ä¸ªæœˆ';
                document.getElementById('diffDays').textContent = totalDays + 'å¤©';
                document.getElementById('diffWeeks').textContent = totalWeeks + 'å‘¨';
                
                if (birthDate1 < birthDate2) {
                    document.getElementById('whoOlder').textContent = 'ç¬¬ä¸€ä¸ªäººæ›´å¹´é•¿';
                } else if (birthDate1 > birthDate2) {
                    document.getElementById('whoOlder').textContent = 'ç¬¬äºŒä¸ªäººæ›´å¹´é•¿';
                } else {
                    document.getElementById('whoOlder').textContent = 'åŒä¸€å¤©å‡ºç”Ÿï¼';
                }
            }
        }
    </script>
</body>
</html>
