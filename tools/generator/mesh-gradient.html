<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="keywords" content="mesh-gradient,generator,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/generator/mesh-gradient.html"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:description" content="Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/generator/mesh-gradient.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:description" content="Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, blinkmacsystemfont, 'Segoe UI', roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      :root {
        --canvas-bg: #f0f0f0;
      }
      [data-theme="dark"] {
        --canvas-bg: #1a1a2e;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
      }
      .main-content {
        display: grid;
        grid-template-columns: 320px 1fr;
        gap: 2rem;
      }
      @media (max-width: 768px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }
      .controls {
        background: var(--pico-card-background-color);
        padding: 1.5rem;
        border-radius: 8px;
      }
      .control-group {
        margin-bottom: 1.5rem;
      }
      .control-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
      }
      .preview-area {
        background: var(--canvas-bg);
        border-radius: 8px;
        padding: 1rem;
        min-height: 500px;
      }
      .gradient-preview {
        width: 100%;
        aspect-ratio: 16/9;
        border-radius: 8px;
        position: relative;
        overflow: hidden;
      }
      .color-points {
        margin-bottom: 1rem;
      }
      .color-point {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        padding: 0.5rem;
        background: var(--pico-card-background-color);
        border: 1px solid var(--pico-muted-border-color);
        border-radius: 4px;
      }
      .color-point input[type="color"] {
        width: 50px;
        height: 35px;
        padding: 0;
        border: none;
        cursor: pointer;
      }
      .color-point-pos {
        display: flex;
        gap: 0.25rem;
        flex: 1;
      }
      .color-point-pos input {
        width: 60px;
        padding: 0.25rem;
        text-align: center;
      }
      .color-point button {
        padding: 0.25rem 0.5rem;
        font-size: 0.8rem;
      }
      .preset-section {
        margin-bottom: 1.5rem;
      }
      .preset-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 0.5rem;
      }
      .preset-item {
        aspect-ratio: 1;
        border-radius: 4px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: transform 0.2s;
      }
      .preset-item:hover {
        transform: scale(1.05);
      }
      .preset-item.active {
        border-color: var(--pico-primary);
      }
      .output-section {
        margin-top: 2rem;
      }
      .code-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }
      .code-tabs button {
        padding: 0.5rem 1rem;
      }
      .code-tabs button.active {
        background: var(--pico-primary);
        border-color: var(--pico-primary);
        color: white;
      }
      .code-output {
        background: var(--pico-card-background-color);
        padding: 1rem;
        border-radius: 8px;
        overflow-x: auto;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        white-space: pre-wrap;
        word-break: break-all;
      }
      .btn-group {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin-top: 1rem;
      }
      .range-value {
        display: inline-block;
        min-width: 40px;
        text-align: right;
      }
      .size-inputs {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }
      .size-inputs input {
        width: 80px;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨
    </nav>
    <div class="container">
      <header>
        <h1>Meshæ¸å˜èƒŒæ™¯ç”Ÿæˆå™¨</h1>
        <button id="themeToggle" class="outline">åˆ‡æ¢ä¸»é¢˜</button>
      </header>

      <div class="main-content">
        <div class="controls">
          <div class="preset-section">
            <label>é¢„è®¾é…è‰²</label>
            <div class="preset-grid" id="presetGrid"></div>
          </div>

          <div class="control-group">
            <label>é¢œè‰²ç‚¹</label>
            <div class="color-points" id="colorPoints"></div>
            <button id="addColorBtn" class="outline" style="width: 100%">+ æ·»åŠ é¢œè‰²ç‚¹</button>
          </div>

          <div class="control-group">
            <label>
              æ¨¡ç³Šç¨‹åº¦
              <span class="range-value" id="blurValue">40</span>
              %
            </label>
            <input type="range" id="blur" min="10" max="100" value="40" />
          </div>

          <div class="control-group">
            <label>èƒŒæ™¯è‰²</label>
            <input type="color" id="bgColor" value="#ffffff" />
          </div>

          <div class="control-group">
            <label>å¯¼å‡ºå°ºå¯¸</label>
            <div class="size-inputs">
              <input type="number" id="exportWidth" value="1920" min="100" max="4096" />
              <span>Ã—</span>
              <input type="number" id="exportHeight" value="1080" min="100" max="4096" />
            </div>
          </div>

          <div class="btn-group">
            <button id="randomBtn">éšæœºç”Ÿæˆ</button>
            <button id="animateBtn" class="secondary">åŠ¨ç”»æ•ˆæœ</button>
          </div>
        </div>

        <div class="preview-panel">
          <div class="preview-area">
            <div class="gradient-preview" id="gradientPreview"></div>
          </div>

          <div class="output-section">
            <div class="code-tabs">
              <button id="cssTab" class="active outline">CSS</button>
              <button id="svgTab" class="outline">SVG</button>
            </div>
            <pre class="code-output" id="codeOutput"></pre>
            <div class="btn-group">
              <button id="copyCodeBtn">å¤åˆ¶ä»£ç </button>
              <button id="downloadPngBtn" class="secondary">ä¸‹è½½PNG</button>
              <button id="downloadSvgBtn" class="outline">ä¸‹è½½SVG</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // é¢„è®¾é…è‰²æ–¹æ¡ˆ
      const presets = [
        { colors: ["#ff6b6b", "#feca57", "#48dbfb", "#ff9ff3"], bg: "#ffffff" },
        { colors: ["#667eea", "#764ba2", "#f093fb"], bg: "#1a1a2e" },
        { colors: ["#11998e", "#38ef7d", "#00b4db"], bg: "#0f0f1a" },
        { colors: ["#fc466b", "#3f5efb", "#9400d3"], bg: "#000000" },
        { colors: ["#f12711", "#f5af19", "#f7971e"], bg: "#fff5e6" },
        { colors: ["#00c6ff", "#0072ff", "#7f00ff"], bg: "#e8f4f8" },
        { colors: ["#ff0844", "#ffb199", "#ff6b95"], bg: "#fff0f5" },
        { colors: ["#8ec5fc", "#e0c3fc", "#d5aaff"], bg: "#f5f5ff" }
      ];

      // çŠ¶æ€
      let colorPoints = [
        { color: "#667eea", x: 20, y: 30 },
        { color: "#764ba2", x: 80, y: 20 },
        { color: "#f093fb", x: 50, y: 80 }
      ];
      let currentTab = "css";
      let isAnimating = false;
      let animationId = null;

      // åˆå§‹åŒ–
      function init() {
        initPresets();
        renderColorPoints();
        updatePreview();
        bindEvents();
      }

      // åˆå§‹åŒ–é¢„è®¾
      function initPresets() {
        const grid = document.getElementById("presetGrid");
        presets.forEach((preset, index) => {
          const item = document.createElement("div");
          item.className = "preset-item";
          item.style.background = generateMeshGradientCSS(preset.colors, preset.bg, 40);
          item.addEventListener("click", () => {
            colorPoints = preset.colors.map((color, i) => ({
              color,
              x: 20 + (i % 2) * 60 + Math.random() * 20,
              y: 20 + Math.floor(i / 2) * 60 + Math.random() * 20
            }));
            document.getElementById("bgColor").value = preset.bg;
            renderColorPoints();
            updatePreview();
          });
          grid.appendChild(item);
        });
      }

      // ç”ŸæˆCSSæ¸å˜
      function generateMeshGradientCSS(colors, bgColor, blur) {
        if (!colors || colors.length === 0) {
          colors = colorPoints.map((p) => p.color);
        }

        const gradients = colorPoints.map((point, i) => {
          const size = 50 + blur;
          return `radial-gradient(at ${point.x}% ${point.y}%, ${point.color} 0px, transparent ${size}%)`;
        });

        return `${bgColor || document.getElementById("bgColor").value} ${gradients.join(", ")}`;
      }

      // æ¸²æŸ“é¢œè‰²ç‚¹
      function renderColorPoints() {
        const container = document.getElementById("colorPoints");
        container.replaceChildren();

        colorPoints.forEach((point, index) => {
          const div = document.createElement("div");
          div.className = "color-point";

          const colorInput = document.createElement("input");
          colorInput.type = "color";
          colorInput.value = point.color;
          colorInput.addEventListener("input", (e) => {
            colorPoints[index].color = e.target.value;
            updatePreview();
          });

          const posDiv = document.createElement("div");
          posDiv.className = "color-point-pos";

          const xInput = document.createElement("input");
          xInput.type = "number";
          xInput.value = Math.round(point.x);
          xInput.min = 0;
          xInput.max = 100;
          xInput.placeholder = "X%";
          xInput.addEventListener("input", (e) => {
            colorPoints[index].x = parseFloat(e.target.value) || 0;
            updatePreview();
          });

          const yInput = document.createElement("input");
          yInput.type = "number";
          yInput.value = Math.round(point.y);
          yInput.min = 0;
          yInput.max = 100;
          yInput.placeholder = "Y%";
          yInput.addEventListener("input", (e) => {
            colorPoints[index].y = parseFloat(e.target.value) || 0;
            updatePreview();
          });

          posDiv.appendChild(xInput);
          posDiv.appendChild(yInput);

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "outline";
          deleteBtn.textContent = "Ã—";
          deleteBtn.addEventListener("click", () => {
            if (colorPoints.length > 2) {
              colorPoints.splice(index, 1);
              renderColorPoints();
              updatePreview();
            } else {
              alert("è‡³å°‘éœ€è¦2ä¸ªé¢œè‰²ç‚¹");
            }
          });

          div.appendChild(colorInput);
          div.appendChild(posDiv);
          div.appendChild(deleteBtn);
          container.appendChild(div);
        });
      }

      // æ›´æ–°é¢„è§ˆ
      window.updatePreview = function () {
        const blur = document.getElementById("blur").value;
        const bgColor = document.getElementById("bgColor").value;
        const preview = document.getElementById("gradientPreview");

        preview.style.background = generateMeshGradientCSS(null, bgColor, parseInt(blur));
        updateCode();
      };

      // æ›´æ–°ä»£ç è¾“å‡º
      function updateCode() {
        const blur = document.getElementById("blur").value;
        const bgColor = document.getElementById("bgColor").value;
        const output = document.getElementById("codeOutput");

        if (currentTab === "css") {
          const css = `background: ${generateMeshGradientCSS(null, bgColor, parseInt(blur))};`;
          output.textContent = css;
        } else {
          output.textContent = generateSVG();
        }
      }

      // ç”ŸæˆSVG
      function generateSVG() {
        const width = document.getElementById("exportWidth").value;
        const height = document.getElementById("exportHeight").value;
        const blur = document.getElementById("blur").value;
        const bgColor = document.getElementById("bgColor").value;
        const blurAmount = (parseInt(blur) / 100) * Math.min(width, height) * 0.3;

        let defs = "<defs>";
        let circles = "";

        colorPoints.forEach((point, i) => {
          const cx = (point.x / 100) * width;
          const cy = (point.y / 100) * height;
          const r = Math.min(width, height) * 0.4;

          defs += `
        <radialGradient id="grad${i}" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="${point.color}" stop-opacity="1"/>
            <stop offset="100%" stop-color="${point.color}" stop-opacity="0"/>
        </radialGradient>`;

          circles += `
    <circle cx="${cx}" cy="${cy}" r="${r}" fill="url(#grad${i})"/>`;
        });

        defs += `
        <filter id="blur">
            <feGaussianBlur in="SourceGraphic" stdDeviation="${blurAmount}"/>
        </filter>
    </defs>`;

        return `<svg xmlns="http://www.w3.org/2000/svg" width="${width}" height="${height}" viewBox="0 0 ${width} ${height}">
    ${defs}
    <rect width="100%" height="100%" fill="${bgColor}"/>
    <g filter="url(#blur)">${circles}
    </g>
</svg>`;
      }

      // ç»‘å®šäº‹ä»¶
      function bindEvents() {
        // ä¸»é¢˜åˆ‡æ¢
        document.getElementById("themeToggle").addEventListener("click", () => {
          const html = document.documentElement;
          const currentTheme = html.getAttribute("data-theme");
          const newTheme = currentTheme === "light" ? "dark" : "light";
          html.setAttribute("data-theme", newTheme);
          localStorage.setItem("theme", newTheme);
        });

        const savedTheme = localStorage.getItem("theme");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        }

        // æ¨¡ç³Šåº¦
        document.getElementById("blur").addEventListener("input", (e) => {
          document.getElementById("blurValue").textContent = e.target.value;
          updatePreview();
        });

        // èƒŒæ™¯è‰²
        document.getElementById("bgColor").addEventListener("input", updatePreview);

        // æ·»åŠ é¢œè‰²ç‚¹
        document.getElementById("addColorBtn").addEventListener("click", () => {
          if (colorPoints.length < 8) {
            const randomColor =
              "#" +
              Math.floor(Math.random() * 16777215)
                .toString(16)
                .padStart(6, "0");
            colorPoints.push({
              color: randomColor,
              x: 20 + Math.random() * 60,
              y: 20 + Math.random() * 60
            });
            renderColorPoints();
            updatePreview();
          } else {
            alert("æœ€å¤šæ”¯æŒ8ä¸ªé¢œè‰²ç‚¹");
          }
        });

        // éšæœºç”Ÿæˆ
        document.getElementById("randomBtn").addEventListener("click", () => {
          const numPoints = 3 + Math.floor(Math.random() * 3);
          colorPoints = [];
          for (let i = 0; i < numPoints; i++) {
            colorPoints.push({
              color:
                "#" +
                Math.floor(Math.random() * 16777215)
                  .toString(16)
                  .padStart(6, "0"),
              x: 10 + Math.random() * 80,
              y: 10 + Math.random() * 80
            });
          }
          renderColorPoints();
          updatePreview();
        });

        // åŠ¨ç”»æ•ˆæœ
        document.getElementById("animateBtn").addEventListener("click", () => {
          isAnimating = !isAnimating;
          const btn = document.getElementById("animateBtn");

          if (isAnimating) {
            btn.textContent = "åœæ­¢åŠ¨ç”»";
            animateGradient();
          } else {
            btn.textContent = "åŠ¨ç”»æ•ˆæœ";
            if (animationId) {
              cancelAnimationFrame(animationId);
            }
          }
        });

        // Tabåˆ‡æ¢
        document.getElementById("cssTab").addEventListener("click", () => {
          currentTab = "css";
          document.getElementById("cssTab").classList.add("active");
          document.getElementById("svgTab").classList.remove("active");
          updateCode();
        });

        document.getElementById("svgTab").addEventListener("click", () => {
          currentTab = "svg";
          document.getElementById("svgTab").classList.add("active");
          document.getElementById("cssTab").classList.remove("active");
          updateCode();
        });

        // å¤åˆ¶ä»£ç 
        document.getElementById("copyCodeBtn").addEventListener("click", () => {
          const code = document.getElementById("codeOutput").textContent;
          navigator.clipboard.writeText(code).then(() => {
            alert("ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
          });
        });

        // ä¸‹è½½PNG
        document.getElementById("downloadPngBtn").addEventListener("click", downloadPNG);

        // ä¸‹è½½SVG
        document.getElementById("downloadSvgBtn").addEventListener("click", () => {
          const svg = generateSVG();
          const blob = new Blob([svg], { type: "image/svg+xml" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = "mesh-gradient.svg";
          a.click();
          URL.revokeObjectURL(url);
        });
      }

      // åŠ¨ç”»
      function animateGradient() {
        if (!isAnimating) return;

        colorPoints.forEach((point) => {
          point.x += (Math.random() - 0.5) * 2;
          point.y += (Math.random() - 0.5) * 2;
          point.x = Math.max(5, Math.min(95, point.x));
          point.y = Math.max(5, Math.min(95, point.y));
        });

        updatePreview();
        animationId = requestAnimationFrame(animateGradient);
      }

      // ä¸‹è½½PNG
      window.downloadPNG = function () {
        const width = parseInt(document.getElementById("exportWidth").value);
        const height = parseInt(document.getElementById("exportHeight").value);
        const svg = generateSVG();

        const canvas = document.createElement("canvas");
        canvas.width = width;
        canvas.height = height;
        const ctx = canvas.getContext("2d");

        const img = new Image();
        const svgBlob = new Blob([svg], { type: "image/svg+xml" });
        const url = URL.createObjectURL(svgBlob);

        img.onload = () => {
          ctx.drawImage(img, 0, 0, width, height);
          URL.revokeObjectURL(url);

          const pngUrl = canvas.toDataURL("image/png");
          const a = document.createElement("a");
          a.href = pngUrl;
          a.download = "mesh-gradient.png";
          a.click();
        };
        img.src = url;
      };

      // å¯åŠ¨
      init();

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        document.getElementById("theme-icon").textContent = newTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", newTheme);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem("theme") || "dark";
      if (savedTheme === "light") {
        document.documentElement.setAttribute("data-theme", "light");
        document.getElementById("theme-icon").textContent = "â˜€ï¸";
      }
    </script>
  </body>
</html>
