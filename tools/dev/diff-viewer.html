<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊñáÊú¨Â∑ÆÂºÇÂØπÊØî</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: white; text-align: center; margin-bottom: 30px; font-size: 28px; }
        .editors { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .editor { background: #16213e; border-radius: 15px; padding: 20px; }
        .editor-header { color: #aaa; margin-bottom: 10px; font-size: 14px; }
        textarea { width: 100%; height: 250px; background: #0f3460; border: none; border-radius: 10px; padding: 15px; color: #e0e0e0; font-family: monospace; font-size: 14px; resize: vertical; }
        textarea:focus { outline: 2px solid #4facfe; }
        .btn { display: block; width: 200px; margin: 0 auto 20px; padding: 15px; background: linear-gradient(135deg, #4facfe, #00f2fe); color: white; border: none; border-radius: 10px; font-size: 16px; cursor: pointer; font-weight: 600; }
        .btn:hover { opacity: 0.9; }
        .result { background: #16213e; border-radius: 15px; padding: 20px; }
        .result-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; color: white; }
        .stats { display: flex; gap: 20px; }
        .stat { padding: 5px 15px; border-radius: 20px; font-size: 14px; }
        .stat.add { background: #27ae60; }
        .stat.remove { background: #e74c3c; }
        .stat.same { background: #3498db; }
        .diff-view { display: grid; grid-template-columns: 1fr 1fr; gap: 0; background: #0f3460; border-radius: 10px; overflow: hidden; font-family: monospace; font-size: 13px; }
        .diff-side { overflow: auto; max-height: 400px; }
        .diff-line { display: flex; padding: 2px 10px; min-height: 24px; }
        .line-num { width: 40px; color: #666; text-align: right; padding-right: 10px; user-select: none; flex-shrink: 0; }
        .line-content { flex: 1; white-space: pre-wrap; word-break: break-all; }
        .line-add { background: rgba(46, 204, 113, 0.2); color: #2ecc71; }
        .line-remove { background: rgba(231, 76, 60, 0.2); color: #e74c3c; }
        .line-same { color: #888; }
        .line-empty { background: rgba(0,0,0,0.2); }
        .unified { display: none; }
        .view-toggle { display: flex; gap: 10px; }
        .view-toggle button { padding: 8px 15px; background: #0f3460; border: none; border-radius: 6px; color: #aaa; cursor: pointer; }
        .view-toggle button.active { background: #4facfe; color: white; }
        @media (max-width: 768px) { .editors, .diff-view { grid-template-columns: 1fr; } }
    
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
    <nav class="breadcrumb"><a href="../../index.html">È¶ñÈ°µ</a><span>‚Ä∫</span><a href="../../index.html#dev">ÂºÄÂèëÂ∑•ÂÖ∑</a><span>‚Ä∫</span>Git Diff Êü•ÁúãÂô®</nav>
    <div class="container">
        <h1>üìÑ ÊñáÊú¨Â∑ÆÂºÇÂØπÊØî</h1>
        <div class="editors">
            <div class="editor">
                <div class="editor-header">ÂéüÂßãÊñáÊú¨</div>
                <textarea id="text1" placeholder="ËæìÂÖ•ÂéüÂßãÊñáÊú¨...">Hello World
This is line 2
This line will be removed
Line 4 stays the same
Old line five</textarea>
            </div>
            <div class="editor">
                <div class="editor-header">‰øÆÊîπÂêéÊñáÊú¨</div>
                <textarea id="text2" placeholder="ËæìÂÖ•‰øÆÊîπÂêéÁöÑÊñáÊú¨...">Hello World
This is line 2 modified
Line 4 stays the same
New line five
Added new line</textarea>
            </div>
        </div>
        <button class="btn" onclick="compare()">ÂØπÊØîÂ∑ÆÂºÇ</button>
        <div class="result" id="result" style="display:none">
            <div class="result-header">
                <div class="view-toggle">
                    <button class="active" onclick="setView('split')">Âπ∂ÊéíËßÜÂõæ</button>
                    <button onclick="setView('unified')">Áªü‰∏ÄËßÜÂõæ</button>
                </div>
                <div class="stats">
                    <span class="stat add" id="addCount">+0</span>
                    <span class="stat remove" id="removeCount">-0</span>
                    <span class="stat same" id="sameCount">0</span>
                </div>
            </div>
            <div class="diff-view split" id="splitView"></div>
            <div class="diff-view unified" id="unifiedView" style="grid-template-columns:1fr"></div>
        </div>
    </div>
    <script>
        function lcs(a, b) {
            const m = a.length, n = b.length;
            const dp = Array(m + 1).fill(null).map(() => Array(n + 1).fill(0));
            for (let i = 1; i <= m; i++) {
                for (let j = 1; j <= n; j++) {
                    dp[i][j] = a[i-1] === b[j-1] ? dp[i-1][j-1] + 1 : Math.max(dp[i-1][j], dp[i][j-1]);
                }
            }
            const result = [];
            let i = m, j = n;
            while (i > 0 && j > 0) {
                if (a[i-1] === b[j-1]) { result.unshift({type: 'same', old: i-1, new: j-1}); i--; j--; }
                else if (dp[i-1][j] > dp[i][j-1]) { result.unshift({type: 'remove', old: i-1}); i--; }
                else { result.unshift({type: 'add', new: j-1}); j--; }
            }
            while (i > 0) { result.unshift({type: 'remove', old: i-1}); i--; }
            while (j > 0) { result.unshift({type: 'add', new: j-1}); j--; }
            return result;
        }
        function escapeHtml(text) {
            return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        }
        function compare() {
            const lines1 = document.getElementById('text1').value.split('\n');
            const lines2 = document.getElementById('text2').value.split('\n');
            const diff = lcs(lines1, lines2);
            let leftHtml = '', rightHtml = '', unifiedHtml = '';
            let addCount = 0, removeCount = 0, sameCount = 0;
            let leftNum = 1, rightNum = 1;
            diff.forEach(d => {
                if (d.type === 'same') {
                    const content = escapeHtml(lines1[d.old]);
                    leftHtml += `<div class="diff-line line-same"><span class="line-num">${leftNum++}</span><span class="line-content">${content}</span></div>`;
                    rightHtml += `<div class="diff-line line-same"><span class="line-num">${rightNum++}</span><span class="line-content">${content}</span></div>`;
                    unifiedHtml += `<div class="diff-line line-same"><span class="line-num">${leftNum-1}</span><span class="line-content">  ${content}</span></div>`;
                    sameCount++;
                } else if (d.type === 'remove') {
                    const content = escapeHtml(lines1[d.old]);
                    leftHtml += `<div class="diff-line line-remove"><span class="line-num">${leftNum++}</span><span class="line-content">${content}</span></div>`;
                    rightHtml += `<div class="diff-line line-empty"><span class="line-num"></span><span class="line-content"></span></div>`;
                    unifiedHtml += `<div class="diff-line line-remove"><span class="line-num">${leftNum-1}</span><span class="line-content">- ${content}</span></div>`;
                    removeCount++;
                } else {
                    const content = escapeHtml(lines2[d.new]);
                    leftHtml += `<div class="diff-line line-empty"><span class="line-num"></span><span class="line-content"></span></div>`;
                    rightHtml += `<div class="diff-line line-add"><span class="line-num">${rightNum++}</span><span class="line-content">${content}</span></div>`;
                    unifiedHtml += `<div class="diff-line line-add"><span class="line-num">${rightNum-1}</span><span class="line-content">+ ${content}</span></div>`;
                    addCount++;
                }
            });
            document.getElementById('splitView').innerHTML = `<div class="diff-side">${leftHtml}</div><div class="diff-side">${rightHtml}</div>`;
            document.getElementById('unifiedView').innerHTML = `<div class="diff-side">${unifiedHtml}</div>`;
            document.getElementById('addCount').textContent = '+' + addCount;
            document.getElementById('removeCount').textContent = '-' + removeCount;
            document.getElementById('sameCount').textContent = sameCount + ' Áõ∏Âêå';
            document.getElementById('result').style.display = 'block';
        }
        function setView(type) {
            document.querySelectorAll('.view-toggle button').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('splitView').style.display = type === 'split' ? 'grid' : 'none';
            document.getElementById('unifiedView').style.display = type === 'unified' ? 'grid' : 'none';
        }
        compare();
    </script>
</body>
</html>
