<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>对联生成器 - WebUtils</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #dc2626; --accent2: #b91c1c; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .card-title { font-size: 1rem; color: var(--text2); margin-bottom: 16px; font-weight: 500; }
        .theme-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px; }
        .theme-tag { padding: 10px 18px; background: var(--bg); border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-size: 0.95rem; transition: all 0.2s; }
        .theme-tag.active { border-color: var(--accent); background: rgba(220, 38, 38, 0.1); color: var(--accent); }
        .theme-tag:hover { border-color: var(--accent); }
        .btn { padding: 14px 28px; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.2s; }
        .btn-primary { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; width: 100%; margin-top: 16px; }
        .btn-primary:hover { opacity: 0.9; }
        .couplet-display { display: flex; gap: 24px; justify-content: center; margin: 30px 0; flex-wrap: wrap; }
        .couplet-scroll { background: linear-gradient(to bottom, #8B0000, #A52A2A); padding: 20px 12px; border-radius: 8px; min-width: 80px; text-align: center; box-shadow: 0 4px 20px rgba(139, 0, 0, 0.3); }
        .couplet-scroll.horizontal { padding: 12px 20px; }
        .scroll-text { writing-mode: vertical-rl; font-family: KaiTi, STKaiti, SimSun, serif; font-size: 2rem; color: #FFD700; letter-spacing: 8px; line-height: 1.5; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        .scroll-text.horizontal { writing-mode: horizontal-tb; letter-spacing: 12px; }
        .couplet-info { text-align: center; margin-top: 20px; }
        .couplet-info .theme { color: var(--accent); font-size: 1.1rem; margin-bottom: 8px; }
        .couplet-info .meaning { color: var(--text2); font-size: 0.95rem; line-height: 1.6; }
        .custom-input { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border); }
        .custom-input label { display: block; margin-bottom: 8px; color: var(--text2); font-size: 0.9rem; }
        .custom-input input { width: 100%; padding: 14px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1.1rem; margin-bottom: 12px; }
        .custom-input input:focus { outline: none; border-color: var(--accent); }
        .history-section { margin-top: 20px; }
        .history-title { font-size: 0.9rem; color: var(--text2); margin-bottom: 12px; }
        .history-list { display: flex; flex-direction: column; gap: 8px; }
        .history-item { padding: 12px 16px; background: var(--bg); border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .history-item:hover { background: rgba(220, 38, 38, 0.1); }
        .history-item .upper { color: var(--accent); }
        .history-item .lower { color: var(--text); }
        .copy-btn { padding: 8px 16px; background: var(--bg); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; color: var(--text); font-size: 0.9rem; margin-top: 16px; }
        .copy-btn:hover { border-color: var(--accent); }
        .hidden { display: none; }
        .tips { margin-top: 16px; padding: 16px; background: var(--bg); border-radius: 8px; }
        .tips h4 { font-size: 0.95rem; color: var(--text); margin-bottom: 12px; }
        .tips ul { padding-left: 20px; color: var(--text2); font-size: 0.9rem; line-height: 1.8; }
            .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">← 返回</a>
        <h1>对联生成器</h1>
        <p class="subtitle">生成各种主题的中国传统对联</p>
        
        <div class="card">
            <div class="card-title">选择对联主题</div>
            <div class="theme-tags">
                <span class="theme-tag active" data-theme="spring" onclick="setTheme('spring')">春节</span>
                <span class="theme-tag" data-theme="wedding" onclick="setTheme('wedding')">婚庆</span>
                <span class="theme-tag" data-theme="birthday" onclick="setTheme('birthday')">寿庆</span>
                <span class="theme-tag" data-theme="business" onclick="setTheme('business')">开业</span>
                <span class="theme-tag" data-theme="study" onclick="setTheme('study')">励志</span>
                <span class="theme-tag" data-theme="home" onclick="setTheme('home')">乔迁</span>
                <span class="theme-tag" data-theme="classic" onclick="setTheme('classic')">经典</span>
                <span class="theme-tag" data-theme="nature" onclick="setTheme('nature')">自然</span>
            </div>
            
            <button class="btn btn-primary" onclick="generate()">生成对联</button>
            
            <div class="custom-input">
                <label>或输入上联，自动匹配下联：</label>
                <input type="text" id="upperInput" placeholder="请输入上联（5-11字）" maxlength="11">
                <button class="btn btn-primary" onclick="matchLower()">匹配下联</button>
            </div>
        </div>
        
        <div class="card" id="resultCard">
            <div class="couplet-display">
                <div class="couplet-scroll">
                    <div class="scroll-text" id="upperText">天增岁月人增寿</div>
                </div>
                <div class="couplet-scroll horizontal">
                    <div class="scroll-text horizontal" id="horizontalText">福</div>
                </div>
                <div class="couplet-scroll">
                    <div class="scroll-text" id="lowerText">春满乾坤福满门</div>
                </div>
            </div>
            
            <div class="couplet-info">
                <div class="theme" id="coupletTheme">春节对联</div>
                <div class="meaning" id="coupletMeaning">寓意：岁月增长，人也增添寿命；春天充满天地，福气充满家门。表达对新年的美好祝愿。</div>
            </div>
            
            <div style="text-align: center;">
                <button class="copy-btn" onclick="copyCouplet()">复制对联</button>
            </div>
        </div>
        
        <div class="card">
            <div class="history-section">
                <div class="history-title">最近生成</div>
                <div class="history-list" id="historyList">
                    <div style="color: var(--text2); text-align: center; padding: 20px;">暂无历史记录</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="tips">
                <h4>对联小知识</h4>
                <ul>
                    <li><strong>上联</strong>：贴在门右边（面对门时的右手边），最后一个字为仄声（三声、四声）</li>
                    <li><strong>下联</strong>：贴在门左边（面对门时的左手边），最后一个字为平声（一声、二声）</li>
                    <li><strong>横批</strong>：贴在门楣上方，一般为四个字</li>
                    <li><strong>对仗</strong>：上下联字数相等，词性相同，平仄相对</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // 对联数据库
        const coupletDatabase = {
            spring: [
                { upper: '天增岁月人增寿', lower: '春满乾坤福满门', horizontal: '福星高照', meaning: '岁月增长人也增寿，春天充满天地福气充满家门。' },
                { upper: '爆竹声声辞旧岁', lower: '梅花点点迎新春', horizontal: '辞旧迎新', meaning: '爆竹声声送走旧的一年，梅花朵朵迎来新的春天。' },
                { upper: '一帆风顺年年好', lower: '万事如意步步高', horizontal: '吉祥如意', meaning: '祝愿事业顺利年年好运，万事如愿步步高升。' },
                { upper: '金鸡报晓迎春来', lower: '喜鹊登梅报喜讯', horizontal: '春回大地', meaning: '金鸡报晓迎接春天到来，喜鹊登上梅枝报告喜讯。' },
                { upper: '红梅含苞傲冬雪', lower: '绿柳吐絮迎春风', horizontal: '春意盎然', meaning: '红梅含苞傲立冬雪中，绿柳吐出柳絮迎春风。' },
                { upper: '春风送暖入屠苏', lower: '瑞雪兆丰迎吉年', horizontal: '新春大吉', meaning: '春风带来温暖，畅饮屠苏酒；瑞雪预示丰年，迎来吉祥年。' },
                { upper: '和顺一门有百福', lower: '平安二字值千金', horizontal: '万象更新', meaning: '家庭和顺就有百种福气，平安二字价值千金。' },
                { upper: '四季平安好运来', lower: '八方财宝进门庭', horizontal: '招财进宝', meaning: '四季平安好运降临，八方财宝进入家门。' }
            ],
            wedding: [
                { upper: '百年恩爱双心结', lower: '千里姻缘一线牵', horizontal: '天作之合', meaning: '百年恩爱两颗心相连，千里姻缘一条红线牵。' },
                { upper: '龙凤呈祥添喜气', lower: '鸳鸯比翼共翱翔', horizontal: '永结同心', meaning: '龙凤呈祥增添喜庆气氛，鸳鸯比翼共同飞翔。' },
                { upper: '花好月圆人团聚', lower: '琴瑟和鸣永相随', horizontal: '百年好合', meaning: '花好月圆人团聚，琴瑟和谐永相伴。' },
                { upper: '才子佳人天设地造', lower: '郎情妾意地久天长', horizontal: '佳偶天成', meaning: '才子佳人是天造地设的一对，郎情妾意地久天长。' },
                { upper: '红烛昏罗帐洞房春暖', lower: '彩灯结绮窗新人喜临', horizontal: '喜结良缘', meaning: '红烛映照罗帐洞房春暖，彩灯装饰窗户新人喜临。' }
            ],
            birthday: [
                { upper: '福如东海长流水', lower: '寿比南山不老松', horizontal: '福寿双全', meaning: '福气如东海水长流不息，寿命如南山松长青不老。' },
                { upper: '春秋不老常青树', lower: '岁月留香满庭芳', horizontal: '寿比南山', meaning: '岁月不老如常青树，时光留香满庭芬芳。' },
                { upper: '日月同辉增福寿', lower: '山河并秀祝长春', horizontal: '松鹤延年', meaning: '日月同辉增添福寿，山河并秀祝愿长寿。' },
                { upper: '仁者静寿德者康', lower: '智者乐水福者宁', horizontal: '仁寿双全', meaning: '仁德之人静享长寿，智慧之人福寿安宁。' }
            ],
            business: [
                { upper: '生意兴隆通四海', lower: '财源茂盛达三江', horizontal: '招财进宝', meaning: '生意兴隆通达四海，财源茂盛遍及三江。' },
                { upper: '门迎百福福临门', lower: '户纳千祥祥满户', horizontal: '开业大吉', meaning: '门前迎来百福福气临门，户中纳入千祥祥瑞满户。' },
                { upper: '鸿图大展添锦绣', lower: '事业辉煌耀日月', horizontal: '财源广进', meaning: '宏图大展前程锦绣，事业辉煌光耀日月。' },
                { upper: '诚信为本誉满天下', lower: '品质第一客似云来', horizontal: '日进斗金', meaning: '以诚信为本美誉满天下，以品质为先顾客如云来。' }
            ],
            study: [
                { upper: '书山有路勤为径', lower: '学海无涯苦作舟', horizontal: '天道酬勤', meaning: '读书攀登要以勤奋为路，学海无边要以刻苦为舟。' },
                { upper: '宝剑锋从磨砺出', lower: '梅花香自苦寒来', horizontal: '自强不息', meaning: '宝剑锋利来自磨砺，梅花芬芳源于苦寒。' },
                { upper: '博学多才铸栋梁', lower: '勤奋好学成大器', horizontal: '学海无涯', meaning: '博学多才能成为栋梁之材，勤奋好学能成就大器。' },
                { upper: '千淘万漉虽辛苦', lower: '吹尽狂沙始到金', horizontal: '持之以恒', meaning: '千淘万漉虽然辛苦，吹尽狂沙才能得到真金。' }
            ],
            home: [
                { upper: '乔迁喜天地人共喜', lower: '新居荣富贵福来临', horizontal: '乔迁之喜', meaning: '乔迁之喜天地人共同欢喜，新居荣耀富贵福气来临。' },
                { upper: '华堂焕彩迎春到', lower: '新居增辉沐喜来', horizontal: '吉宅纳福', meaning: '华美厅堂焕发光彩迎接春天，新居增添光辉沐浴喜气。' },
                { upper: '门庭若市财源广', lower: '家道兴隆福满堂', horizontal: '紫气东来', meaning: '门庭如市财源广进，家道兴隆福满堂。' }
            ],
            classic: [
                { upper: '风声雨声读书声声声入耳', lower: '家事国事天下事事事关心', horizontal: '心系天下', meaning: '风声雨声读书声声声都听入耳中，家事国事天下事事事都要关心。' },
                { upper: '有志者事竟成', lower: '苦心人天不负', horizontal: '天道酬勤', meaning: '有志向的人事情终究能成功，有苦心的人老天不会辜负。' },
                { upper: '海纳百川有容乃大', lower: '壁立千仞无欲则刚', horizontal: '大海无疆', meaning: '大海容纳百川是因为有容量才能广大，峭壁直立千仞是因为无欲望才能刚强。' },
                { upper: '欲穷千里目', lower: '更上一层楼', horizontal: '登高望远', meaning: '想要看到千里之外的景色，就要再登上一层楼。' }
            ],
            nature: [
                { upper: '山清水秀风光好', lower: '鸟语花香春意浓', horizontal: '春色满园', meaning: '山清水秀风光美好，鸟语花香春意浓郁。' },
                { upper: '云淡风轻近午天', lower: '傍花随柳过前川', horizontal: '心旷神怡', meaning: '云淡风轻接近中午时分，傍着花丛随着柳树走过前面的河川。' },
                { upper: '碧水青山映日月', lower: '金风玉露润人间', horizontal: '天地和谐', meaning: '碧水青山映照日月，金风玉露滋润人间。' }
            ]
        };
        
        let currentTheme = 'spring';
        let currentCouplet = null;
        let history = [];
        
        function setTheme(theme) {
            currentTheme = theme;
            document.querySelectorAll('.theme-tag').forEach(tag => {
                tag.classList.toggle('active', tag.dataset.theme === theme);
            });
        }
        
        function generate() {
            const couplets = coupletDatabase[currentTheme];
            const randomIndex = Math.floor(Math.random() * couplets.length);
            currentCouplet = couplets[randomIndex];
            
            displayCouplet(currentCouplet);
            addToHistory(currentCouplet);
        }
        
        function displayCouplet(couplet) {
            document.getElementById('upperText').textContent = couplet.upper;
            document.getElementById('lowerText').textContent = couplet.lower;
            document.getElementById('horizontalText').textContent = couplet.horizontal;
            
            const themeNames = {
                spring: '春节对联', wedding: '婚庆对联', birthday: '寿庆对联',
                business: '开业对联', study: '励志对联', home: '乔迁对联',
                classic: '经典对联', nature: '自然对联'
            };
            document.getElementById('coupletTheme').textContent = themeNames[currentTheme] || '对联';
            document.getElementById('coupletMeaning').textContent = '寓意：' + couplet.meaning;
        }
        
        function matchLower() {
            const upperInput = document.getElementById('upperInput').value.trim();
            if (!upperInput) {
                alert('请输入上联');
                return;
            }
            
            if (upperInput.length < 5 || upperInput.length > 11) {
                alert('上联长度应在5-11字之间');
                return;
            }
            
            // 简单的下联匹配逻辑
            const lowerResponses = {
                '天增岁月人增寿': '春满乾坤福满门',
                '爆竹声声辞旧岁': '梅花点点迎新春',
                '书山有路勤为径': '学海无涯苦作舟',
                '福如东海长流水': '寿比南山不老松',
                '生意兴隆通四海': '财源茂盛达三江',
                '海纳百川有容乃大': '壁立千仞无欲则刚'
            };
            
            let matchedLower = lowerResponses[upperInput];
            
            if (!matchedLower) {
                // 生成一个随机下联
                const genericLowers = [
                    '福满人间喜盈门',
                    '春回大地景色新',
                    '乐享人生步步高',
                    '财源广进年年旺',
                    '鹏程万里展宏图',
                    '心想事成皆如意'
                ];
                // 根据字数选择
                const sameLength = genericLowers.filter(l => l.length === upperInput.length);
                if (sameLength.length > 0) {
                    matchedLower = sameLength[Math.floor(Math.random() * sameLength.length)];
                } else {
                    matchedLower = genericLowers[Math.floor(Math.random() * genericLowers.length)];
                }
            }
            
            currentCouplet = {
                upper: upperInput,
                lower: matchedLower,
                horizontal: '吉祥如意',
                meaning: '根据您输入的上联匹配的下联。'
            };
            
            displayCouplet(currentCouplet);
            addToHistory(currentCouplet);
        }
        
        function addToHistory(couplet) {
            // 避免重复
            const exists = history.some(h => h.upper === couplet.upper && h.lower === couplet.lower);
            if (!exists) {
                history.unshift(couplet);
                if (history.length > 5) history.pop();
                renderHistory();
            }
        }
        
        function renderHistory() {
            const list = document.getElementById('historyList');
            list.textContent = '';
            
            if (history.length === 0) {
                const empty = document.createElement('div');
                empty.style.cssText = 'color: var(--text2); text-align: center; padding: 20px;';
                empty.textContent = '暂无历史记录';
                list.appendChild(empty);
                return;
            }
            
            history.forEach(couplet => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.onclick = () => {
                    currentCouplet = couplet;
                    displayCouplet(couplet);
                };
                
                const upper = document.createElement('div');
                upper.className = 'upper';
                upper.textContent = '上：' + couplet.upper;
                
                const lower = document.createElement('div');
                lower.className = 'lower';
                lower.textContent = '下：' + couplet.lower;
                
                item.appendChild(upper);
                item.appendChild(lower);
                list.appendChild(item);
            });
        }
        
        function copyCouplet() {
            if (!currentCouplet) return;
            
            const text = `上联：${currentCouplet.upper}\n下联：${currentCouplet.lower}\n横批：${currentCouplet.horizontal}`;
            navigator.clipboard.writeText(text).then(() => {
                alert('对联已复制到剪贴板');
            });
        }
        
        // 初始生成一副对联
        generate();
    </script>
</body>
</html>
