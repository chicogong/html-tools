<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ’åˆ—ç»„åˆè®¡ç®—å™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="æ’åˆ—ç»„åˆè®¡ç®—å™¨ - WebUtils" />
    <meta name="keywords" content="permutation,calculator,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/calculator/permutation.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="æ’åˆ—ç»„åˆè®¡ç®—å™¨ - WebUtils" />
    <meta property="og:description" content="æ’åˆ—ç»„åˆè®¡ç®—å™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/calculator/permutation.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="æ’åˆ—ç»„åˆè®¡ç®—å™¨ - WebUtils" />
    <meta name="twitter:description" content="æ’åˆ—ç»„åˆè®¡ç®—å™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      :root {
        --spacing-sm: 0.5rem;
        --spacing-md: 1rem;
        --spacing-lg: 1.5rem;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: var(--spacing-lg);
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-lg);
      }
      .grid-inputs {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-md);
      }
      .result-box {
        background: var(--pico-primary-focus);
        border: 2px solid var(--pico-primary);
        border-radius: var(--pico-border-radius);
        padding: var(--spacing-lg);
        text-align: center;
        margin: var(--spacing-md) 0;
      }
      .result-box h2 {
        margin: 0;
        font-size: 2rem;
        word-break: break-all;
      }
      .result-box p {
        margin: var(--spacing-sm) 0 0 0;
        color: var(--pico-muted-color);
      }
      .btn-group {
        display: flex;
        gap: var(--spacing-sm);
        flex-wrap: wrap;
        margin-top: var(--spacing-md);
      }
      .theme-toggle {
        cursor: pointer;
        background: none;
        border: none;
        font-size: 1.5rem;
        padding: 0.5rem;
      }
      .tabs {
        display: flex;
        gap: var(--spacing-sm);
        border-bottom: 2px solid var(--pico-muted-border-color);
        margin-bottom: var(--spacing-md);
        flex-wrap: wrap;
      }
      .tab {
        padding: var(--spacing-sm) var(--spacing-md);
        cursor: pointer;
        border: none;
        background: none;
        border-bottom: 2px solid transparent;
        margin-bottom: -2px;
      }
      .tab.active {
        border-bottom-color: var(--pico-primary);
        color: var(--pico-primary);
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      .formula-box {
        background: var(--pico-card-background-color);
        border: 1px solid var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-md);
        font-family: var(--font-mono);
      }
      .formula-title {
        font-weight: bold;
        margin-bottom: var(--spacing-sm);
        color: var(--pico-primary);
      }
      .example-box {
        background: var(--pico-card-background-color);
        border-left: 3px solid var(--pico-primary);
        padding: var(--spacing-md);
        margin-top: var(--spacing-md);
      }
      .example-title {
        font-weight: bold;
        margin-bottom: var(--spacing-sm);
      }
      .step-box {
        background: var(--pico-card-background-color);
        border: 1px solid var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
        padding: var(--spacing-md);
        margin-top: var(--spacing-md);
        font-family: var(--font-mono);
        white-space: pre-wrap;
        overflow-x: auto;
      }
      .quick-calc {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-md);
      }
      .quick-btn {
        padding: 0.5rem;
        text-align: center;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      æ’åˆ—ç»„åˆè®¡ç®—å™¨
    </nav>
    <main class="container">
      <div class="header">
        <h1>æ’åˆ—ç»„åˆè®¡ç®—å™¨</h1>
        <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>
      </div>

      <article>
        <div class="tabs">
          <button class="tab active" onclick="switchTab('permutation')">æ’åˆ— P(n,r)</button>
          <button class="tab" onclick="switchTab('combination')">ç»„åˆ C(n,r)</button>
          <button class="tab" onclick="switchTab('factorial')">é˜¶ä¹˜ n!</button>
          <button class="tab" onclick="switchTab('multi')">å¤šé‡æ’åˆ—/ç»„åˆ</button>
          <button class="tab" onclick="switchTab('circular')">åœ†æ’åˆ—</button>
        </div>

        <!-- Permutation Tab -->
        <div id="permutation-tab" class="tab-content active">
          <div class="formula-box">
            <div class="formula-title">æ’åˆ—å…¬å¼ P(n,r) = n! / (n-r)!</div>
            <div>ä»nä¸ªä¸åŒå…ƒç´ ä¸­å–å‡ºrä¸ªå…ƒç´ çš„æ’åˆ—æ•°ï¼ˆè€ƒè™‘é¡ºåºï¼‰</div>
          </div>

          <div class="grid-inputs">
            <label>
              æ€»å…ƒç´ æ•° (n)
              <input type="number" id="permN" value="5" min="0" max="170" />
            </label>
            <label>
              å–å‡ºå…ƒç´ æ•° (r)
              <input type="number" id="permR" value="3" min="0" max="170" />
            </label>
          </div>

          <label>
            <input type="checkbox" id="permRepeat" />
            å…è®¸é‡å¤ (å¯é‡å¤æ’åˆ—: n^r)
          </label>

          <div class="btn-group">
            <button onclick="calculatePermutation()">è®¡ç®—æ’åˆ—</button>
            <button class="secondary" onclick="clearPermutation()">æ¸…ç©º</button>
          </div>

          <div class="example-box">
            <div class="example-title">åº”ç”¨åœºæ™¯</div>
            <ul>
              <li>ä»5äººä¸­é€‰3äººæ’é˜Ÿï¼šP(5,3) = 60ç§</li>
              <li>4ä½æ•°å¯†ç ï¼ˆ0-9å¯é‡å¤ï¼‰ï¼š10^4 = 10000ç§</li>
              <li>èµ›è·‘å‰ä¸‰åæ’åï¼šP(n,3)</li>
            </ul>
          </div>
        </div>

        <!-- Combination Tab -->
        <div id="combination-tab" class="tab-content">
          <div class="formula-box">
            <div class="formula-title">ç»„åˆå…¬å¼ C(n,r) = n! / (r! Ã— (n-r)!)</div>
            <div>ä»nä¸ªä¸åŒå…ƒç´ ä¸­å–å‡ºrä¸ªå…ƒç´ çš„ç»„åˆæ•°ï¼ˆä¸è€ƒè™‘é¡ºåºï¼‰</div>
          </div>

          <div class="grid-inputs">
            <label>
              æ€»å…ƒç´ æ•° (n)
              <input type="number" id="combN" value="5" min="0" max="1000" />
            </label>
            <label>
              å–å‡ºå…ƒç´ æ•° (r)
              <input type="number" id="combR" value="3" min="0" max="1000" />
            </label>
          </div>

          <label>
            <input type="checkbox" id="combRepeat" />
            å…è®¸é‡å¤ (å¯é‡å¤ç»„åˆ: C(n+r-1, r))
          </label>

          <div class="btn-group">
            <button onclick="calculateCombination()">è®¡ç®—ç»„åˆ</button>
            <button class="secondary" onclick="clearCombination()">æ¸…ç©º</button>
          </div>

          <div class="example-box">
            <div class="example-title">åº”ç”¨åœºæ™¯</div>
            <ul>
              <li>ä»5äººä¸­é€‰3äººç»„é˜Ÿï¼šC(5,3) = 10ç§</li>
              <li>å½©ç¥¨é€‰å·ï¼ˆä»45é€‰6ï¼‰ï¼šC(45,6) = 8,145,060ç§</li>
              <li>æ‰‘å…‹ç‰ŒæŠ½5å¼ ï¼šC(52,5) = 2,598,960ç§</li>
            </ul>
          </div>
        </div>

        <!-- Factorial Tab -->
        <div id="factorial-tab" class="tab-content">
          <div class="formula-box">
            <div class="formula-title">é˜¶ä¹˜å…¬å¼ n! = n Ã— (n-1) Ã— (n-2) Ã— ... Ã— 2 Ã— 1</div>
            <div>nä¸ªä¸åŒå…ƒç´ çš„å…¨æ’åˆ—æ•°</div>
          </div>

          <div class="grid-inputs">
            <label>
              æ•°å€¼ (n)
              <input type="number" id="factN" value="5" min="0" max="170" />
            </label>
          </div>

          <label>å¸¸ç”¨é˜¶ä¹˜å€¼</label>
          <div class="quick-calc">
            <button class="quick-btn secondary" onclick="quickFactorial(5)">5!</button>
            <button class="quick-btn secondary" onclick="quickFactorial(10)">10!</button>
            <button class="quick-btn secondary" onclick="quickFactorial(20)">20!</button>
            <button class="quick-btn secondary" onclick="quickFactorial(50)">50!</button>
            <button class="quick-btn secondary" onclick="quickFactorial(100)">100!</button>
          </div>

          <div class="btn-group">
            <button onclick="calculateFactorial()">è®¡ç®—é˜¶ä¹˜</button>
            <button class="secondary" onclick="clearFactorial()">æ¸…ç©º</button>
          </div>
        </div>

        <!-- Multi-permutation Tab -->
        <div id="multi-tab" class="tab-content">
          <div class="formula-box">
            <div class="formula-title">å¤šé‡æ’åˆ—å…¬å¼</div>
            <div>n! / (n1! Ã— n2! Ã— ... Ã— nk!)</div>
            <div>nä¸ªå…ƒç´ ä¸­æœ‰é‡å¤å…ƒç´ çš„æ’åˆ—æ•°</div>
          </div>

          <div class="grid-inputs">
            <label>
              æ€»å…ƒç´ æ•° (n)
              <input type="number" id="multiN" value="5" min="1" max="170" />
            </label>
          </div>

          <label>
            å„ç±»å…ƒç´ ä¸ªæ•°ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰
            <input type="text" id="multiCounts" value="2,2,1" placeholder="ä¾‹å¦‚: 2,2,1" />
          </label>
          <p style="font-size: 0.875rem; color: var(--pico-muted-color)">
            ä¾‹å¦‚: AABBC å…±5ä¸ªå…ƒç´ ï¼ŒAæœ‰2ä¸ªï¼ŒBæœ‰2ä¸ªï¼ŒCæœ‰1ä¸ªï¼Œè¾“å…¥: 2,2,1
          </p>

          <div class="btn-group">
            <button onclick="calculateMulti()">è®¡ç®—å¤šé‡æ’åˆ—</button>
            <button class="secondary" onclick="clearMulti()">æ¸…ç©º</button>
          </div>

          <div class="example-box">
            <div class="example-title">åº”ç”¨åœºæ™¯</div>
            <ul>
              <li>MISSISSIPPIçš„æ’åˆ—æ•°ï¼š11!/(4!Ã—4!Ã—2!Ã—1!) = 34,650ç§</li>
              <li>åˆ†é…ç›¸åŒç‰©å“ç»™ä¸åŒäºº</li>
            </ul>
          </div>
        </div>

        <!-- Circular Permutation Tab -->
        <div id="circular-tab" class="tab-content">
          <div class="formula-box">
            <div class="formula-title">åœ†æ’åˆ—å…¬å¼ = (n-1)!</div>
            <div>nä¸ªä¸åŒå…ƒç´ å›´æˆä¸€åœˆçš„æ’åˆ—æ•°</div>
          </div>

          <div class="grid-inputs">
            <label>
              å…ƒç´ æ•° (n)
              <input type="number" id="circularN" value="5" min="1" max="170" />
            </label>
          </div>

          <label>
            <input type="checkbox" id="circularNecklace" />
            é¡¹é“¾é—®é¢˜ï¼ˆè€ƒè™‘ç¿»è½¬å¯¹ç§°ï¼Œé™¤ä»¥2ï¼‰
          </label>

          <div class="btn-group">
            <button onclick="calculateCircular()">è®¡ç®—åœ†æ’åˆ—</button>
            <button class="secondary" onclick="clearCircular()">æ¸…ç©º</button>
          </div>

          <div class="example-box">
            <div class="example-title">åº”ç”¨åœºæ™¯</div>
            <ul>
              <li>5äººå›´åœ†æ¡Œåçš„æ–¹å¼ï¼š(5-1)! = 24ç§</li>
              <li>é¡¹é“¾ç å­æ’åˆ—ï¼ˆå¯ç¿»è½¬ï¼‰ï¼š(n-1)!/2</li>
            </ul>
          </div>
        </div>

        <div class="result-box">
          <h2 id="result">--</h2>
          <p id="resultDetail">è¾“å…¥æ•°å€¼å¹¶ç‚¹å‡»è®¡ç®—</p>
        </div>

        <div class="step-box" id="steps" style="display: none"></div>
      </article>
    </main>

    <script>
      window.toggleTheme = function () {
        const html = document.documentElement;
        const current = html.getAttribute("data-theme");
        html.setAttribute("data-theme", current === "light" ? "dark" : "light");
      };

      window.switchTab = function (tabName) {
        document.querySelectorAll(".tab").forEach(function (t) {
          t.classList.remove("active");
        });
        document.querySelectorAll(".tab-content").forEach(function (c) {
          c.classList.remove("active");
        });
        document
          .querySelector("[onclick=\"switchTab('" + tabName + "')\"]")
          .classList.add("active");
        document.getElementById(tabName + "-tab").classList.add("active");
        document.getElementById("steps").style.display = "none";
      };

      // BigInt factorial for large numbers
      window.factorial = function (n) {
        if (n < 0) return BigInt(0);
        if (n <= 1) return BigInt(1);
        let result = BigInt(1);
        for (let i = 2; i <= n; i++) {
          result *= BigInt(i);
        }
        return result;
      };

      function formatBigNumber(num) {
        const str = num.toString();
        if (str.length <= 20) {
          return str.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        return str.slice(0, 10) + "..." + str.slice(-5) + " (" + str.length + "ä½æ•°)";
      }

      window.calculatePermutation = function () {
        const n = parseInt(document.getElementById("permN").value) || 0;
        const r = parseInt(document.getElementById("permR").value) || 0;
        const repeat = document.getElementById("permRepeat").checked;

        if (r > n && !repeat) {
          alert("å–å‡ºå…ƒç´ æ•°ä¸èƒ½å¤§äºæ€»å…ƒç´ æ•°");
          return;
        }

        let result, steps;

        if (repeat) {
          result = BigInt(n) ** BigInt(r);
          steps = "Pé‡å¤(" + n + "," + r + ") = " + n + "^" + r + "\n= " + formatBigNumber(result);
        } else {
          result = factorial(n) / factorial(n - r);
          steps = "P(" + n + "," + r + ") = " + n + "! / (" + n + "-" + r + ")!\n";
          steps += "= " + n + "! / " + (n - r) + "!\n";
          steps +=
            "= " + formatBigNumber(factorial(n)) + " / " + formatBigNumber(factorial(n - r)) + "\n";
          steps += "= " + formatBigNumber(result);
        }

        document.getElementById("result").textContent = formatBigNumber(result);
        document.getElementById("resultDetail").textContent = repeat
          ? "å¯é‡å¤æ’åˆ— " + n + "^" + r
          : "æ’åˆ— P(" + n + "," + r + ")";
        document.getElementById("steps").textContent = steps;
        document.getElementById("steps").style.display = "block";
      };

      window.clearPermutation = function () {
        document.getElementById("permN").value = 5;
        document.getElementById("permR").value = 3;
        document.getElementById("permRepeat").checked = false;
        document.getElementById("result").textContent = "--";
        document.getElementById("resultDetail").textContent = "è¾“å…¥æ•°å€¼å¹¶ç‚¹å‡»è®¡ç®—";
        document.getElementById("steps").style.display = "none";
      };

      window.calculateCombination = function () {
        const n = parseInt(document.getElementById("combN").value) || 0;
        const r = parseInt(document.getElementById("combR").value) || 0;
        const repeat = document.getElementById("combRepeat").checked;

        if (r > n && !repeat) {
          alert("å–å‡ºå…ƒç´ æ•°ä¸èƒ½å¤§äºæ€»å…ƒç´ æ•°");
          return;
        }

        let result, steps;

        if (repeat) {
          // C(n+r-1, r)
          const m = n + r - 1;
          result = factorial(m) / (factorial(r) * factorial(m - r));
          steps = "Cé‡å¤(" + n + "," + r + ") = C(" + n + "+" + r + "-1, " + r + ")\n";
          steps += "= C(" + m + "," + r + ")\n";
          steps += "= " + m + "! / (" + r + "! Ã— " + (m - r) + "!)\n";
          steps += "= " + formatBigNumber(result);
        } else {
          result = factorial(n) / (factorial(r) * factorial(n - r));
          steps = "C(" + n + "," + r + ") = " + n + "! / (" + r + "! Ã— (" + n + "-" + r + ")!)\n";
          steps += "= " + n + "! / (" + r + "! Ã— " + (n - r) + "!)\n";
          steps += "= " + formatBigNumber(result);
        }

        document.getElementById("result").textContent = formatBigNumber(result);
        document.getElementById("resultDetail").textContent = repeat
          ? "å¯é‡å¤ç»„åˆ C(" + (n + r - 1) + "," + r + ")"
          : "ç»„åˆ C(" + n + "," + r + ")";
        document.getElementById("steps").textContent = steps;
        document.getElementById("steps").style.display = "block";
      };

      window.clearCombination = function () {
        document.getElementById("combN").value = 5;
        document.getElementById("combR").value = 3;
        document.getElementById("combRepeat").checked = false;
        document.getElementById("result").textContent = "--";
        document.getElementById("resultDetail").textContent = "è¾“å…¥æ•°å€¼å¹¶ç‚¹å‡»è®¡ç®—";
        document.getElementById("steps").style.display = "none";
      };

      function calculateFactorial() {
        const n = parseInt(document.getElementById("factN").value) || 0;

        if (n > 170) {
          alert("æ•°å€¼è¿‡å¤§ï¼Œè¯·è¾“å…¥170ä»¥å†…çš„æ•°");
          return;
        }

        const result = factorial(n);
        let steps = n + "! = ";

        if (n <= 10) {
          const parts = [];
          for (let i = n; i >= 1; i--) {
            parts.push(i);
          }
          steps += parts.join(" Ã— ") + "\n";
        } else {
          steps += n + " Ã— " + (n - 1) + " Ã— ... Ã— 2 Ã— 1\n";
        }
        steps += "= " + formatBigNumber(result);

        document.getElementById("result").textContent = formatBigNumber(result);
        document.getElementById("resultDetail").textContent = n + "! é˜¶ä¹˜";
        document.getElementById("steps").textContent = steps;
        document.getElementById("steps").style.display = "block";
      }

      window.quickFactorial = function (n) {
        document.getElementById("factN").value = n;
        calculateFactorial();
      };

      window.clearFactorial = function () {
        document.getElementById("factN").value = 5;
        document.getElementById("result").textContent = "--";
        document.getElementById("resultDetail").textContent = "è¾“å…¥æ•°å€¼å¹¶ç‚¹å‡»è®¡ç®—";
        document.getElementById("steps").style.display = "none";
      };

      window.calculateMulti = function () {
        const n = parseInt(document.getElementById("multiN").value) || 0;
        const countsStr = document.getElementById("multiCounts").value;
        const counts = countsStr.split(",").map(function (s) {
          return parseInt(s.trim()) || 0;
        });

        const sum = counts.reduce(function (a, b) {
          return a + b;
        }, 0);
        if (sum !== n) {
          alert("å„ç±»å…ƒç´ ä¸ªæ•°ä¹‹å’Œ (" + sum + ") å¿…é¡»ç­‰äºæ€»å…ƒç´ æ•° (" + n + ")");
          return;
        }

        let denominator = BigInt(1);
        counts.forEach(function (c) {
          denominator *= factorial(c);
        });

        const result = factorial(n) / denominator;

        let steps =
          "å¤šé‡æ’åˆ— = " +
          n +
          "! / (" +
          counts
            .map(function (c) {
              return c + "!";
            })
            .join(" Ã— ") +
          ")\n";
        steps += "= " + formatBigNumber(factorial(n)) + " / " + formatBigNumber(denominator) + "\n";
        steps += "= " + formatBigNumber(result);

        document.getElementById("result").textContent = formatBigNumber(result);
        document.getElementById("resultDetail").textContent = "å¤šé‡æ’åˆ—";
        document.getElementById("steps").textContent = steps;
        document.getElementById("steps").style.display = "block";
      };

      window.clearMulti = function () {
        document.getElementById("multiN").value = 5;
        document.getElementById("multiCounts").value = "2,2,1";
        document.getElementById("result").textContent = "--";
        document.getElementById("resultDetail").textContent = "è¾“å…¥æ•°å€¼å¹¶ç‚¹å‡»è®¡ç®—";
        document.getElementById("steps").style.display = "none";
      };

      window.calculateCircular = function () {
        const n = parseInt(document.getElementById("circularN").value) || 1;
        const necklace = document.getElementById("circularNecklace").checked;

        let result = factorial(n - 1);
        let steps = "åœ†æ’åˆ— = (" + n + "-1)! = " + (n - 1) + "!\n";

        if (necklace) {
          result = result / BigInt(2);
          steps += "é¡¹é“¾é—®é¢˜ï¼ˆè€ƒè™‘ç¿»è½¬ï¼‰= " + (n - 1) + "! / 2\n";
        }

        steps += "= " + formatBigNumber(result);

        document.getElementById("result").textContent = formatBigNumber(result);
        document.getElementById("resultDetail").textContent = necklace ? "é¡¹é“¾æ’åˆ—" : "åœ†æ’åˆ—";
        document.getElementById("steps").textContent = steps;
        document.getElementById("steps").style.display = "block";
      };

      window.clearCircular = function () {
        document.getElementById("circularN").value = 5;
        document.getElementById("circularNecklace").checked = false;
        document.getElementById("result").textContent = "--";
        document.getElementById("resultDetail").textContent = "è¾“å…¥æ•°å€¼å¹¶ç‚¹å‡»è®¡ç®—";
        document.getElementById("steps").style.display = "none";
      };
    </script>
  </body>
</html>
