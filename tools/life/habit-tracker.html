<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹ æƒ¯è¿½è¸ª</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; min-height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        h1 { text-align: center; margin-bottom: 20px; }
        .add-habit { display: flex; gap: 10px; margin-bottom: 20px; }
        .add-habit input { flex: 1; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; }
        .add-habit button { padding: 12px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; }
        .habit { display: flex; align-items: center; padding: 15px; background: #f7fafc; border-radius: 10px; margin-bottom: 10px; }
        .habit-check { width: 30px; height: 30px; border: 2px solid #667eea; border-radius: 50%; cursor: pointer; margin-right: 15px; display: flex; align-items: center; justify-content: center; }
        .habit-check.done { background: #667eea; color: white; }
        .habit-name { flex: 1; }
        .habit-streak { font-size: 0.9rem; color: #666; margin-right: 10px; }
        .habit-delete { background: none; border: none; color: #e53e3e; cursor: pointer; font-size: 1.2rem; }
        .date { text-align: center; color: #666; margin-bottom: 20px; }
    
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
    <nav class="breadcrumb"><a href="../../index.html">é¦–é¡µ</a><span>â€º</span><a href="../../index.html#life">ç”Ÿæ´»å·¥å…·</a><span>â€º</span>ä¹ æƒ¯è¿½è¸ªå™¨</nav>
    <div class="container">
        <h1>âœ… ä¹ æƒ¯è¿½è¸ª</h1>
        <div class="date" id="date"></div>
        <div class="add-habit">
            <input type="text" id="newHabit" placeholder="æ·»åŠ æ–°ä¹ æƒ¯...">
            <button onclick="addHabit()">æ·»åŠ </button>
        </div>
        <div id="habits"></div>
    </div>
    <script>
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').textContent = new Date().toLocaleDateString('zh-CN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        let habits = JSON.parse(localStorage.getItem('habits') || '[]');
        function save() { localStorage.setItem('habits', JSON.stringify(habits)); }
        function render() {
            document.getElementById('habits').innerHTML = habits.map((h, i) => {
                const done = h.completedDates && h.completedDates.includes(today);
                return '<div class="habit"><div class="habit-check ' + (done ? 'done' : '') + '" onclick="toggle(' + i + ')">' + (done ? 'âœ“' : '') + '</div><span class="habit-name">' + h.name + '</span><span class="habit-streak">ðŸ”¥ ' + (h.streak || 0) + '</span><button class="habit-delete" onclick="remove(' + i + ')">Ã—</button></div>';
            }).join('');
        }
        function addHabit() {
            const name = document.getElementById('newHabit').value.trim();
            if (name) { habits.push({ name, streak: 0, completedDates: [] }); save(); render(); document.getElementById('newHabit').value = ''; }
        }
        function toggle(i) {
            if (!habits[i].completedDates) habits[i].completedDates = [];
            const idx = habits[i].completedDates.indexOf(today);
            if (idx > -1) { habits[i].completedDates.splice(idx, 1); habits[i].streak = Math.max(0, (habits[i].streak || 1) - 1); }
            else { habits[i].completedDates.push(today); habits[i].streak = (habits[i].streak || 0) + 1; }
            save(); render();
        }
        function remove(i) { habits.splice(i, 1); save(); render(); }
        document.getElementById('newHabit').onkeypress = e => { if (e.key === 'Enter') addHabit(); };
        render();
    </script>
</body>
</html>