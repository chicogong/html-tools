<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNSæŸ¥è¯¢</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { color: white; text-align: center; margin-bottom: 20px; }
        .card { background: white; border-radius: 20px; padding: 28px; box-shadow: 0 15px 50px rgba(0,0,0,0.2); margin-bottom: 20px; }
        .search-box { display: flex; gap: 12px; margin-bottom: 16px; }
        .search-box input { flex: 1; padding: 16px; font-size: 16px; border: 2px solid #e0e0e0; border-radius: 12px; }
        .search-box input:focus { outline: none; border-color: #11998e; }
        .btn { padding: 16px 32px; background: linear-gradient(135deg, #11998e, #38ef7d); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; }
        .btn:hover { transform: translateY(-2px); }
        .record-types { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
        .type-btn { padding: 8px 16px; background: #f0f0f0; border: 2px solid transparent; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 500; }
        .type-btn:hover { background: #e0e0e0; }
        .type-btn.active { background: #11998e; color: white; }
        .results { margin-top: 20px; }
        .result-section { margin-bottom: 20px; }
        .result-section h3 { color: #11998e; margin-bottom: 12px; font-size: 16px; display: flex; align-items: center; gap: 8px; }
        .record { background: #f8f8f8; border-radius: 10px; padding: 14px; margin-bottom: 8px; font-family: monospace; font-size: 13px; }
        .record-type { display: inline-block; background: #11998e; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px; margin-right: 8px; }
        .record-value { color: #333; word-break: break-all; }
        .record-ttl { color: #999; font-size: 12px; margin-top: 4px; }
        .loading { text-align: center; padding: 40px; color: #666; }
        .error { background: #ffebee; color: #c62828; padding: 16px; border-radius: 12px; }
        .info-box { background: #e8f5e9; border-radius: 12px; padding: 16px; margin-top: 20px; }
        .info-box h4 { color: #2e7d32; margin-bottom: 8px; }
        .info-box p { color: #666; font-size: 13px; line-height: 1.6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” DNSæŸ¥è¯¢å·¥å…·</h1>
        <div class="card">
            <div class="search-box">
                <input type="text" id="domainInput" placeholder="è¾“å…¥åŸŸåï¼Œå¦‚ example.com" value="google.com">
                <button class="btn" onclick="lookupDNS()">æŸ¥è¯¢</button>
            </div>
            <div class="record-types">
                <button class="type-btn active" data-type="A">A</button>
                <button class="type-btn active" data-type="AAAA">AAAA</button>
                <button class="type-btn active" data-type="CNAME">CNAME</button>
                <button class="type-btn active" data-type="MX">MX</button>
                <button class="type-btn active" data-type="NS">NS</button>
                <button class="type-btn" data-type="TXT">TXT</button>
                <button class="type-btn" data-type="SOA">SOA</button>
            </div>
            <div class="results" id="results"></div>
            <div class="info-box">
                <h4>ğŸ“š DNSè®°å½•ç±»å‹è¯´æ˜</h4>
                <p>
                    <strong>A</strong>: IPv4åœ°å€è®°å½• | 
                    <strong>AAAA</strong>: IPv6åœ°å€è®°å½• | 
                    <strong>CNAME</strong>: åˆ«åè®°å½• | 
                    <strong>MX</strong>: é‚®ä»¶æœåŠ¡å™¨ | 
                    <strong>NS</strong>: åŸŸåæœåŠ¡å™¨ | 
                    <strong>TXT</strong>: æ–‡æœ¬è®°å½• | 
                    <strong>SOA</strong>: èµ·å§‹æˆæƒè®°å½•
                </p>
            </div>
        </div>
    </div>
    <script>
        // Toggle record type selection
        document.querySelectorAll('.type-btn').forEach(btn => {
            btn.onclick = () => btn.classList.toggle('active');
        });
        
        async function lookupDNS() {
            const domain = document.getElementById('domainInput').value.trim();
            if (!domain) {
                alert('è¯·è¾“å…¥åŸŸå');
                return;
            }
            
            // Remove protocol if present
            const cleanDomain = domain.replace(/^https?:\/\//, '').replace(/\/.*$/, '');
            
            const types = Array.from(document.querySelectorAll('.type-btn.active'))
                .map(btn => btn.dataset.type);
            
            if (types.length === 0) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ç§è®°å½•ç±»å‹');
                return;
            }
            
            document.getElementById('results').innerHTML = '<div class="loading">ğŸ”„ æ­£åœ¨æŸ¥è¯¢...</div>';
            
            const results = {};
            
            // Use Cloudflare DNS over HTTPS API
            for (const type of types) {
                try {
                    const response = await fetch(`https://cloudflare-dns.com/dns-query?name=${cleanDomain}&type=${type}`, {
                        headers: {
                            'Accept': 'application/dns-json'
                        }
                    });
                    const data = await response.json();
                    
                    if (data.Answer && data.Answer.length > 0) {
                        results[type] = data.Answer;
                    }
                } catch (e) {
                    console.error(`Error fetching ${type}:`, e);
                }
            }
            
            displayResults(results, cleanDomain);
        }
        
        function displayResults(results, domain) {
            if (Object.keys(results).length === 0) {
                document.getElementById('results').innerHTML = `
                    <div class="error">
                        æœªæ‰¾åˆ° ${domain} çš„DNSè®°å½•ï¼Œæˆ–æŸ¥è¯¢å¤±è´¥ã€‚è¯·æ£€æŸ¥åŸŸåæ˜¯å¦æ­£ç¡®ã€‚
                    </div>
                `;
                return;
            }
            
            const typeNames = {
                1: 'A',
                28: 'AAAA',
                5: 'CNAME',
                15: 'MX',
                2: 'NS',
                16: 'TXT',
                6: 'SOA'
            };
            
            const typeEmojis = {
                'A': 'ğŸ”¢',
                'AAAA': 'ğŸŒ',
                'CNAME': 'ğŸ”—',
                'MX': 'ğŸ“§',
                'NS': 'ğŸ–¥ï¸',
                'TXT': 'ğŸ“',
                'SOA': 'ğŸ“‹'
            };
            
            let html = `<div style="margin-bottom: 16px; color: #666;">æŸ¥è¯¢åŸŸå: <strong>${domain}</strong></div>`;
            
            for (const [type, records] of Object.entries(results)) {
                html += `
                    <div class="result-section">
                        <h3>${typeEmojis[type] || 'ğŸ“„'} ${type} è®°å½• (${records.length}æ¡)</h3>
                `;
                
                records.forEach(record => {
                    const recordType = typeNames[record.type] || type;
                    html += `
                        <div class="record">
                            <span class="record-type">${recordType}</span>
                            <span class="record-value">${formatRecordData(record.data, type)}</span>
                            <div class="record-ttl">TTL: ${record.TTL}ç§’ (${formatTTL(record.TTL)})</div>
                        </div>
                    `;
                });
                
                html += '</div>';
            }
            
            document.getElementById('results').innerHTML = html;
        }
        
        function formatRecordData(data, type) {
            // Clean up the data
            if (typeof data === 'string') {
                // Remove surrounding quotes from TXT records
                if (data.startsWith('"') && data.endsWith('"')) {
                    data = data.slice(1, -1);
                }
            }
            return data;
        }
        
        function formatTTL(seconds) {
            if (seconds < 60) return `${seconds}ç§’`;
            if (seconds < 3600) return `${Math.floor(seconds / 60)}åˆ†é’Ÿ`;
            if (seconds < 86400) return `${Math.floor(seconds / 3600)}å°æ—¶`;
            return `${Math.floor(seconds / 86400)}å¤©`;
        }
    </script>
</body>
</html>