<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Â∏ñÂ≠êÈïøÂ∫¶Ê£ÄÊü•Âô® - WebUtils</title>
    <meta name="description" content="Ê£ÄÊü•Â∏ñÂ≠êÈïøÂ∫¶ÊòØÂê¶Á¨¶ÂêàÂêÑÂπ≥Âè∞ÈôêÂà∂" />
    <meta name="keywords" content="Â≠óÊï∞ÁªüËÆ° Â∏ñÂ≠êÈïøÂ∫¶ Á§æ‰∫§Â™í‰Ωì character count" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-pink: #f72585;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;

        /* Â≠ó‰ΩìÂèòÈáè */
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
      }
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
          linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
        z-index: 0;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 24px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      .header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
      }
      .breadcrumb a {
        color: var(--color-text-secondary);
        text-decoration: none;
        transition: color 0.2s ease;
      }
      .breadcrumb a:hover {
        color: var(--color-accent-cyan);
      }
      .breadcrumb-separator {
        color: var(--color-text-muted);
      }
      .breadcrumb-current {
        color: var(--color-text-primary);
        font-weight: 500;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }
      .title-section {
        flex: 1;
      }
      .title-section h1 {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .title-icon {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: #fff;
      }
      .title-section .desc {
        font-size: 0.9rem;
        color: var(--color-text-secondary);
        margin-top: 4px;
      }
      .main-card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
        flex: 1;
      }
      .input-section {
        margin-bottom: 24px;
      }
      .input-section label {
        display: block;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 8px;
      }
      textarea {
        width: 100%;
        min-height: 200px;
        padding: 16px;
        font-family: var(--font-mono);
        font-size: 0.95rem;
        line-height: 1.6;
        background: var(--bg-input);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--color-text-primary);
        resize: vertical;
        transition: all 0.2s;
      }
      textarea:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
        box-shadow: 0 0 0 4px var(--glow-cyan);
      }
      textarea::placeholder {
        color: var(--color-text-muted);
      }
      .stats-bar {
        display: flex;
        gap: 24px;
        flex-wrap: wrap;
        padding: 16px;
        background: var(--color-bg-surface);
        border-radius: var(--radius-md);
        margin-bottom: 24px;
      }
      .stat {
        display: flex;
        flex-direction: column;
      }
      .stat-value {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-accent-cyan);
      }
      .stat-label {
        font-size: 0.75rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
      }
      .platforms-section {
        margin-top: 24px;
      }
      .platforms-label {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 16px;
      }
      .platform-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 16px;
      }
      .platform-card {
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 16px;
        transition: all 0.2s;
      }
      .platform-card.valid {
        border-color: var(--accent-green);
      }
      .platform-card.warning {
        border-color: var(--accent-yellow);
      }
      .platform-card.invalid {
        border-color: var(--accent-red);
      }
      .platform-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }
      .platform-name {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .platform-icon {
        width: 24px;
        height: 24px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: #fff;
      }
      .platform-icon.twitter {
        background: #1da1f2;
      }
      .platform-icon.instagram {
        background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
      }
      .platform-icon.tiktok {
        background: #000;
      }
      .platform-icon.weibo {
        background: #e6162d;
      }
      .platform-icon.xiaohongshu {
        background: #fe2c55;
      }
      .platform-icon.linkedin {
        background: #0a66c2;
      }
      .platform-icon.facebook {
        background: #1877f2;
      }
      .platform-icon.threads {
        background: #000;
      }
      .platform-status {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        padding: 4px 10px;
        border-radius: 12px;
      }
      .platform-status.valid {
        background: rgb(16, 185, 129, 0.2);
        color: var(--accent-green);
      }
      .platform-status.warning {
        background: rgb(251, 191, 36, 0.2);
        color: var(--accent-yellow);
      }
      .platform-status.invalid {
        background: rgb(244, 63, 94, 0.2);
        color: var(--accent-red);
      }
      .platform-progress {
        margin-bottom: 8px;
      }
      .progress-bar {
        height: 6px;
        background: var(--bg-input);
        border-radius: 3px;
        overflow: hidden;
      }
      .progress-fill {
        height: 100%;
        border-radius: 3px;
        transition: width 0.3s ease;
      }
      .progress-fill.valid {
        background: var(--accent-green);
      }
      .progress-fill.warning {
        background: var(--accent-yellow);
      }
      .progress-fill.invalid {
        background: var(--accent-red);
      }
      .platform-info {
        display: flex;
        justify-content: space-between;
        font-family: var(--font-mono);
        font-size: 0.75rem;
        color: var(--color-text-muted);
      }
      .toolbar {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 24px;
        padding-top: 20px;
        border-top: 1px solid var(--border-subtle);
      }
      button {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        font-weight: 500;
        padding: 10px 16px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }
      button:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      footer {
        text-align: center;
        margin-top: 24px;
        padding-top: 16px;
        border-top: 1px solid var(--border-subtle);
      }
      footer p {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      footer a {
        color: var(--color-accent-cyan);
        text-decoration: none;
      }
      footer a:hover {
        color: var(--color-text-primary);
      }
      @media (max-width: 640px) {
        .container {
          padding: 16px;
        }
        .header {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
        }
        .stats-bar {
          gap: 16px;
        }
        .platform-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-grid"></div>

    <div class="container">
      <div class="header">
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <a href="../../index.html">È¶ñÈ°µ</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">Â∏ñÂ≠êÈïøÂ∫¶Ê£ÄÊü•Âô®</span>
        </nav>
        <button class="theme-toggle" onclick="toggleTheme()" title="ÂàáÊç¢‰∏ªÈ¢ò">üåô</button>
        <div class="title-section">
          <h1>
            <span class="title-icon">üìè</span>
            Â∏ñÂ≠êÈïøÂ∫¶Ê£ÄÊü•Âô®
          </h1>
          <p class="desc">ÂÆûÊó∂Ê£ÄÊü•Â∏ñÂ≠êÈïøÂ∫¶ÊòØÂê¶Á¨¶ÂêàÂêÑÂπ≥Âè∞Â≠óÊï∞ÈôêÂà∂</p>
        </div>
      </div>

      <div class="main-card">
        <div class="input-section">
          <label>ËæìÂÖ•Â∏ñÂ≠êÂÜÖÂÆπ</label>
          <textarea id="content" placeholder="Âú®Ê≠§ËæìÂÖ•ÊàñÁ≤òË¥¥‰Ω†ÁöÑÂ∏ñÂ≠êÂÜÖÂÆπ..."></textarea>
        </div>

        <div class="stats-bar">
          <div class="stat">
            <div class="stat-value" id="charCount">0</div>
            <div class="stat-label">Â≠óÁ¨¶Êï∞</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="wordCount">0</div>
            <div class="stat-label">ËØçÊï∞</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="lineCount">0</div>
            <div class="stat-label">Ë°åÊï∞</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="emojiCount">0</div>
            <div class="stat-label">Ë°®ÊÉÖ</div>
          </div>
        </div>

        <div class="platforms-section">
          <div class="platforms-label">ÂêÑÂπ≥Âè∞ÂÖºÂÆπÊÄß</div>
          <div class="platform-grid" id="platformGrid"></div>
        </div>

        <div class="toolbar">
          <button id="btnPaste">Á≤òË¥¥</button>
          <button id="btnCopy">Â§çÂà∂</button>
          <button id="btnClear">Ê∏ÖÁ©∫</button>
        </div>
      </div>

      <footer>
        <p>
          <a href="https://github.com/nicogong/html-tools" target="_blank" rel="noreferrer">
            GitHub
          </a>
          <span>¬∑</span>
          <span>Á∫ØÂâçÁ´Ø ¬∑ Êó†ÊúçÂä°Âô®</span>
          <span>¬∑</span>
          <a href="../../index.html">WebUtils</a>
        </p>
      </footer>
    </div>

    <script>
      const contentEl = document.getElementById("content");
      const charCountEl = document.getElementById("charCount");
      const wordCountEl = document.getElementById("wordCount");
      const lineCountEl = document.getElementById("lineCount");
      const emojiCountEl = document.getElementById("emojiCount");
      const platformGridEl = document.getElementById("platformGrid");

      const LS_KEY = "post_length_v1";

      const platforms = [
        { id: "twitter", name: "Twitter/X", icon: "ùïè", limit: 280, warnAt: 250 },
        { id: "threads", name: "Threads", icon: "@", limit: 500, warnAt: 450 },
        { id: "instagram", name: "Instagram", icon: "üì∑", limit: 2200, warnAt: 2000 },
        { id: "facebook", name: "Facebook", icon: "f", limit: 63206, warnAt: 60000 },
        { id: "linkedin", name: "LinkedIn", icon: "in", limit: 3000, warnAt: 2700 },
        { id: "tiktok", name: "TikTok", icon: "‚ô™", limit: 2200, warnAt: 2000 },
        { id: "weibo", name: "ÂæÆÂçö", icon: "ÂæÆ", limit: 2000, warnAt: 1800 },
        { id: "xiaohongshu", name: "Â∞èÁ∫¢‰π¶", icon: "üìï", limit: 1000, warnAt: 900 }
      ];

      function updateStats() {
        const text = contentEl.value;

        // Character count
        const chars = text.length;
        charCountEl.textContent = chars;

        // Word count (English words + Chinese characters)
        const words = text.trim() ? text.trim().split(/[\s]+/).length : 0;
        const chineseChars = (text.match(/[\u4e00-\u9fa5]/g) || []).length;
        wordCountEl.textContent = words + chineseChars;

        // Line count
        const lines = text ? text.split("\n").length : 0;
        lineCountEl.textContent = lines;

        // Emoji count
        const emojiRegex =
          /[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu;
        const emojis = text.match(emojiRegex) || [];
        emojiCountEl.textContent = emojis.length;

        updatePlatforms(chars);
        saveToStorage();
      }

      function updatePlatforms(chars) {
        platformGridEl.textContent = "";

        for (const platform of platforms) {
          const card = document.createElement("div");
          card.className = "platform-card";

          let status, statusText;
          if (chars <= platform.warnAt) {
            status = "valid";
            statusText = "Á¨¶Âêà";
          } else if (chars <= platform.limit) {
            status = "warning";
            statusText = "Êé•Ëøë‰∏äÈôê";
          } else {
            status = "invalid";
            statusText = "Ë∂ÖÂá∫ÈôêÂà∂";
          }

          card.classList.add(status);

          const header = document.createElement("div");
          header.className = "platform-header";

          const name = document.createElement("div");
          name.className = "platform-name";

          const icon = document.createElement("span");
          icon.className = "platform-icon " + platform.id;
          icon.textContent = platform.icon;

          const nameText = document.createTextNode(platform.name);
          name.appendChild(icon);
          name.appendChild(nameText);

          const statusBadge = document.createElement("span");
          statusBadge.className = "platform-status " + status;
          statusBadge.textContent = statusText;

          header.appendChild(name);
          header.appendChild(statusBadge);

          const progress = document.createElement("div");
          progress.className = "platform-progress";

          const progressBar = document.createElement("div");
          progressBar.className = "progress-bar";

          const progressFill = document.createElement("div");
          progressFill.className = "progress-fill " + status;
          const percent = Math.min(100, (chars / platform.limit) * 100);
          progressFill.style.width = percent + "%";

          progressBar.appendChild(progressFill);
          progress.appendChild(progressBar);

          const info = document.createElement("div");
          info.className = "platform-info";

          const current = document.createElement("span");
          current.textContent = chars + " / " + platform.limit;

          const remaining = document.createElement("span");
          const rem = platform.limit - chars;
          remaining.textContent = rem >= 0 ? "Ââ©‰Ωô " + rem : "Ë∂ÖÂá∫ " + Math.abs(rem);

          info.appendChild(current);
          info.appendChild(remaining);

          card.appendChild(header);
          card.appendChild(progress);
          card.appendChild(info);
          platformGridEl.appendChild(card);
        }
      }

      function saveToStorage() {
        localStorage.setItem(LS_KEY, contentEl.value);
      }

      function loadFromStorage() {
        const saved = localStorage.getItem(LS_KEY);
        if (saved) {
          contentEl.value = saved;
          updateStats();
        }
      }

      contentEl.addEventListener("input", updateStats);

      document.getElementById("btnPaste").addEventListener("click", function () {
        navigator.clipboard
          .readText()
          .then(function (text) {
            contentEl.value = text;
            updateStats();
          })
          .catch(function () {
            alert("Êó†Ê≥ïËÆøÈóÆÂâ™Ë¥¥Êùø");
          });
      });

      document.getElementById("btnCopy").addEventListener("click", function () {
        if (contentEl.value) {
          navigator.clipboard.writeText(contentEl.value).then(function () {
            alert("Â∑≤Â§çÂà∂");
          });
        }
      });

      document.getElementById("btnClear").addEventListener("click", function () {
        contentEl.value = "";
        updateStats();
        localStorage.removeItem(LS_KEY);
      });

      loadFromStorage();
      if (!contentEl.value) {
        updateStats();
      }

      window.toggleTheme = function () {
        const html = document.documentElement;
        const btn = document.querySelector(".theme-toggle");
        const next = html.getAttribute("data-theme") === "light" ? "dark" : "light";
        html.setAttribute("data-theme", next);
        btn.textContent = next === "light" ? "‚òÄÔ∏è" : "üåô";
        localStorage.setItem("theme", next);
      };

      (function () {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.setAttribute("data-theme", saved);
          const btn = document.querySelector(".theme-toggle");
          if (btn) btn.textContent = saved === "light" ? "‚òÄÔ∏è" : "üåô";
        }
      })();
    </script>
  </body>
</html>
