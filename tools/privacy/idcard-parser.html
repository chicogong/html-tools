<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>èº«ä»½è¯å·ç è§£æ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="èº«ä»½è¯å·ç è§£æ - WebUtils" />
    <meta name="keywords" content="idcard-parser,privacy,tools" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/privacy/idcard-parser.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="èº«ä»½è¯å·ç è§£æ - WebUtils" />
    <meta property="og:description" content="èº«ä»½è¯å·ç è§£æ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/privacy/idcard-parser.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="èº«ä»½è¯å·ç è§£æ - WebUtils" />
    <meta name="twitter:description" content="èº«ä»½è¯å·ç è§£æ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <meta
      name="description"
      content="åœ¨çº¿è§£æä¸­å›½å±…æ°‘èº«ä»½è¯å·ç ï¼Œæå–çœå¸‚åŒºã€å‡ºç”Ÿæ—¥æœŸã€æ€§åˆ«ã€å¹´é¾„ç­‰ä¿¡æ¯"
    />
    <meta name="keywords" content="èº«ä»½è¯ è§£æ éªŒè¯ çœå¸‚ å‡ºç”Ÿæ—¥æœŸ æ€§åˆ« å¹´é¾„ idcard" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/privacy/idcard-parser.html" />

    <meta property="og:title" content="èº«ä»½è¯å·ç è§£æ - WebUtils" />
    <meta property="og:description" content="åœ¨çº¿è§£æä¸­å›½å±…æ°‘èº«ä»½è¯å·ç " />
    <meta property="og:type" content="website" />

    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-hover: #22222e;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #9898a4;
        --color-text-muted: #5c5c66;
        --accent-pink: #f472b6;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #ef4444;
        --accent-orange: #f59e0b;
        --border-subtle: #2a2a36;
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 14px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgba(244, 114, 182, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(244, 114, 182, 0.03) 1px, transparent 1px);
        background-size: 50px 50px;
        pointer-events: none;
        z-index: 0;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem 1.5rem;
      }
      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--color-text-secondary);
        text-decoration: none;
        font-size: 0.9rem;
        margin-bottom: 2rem;
        padding: 0.5rem 0.75rem;
        border-radius: var(--radius-sm);
        transition: all 0.2s;
      }
      .back-link:hover {
        color: var(--accent-pink);
        background: var(--color-bg-card);
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }
      h1 {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        background: linear-gradient(135deg, var(--color-text-primary), var(--accent-pink));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .subtitle {
        color: var(--color-text-secondary);
        margin-bottom: 2rem;
      }
      .card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }
      .card-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      /* Input */
      .input-wrapper {
        position: relative;
      }
      .id-input {
        width: 100%;
        padding: 1rem 1.25rem;
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        background: var(--color-bg-surface);
        color: var(--color-text-primary);
        font-family: var(--font-mono);
        font-size: 1.25rem;
        letter-spacing: 2px;
        text-align: center;
        transition: all 0.2s;
      }
      .id-input:focus {
        outline: none;
        border-color: var(--accent-pink);
        box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.1);
      }
      .id-input::placeholder {
        color: var(--color-text-muted);
        letter-spacing: normal;
      }
      .id-input.valid {
        border-color: var(--accent-green);
      }
      .id-input.invalid {
        border-color: var(--accent-red);
      }

      /* Validation Status */
      .validation-status {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 0.75rem;
        font-size: 0.9rem;
      }
      .status-valid {
        color: var(--accent-green);
      }
      .status-invalid {
        color: var(--accent-red);
      }

      /* ID Structure */
      .id-structure {
        display: flex;
        justify-content: center;
        gap: 4px;
        margin-top: 1rem;
        font-family: var(--font-mono);
      }
      .id-segment {
        padding: 0.5rem;
        border-radius: var(--radius-sm);
        font-size: 0.9rem;
        text-align: center;
      }
      .segment-region {
        background: rgba(244, 114, 182, 0.15);
        color: var(--accent-pink);
      }
      .segment-birth {
        background: rgba(0, 245, 212, 0.15);
        color: var(--color-accent-cyan);
      }
      .segment-seq {
        background: rgba(139, 92, 246, 0.15);
        color: #8b5cf6;
      }
      .segment-check {
        background: rgba(245, 158, 11, 0.15);
        color: var(--accent-orange);
      }
      .segment-label {
        display: block;
        font-size: 0.65rem;
        margin-top: 2px;
        opacity: 0.8;
      }

      /* Result Grid */
      .result-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }
      .result-item {
        padding: 1rem;
        background: var(--color-bg-surface);
        border-radius: var(--radius-md);
        border: 1px solid var(--border-subtle);
      }
      .result-label {
        font-size: 0.8rem;
        color: var(--color-text-muted);
        margin-bottom: 0.25rem;
      }
      .result-value {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--color-text-primary);
      }
      .result-value.highlight {
        color: var(--color-accent-cyan);
      }

      /* Gender Icon */
      .gender-male {
        color: #3b82f6;
      }
      .gender-female {
        color: #ec4899;
      }

      /* Zodiac */
      .zodiac-info {
        display: flex;
        gap: 1rem;
        align-items: center;
      }
      .zodiac-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .zodiac-icon {
        font-size: 1.5rem;
      }

      /* Privacy Notice */
      .privacy-notice {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        padding: 1rem;
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid rgba(16, 185, 129, 0.2);
        border-radius: var(--radius-md);
        margin-top: 1.5rem;
        font-size: 0.85rem;
        color: var(--color-text-secondary);
      }
      .privacy-icon {
        color: var(--accent-green);
        font-size: 1.2rem;
        flex-shrink: 0;
      }

      /* Actions */
      .actions {
        display: flex;
        gap: 0.75rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }
      .btn {
        padding: 0.6rem 1.2rem;
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        background: var(--color-bg-surface);
        color: var(--color-text-primary);
        cursor: pointer;
        font-size: 0.85rem;
        transition: all 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      .btn:hover {
        border-color: var(--color-accent-cyan);
        background: var(--bg-hover);
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }
        h1 {
          font-size: 1.5rem;
        }
        .id-input {
          font-size: 1rem;
          letter-spacing: 1px;
        }
        .id-structure {
          flex-wrap: wrap;
        }
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      èº«ä»½è¯å·ç è§£æ
    </nav>
    <div class="bg-grid"></div>
    <div class="container">
      <a href="../../index.html" class="back-link">â† è¿”å›</a>
      <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
      <h1>ğŸ†” èº«ä»½è¯å·ç è§£æ</h1>
      <p class="subtitle">è§£æä¸­å›½å±…æ°‘èº«ä»½è¯å·ç ï¼Œæå–åœ°åŒºã€ç”Ÿæ—¥ã€æ€§åˆ«ç­‰ä¿¡æ¯</p>

      <!-- Input -->
      <div class="card">
        <div class="card-title">ğŸ“ è¾“å…¥èº«ä»½è¯å·</div>
        <div class="input-wrapper">
          <input
            type="text"
            class="id-input"
            id="idInput"
            placeholder="è¯·è¾“å…¥18ä½èº«ä»½è¯å·ç "
            maxlength="18"
            oninput="parseIdCard()"
          />
        </div>
        <div class="validation-status" id="validationStatus"></div>
        <div class="id-structure" id="idStructure"></div>
      </div>

      <!-- Result -->
      <div class="card" id="resultCard" style="display: none">
        <div class="card-title">ğŸ“‹ è§£æç»“æœ</div>
        <div class="result-grid" id="resultGrid"></div>
        <div class="actions">
          <button class="btn" onclick="copyResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
          <button class="btn" onclick="clearInput()">ğŸ—‘ï¸ æ¸…ç©º</button>
        </div>
      </div>

      <!-- Privacy Notice -->
      <div class="privacy-notice">
        <span class="privacy-icon">ğŸ”’</span>
        <div>
          <strong>éšç§ä¿æŠ¤</strong>
          ï¼šæœ¬å·¥å…·å®Œå…¨åœ¨æµè§ˆå™¨æœ¬åœ°è¿è¡Œï¼Œæ‚¨è¾“å…¥çš„èº«ä»½è¯å·ç ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚
          æ‰€æœ‰è§£æéƒ½åœ¨æ‚¨çš„è®¾å¤‡ä¸Šå®Œæˆï¼Œè¯·æ”¾å¿ƒä½¿ç”¨ã€‚
        </div>
      </div>
    </div>

    <script>
      // åœ°åŒºç æ•°æ®ï¼ˆéƒ¨åˆ†çœå¸‚ï¼‰
      const regionData = {
        11: "åŒ—äº¬å¸‚",
        12: "å¤©æ´¥å¸‚",
        13: "æ²³åŒ—çœ",
        14: "å±±è¥¿çœ",
        15: "å†…è’™å¤",
        21: "è¾½å®çœ",
        22: "å‰æ—çœ",
        23: "é»‘é¾™æ±Ÿ",
        31: "ä¸Šæµ·å¸‚",
        32: "æ±Ÿè‹çœ",
        33: "æµ™æ±Ÿçœ",
        34: "å®‰å¾½çœ",
        35: "ç¦å»ºçœ",
        36: "æ±Ÿè¥¿çœ",
        37: "å±±ä¸œçœ",
        41: "æ²³å—çœ",
        42: "æ¹–åŒ—çœ",
        43: "æ¹–å—çœ",
        44: "å¹¿ä¸œçœ",
        45: "å¹¿è¥¿",
        46: "æµ·å—çœ",
        50: "é‡åº†å¸‚",
        51: "å››å·çœ",
        52: "è´µå·çœ",
        53: "äº‘å—çœ",
        54: "è¥¿è—",
        61: "é™•è¥¿çœ",
        62: "ç”˜è‚ƒçœ",
        63: "é’æµ·çœ",
        64: "å®å¤",
        65: "æ–°ç–†",
        71: "å°æ¹¾çœ",
        81: "é¦™æ¸¯",
        82: "æ¾³é—¨",
        // å¸¸è§åŸå¸‚ä»£ç 
        1101: "åŒ—äº¬å¸‚",
        1201: "å¤©æ´¥å¸‚",
        3101: "ä¸Šæµ·å¸‚",
        5001: "é‡åº†å¸‚",
        4401: "å¹¿å·å¸‚",
        4403: "æ·±åœ³å¸‚",
        3301: "æ­å·å¸‚",
        3201: "å—äº¬å¸‚",
        4201: "æ­¦æ±‰å¸‚",
        5101: "æˆéƒ½å¸‚",
        6101: "è¥¿å®‰å¸‚",
        1301: "çŸ³å®¶åº„å¸‚"
      };

      // ç”Ÿè‚–
      const zodiacAnimals = [
        "é¼ ",
        "ç‰›",
        "è™",
        "å…”",
        "é¾™",
        "è›‡",
        "é©¬",
        "ç¾Š",
        "çŒ´",
        "é¸¡",
        "ç‹—",
        "çŒª"
      ];
      const zodiacIcons = ["ğŸ­", "ğŸ®", "ğŸ¯", "ğŸ°", "ğŸ²", "ğŸ", "ğŸ´", "ğŸ‘", "ğŸµ", "ğŸ”", "ğŸ¶", "ğŸ·"];

      // æ˜Ÿåº§
      const constellations = [
        { name: "æ‘©ç¾¯åº§", icon: "â™‘", start: [1, 1], end: [1, 19] },
        { name: "æ°´ç“¶åº§", icon: "â™’", start: [1, 20], end: [2, 18] },
        { name: "åŒé±¼åº§", icon: "â™“", start: [2, 19], end: [3, 20] },
        { name: "ç™½ç¾Šåº§", icon: "â™ˆ", start: [3, 21], end: [4, 19] },
        { name: "é‡‘ç‰›åº§", icon: "â™‰", start: [4, 20], end: [5, 20] },
        { name: "åŒå­åº§", icon: "â™Š", start: [5, 21], end: [6, 21] },
        { name: "å·¨èŸ¹åº§", icon: "â™‹", start: [6, 22], end: [7, 22] },
        { name: "ç‹®å­åº§", icon: "â™Œ", start: [7, 23], end: [8, 22] },
        { name: "å¤„å¥³åº§", icon: "â™", start: [8, 23], end: [9, 22] },
        { name: "å¤©ç§¤åº§", icon: "â™", start: [9, 23], end: [10, 23] },
        { name: "å¤©èåº§", icon: "â™", start: [10, 24], end: [11, 22] },
        { name: "å°„æ‰‹åº§", icon: "â™", start: [11, 23], end: [12, 21] },
        { name: "æ‘©ç¾¯åº§", icon: "â™‘", start: [12, 22], end: [12, 31] }
      ];

      let lastResult = null;

      window.parseIdCard = function () {
        const input = document.getElementById("idInput");
        const value = input.value.trim().toUpperCase();
        const statusEl = document.getElementById("validationStatus");
        const structureEl = document.getElementById("idStructure");
        const resultCard = document.getElementById("resultCard");

        // Reset
        input.classList.remove("valid", "invalid");

        if (!value) {
          statusEl.innerHTML = "";
          structureEl.innerHTML = "";
          resultCard.style.display = "none";
          return;
        }

        // Show structure
        if (value.length > 0) {
          renderStructure(value);
        }

        // Validate length
        if (value.length !== 18) {
          statusEl.innerHTML = `<span class="status-invalid">âš ï¸ è¯·è¾“å…¥18ä½èº«ä»½è¯å·ç  (å½“å‰ ${value.length} ä½)</span>`;
          input.classList.add("invalid");
          resultCard.style.display = "none";
          return;
        }

        // Validate format
        if (!/^\d{17}[\dX]$/.test(value)) {
          statusEl.innerHTML =
            '<span class="status-invalid">âŒ æ ¼å¼é”™è¯¯ï¼šå‰17ä½åº”ä¸ºæ•°å­—ï¼Œç¬¬18ä½å¯ä¸ºæ•°å­—æˆ–X</span>';
          input.classList.add("invalid");
          resultCard.style.display = "none";
          return;
        }

        // Validate checksum
        if (!validateChecksum(value)) {
          statusEl.innerHTML = '<span class="status-invalid">âŒ æ ¡éªŒç é”™è¯¯ï¼šèº«ä»½è¯å·ç æ— æ•ˆ</span>';
          input.classList.add("invalid");
          resultCard.style.display = "none";
          return;
        }

        // Validate date
        const birthDate = parseBirthDate(value);
        if (!birthDate) {
          statusEl.innerHTML = '<span class="status-invalid">âŒ å‡ºç”Ÿæ—¥æœŸæ— æ•ˆ</span>';
          input.classList.add("invalid");
          resultCard.style.display = "none";
          return;
        }

        // Valid
        input.classList.add("valid");
        statusEl.innerHTML = '<span class="status-valid">âœ… èº«ä»½è¯å·ç æœ‰æ•ˆ</span>';

        // Parse and display result
        const result = {
          region: getRegion(value),
          birthDate: birthDate,
          gender: getGender(value),
          age: getAge(birthDate),
          zodiac: getZodiac(birthDate.year),
          constellation: getConstellation(birthDate.month, birthDate.day)
        };
        lastResult = result;
        renderResult(result);
        resultCard.style.display = "block";
      };

      function renderStructure(value) {
        const el = document.getElementById("idStructure");
        const padded = value.padEnd(18, "_");

        el.innerHTML = `
        <div class="id-segment segment-region">
          ${padded.slice(0, 6)}
          <span class="segment-label">åœ°åŒºç </span>
        </div>
        <div class="id-segment segment-birth">
          ${padded.slice(6, 14)}
          <span class="segment-label">å‡ºç”Ÿæ—¥æœŸ</span>
        </div>
        <div class="id-segment segment-seq">
          ${padded.slice(14, 17)}
          <span class="segment-label">é¡ºåºç </span>
        </div>
        <div class="id-segment segment-check">
          ${padded.slice(17, 18)}
          <span class="segment-label">æ ¡éªŒç </span>
        </div>
      `;
      }

      function validateChecksum(id) {
        const weights = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
        const checkCodes = ["1", "0", "X", "9", "8", "7", "6", "5", "4", "3", "2"];

        let sum = 0;
        for (let i = 0; i < 17; i++) {
          sum += parseInt(id[i]) * weights[i];
        }

        return checkCodes[sum % 11] === id[17];
      }

      function parseBirthDate(id) {
        const year = parseInt(id.slice(6, 10));
        const month = parseInt(id.slice(10, 12));
        const day = parseInt(id.slice(12, 14));

        const date = new Date(year, month - 1, day);
        if (
          date.getFullYear() !== year ||
          date.getMonth() !== month - 1 ||
          date.getDate() !== day
        ) {
          return null;
        }

        if (date > new Date()) {
          return null;
        }

        return { year, month, day, date };
      }

      function getRegion(id) {
        const code6 = id.slice(0, 6);
        const code4 = id.slice(0, 4);
        const code2 = id.slice(0, 2);

        // Try to find the most specific match
        return regionData[code6] || regionData[code4] || regionData[code2] || "æœªçŸ¥åœ°åŒº";
      }

      function getGender(id) {
        const genderCode = parseInt(id[16]);
        return genderCode % 2 === 1 ? "male" : "female";
      }

      function getAge(birthDate) {
        const today = new Date();
        let age = today.getFullYear() - birthDate.year;

        if (
          today.getMonth() < birthDate.month - 1 ||
          (today.getMonth() === birthDate.month - 1 && today.getDate() < birthDate.day)
        ) {
          age--;
        }

        return age;
      }

      function getZodiac(year) {
        const index = (year - 1900) % 12;
        return {
          name: zodiacAnimals[index],
          icon: zodiacIcons[index]
        };
      }

      function getConstellation(month, day) {
        for (const c of constellations) {
          const [startM, startD] = c.start;
          const [endM, endD] = c.end;

          if ((month === startM && day >= startD) || (month === endM && day <= endD)) {
            return { name: c.name, icon: c.icon };
          }
        }
        return { name: "æœªçŸ¥", icon: "?" };
      }

      function renderResult(result) {
        const grid = document.getElementById("resultGrid");
        const birthStr = `${result.birthDate.year}å¹´${result.birthDate.month}æœˆ${result.birthDate.day}æ—¥`;

        grid.innerHTML = `
        <div class="result-item">
          <div class="result-label">æ‰€åœ¨åœ°åŒº</div>
          <div class="result-value">${result.region}</div>
        </div>
        <div class="result-item">
          <div class="result-label">å‡ºç”Ÿæ—¥æœŸ</div>
          <div class="result-value highlight">${birthStr}</div>
        </div>
        <div class="result-item">
          <div class="result-label">æ€§åˆ«</div>
          <div class="result-value ${result.gender === "male" ? "gender-male" : "gender-female"}">
            ${result.gender === "male" ? "â™‚ ç”·" : "â™€ å¥³"}
          </div>
        </div>
        <div class="result-item">
          <div class="result-label">å¹´é¾„</div>
          <div class="result-value highlight">${result.age} å‘¨å²</div>
        </div>
        <div class="result-item">
          <div class="result-label">ç”Ÿè‚–</div>
          <div class="result-value">
            <span class="zodiac-icon">${result.zodiac.icon}</span> ${result.zodiac.name}
          </div>
        </div>
        <div class="result-item">
          <div class="result-label">æ˜Ÿåº§</div>
          <div class="result-value">
            ${result.constellation.icon} ${result.constellation.name}
          </div>
        </div>
      `;
      }

      window.copyResult = function () {
        if (!lastResult) return;

        const birthStr = `${lastResult.birthDate.year}å¹´${lastResult.birthDate.month}æœˆ${lastResult.birthDate.day}æ—¥`;
        const text = `åœ°åŒºï¼š${lastResult.region}
å‡ºç”Ÿæ—¥æœŸï¼š${birthStr}
æ€§åˆ«ï¼š${lastResult.gender === "male" ? "ç”·" : "å¥³"}
å¹´é¾„ï¼š${lastResult.age}å‘¨å²
ç”Ÿè‚–ï¼š${lastResult.zodiac.name}
æ˜Ÿåº§ï¼š${lastResult.constellation.name}`;

        navigator.clipboard.writeText(text).then(() => {
          showToast("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
        });
      };

      window.clearInput = function () {
        document.getElementById("idInput").value = "";
        document.getElementById("idInput").classList.remove("valid", "invalid");
        document.getElementById("validationStatus").innerHTML = "";
        document.getElementById("idStructure").innerHTML = "";
        document.getElementById("resultCard").style.display = "none";
        lastResult = null;
      };

      function showToast(msg) {
        const toast = document.createElement("div");
        toast.textContent = msg;
        toast.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 0.75rem 1.5rem;
        background: var(--accent-green);
        color: white;
        border-radius: 8px;
        font-size: 0.9rem;
        z-index: 1000;
        animation: fadeInOut 2s ease-in-out;
      `;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 2000);
      }

      window.toggleTheme = function () {
        const html = document.documentElement;
        const isDark = html.getAttribute("data-theme") !== "light";
        html.setAttribute("data-theme", isDark ? "light" : "dark");
        document.querySelector(".theme-toggle").textContent = isDark ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", isDark ? "light" : "dark");
      };

      function loadTheme() {
        const saved = localStorage.getItem("theme");
        if (saved === "light") {
          document.documentElement.setAttribute("data-theme", "light");
          document.querySelector(".theme-toggle").textContent = "â˜€ï¸";
        }
      }

      // Add CSS animation
      const style = document.createElement("style");
      style.textContent = `
      @keyframes fadeInOut {
        0%, 100% { opacity: 0; transform: translateX(-50%) translateY(20px); }
        20%, 80% { opacity: 1; transform: translateX(-50%) translateY(0); }
      }
    `;
      document.head.appendChild(style);

      loadTheme();
    </script>
  </body>
</html>
