<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç™½å™ªéŸ³ç”Ÿæˆå™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="ç™½å™ªéŸ³ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="keywords" content="white-noise,generator,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/generator/white-noise.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="ç™½å™ªéŸ³ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:description" content="ç™½å™ªéŸ³ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/generator/white-noise.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="ç™½å™ªéŸ³ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:description" content="ç™½å™ªéŸ³ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;

        /* å­—ä½“å˜é‡ */
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
      }

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      :root {
        --accent-color: #6366f1;
      }

      body {
        font-size: 16px;
        line-height: 1.6;
        min-height: 100vh;
      }

      .container {
        max-width: 800px;
        padding: 2rem;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
      }

      .theme-toggle {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.5rem;
        padding: 0.5rem;
      }

      .main-control {
        text-align: center;
        margin: 3rem 0;
      }

      .play-button {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        font-size: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
        background: var(--accent-color);
        border: none;
        color: white;
      }

      .play-button:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 40px rgba(99, 102, 241, 0.4);
      }

      .play-button.playing {
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
        }
        50% {
          box-shadow: 0 0 0 30px rgba(99, 102, 241, 0);
        }
      }

      .volume-control {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin: 2rem 0;
      }

      .volume-control input[type="range"] {
        width: 200px;
      }

      .volume-icon {
        font-size: 1.5rem;
      }

      .noise-types {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }

      .noise-card {
        padding: 1.5rem;
        border-radius: var(--pico-border-radius);
        background: var(--pico-card-background-color);
        text-align: center;
        cursor: pointer;
        border: 2px solid transparent;
        transition:
          border-color 0.2s,
          transform 0.2s;
      }

      .noise-card:hover {
        transform: translateY(-2px);
      }

      .noise-card.active {
        border-color: var(--accent-color);
      }

      .noise-card .icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }

      .noise-card .name {
        font-weight: 600;
      }

      .noise-card .desc {
        font-size: 0.85rem;
        opacity: 0.7;
        margin-top: 0.25rem;
      }

      .mixer-section {
        margin-top: 3rem;
      }

      .mixer-section h3 {
        margin-bottom: 1.5rem;
      }

      .mixer-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
        padding: 1rem;
        background: var(--pico-card-background-color);
        border-radius: var(--pico-border-radius);
      }

      .mixer-item .icon {
        font-size: 1.5rem;
        width: 40px;
        text-align: center;
      }

      .mixer-item .name {
        width: 80px;
      }

      .mixer-item input[type="range"] {
        flex: 1;
        margin: 0;
      }

      .mixer-item .value {
        width: 40px;
        text-align: right;
        font-family: var(--font-mono);
      }

      .timer-section {
        margin-top: 2rem;
        text-align: center;
      }

      .timer-presets {
        display: flex;
        gap: 0.5rem;
        justify-content: center;
        flex-wrap: wrap;
      }

      .timer-presets button {
        padding: 0.5rem 1rem;
      }

      .timer-display {
        font-size: 2rem;
        font-family: var(--font-mono);
        margin: 1rem 0;
        opacity: 0.8;
      }

      .visualizer {
        height: 60px;
        background: var(--pico-card-background-color);
        border-radius: var(--pico-border-radius);
        margin: 2rem 0;
        overflow: hidden;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        gap: 2px;
        padding: 0.5rem;
      }

      .visualizer-bar {
        width: 4px;
        background: var(--accent-color);
        border-radius: 2px;
        transition: height 0.1s;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      ç™½å™ªéŸ³ç”Ÿæˆå™¨
    </nav>
    <div class="container">
      <header>
        <h1>ğŸ§ ç™½å™ªéŸ³ç”Ÿæˆå™¨</h1>
        <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜" aria-label="ğŸŒ“">
          ğŸŒ“
        </button>
      </header>

      <div class="main-control">
        <button class="play-button" id="playBtn" onclick="togglePlay()">
          <span id="playIcon">â–¶</span>
        </button>
        <p id="statusText">ç‚¹å‡»æ’­æ”¾</p>
      </div>

      <div class="visualizer" id="visualizer"></div>

      <div class="volume-control">
        <span class="volume-icon">ğŸ”ˆ</span>
        <input
          type="range"
          id="masterVolume"
          min="0"
          max="100"
          value="50"
          oninput="updateMasterVolume(this.value)"
        />
        <span class="volume-icon">ğŸ”Š</span>
        <span id="volumeValue">50%</span>
      </div>

      <h3>ğŸµ å™ªéŸ³ç±»å‹</h3>
      <div class="noise-types">
        <div class="noise-card active" data-type="white" onclick="selectNoiseType('white')">
          <div class="icon">âšª</div>
          <div class="name">ç™½å™ªéŸ³</div>
          <div class="desc">å…¨é¢‘å‡è¡¡</div>
        </div>
        <div class="noise-card" data-type="pink" onclick="selectNoiseType('pink')">
          <div class="icon">ğŸ©·</div>
          <div class="name">ç²‰å™ªéŸ³</div>
          <div class="desc">ä½é¢‘ä¸°å¯Œ</div>
        </div>
        <div class="noise-card" data-type="brown" onclick="selectNoiseType('brown')">
          <div class="icon">ğŸŸ¤</div>
          <div class="name">è¤å™ªéŸ³</div>
          <div class="desc">æ·±æ²‰ä½é¢‘</div>
        </div>
        <div class="noise-card" data-type="blue" onclick="selectNoiseType('blue')">
          <div class="icon">ğŸ”µ</div>
          <div class="name">è“å™ªéŸ³</div>
          <div class="desc">é«˜é¢‘æ˜äº®</div>
        </div>
      </div>

      <div class="mixer-section">
        <h3>ğŸ›ï¸ ç¯å¢ƒéŸ³æ··åˆ</h3>
        <div class="mixer-item">
          <span class="icon">ğŸŒ§ï¸</span>
          <span class="name">é›¨å£°</span>
          <input
            type="range"
            min="0"
            max="100"
            value="0"
            data-sound="rain"
            oninput="updateMixer('rain', this.value)"
          />
          <span class="value" id="rain-value">0%</span>
        </div>
        <div class="mixer-item">
          <span class="icon">ğŸŒŠ</span>
          <span class="name">æµ·æµª</span>
          <input
            type="range"
            min="0"
            max="100"
            value="0"
            data-sound="ocean"
            oninput="updateMixer('ocean', this.value)"
          />
          <span class="value" id="ocean-value">0%</span>
        </div>
        <div class="mixer-item">
          <span class="icon">ğŸ”¥</span>
          <span class="name">ç¯ç«</span>
          <input
            type="range"
            min="0"
            max="100"
            value="0"
            data-sound="fire"
            oninput="updateMixer('fire', this.value)"
          />
          <span class="value" id="fire-value">0%</span>
        </div>
        <div class="mixer-item">
          <span class="icon">ğŸŒ²</span>
          <span class="name">æ£®æ—</span>
          <input
            type="range"
            min="0"
            max="100"
            value="0"
            data-sound="forest"
            oninput="updateMixer('forest', this.value)"
          />
          <span class="value" id="forest-value">0%</span>
        </div>
      </div>

      <div class="timer-section">
        <h3>â±ï¸ å®šæ—¶å™¨</h3>
        <div class="timer-presets">
          <button class="outline" onclick="setTimer(15)" aria-label="15åˆ†é’Ÿ">15åˆ†é’Ÿ</button>
          <button class="outline" onclick="setTimer(30)" aria-label="30åˆ†é’Ÿ">30åˆ†é’Ÿ</button>
          <button class="outline" onclick="setTimer(60)" aria-label="1å°æ—¶">1å°æ—¶</button>
          <button class="outline" onclick="setTimer(120)" aria-label="2å°æ—¶">2å°æ—¶</button>
          <button class="outline secondary" onclick="clearTimer()" aria-label="å–æ¶ˆ">å–æ¶ˆ</button>
        </div>
        <div class="timer-display" id="timerDisplay">--:--</div>
      </div>
    </div>

    <script>
      let audioContext = null;
      let masterGain = null;
      let noiseNode = null;
      let isPlaying = false;
      let currentNoiseType = "white";
      let timerInterval = null;
      let timerSeconds = 0;
      let analyser = null;
      let visualizerBars = [];

      // ç¯å¢ƒéŸ³æ··åˆå™¨
      const mixerGains = {
        rain: null,
        ocean: null,
        fire: null,
        forest: null
      };

      const mixerNodes = {
        rain: null,
        ocean: null,
        fire: null,
        forest: null
      };

      // åˆå§‹åŒ–å¯è§†åŒ–å™¨
      function initVisualizer() {
        const visualizer = document.getElementById("visualizer");
        // Clear existing bars safely
        while (visualizer.firstChild) {
          visualizer.removeChild(visualizer.firstChild);
        }
        visualizerBars = [];
        for (let i = 0; i < 32; i++) {
          const bar = document.createElement("div");
          bar.className = "visualizer-bar";
          bar.style.height = "4px";
          visualizer.appendChild(bar);
          visualizerBars.push(bar);
        }
      }

      function updateVisualizer() {
        if (!analyser || !isPlaying) {
          visualizerBars.forEach((bar) => (bar.style.height = "4px"));
          return;
        }

        const dataArray = new Uint8Array(analyser.frequencyBinCount);
        analyser.getByteFrequencyData(dataArray);

        const step = Math.floor(dataArray.length / visualizerBars.length);
        for (let i = 0; i < visualizerBars.length; i++) {
          const value = dataArray[i * step];
          const height = Math.max(4, (value / 255) * 50);
          visualizerBars[i].style.height = height + "px";
        }

        requestAnimationFrame(updateVisualizer);
      }

      function initAudio() {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        masterGain = audioContext.createGain();
        masterGain.gain.value = 0.5;

        analyser = audioContext.createAnalyser();
        analyser.fftSize = 256;

        masterGain.connect(analyser);
        analyser.connect(audioContext.destination);

        // åˆå§‹åŒ–æ··åˆå™¨å¢ç›ŠèŠ‚ç‚¹
        Object.keys(mixerGains).forEach((key) => {
          mixerGains[key] = audioContext.createGain();
          mixerGains[key].gain.value = 0;
          mixerGains[key].connect(masterGain);
        });
      }

      function createNoiseNode(type) {
        const bufferSize = 2 * audioContext.sampleRate;
        const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
        const output = buffer.getChannelData(0);

        switch (type) {
          case "white":
            for (let i = 0; i < bufferSize; i++) {
              output[i] = Math.random() * 2 - 1;
            }
            break;

          case "pink":
            let b0 = 0,
              b1 = 0,
              b2 = 0,
              b3 = 0,
              b4 = 0,
              b5 = 0,
              b6 = 0;
            for (let i = 0; i < bufferSize; i++) {
              const white = Math.random() * 2 - 1;
              b0 = 0.99886 * b0 + white * 0.0555179;
              b1 = 0.99332 * b1 + white * 0.0750759;
              b2 = 0.969 * b2 + white * 0.153852;
              b3 = 0.8665 * b3 + white * 0.3104856;
              b4 = 0.55 * b4 + white * 0.5329522;
              b5 = -0.7616 * b5 - white * 0.016898;
              output[i] = (b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362) * 0.11;
              b6 = white * 0.115926;
            }
            break;

          case "brown":
            let lastOut = 0;
            for (let i = 0; i < bufferSize; i++) {
              const white = Math.random() * 2 - 1;
              output[i] = (lastOut + 0.02 * white) / 1.02;
              lastOut = output[i];
              output[i] *= 3.5;
            }
            break;

          case "blue":
            let lastBlue = 0;
            for (let i = 0; i < bufferSize; i++) {
              const white = Math.random() * 2 - 1;
              output[i] = white - lastBlue;
              lastBlue = white;
              output[i] *= 0.5;
            }
            break;
        }

        const node = audioContext.createBufferSource();
        node.buffer = buffer;
        node.loop = true;
        return node;
      }

      function createEnvironmentSound(type) {
        const bufferSize = 4 * audioContext.sampleRate;
        const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
        const output = buffer.getChannelData(0);

        switch (type) {
          case "rain":
            for (let i = 0; i < bufferSize; i++) {
              output[i] = (Math.random() * 2 - 1) * 0.3;
              if (Math.random() > 0.99) {
                output[i] += (Math.random() - 0.5) * 0.5;
              }
            }
            break;

          case "ocean":
            for (let i = 0; i < bufferSize; i++) {
              const t = i / audioContext.sampleRate;
              const wave = Math.sin(t * 0.1) * 0.5 + 0.5;
              output[i] = (Math.random() * 2 - 1) * wave * 0.4;
            }
            break;

          case "fire":
            let fireState = 0;
            for (let i = 0; i < bufferSize; i++) {
              fireState += (Math.random() - 0.5) * 0.1;
              fireState *= 0.99;
              output[i] = (Math.random() * 2 - 1) * 0.2 + fireState;
              if (Math.random() > 0.995) {
                output[i] += (Math.random() - 0.5) * 0.8;
              }
            }
            break;

          case "forest":
            for (let i = 0; i < bufferSize; i++) {
              output[i] = (Math.random() * 2 - 1) * 0.1;
              if (Math.random() > 0.999) {
                const chirpLength = Math.floor(Math.random() * 1000) + 500;
                for (let j = 0; j < chirpLength && i + j < bufferSize; j++) {
                  output[i + j] += Math.sin(j * 0.1) * Math.exp(-j / 200) * 0.3;
                }
              }
            }
            break;
        }

        const node = audioContext.createBufferSource();
        node.buffer = buffer;
        node.loop = true;
        return node;
      }

      window.togglePlay = function () {
        if (!audioContext) {
          initAudio();
        }

        if (audioContext.state === "suspended") {
          audioContext.resume();
        }

        if (isPlaying) {
          stopPlay();
        } else {
          startPlay();
        }
      };

      function startPlay() {
        noiseNode = createNoiseNode(currentNoiseType);
        noiseNode.connect(masterGain);
        noiseNode.start();

        // å¯åŠ¨ç¯å¢ƒéŸ³
        Object.keys(mixerNodes).forEach((key) => {
          if (mixerGains[key].gain.value > 0) {
            mixerNodes[key] = createEnvironmentSound(key);
            mixerNodes[key].connect(mixerGains[key]);
            mixerNodes[key].start();
          }
        });

        isPlaying = true;
        document.getElementById("playIcon").textContent = "â¸";
        document.getElementById("playBtn").classList.add("playing");
        document.getElementById("statusText").textContent = "æ­£åœ¨æ’­æ”¾";

        updateVisualizer();
      }

      function stopPlay() {
        if (noiseNode) {
          noiseNode.stop();
          noiseNode = null;
        }

        Object.keys(mixerNodes).forEach((key) => {
          if (mixerNodes[key]) {
            mixerNodes[key].stop();
            mixerNodes[key] = null;
          }
        });

        isPlaying = false;
        document.getElementById("playIcon").textContent = "â–¶";
        document.getElementById("playBtn").classList.remove("playing");
        document.getElementById("statusText").textContent = "ç‚¹å‡»æ’­æ”¾";
      }

      window.selectNoiseType = function (type) {
        document.querySelectorAll(".noise-card").forEach((card) => {
          card.classList.remove("active");
        });
        document.querySelector('[data-type="' + type + '"]').classList.add("active");

        currentNoiseType = type;

        if (isPlaying) {
          if (noiseNode) {
            noiseNode.stop();
          }
          noiseNode = createNoiseNode(type);
          noiseNode.connect(masterGain);
          noiseNode.start();
        }
      };

      window.updateMasterVolume = function (value) {
        if (masterGain) {
          masterGain.gain.value = value / 100;
        }
        document.getElementById("volumeValue").textContent = value + "%";
      };

      window.updateMixer = function (type, value) {
        document.getElementById(type + "-value").textContent = value + "%";

        if (!audioContext) {
          initAudio();
        }

        const gainValue = value / 100;
        mixerGains[type].gain.value = gainValue;

        if (isPlaying) {
          if (gainValue > 0 && !mixerNodes[type]) {
            mixerNodes[type] = createEnvironmentSound(type);
            mixerNodes[type].connect(mixerGains[type]);
            mixerNodes[type].start();
          } else if (gainValue === 0 && mixerNodes[type]) {
            mixerNodes[type].stop();
            mixerNodes[type] = null;
          }
        }
      };

      window.setTimer = function (minutes) {
        clearTimer();
        timerSeconds = minutes * 60;
        updateTimerDisplay();

        timerInterval = setInterval(function () {
          timerSeconds--;
          updateTimerDisplay();

          if (timerSeconds <= 0) {
            clearTimer();
            if (isPlaying) {
              togglePlay();
            }
          }
        }, 1000);
      };

      function clearTimer() {
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = null;
        }
        timerSeconds = 0;
        document.getElementById("timerDisplay").textContent = "--:--";
      }

      function updateTimerDisplay() {
        const hours = Math.floor(timerSeconds / 3600);
        const minutes = Math.floor((timerSeconds % 3600) / 60);
        const seconds = timerSeconds % 60;

        let display;
        if (hours > 0) {
          display =
            hours +
            ":" +
            minutes.toString().padStart(2, "0") +
            ":" +
            seconds.toString().padStart(2, "0");
        } else {
          display = minutes.toString().padStart(2, "0") + ":" + seconds.toString().padStart(2, "0");
        }
        document.getElementById("timerDisplay").textContent = display;
      }

      window.toggleTheme = function () {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("white-noise-theme", newTheme);
      };

      // åˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", function () {
        initVisualizer();

        const savedTheme = localStorage.getItem("white-noise-theme");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          document.documentElement.setAttribute("data-theme", "dark");
        }
      });
    </script>
  </body>
</html>
