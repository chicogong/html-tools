<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心率区间计算器 - WebUtils</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #ef4444; --accent2: #f97316; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .card-title { font-size: 1rem; color: var(--text2); margin-bottom: 16px; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 6px; font-size: 0.9rem; color: var(--text2); }
        input, select { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1rem; }
        input:focus, select:focus { outline: none; border-color: var(--accent); }
        .result-hero { background: linear-gradient(135deg, var(--accent), var(--accent2)); padding: 28px; border-radius: 12px; text-align: center; color: white; margin-bottom: 20px; }
        .result-hero .label { opacity: 0.9; margin-bottom: 4px; }
        .result-hero .big { font-size: 3rem; font-weight: 700; }
        .result-hero .unit { font-size: 1rem; opacity: 0.8; }
        .result-hero .sub { margin-top: 8px; font-size: 0.9rem; opacity: 0.9; }
        .stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 16px; }
        .stat { background: rgba(255,255,255,0.15); padding: 12px; border-radius: 8px; text-align: center; }
        .stat .value { font-size: 1.3rem; font-weight: 600; }
        .stat .label { font-size: 0.75rem; opacity: 0.8; margin-top: 4px; }
        .zone { padding: 16px; border-radius: 12px; margin-bottom: 12px; color: white; cursor: pointer; transition: transform 0.2s; }
        .zone:hover { transform: translateX(4px); }
        .zone-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .zone-name { font-weight: 600; font-size: 1.1rem; }
        .zone-range { font-size: 1.2rem; font-weight: 700; }
        .zone-percent { font-size: 0.85rem; opacity: 0.9; }
        .zone-desc { font-size: 0.85rem; opacity: 0.9; margin-top: 8px; }
        .zone-bar { height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; margin-top: 8px; overflow: hidden; }
        .zone-bar-fill { height: 100%; background: white; border-radius: 3px; }
        .zone1 { background: linear-gradient(135deg, #94a3b8, #64748b); }
        .zone2 { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .zone3 { background: linear-gradient(135deg, #22c55e, #16a34a); }
        .zone4 { background: linear-gradient(135deg, #f97316, #ea580c); }
        .zone5 { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .result-row { display: flex; justify-content: space-between; padding: 12px; background: var(--bg); border-radius: 8px; margin-bottom: 8px; }
        .result-row .label { color: var(--text2); }
        .result-row .value { font-weight: 600; }
        .current-hr { margin-top: 20px; padding: 16px; background: var(--bg); border-radius: 12px; }
        .current-hr input { font-size: 1.5rem; text-align: center; font-weight: 600; }
        .current-zone { margin-top: 12px; padding: 12px; border-radius: 8px; text-align: center; font-weight: 600; }
        .tips { margin-top: 16px; }
        .tip { padding: 12px; background: var(--bg); border-radius: 8px; margin-bottom: 8px; font-size: 0.9rem; }
        .tip-title { font-weight: 600; color: var(--accent); margin-bottom: 4px; }
        .note { margin-top: 16px; padding: 12px; background: var(--bg); border-radius: 8px; font-size: 0.85rem; color: var(--text2); }
            .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">← 返回</a>
        <h1>心率区间计算器</h1>
        <p class="subtitle">了解运动强度，优化训练效果</p>
        
        <div class="grid">
            <div class="card">
                <div class="card-title">基本信息</div>
                <div class="form-group">
                    <label>年龄 (岁)</label>
                    <input type="number" id="age" value="25" min="10" max="100" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>静息心率 (次/分钟, 可选)</label>
                    <input type="number" id="restingHR" placeholder="留空使用标准公式" min="40" max="100" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>计算方法</label>
                    <select id="method" onchange="calculate()">
                        <option value="standard">标准公式 (220-年龄)</option>
                        <option value="tanaka">Tanaka公式 (208-0.7×年龄)</option>
                        <option value="karvonen">Karvonen公式 (需静息心率)</option>
                    </select>
                </div>
                
                <div class="current-hr">
                    <div class="card-title">当前心率检测</div>
                    <input type="number" id="currentHR" placeholder="输入当前心率" min="40" max="220" oninput="checkCurrentZone()">
                    <div class="current-zone" id="currentZone" style="display: none;"></div>
                </div>
                
                <div class="card-title" style="margin-top: 20px;">心率信息</div>
                <div class="result-row">
                    <span class="label">最大心率</span>
                    <span class="value" id="maxHR">0 bpm</span>
                </div>
                <div class="result-row">
                    <span class="label">静息心率</span>
                    <span class="value" id="restHR">- bpm</span>
                </div>
                <div class="result-row">
                    <span class="label">心率储备</span>
                    <span class="value" id="hrReserve">- bpm</span>
                </div>
            </div>
            
            <div>
                <div class="result-hero">
                    <div class="label">最大心率</div>
                    <div class="big"><span id="maxHRBig">0</span><span class="unit"> bpm</span></div>
                    <div class="sub">次/分钟</div>
                    <div class="stats">
                        <div class="stat">
                            <div class="value" id="fatBurnRange">0-0</div>
                            <div class="label">燃脂区间</div>
                        </div>
                        <div class="stat">
                            <div class="value" id="cardioRange">0-0</div>
                            <div class="label">有氧区间</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">心率训练区间</div>
                    <div id="zones"></div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">训练建议</div>
            <div class="tips" id="tips"></div>
        </div>
        
        <div class="note">
            心率区间计算仅供参考，实际最大心率因人而异。如有心脏疾病或其他健康问题，请在医生指导下进行运动。建议使用心率监测设备获取准确数据。
        </div>
    </div>
    
    <script>
        const zones = [
            { zone: 1, name: '热身/恢复', min: 50, max: 60, color: 'zone1', desc: '轻松活动，适合热身和恢复性训练', benefit: '促进血液循环，帮助恢复' },
            { zone: 2, name: '燃脂区', min: 60, max: 70, color: 'zone2', desc: '低强度有氧，最佳燃脂效率', benefit: '脂肪燃烧最高效，适合长时间运动' },
            { zone: 3, name: '有氧区', min: 70, max: 80, color: 'zone3', desc: '中等强度，提高心肺耐力', benefit: '增强心肺功能，提高耐力' },
            { zone: 4, name: '无氧阈值', min: 80, max: 90, color: 'zone4', desc: '高强度，提高乳酸阈值', benefit: '提高运动表现，增加速度' },
            { zone: 5, name: '极限区', min: 90, max: 100, color: 'zone5', desc: '最高强度，仅适合短时间冲刺', benefit: '提高最大摄氧量，仅限短时间' }
        ];
        
        let maxHR = 0;
        let restingHR = 0;
        
        function calculate() {
            const age = parseFloat(document.getElementById('age').value) || 25;
            const restHRInput = document.getElementById('restingHR').value;
            const method = document.getElementById('method').value;
            
            // 计算最大心率
            if (method === 'standard') {
                maxHR = 220 - age;
            } else if (method === 'tanaka') {
                maxHR = Math.round(208 - 0.7 * age);
            } else if (method === 'karvonen') {
                maxHR = 220 - age;
            }
            
            restingHR = restHRInput ? parseFloat(restHRInput) : 0;
            const hrReserve = restingHR ? maxHR - restingHR : 0;
            
            document.getElementById('maxHR').textContent = maxHR + ' bpm';
            document.getElementById('maxHRBig').textContent = maxHR;
            document.getElementById('restHR').textContent = restingHR ? restingHR + ' bpm' : '- bpm';
            document.getElementById('hrReserve').textContent = hrReserve ? hrReserve + ' bpm' : '- bpm';
            
            // 燃脂和有氧区间
            const fatBurnLow = calculateZoneHR(60);
            const fatBurnHigh = calculateZoneHR(70);
            const cardioLow = calculateZoneHR(70);
            const cardioHigh = calculateZoneHR(85);
            
            document.getElementById('fatBurnRange').textContent = fatBurnLow + '-' + fatBurnHigh;
            document.getElementById('cardioRange').textContent = cardioLow + '-' + cardioHigh;
            
            renderZones();
            renderTips();
            checkCurrentZone();
        }
        
        function calculateZoneHR(percent) {
            const method = document.getElementById('method').value;
            
            if (method === 'karvonen' && restingHR) {
                // Karvonen公式: 目标心率 = (最大心率 - 静息心率) × 强度% + 静息心率
                return Math.round((maxHR - restingHR) * (percent / 100) + restingHR);
            } else {
                // 标准公式: 目标心率 = 最大心率 × 强度%
                return Math.round(maxHR * percent / 100);
            }
        }
        
        function renderZones() {
            const container = document.getElementById('zones');
            container.textContent = '';
            
            zones.forEach(zone => {
                const lowHR = calculateZoneHR(zone.min);
                const highHR = calculateZoneHR(zone.max);
                
                const div = document.createElement('div');
                div.className = 'zone ' + zone.color;
                
                const header = document.createElement('div');
                header.className = 'zone-header';
                
                const left = document.createElement('div');
                const name = document.createElement('div');
                name.className = 'zone-name';
                name.textContent = 'Zone ' + zone.zone + ' - ' + zone.name;
                const percent = document.createElement('div');
                percent.className = 'zone-percent';
                percent.textContent = zone.min + '% - ' + zone.max + '% 最大心率';
                left.appendChild(name);
                left.appendChild(percent);
                
                const range = document.createElement('div');
                range.className = 'zone-range';
                range.textContent = lowHR + ' - ' + highHR + ' bpm';
                
                header.appendChild(left);
                header.appendChild(range);
                
                const desc = document.createElement('div');
                desc.className = 'zone-desc';
                desc.textContent = zone.desc;
                
                const bar = document.createElement('div');
                bar.className = 'zone-bar';
                const barFill = document.createElement('div');
                barFill.className = 'zone-bar-fill';
                barFill.style.width = ((zone.max - zone.min) * 2) + '%';
                bar.appendChild(barFill);
                
                div.appendChild(header);
                div.appendChild(desc);
                div.appendChild(bar);
                container.appendChild(div);
            });
        }
        
        function checkCurrentZone() {
            const currentHR = parseFloat(document.getElementById('currentHR').value);
            const zoneDiv = document.getElementById('currentZone');
            
            if (!currentHR || currentHR < 40) {
                zoneDiv.style.display = 'none';
                return;
            }
            
            zoneDiv.style.display = 'block';
            
            let currentZone = null;
            for (const zone of zones) {
                const lowHR = calculateZoneHR(zone.min);
                const highHR = calculateZoneHR(zone.max);
                if (currentHR >= lowHR && currentHR <= highHR) {
                    currentZone = zone;
                    break;
                }
            }
            
            if (currentHR < calculateZoneHR(50)) {
                zoneDiv.textContent = '心率较低，低于训练区间';
                zoneDiv.style.background = 'var(--border)';
                zoneDiv.style.color = 'var(--text)';
            } else if (currentHR > calculateZoneHR(100)) {
                zoneDiv.textContent = '心率过高，请注意休息！';
                zoneDiv.style.background = '#ef4444';
                zoneDiv.style.color = 'white';
            } else if (currentZone) {
                zoneDiv.textContent = '当前处于 Zone ' + currentZone.zone + ' - ' + currentZone.name;
                const colors = {
                    zone1: '#64748b', zone2: '#2563eb', zone3: '#16a34a',
                    zone4: '#ea580c', zone5: '#dc2626'
                };
                zoneDiv.style.background = colors[currentZone.color];
                zoneDiv.style.color = 'white';
            }
        }
        
        function renderTips() {
            const container = document.getElementById('tips');
            container.textContent = '';
            
            const tips = [
                { title: '减脂训练', text: '在Zone 2（燃脂区）进行30-60分钟的低强度有氧运动，如慢跑、快走、骑车，燃脂效率最高。' },
                { title: '心肺耐力', text: '在Zone 3（有氧区）进行训练，每周3-5次，每次30-45分钟，有效提高心肺功能。' },
                { title: '间歇训练', text: '在Zone 4-5进行高强度间歇训练（HIIT），短时间高强度配合恢复，提高运动表现。' },
                { title: '恢复训练', text: '高强度训练后，在Zone 1进行恢复性运动，促进乳酸代谢，加速身体恢复。' }
            ];
            
            tips.forEach(tip => {
                const div = document.createElement('div');
                div.className = 'tip';
                
                const title = document.createElement('div');
                title.className = 'tip-title';
                title.textContent = tip.title;
                
                const text = document.createElement('div');
                text.textContent = tip.text;
                
                div.appendChild(title);
                div.appendChild(text);
                container.appendChild(div);
            });
        }
        
        calculate();
    </script>
</body>
</html>
