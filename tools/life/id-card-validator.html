<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èº«ä»½è¯å·æ ¡éªŒå™¨ - WebUtils</title>
    <meta name="description" content="åœ¨çº¿èº«ä»½è¯å·ç æ ¡éªŒå·¥å…·ï¼ŒéªŒè¯18ä½èº«ä»½è¯å·çœŸä¼ªï¼Œè§£æå‡ºç”Ÿæ—¥æœŸã€æ€§åˆ«ã€ç±è´¯ç­‰ä¿¡æ¯">
    <meta name="keywords" content="èº«ä»½è¯æ ¡éªŒ,èº«ä»½è¯éªŒè¯,èº«ä»½è¯æŸ¥è¯¢,èº«ä»½è¯å·ç ,ç±è´¯æŸ¥è¯¢">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --bg-primary: #0a0a0f; 
            --bg-secondary: #12121a; 
            --bg-tertiary: #1a1a25; 
            --text-primary: #fff; 
            --text-secondary: #88a; 
            --accent: #3b82f6; 
            --accent-light: #60a5fa;
            --border: #2a2a3a; 
            --success: #22c55e;
            --error: #ef4444;
            --warning: #f59e0b;
        }
        [data-theme="light"] { 
            --bg-primary: #f8fafc; 
            --bg-secondary: #fff; 
            --bg-tertiary: #f1f5f9; 
            --text-primary: #1e293b; 
            --text-secondary: #64748b; 
            --border: #e2e8f0; 
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: var(--bg-primary); 
            color: var(--text-primary); 
            min-height: 100vh; 
        }
        .header { 
            background: linear-gradient(135deg, #3b82f6, #1d4ed8); 
            padding: 2rem; 
            text-align: center; 
        }
        .header h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
        .nav { display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto 1rem; }
        .back-link { color: rgba(255,255,255,0.9); text-decoration: none; }
        .theme-toggle { background: rgba(255,255,255,0.2); border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; color: white; cursor: pointer; }
        .container { max-width: 800px; margin: 0 auto; padding: 2rem; }
        .card { 
            background: var(--bg-secondary); 
            border: 1px solid var(--border); 
            border-radius: 1rem; 
            padding: 1.5rem; 
            margin-bottom: 1.5rem; 
        }
        .input-group { margin-bottom: 1rem; }
        .input-group label { 
            display: block; 
            margin-bottom: 0.5rem; 
            color: var(--text-secondary); 
            font-size: 0.9rem; 
        }
        .input-row {
            display: flex;
            gap: 0.75rem;
        }
        input[type="text"] { 
            flex: 1;
            padding: 1rem; 
            border: 2px solid var(--border); 
            border-radius: 0.75rem; 
            background: var(--bg-tertiary); 
            color: var(--text-primary); 
            font-size: 1.25rem; 
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            transition: border-color 0.2s;
        }
        input[type="text"]:focus {
            outline: none;
            border-color: var(--accent);
        }
        input[type="text"]::placeholder {
            color: var(--text-secondary);
            opacity: 0.5;
            letter-spacing: 0;
        }
        .btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        .btn-primary:hover {
            background: var(--accent-light);
        }
        .status-box {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            margin-top: 1rem;
        }
        .status-box.valid {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--success);
        }
        .status-box.invalid {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--error);
        }
        .status-box.pending {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
        }
        .status-icon {
            font-size: 2rem;
        }
        .status-text {
            font-size: 1.1rem;
            font-weight: 600;
        }
        .status-text.valid { color: var(--success); }
        .status-text.invalid { color: var(--error); }
        .status-text.pending { color: var(--text-secondary); }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .info-item {
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 0.75rem;
            border-left: 3px solid var(--accent);
        }
        .info-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        .info-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        .info-value.highlight {
            color: var(--accent);
        }
        
        .format-display {
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 0.75rem;
            font-family: 'Courier New', monospace;
        }
        .format-display .title {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }
        .format-row {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
        }
        .format-char {
            width: 28px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 4px;
        }
        .format-char.region { background: #3b82f620; color: #3b82f6; }
        .format-char.birth { background: #22c55e20; color: #22c55e; }
        .format-char.seq { background: #f59e0b20; color: #f59e0b; }
        .format-char.check { background: #ef444420; color: #ef4444; }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 0.75rem;
            font-size: 0.85rem;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
        .legend-dot.region { background: #3b82f6; }
        .legend-dot.birth { background: #22c55e; }
        .legend-dot.seq { background: #f59e0b; }
        .legend-dot.check { background: #ef4444; }
        
        .examples {
            margin-top: 1.5rem;
        }
        .examples h3 {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        .example-btns {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .example-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .example-btn:hover {
            border-color: var(--accent);
            color: var(--text-primary);
        }
        
        .privacy-note {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .privacy-note strong {
            color: var(--accent);
        }
        
        @media (max-width: 640px) {
            .header { padding: 1.5rem 1rem; }
            .header h1 { font-size: 1.5rem; }
            .container { padding: 1rem; }
            .input-row { flex-direction: column; }
            input[type="text"] { font-size: 1rem; letter-spacing: 1px; }
            .format-char { width: 18px; height: 28px; font-size: 0.9rem; }
            .info-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="nav">
            <a href="../../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“ ä¸»é¢˜</button>
        </div>
        <h1>ğŸªª èº«ä»½è¯å·æ ¡éªŒå™¨</h1>
        <p>éªŒè¯18ä½èº«ä»½è¯å·ï¼Œè§£æè¯¦ç»†ä¿¡æ¯</p>
    </div>
    
    <div class="container">
        <div class="card">
            <div class="input-group">
                <label>è¾“å…¥18ä½èº«ä»½è¯å·ç </label>
                <div class="input-row">
                    <input type="text" id="idInput" placeholder="è¯·è¾“å…¥èº«ä»½è¯å·ç " maxlength="18" oninput="validate()">
                    <button class="btn btn-primary" onclick="validate()">ğŸ” æ ¡éªŒ</button>
                </div>
            </div>
            
            <div class="status-box pending" id="statusBox">
                <span class="status-icon" id="statusIcon">ğŸ”</span>
                <span class="status-text pending" id="statusText">è¯·è¾“å…¥èº«ä»½è¯å·ç è¿›è¡Œæ ¡éªŒ</span>
            </div>
            
            <div class="format-display" id="formatDisplay" style="display: none;">
                <div class="title">å·ç ç»“æ„è§£æ</div>
                <div class="format-row" id="formatRow"></div>
                <div class="legend">
                    <div class="legend-item"><span class="legend-dot region"></span>åœ°åŒºç (1-6)</div>
                    <div class="legend-item"><span class="legend-dot birth"></span>å‡ºç”Ÿæ—¥æœŸ(7-14)</div>
                    <div class="legend-item"><span class="legend-dot seq"></span>é¡ºåºç (15-17)</div>
                    <div class="legend-item"><span class="legend-dot check"></span>æ ¡éªŒç (18)</div>
                </div>
            </div>
            
            <div class="info-grid" id="infoGrid" style="display: none;">
                <div class="info-item">
                    <div class="info-label">ğŸ“ ç±è´¯</div>
                    <div class="info-value" id="infoRegion">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ‚ å‡ºç”Ÿæ—¥æœŸ</div>
                    <div class="info-value" id="infoBirth">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ‘¤ æ€§åˆ«</div>
                    <div class="info-value highlight" id="infoGender">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ”¢ å¹´é¾„</div>
                    <div class="info-value" id="infoAge">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ² ç”Ÿè‚–</div>
                    <div class="info-value" id="infoZodiac">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">â­ æ˜Ÿåº§</div>
                    <div class="info-value" id="infoConstellation">-</div>
                </div>
            </div>
            
            <div class="privacy-note">
                <strong>ğŸ”’ éšç§è¯´æ˜ï¼š</strong>æ‰€æœ‰æ ¡éªŒå‡åœ¨æœ¬åœ°æµè§ˆå™¨å®Œæˆï¼Œæ‚¨çš„èº«ä»½è¯å·ç ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚
            </div>
        </div>
        
        <div class="card">
            <div class="examples">
                <h3>ğŸ’¡ æµ‹è¯•ç¤ºä¾‹ï¼ˆè™šæ‹Ÿå·ç ï¼‰</h3>
                <div class="example-btns">
                    <button class="example-btn" onclick="setExample('110101199003077758')">åŒ—äº¬å¸‚ ç”·</button>
                    <button class="example-btn" onclick="setExample('310101199505152629')">ä¸Šæµ·å¸‚ å¥³</button>
                    <button class="example-btn" onclick="setExample('440305199908080014')">æ·±åœ³å¸‚ ç”·</button>
                    <button class="example-btn" onclick="setExample('510104200001011234')">æˆéƒ½å¸‚ (æ— æ•ˆ)</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // åœ°åŒºç æ˜ å°„ï¼ˆçœçº§ï¼‰
        const REGION_MAP = {
            '11': 'åŒ—äº¬å¸‚', '12': 'å¤©æ´¥å¸‚', '13': 'æ²³åŒ—çœ', '14': 'å±±è¥¿çœ', '15': 'å†…è’™å¤è‡ªæ²»åŒº',
            '21': 'è¾½å®çœ', '22': 'å‰æ—çœ', '23': 'é»‘é¾™æ±Ÿçœ',
            '31': 'ä¸Šæµ·å¸‚', '32': 'æ±Ÿè‹çœ', '33': 'æµ™æ±Ÿçœ', '34': 'å®‰å¾½çœ', '35': 'ç¦å»ºçœ', '36': 'æ±Ÿè¥¿çœ', '37': 'å±±ä¸œçœ',
            '41': 'æ²³å—çœ', '42': 'æ¹–åŒ—çœ', '43': 'æ¹–å—çœ', '44': 'å¹¿ä¸œçœ', '45': 'å¹¿è¥¿å£®æ—è‡ªæ²»åŒº', '46': 'æµ·å—çœ',
            '50': 'é‡åº†å¸‚', '51': 'å››å·çœ', '52': 'è´µå·çœ', '53': 'äº‘å—çœ', '54': 'è¥¿è—è‡ªæ²»åŒº',
            '61': 'é™•è¥¿çœ', '62': 'ç”˜è‚ƒçœ', '63': 'é’æµ·çœ', '64': 'å®å¤å›æ—è‡ªæ²»åŒº', '65': 'æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº',
            '71': 'å°æ¹¾çœ', '81': 'é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº', '82': 'æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº'
        };
        
        // éƒ¨åˆ†åŸå¸‚ç æ˜ å°„
        const CITY_MAP = {
            '1101': 'åŒ—äº¬å¸‚', '1201': 'å¤©æ´¥å¸‚', '3101': 'ä¸Šæµ·å¸‚', '5001': 'é‡åº†å¸‚',
            '4401': 'å¹¿å·å¸‚', '4403': 'æ·±åœ³å¸‚', '4406': 'ä½›å±±å¸‚', '4419': 'ä¸œèå¸‚',
            '3301': 'æ­å·å¸‚', '3302': 'å®æ³¢å¸‚', '3201': 'å—äº¬å¸‚', '3205': 'è‹å·å¸‚',
            '5101': 'æˆéƒ½å¸‚', '4201': 'æ­¦æ±‰å¸‚', '4301': 'é•¿æ²™å¸‚', '3701': 'æµå—å¸‚',
            '3702': 'é’å²›å¸‚', '2101': 'æ²ˆé˜³å¸‚', '2102': 'å¤§è¿å¸‚', '6101': 'è¥¿å®‰å¸‚'
        };
        
        // æ ¡éªŒç åŠ æƒå› å­
        const WEIGHTS = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
        // æ ¡éªŒç å¯¹åº”å€¼
        const CHECK_CODES = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];
        
        // ç”Ÿè‚–
        const ZODIAC = ['é¼ ', 'ç‰›', 'è™', 'å…”', 'é¾™', 'è›‡', 'é©¬', 'ç¾Š', 'çŒ´', 'é¸¡', 'ç‹—', 'çŒª'];
        const ZODIAC_ICONS = ['ğŸ€', 'ğŸ‚', 'ğŸ…', 'ğŸ‡', 'ğŸ‰', 'ğŸ', 'ğŸ´', 'ğŸ‘', 'ğŸµ', 'ğŸ”', 'ğŸ•', 'ğŸ–'];
        
        // æ˜Ÿåº§
        const CONSTELLATIONS = [
            { name: 'æ‘©ç¾¯åº§', icon: 'â™‘', start: [1, 1], end: [1, 19] },
            { name: 'æ°´ç“¶åº§', icon: 'â™’', start: [1, 20], end: [2, 18] },
            { name: 'åŒé±¼åº§', icon: 'â™“', start: [2, 19], end: [3, 20] },
            { name: 'ç™½ç¾Šåº§', icon: 'â™ˆ', start: [3, 21], end: [4, 19] },
            { name: 'é‡‘ç‰›åº§', icon: 'â™‰', start: [4, 20], end: [5, 20] },
            { name: 'åŒå­åº§', icon: 'â™Š', start: [5, 21], end: [6, 21] },
            { name: 'å·¨èŸ¹åº§', icon: 'â™‹', start: [6, 22], end: [7, 22] },
            { name: 'ç‹®å­åº§', icon: 'â™Œ', start: [7, 23], end: [8, 22] },
            { name: 'å¤„å¥³åº§', icon: 'â™', start: [8, 23], end: [9, 22] },
            { name: 'å¤©ç§¤åº§', icon: 'â™', start: [9, 23], end: [10, 23] },
            { name: 'å¤©èåº§', icon: 'â™', start: [10, 24], end: [11, 22] },
            { name: 'å°„æ‰‹åº§', icon: 'â™', start: [11, 23], end: [12, 21] },
            { name: 'æ‘©ç¾¯åº§', icon: 'â™‘', start: [12, 22], end: [12, 31] }
        ];
        
        /**
         * è®¡ç®—æ ¡éªŒç 
         */
        function calculateCheckCode(id17) {
            let sum = 0;
            for (let i = 0; i < 17; i++) {
                sum += parseInt(id17[i], 10) * WEIGHTS[i];
            }
            return CHECK_CODES[sum % 11];
        }
        
        /**
         * éªŒè¯èº«ä»½è¯å·
         */
        function validateIdCard(id) {
            // åŸºæœ¬æ ¼å¼æ£€æŸ¥
            if (!/^\d{17}[\dXx]$/.test(id)) {
                return { valid: false, error: 'æ ¼å¼é”™è¯¯ï¼šéœ€è¦18ä½æ•°å­—ï¼ˆæœ€åä¸€ä½å¯ä¸ºXï¼‰' };
            }
            
            // åœ°åŒºç æ£€æŸ¥
            const provinceCode = id.substring(0, 2);
            if (!REGION_MAP[provinceCode]) {
                return { valid: false, error: 'åœ°åŒºç æ— æ•ˆï¼šä¸å­˜åœ¨è¯¥çœä»½ä»£ç ' };
            }
            
            // å‡ºç”Ÿæ—¥æœŸæ£€æŸ¥
            const year = parseInt(id.substring(6, 10), 10);
            const month = parseInt(id.substring(10, 12), 10);
            const day = parseInt(id.substring(12, 14), 10);
            
            const birthDate = new Date(year, month - 1, day);
            const now = new Date();
            
            if (birthDate.getFullYear() !== year || 
                birthDate.getMonth() !== month - 1 || 
                birthDate.getDate() !== day) {
                return { valid: false, error: 'å‡ºç”Ÿæ—¥æœŸæ— æ•ˆï¼šæ—¥æœŸä¸å­˜åœ¨' };
            }
            
            if (birthDate > now) {
                return { valid: false, error: 'å‡ºç”Ÿæ—¥æœŸæ— æ•ˆï¼šä¸èƒ½å¤§äºå½“å‰æ—¥æœŸ' };
            }
            
            if (year < 1900) {
                return { valid: false, error: 'å‡ºç”Ÿæ—¥æœŸæ— æ•ˆï¼šå¹´ä»½ä¸èƒ½å°äº1900' };
            }
            
            // æ ¡éªŒç æ£€æŸ¥
            const expectedCheckCode = calculateCheckCode(id.substring(0, 17));
            const actualCheckCode = id[17].toUpperCase();
            
            if (expectedCheckCode !== actualCheckCode) {
                return { 
                    valid: false, 
                    error: `æ ¡éªŒç é”™è¯¯ï¼šæœŸæœ› ${expectedCheckCode}ï¼Œå®é™… ${actualCheckCode}` 
                };
            }
            
            return { valid: true };
        }
        
        /**
         * è§£æèº«ä»½è¯ä¿¡æ¯
         */
        function parseIdCard(id) {
            const provinceCode = id.substring(0, 2);
            const cityCode = id.substring(0, 4);
            const year = parseInt(id.substring(6, 10), 10);
            const month = parseInt(id.substring(10, 12), 10);
            const day = parseInt(id.substring(12, 14), 10);
            const seqCode = parseInt(id.substring(14, 17), 10);
            
            // åœ°åŒº
            let region = REGION_MAP[provinceCode] || 'æœªçŸ¥';
            if (CITY_MAP[cityCode]) {
                region = CITY_MAP[cityCode];
            }
            
            // æ€§åˆ«ï¼ˆç¬¬17ä½å¥‡æ•°ä¸ºç”·ï¼Œå¶æ•°ä¸ºå¥³ï¼‰
            const gender = seqCode % 2 === 1 ? 'ç”·' : 'å¥³';
            const genderIcon = seqCode % 2 === 1 ? 'ğŸ‘¨' : 'ğŸ‘©';
            
            // å¹´é¾„
            const today = new Date();
            let age = today.getFullYear() - year;
            const birthThisYear = new Date(today.getFullYear(), month - 1, day);
            if (today < birthThisYear) {
                age--;
            }
            
            // ç”Ÿè‚–
            const zodiacIndex = (year - 1900) % 12;
            const zodiac = ZODIAC_ICONS[zodiacIndex] + ' ' + ZODIAC[zodiacIndex];
            
            // æ˜Ÿåº§
            let constellation = 'æœªçŸ¥';
            for (const c of CONSTELLATIONS) {
                if ((month === c.start[0] && day >= c.start[1]) || 
                    (month === c.end[0] && day <= c.end[1])) {
                    constellation = c.icon + ' ' + c.name;
                    break;
                }
            }
            
            return {
                region,
                birth: `${year}å¹´${month}æœˆ${day}æ—¥`,
                gender: genderIcon + ' ' + gender,
                age: age + 'å²',
                zodiac,
                constellation
            };
        }
        
        /**
         * æ˜¾ç¤ºæ ¼å¼åŒ–çš„èº«ä»½è¯å·
         */
        function displayFormat(id) {
            const formatRow = document.getElementById('formatRow');
            formatRow.innerHTML = '';
            
            for (let i = 0; i < id.length; i++) {
                const char = document.createElement('span');
                char.className = 'format-char';
                char.textContent = id[i].toUpperCase();
                
                if (i < 6) {
                    char.classList.add('region');
                } else if (i < 14) {
                    char.classList.add('birth');
                } else if (i < 17) {
                    char.classList.add('seq');
                } else {
                    char.classList.add('check');
                }
                
                formatRow.appendChild(char);
            }
            
            document.getElementById('formatDisplay').style.display = 'block';
        }
        
        /**
         * éªŒè¯å¹¶æ˜¾ç¤ºç»“æœ
         */
        window.validate = function() {
            const id = document.getElementById('idInput').value.trim().toUpperCase();
            const statusBox = document.getElementById('statusBox');
            const statusIcon = document.getElementById('statusIcon');
            const statusText = document.getElementById('statusText');
            const infoGrid = document.getElementById('infoGrid');
            const formatDisplay = document.getElementById('formatDisplay');
            
            if (!id) {
                statusBox.className = 'status-box pending';
                statusIcon.textContent = 'ğŸ”';
                statusText.className = 'status-text pending';
                statusText.textContent = 'è¯·è¾“å…¥èº«ä»½è¯å·ç è¿›è¡Œæ ¡éªŒ';
                infoGrid.style.display = 'none';
                formatDisplay.style.display = 'none';
                return;
            }
            
            if (id.length < 18) {
                statusBox.className = 'status-box pending';
                statusIcon.textContent = 'â³';
                statusText.className = 'status-text pending';
                statusText.textContent = `å·²è¾“å…¥ ${id.length} ä½ï¼Œè¿˜éœ€ ${18 - id.length} ä½`;
                infoGrid.style.display = 'none';
                formatDisplay.style.display = 'none';
                return;
            }
            
            const result = validateIdCard(id);
            
            if (result.valid) {
                statusBox.className = 'status-box valid';
                statusIcon.textContent = 'âœ…';
                statusText.className = 'status-text valid';
                statusText.textContent = 'æ ¡éªŒé€šè¿‡ - èº«ä»½è¯å·ç æœ‰æ•ˆ';
                
                // æ˜¾ç¤ºè§£æä¿¡æ¯
                const info = parseIdCard(id);
                document.getElementById('infoRegion').textContent = info.region;
                document.getElementById('infoBirth').textContent = info.birth;
                document.getElementById('infoGender').textContent = info.gender;
                document.getElementById('infoAge').textContent = info.age;
                document.getElementById('infoZodiac').textContent = info.zodiac;
                document.getElementById('infoConstellation').textContent = info.constellation;
                infoGrid.style.display = 'grid';
                
                // æ˜¾ç¤ºæ ¼å¼è§£æ
                displayFormat(id);
            } else {
                statusBox.className = 'status-box invalid';
                statusIcon.textContent = 'âŒ';
                statusText.className = 'status-text invalid';
                statusText.textContent = result.error;
                infoGrid.style.display = 'none';
                formatDisplay.style.display = 'none';
            }
        };
        
        /**
         * è®¾ç½®ç¤ºä¾‹
         */
        window.setExample = function(id) {
            document.getElementById('idInput').value = id;
            validate();
        };
        
        /**
         * ä¸»é¢˜åˆ‡æ¢
         */
        window.toggleTheme = function() {
            const t = document.body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', t);
            localStorage.setItem('theme', t);
        };
        
        // åˆå§‹åŒ–ä¸»é¢˜
        document.body.setAttribute('data-theme', localStorage.getItem('theme') || 'dark');
        
        // é™åˆ¶è¾“å…¥
        document.getElementById('idInput').addEventListener('input', function(e) {
            // åªå…è®¸æ•°å­—å’ŒX
            this.value = this.value.replace(/[^0-9Xx]/g, '').toUpperCase();
        });
    </script>
</body>
</html>
