<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS ç›’å­é˜´å½±ç”Ÿæˆå™¨ - WebUtils</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¨</text></svg>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root { --primary-color: #3b82f6; }
        [data-theme="dark"] { --primary-color: #60a5fa; }
        body { padding: 1rem; min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem; }
        header h1 { margin: 0; font-size: 1.75rem; display: flex; align-items: center; gap: 0.5rem; }
        .header-actions { display: flex; gap: 0.5rem; align-items: center; }
        .theme-toggle { cursor: pointer; background: var(--primary-color); border: none; padding: 0.5rem 1rem; border-radius: 8px; color: white; font-size: 1rem; }
        .back-link { color: var(--primary-color); text-decoration: none; padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid var(--primary-color); font-size: 0.9rem; }
        .main-layout { display: grid; grid-template-columns: 350px 1fr; gap: 2rem; }
        @media (max-width: 900px) { .main-layout { grid-template-columns: 1fr; } }
        .controls-panel { background: var(--card-background-color); border-radius: 12px; padding: 1.5rem; height: fit-content; }
        .controls-panel h3 { margin: 0 0 1rem; font-size: 1rem; border-bottom: 1px solid var(--muted-border-color); padding-bottom: 0.5rem; }
        .shadow-list { margin-bottom: 1rem; }
        .shadow-item { background: var(--code-background-color); border-radius: 8px; padding: 0.75rem; margin-bottom: 0.5rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; border: 2px solid transparent; }
        .shadow-item.active { border-color: var(--primary-color); }
        .shadow-item:hover { background: color-mix(in srgb, var(--primary-color) 10%, transparent); }
        .shadow-preview-small { width: 30px; height: 30px; background: white; border-radius: 4px; }
        .shadow-item-info { flex: 1; margin-left: 0.75rem; font-size: 0.8rem; color: var(--muted-color); }
        .shadow-item-actions { display: flex; gap: 0.25rem; }
        .shadow-item-actions button { padding: 0.25rem 0.5rem; font-size: 0.7rem; border-radius: 4px; }
        .add-shadow-btn { width: 100%; margin-bottom: 1rem; }
        .control-group { margin-bottom: 1rem; }
        .control-group label { display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; margin-bottom: 0.25rem; }
        .control-group label span { color: var(--muted-color); font-family: 'SF Mono', Monaco, monospace; }
        .control-group input[type="range"] { width: 100%; margin: 0; }
        .control-group input[type="color"] { width: 60px; height: 36px; padding: 2px; border-radius: 4px; cursor: pointer; }
        .color-row { display: flex; gap: 0.5rem; align-items: center; }
        .color-row input[type="text"] { flex: 1; font-family: 'SF Mono', Monaco, monospace; font-size: 0.85rem; }
        .checkbox-row { display: flex; align-items: center; gap: 0.5rem; }
        .checkbox-row input[type="checkbox"] { margin: 0; }
        .presets-section { margin-top: 1.5rem; }
        .presets-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
        .preset-btn { padding: 0.5rem; font-size: 0.7rem; background: var(--code-background-color); border: 1px solid var(--muted-border-color); border-radius: 6px; cursor: pointer; text-align: center; }
        .preset-btn:hover { background: var(--primary-color); color: white; }
        .preview-panel { display: flex; flex-direction: column; }
        .preview-container { flex: 1; display: flex; align-items: center; justify-content: center; min-height: 400px; border-radius: 12px; position: relative; }
        .preview-container.light { background: #f8fafc; }
        .preview-container.dark { background: #1e293b; }
        .preview-container.gradient { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .preview-container.checker { background-image: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0; }
        .preview-box { width: 200px; height: 200px; background: white; border-radius: 12px; transition: box-shadow 0.2s; }
        .bg-switcher { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
        .bg-switcher button { padding: 0.5rem 1rem; font-size: 0.8rem; border-radius: 6px; border: 1px solid var(--muted-border-color); background: var(--card-background-color); cursor: pointer; }
        .bg-switcher button.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }
        .box-settings { display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .box-settings label { font-size: 0.85rem; display: flex; align-items: center; gap: 0.5rem; }
        .box-settings input { width: 80px; }
        .code-output { background: var(--card-background-color); border-radius: 12px; padding: 1rem; margin-top: 1rem; }
        .code-output h3 { margin: 0 0 0.75rem; font-size: 1rem; display: flex; justify-content: space-between; align-items: center; }
        .code-output pre { margin: 0; padding: 1rem; background: var(--code-background-color); border-radius: 8px; font-size: 0.85rem; overflow-x: auto; }
        .copy-btn { font-size: 0.8rem; padding: 0.3rem 0.6rem; }
        .toast { position: fixed; bottom: 20px; right: 20px; padding: 1rem 1.5rem; background: #10b981; color: white; border-radius: 8px; font-weight: 500; z-index: 1000; transform: translateY(100px); opacity: 0; transition: all 0.3s; }
        .toast.show { transform: translateY(0); opacity: 1; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¨ CSS ç›’å­é˜´å½±ç”Ÿæˆå™¨</h1>
            <div class="header-actions">
                <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
                <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
            </div>
        </header>

        <div class="main-layout">
            <div class="controls-panel">
                <h3>é˜´å½±å±‚</h3>
                <div class="shadow-list" id="shadowList"></div>
                <button class="add-shadow-btn" onclick="addShadow()">+ æ·»åŠ é˜´å½±å±‚</button>

                <div id="shadowControls">
                    <div class="control-group">
                        <label>æ°´å¹³åç§» (X) <span id="offsetXValue">0px</span></label>
                        <input type="range" id="offsetX" min="-100" max="100" value="0" oninput="updateShadow()">
                    </div>
                    <div class="control-group">
                        <label>å‚ç›´åç§» (Y) <span id="offsetYValue">5px</span></label>
                        <input type="range" id="offsetY" min="-100" max="100" value="5" oninput="updateShadow()">
                    </div>
                    <div class="control-group">
                        <label>æ¨¡ç³ŠåŠå¾„ <span id="blurValue">15px</span></label>
                        <input type="range" id="blur" min="0" max="100" value="15" oninput="updateShadow()">
                    </div>
                    <div class="control-group">
                        <label>æ‰©å±•åŠå¾„ <span id="spreadValue">0px</span></label>
                        <input type="range" id="spread" min="-50" max="50" value="0" oninput="updateShadow()">
                    </div>
                    <div class="control-group">
                        <label>é˜´å½±é¢œè‰²</label>
                        <div class="color-row">
                            <input type="color" id="shadowColor" value="#000000" oninput="updateShadow()">
                            <input type="text" id="shadowColorText" value="rgba(0,0,0,0.2)" oninput="updateFromText()">
                        </div>
                    </div>
                    <div class="control-group">
                        <label>é€æ˜åº¦ <span id="opacityValue">0.2</span></label>
                        <input type="range" id="opacity" min="0" max="100" value="20" oninput="updateShadow()">
                    </div>
                    <div class="control-group checkbox-row">
                        <input type="checkbox" id="inset" onchange="updateShadow()">
                        <label for="inset" style="margin: 0;">å†…é˜´å½± (inset)</label>
                    </div>
                </div>

                <div class="presets-section">
                    <h3>é¢„è®¾æ•ˆæœ</h3>
                    <div class="presets-grid">
                        <button class="preset-btn" onclick="applyPreset('soft')">æŸ”å’Œ</button>
                        <button class="preset-btn" onclick="applyPreset('medium')">ä¸­ç­‰</button>
                        <button class="preset-btn" onclick="applyPreset('hard')">ç¡¬è¾¹</button>
                        <button class="preset-btn" onclick="applyPreset('layered')">å¤šå±‚</button>
                        <button class="preset-btn" onclick="applyPreset('glow')">å‘å…‰</button>
                        <button class="preset-btn" onclick="applyPreset('neumorphism')">æ–°æ‹Ÿæ€</button>
                        <button class="preset-btn" onclick="applyPreset('insetSoft')">å†…å‡¹</button>
                        <button class="preset-btn" onclick="applyPreset('material')">Material</button>
                        <button class="preset-btn" onclick="applyPreset('float')">æ‚¬æµ®</button>
                    </div>
                </div>
            </div>

            <div class="preview-panel">
                <div class="bg-switcher">
                    <button class="active" onclick="setBg('light')">æµ…è‰²</button>
                    <button onclick="setBg('dark')">æ·±è‰²</button>
                    <button onclick="setBg('gradient')">æ¸å˜</button>
                    <button onclick="setBg('checker')">æ£‹ç›˜</button>
                </div>

                <div class="box-settings">
                    <label>å®½åº¦ <input type="number" id="boxWidth" value="200" min="50" max="400" oninput="updateBoxSize()"></label>
                    <label>é«˜åº¦ <input type="number" id="boxHeight" value="200" min="50" max="400" oninput="updateBoxSize()"></label>
                    <label>åœ†è§’ <input type="number" id="boxRadius" value="12" min="0" max="100" oninput="updateBoxSize()"></label>
                    <label>èƒŒæ™¯ <input type="color" id="boxBg" value="#ffffff" oninput="updateBoxSize()"></label>
                </div>

                <div class="preview-container light" id="previewContainer">
                    <div class="preview-box" id="previewBox"></div>
                </div>

                <div class="code-output">
                    <h3>CSS ä»£ç  <button class="copy-btn" onclick="copyCode()">å¤åˆ¶</button></h3>
                    <pre id="codeOutput"></pre>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        const presets = {
            soft: [{ x: 0, y: 4, blur: 20, spread: 0, color: '#000000', opacity: 0.1, inset: false }],
            medium: [{ x: 0, y: 10, blur: 25, spread: -5, color: '#000000', opacity: 0.2, inset: false }],
            hard: [{ x: 5, y: 5, blur: 0, spread: 0, color: '#000000', opacity: 0.3, inset: false }],
            layered: [
                { x: 0, y: 1, blur: 3, spread: 0, color: '#000000', opacity: 0.12, inset: false },
                { x: 0, y: 4, blur: 6, spread: -2, color: '#000000', opacity: 0.12, inset: false },
                { x: 0, y: 16, blur: 32, spread: -8, color: '#000000', opacity: 0.2, inset: false }
            ],
            glow: [{ x: 0, y: 0, blur: 30, spread: 5, color: '#3b82f6', opacity: 0.5, inset: false }],
            neumorphism: [
                { x: 10, y: 10, blur: 20, spread: 0, color: '#000000', opacity: 0.15, inset: false },
                { x: -10, y: -10, blur: 20, spread: 0, color: '#ffffff', opacity: 0.7, inset: false }
            ],
            insetSoft: [
                { x: 4, y: 4, blur: 8, spread: 0, color: '#000000', opacity: 0.15, inset: true },
                { x: -4, y: -4, blur: 8, spread: 0, color: '#ffffff', opacity: 0.5, inset: true }
            ],
            material: [
                { x: 0, y: 2, blur: 4, spread: -1, color: '#000000', opacity: 0.2, inset: false },
                { x: 0, y: 4, blur: 6, spread: -1, color: '#000000', opacity: 0.14, inset: false },
                { x: 0, y: 1, blur: 10, spread: 0, color: '#000000', opacity: 0.12, inset: false }
            ],
            float: [
                { x: 0, y: 25, blur: 50, spread: -12, color: '#000000', opacity: 0.25, inset: false }
            ]
        };

        let shadows = [{ x: 0, y: 5, blur: 15, spread: 0, color: '#000000', opacity: 0.2, inset: false }];
        let activeIndex = 0;

        window.toggleTheme = function() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        };

        (function() {
            const savedTheme = localStorage.getItem('theme') || 
                (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();

        function renderShadowList() {
            const list = document.getElementById('shadowList');
            list.innerHTML = shadows.map((s, i) => `
                <div class="shadow-item ${i === activeIndex ? 'active' : ''}" onclick="selectShadow(${i})">
                    <div class="shadow-preview-small" style="box-shadow: ${shadowToCSS(s)}"></div>
                    <div class="shadow-item-info">
                        ${s.inset ? 'inset ' : ''}${s.x}px ${s.y}px ${s.blur}px
                    </div>
                    <div class="shadow-item-actions">
                        <button onclick="event.stopPropagation(); duplicateShadow(${i})" class="secondary outline">å¤åˆ¶</button>
                        ${shadows.length > 1 ? `<button onclick="event.stopPropagation(); removeShadow(${i})" class="secondary outline">åˆ é™¤</button>` : ''}
                    </div>
                </div>
            `).join('');
        }

        window.selectShadow = function(index) {
            activeIndex = index;
            renderShadowList();
            loadShadowToControls(shadows[index]);
        };

        function loadShadowToControls(s) {
            document.getElementById('offsetX').value = s.x;
            document.getElementById('offsetY').value = s.y;
            document.getElementById('blur').value = s.blur;
            document.getElementById('spread').value = s.spread;
            document.getElementById('shadowColor').value = s.color;
            document.getElementById('opacity').value = s.opacity * 100;
            document.getElementById('inset').checked = s.inset;
            updateLabels();
        }

        window.addShadow = function() {
            shadows.push({ x: 0, y: 5, blur: 15, spread: 0, color: '#000000', opacity: 0.2, inset: false });
            activeIndex = shadows.length - 1;
            renderShadowList();
            loadShadowToControls(shadows[activeIndex]);
            updatePreview();
        };

        window.removeShadow = function(index) {
            if (shadows.length <= 1) return;
            shadows.splice(index, 1);
            if (activeIndex >= shadows.length) activeIndex = shadows.length - 1;
            renderShadowList();
            loadShadowToControls(shadows[activeIndex]);
            updatePreview();
        };

        window.duplicateShadow = function(index) {
            shadows.splice(index + 1, 0, { ...shadows[index] });
            activeIndex = index + 1;
            renderShadowList();
            updatePreview();
        };

        function updateShadow() {
            const s = shadows[activeIndex];
            s.x = parseInt(document.getElementById('offsetX').value);
            s.y = parseInt(document.getElementById('offsetY').value);
            s.blur = parseInt(document.getElementById('blur').value);
            s.spread = parseInt(document.getElementById('spread').value);
            s.color = document.getElementById('shadowColor').value;
            s.opacity = parseInt(document.getElementById('opacity').value) / 100;
            s.inset = document.getElementById('inset').checked;
            
            updateLabels();
            renderShadowList();
            updatePreview();
        }

        function updateLabels() {
            document.getElementById('offsetXValue').textContent = document.getElementById('offsetX').value + 'px';
            document.getElementById('offsetYValue').textContent = document.getElementById('offsetY').value + 'px';
            document.getElementById('blurValue').textContent = document.getElementById('blur').value + 'px';
            document.getElementById('spreadValue').textContent = document.getElementById('spread').value + 'px';
            document.getElementById('opacityValue').textContent = (parseInt(document.getElementById('opacity').value) / 100).toFixed(2);
            
            const color = document.getElementById('shadowColor').value;
            const opacity = parseInt(document.getElementById('opacity').value) / 100;
            document.getElementById('shadowColorText').value = hexToRgba(color, opacity);
        }

        window.updateFromText = function() {
            const text = document.getElementById('shadowColorText').value;
            const rgba = parseRgba(text);
            if (rgba) {
                document.getElementById('shadowColor').value = rgbToHex(rgba.r, rgba.g, rgba.b);
                document.getElementById('opacity').value = rgba.a * 100;
                updateShadow();
            }
        };

        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r},${g},${b},${alpha})`;
        }

        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
        }

        function parseRgba(str) {
            const match = str.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
            if (match) {
                return {
                    r: parseInt(match[1]),
                    g: parseInt(match[2]),
                    b: parseInt(match[3]),
                    a: match[4] ? parseFloat(match[4]) : 1
                };
            }
            return null;
        }

        function shadowToCSS(s) {
            const rgba = hexToRgba(s.color, s.opacity);
            return `${s.inset ? 'inset ' : ''}${s.x}px ${s.y}px ${s.blur}px ${s.spread}px ${rgba}`;
        }

        window.updatePreview = function() {
            const boxShadow = shadows.map(s => shadowToCSS(s)).join(', ');
            document.getElementById('previewBox').style.boxShadow = boxShadow;
            
            document.getElementById('codeOutput').textContent = `box-shadow: ${boxShadow};`;
        };

        window.updateBoxSize = function() {
            const box = document.getElementById('previewBox');
            box.style.width = document.getElementById('boxWidth').value + 'px';
            box.style.height = document.getElementById('boxHeight').value + 'px';
            box.style.borderRadius = document.getElementById('boxRadius').value + 'px';
            box.style.background = document.getElementById('boxBg').value;
        };

        window.setBg = function(type) {
            const container = document.getElementById('previewContainer');
            container.className = 'preview-container ' + type;
            document.querySelectorAll('.bg-switcher button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.bg-switcher button[onclick="setBg('${type}')"]`).classList.add('active');
        };

        window.applyPreset = function(name) {
            shadows = presets[name].map(s => ({ ...s }));
            activeIndex = 0;
            renderShadowList();
            loadShadowToControls(shadows[0]);
            updatePreview();
        };

        window.copyCode = function() {
            const code = document.getElementById('codeOutput').textContent;
            navigator.clipboard.writeText(code);
            showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        };

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        // Init
        renderShadowList();
        loadShadowToControls(shadows[0]);
        updatePreview();
    </script>
</body>
</html>
