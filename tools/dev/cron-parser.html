<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cron è¡¨è¾¾å¼è§£æå™¨ - HTML Tools</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --tool-primary: #8b5cf6;
            --tool-secondary: #a78bfa;
            --success-color: #10b981;
            --error-color: #ef4444;
        }
        body { padding: 1rem; min-height: 100vh; }
        .container { max-width: 1000px; margin: 0 auto; }
        header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;
        }
        h1 { margin: 0; font-size: 1.75rem; color: var(--tool-primary); }
        .theme-toggle {
            background: none; border: 2px solid var(--tool-primary);
            color: var(--tool-primary); cursor: pointer; padding: 0.5rem;
            border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
        }
        .back-link {
            color: var(--tool-primary); text-decoration: none;
            display: flex; align-items: center; gap: 0.25rem; font-size: 0.9rem;
        }
        .input-section {
            background: var(--pico-card-background-color); padding: 1.5rem;
            border-radius: 12px; margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .cron-input-wrapper {
            display: flex; gap: 1rem; align-items: flex-start; flex-wrap: wrap;
        }
        .cron-input-wrapper input {
            flex: 1; min-width: 200px; font-family: monospace;
            font-size: 1.25rem; letter-spacing: 2px;
        }
        .cron-input-wrapper button {
            background: var(--tool-primary); border-color: var(--tool-primary);
        }
        .presets { margin-top: 1rem; }
        .presets label { font-size: 0.85rem; margin-bottom: 0.5rem; display: block; }
        .preset-buttons { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .preset-btn {
            padding: 0.25rem 0.75rem; font-size: 0.8rem;
            background: var(--pico-secondary-background);
            border: 1px solid var(--pico-muted-border-color);
            border-radius: 20px; cursor: pointer; transition: all 0.2s;
        }
        .preset-btn:hover {
            background: var(--tool-primary); color: white;
            border-color: var(--tool-primary);
        }
        .result-section { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
        @media (max-width: 768px) { .result-section { grid-template-columns: 1fr; } }
        .result-card {
            background: var(--pico-card-background-color); padding: 1.5rem;
            border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .result-card h3 {
            margin-top: 0; margin-bottom: 1rem; font-size: 1.1rem;
            color: var(--tool-primary); display: flex; align-items: center; gap: 0.5rem;
        }
        .human-readable {
            font-size: 1.1rem; line-height: 1.6; padding: 1rem;
            background: var(--pico-code-background-color);
            border-radius: 8px; margin-bottom: 1rem;
        }
        .field-breakdown {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem;
        }
        .field-item {
            text-align: center; padding: 0.75rem;
            background: var(--pico-code-background-color); border-radius: 8px;
        }
        .field-item .value {
            font-family: monospace; font-size: 1.25rem; font-weight: bold;
            color: var(--tool-primary); display: block; margin-bottom: 0.25rem;
        }
        .field-item .label {
            font-size: 0.75rem; color: var(--pico-muted-color); text-transform: uppercase;
        }
        .field-item .meaning { font-size: 0.8rem; margin-top: 0.25rem; }
        .next-runs { list-style: none; padding: 0; margin: 0; }
        .next-runs li {
            padding: 0.5rem 0; border-bottom: 1px solid var(--pico-muted-border-color);
            font-family: monospace; font-size: 0.9rem;
            display: flex; justify-content: space-between; align-items: center;
        }
        .next-runs li:last-child { border-bottom: none; }
        .next-runs .relative { font-size: 0.8rem; color: var(--pico-muted-color); font-family: inherit; }
        .error-message {
            color: var(--error-color); padding: 1rem;
            background: rgba(239, 68, 68, 0.1); border-radius: 8px; display: none;
        }
        .error-message.show { display: block; }
        .validation-status {
            display: flex; align-items: center; gap: 0.5rem;
            padding: 0.5rem 1rem; border-radius: 8px; margin-bottom: 1rem;
        }
        .validation-status.valid { background: rgba(16, 185, 129, 0.1); color: var(--success-color); }
        .validation-status.invalid { background: rgba(239, 68, 68, 0.1); color: var(--error-color); }
        .tabs {
            display: flex; gap: 0.5rem; margin-bottom: 1rem;
            border-bottom: 2px solid var(--pico-muted-border-color); padding-bottom: 0.5rem;
        }
        .tab-btn {
            padding: 0.5rem 1rem; background: none; border: none; cursor: pointer;
            font-size: 0.9rem; color: var(--pico-muted-color);
            border-radius: 8px 8px 0 0; transition: all 0.2s;
        }
        .tab-btn.active { background: var(--tool-primary); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .builder-section {
            background: var(--pico-card-background-color); padding: 1.5rem;
            border-radius: 12px; margin-bottom: 1.5rem;
        }
        .builder-section h3 { margin-top: 0; margin-bottom: 1rem; font-size: 1.1rem; color: var(--tool-primary); }
        .builder-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; }
        .builder-field label { display: block; font-size: 0.8rem; margin-bottom: 0.25rem; color: var(--pico-muted-color); }
        .builder-field input { width: 100%; font-size: 0.9rem; padding: 0.5rem; }
        .special-chars { margin-top: 1.5rem; padding: 1rem; background: var(--pico-code-background-color); border-radius: 8px; }
        .special-chars h4 { margin: 0 0 0.75rem 0; font-size: 0.9rem; }
        .char-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.85rem; }
        .char-item { display: flex; gap: 0.5rem; }
        .char-item code { background: var(--tool-primary); color: white; padding: 0.1rem 0.4rem; border-radius: 4px; font-size: 0.8rem; }
        .copy-btn { background: none; border: none; cursor: pointer; padding: 0.25rem; color: var(--pico-muted-color); }
        .copy-btn:hover { color: var(--tool-primary); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <a href="../../index.html" class="back-link">â† è¿”å›å·¥å…·åˆ—è¡¨</a>
                <h1>Cron è¡¨è¾¾å¼è§£æå™¨</h1>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">
                <span class="theme-icon">ğŸŒ™</span>
            </button>
        </header>
        
        <main>
            <div class="input-section">
                <div class="cron-input-wrapper">
                    <input type="text" id="cronInput" placeholder="* * * * *" value="0 9 * * 1-5">
                    <button onclick="parseCron()">è§£æ</button>
                </div>
                <div class="presets">
                    <label>å¸¸ç”¨é¢„è®¾ï¼š</label>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-cron="* * * * *">æ¯åˆ†é’Ÿ</button>
                        <button class="preset-btn" data-cron="0 * * * *">æ¯å°æ—¶</button>
                        <button class="preset-btn" data-cron="0 0 * * *">æ¯å¤©åˆå¤œ</button>
                        <button class="preset-btn" data-cron="0 9 * * 1-5">å·¥ä½œæ—¥ä¸Šåˆ9ç‚¹</button>
                        <button class="preset-btn" data-cron="0 0 * * 0">æ¯å‘¨æ—¥åˆå¤œ</button>
                        <button class="preset-btn" data-cron="0 0 1 * *">æ¯æœˆ1å·</button>
                        <button class="preset-btn" data-cron="0 0 1 1 *">æ¯å¹´1æœˆ1å·</button>
                        <button class="preset-btn" data-cron="*/5 * * * *">æ¯5åˆ†é’Ÿ</button>
                        <button class="preset-btn" data-cron="0 */2 * * *">æ¯2å°æ—¶</button>
                        <button class="preset-btn" data-cron="30 4 * * *">æ¯å¤©å‡Œæ™¨4:30</button>
                        <button class="preset-btn" data-cron="0 22 * * 1-5">å·¥ä½œæ—¥æ™šä¸Š10ç‚¹</button>
                        <button class="preset-btn" data-cron="0 0 15 * *">æ¯æœˆ15å·</button>
                    </div>
                </div>
            </div>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="parse">è§£æç»“æœ</button>
                <button class="tab-btn" data-tab="builder">å¯è§†åŒ–æ„å»ºå™¨</button>
                <button class="tab-btn" data-tab="reference">è¯­æ³•å‚è€ƒ</button>
            </div>
            
            <div id="parseTab" class="tab-content active">
                <div id="validationStatus" class="validation-status valid">
                    <span class="status-icon">âœ“</span>
                    <span class="status-text">æœ‰æ•ˆçš„ Cron è¡¨è¾¾å¼</span>
                </div>
                <div id="errorMessage" class="error-message"></div>
                <div class="result-section">
                    <div class="result-card">
                        <h3>ğŸ“– å¯è¯»æè¿°</h3>
                        <div id="humanReadable" class="human-readable">åœ¨å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€è‡³å‘¨äº”ï¼‰çš„ä¸Šåˆ 9:00 æ‰§è¡Œ</div>
                        <h3>ğŸ” å­—æ®µåˆ†è§£</h3>
                        <div id="fieldBreakdown" class="field-breakdown"></div>
                    </div>
                    <div class="result-card">
                        <h3>â° æ¥ä¸‹æ¥çš„æ‰§è¡Œæ—¶é—´ <button class="copy-btn" onclick="copyNextRuns()" title="å¤åˆ¶">ğŸ“‹</button></h3>
                        <ul id="nextRuns" class="next-runs"></ul>
                    </div>
                </div>
            </div>
            
            <div id="builderTab" class="tab-content">
                <div class="builder-section">
                    <h3>å¯è§†åŒ–æ„å»ºå™¨</h3>
                    <div class="builder-grid">
                        <div class="builder-field"><label>åˆ†é’Ÿ (0-59)</label><input type="text" id="buildMinute" value="0"></div>
                        <div class="builder-field"><label>å°æ—¶ (0-23)</label><input type="text" id="buildHour" value="9"></div>
                        <div class="builder-field"><label>æ—¥ (1-31)</label><input type="text" id="buildDay" value="*"></div>
                        <div class="builder-field"><label>æœˆ (1-12)</label><input type="text" id="buildMonth" value="*"></div>
                        <div class="builder-field"><label>æ˜ŸæœŸ (0-6, 0=å‘¨æ—¥)</label><input type="text" id="buildWeekday" value="1-5"></div>
                    </div>
                    <div style="margin-top: 1rem; text-align: center;">
                        <button onclick="applyBuilder()" style="background: var(--tool-primary); border-color: var(--tool-primary);">åº”ç”¨åˆ°è§£æå™¨</button>
                    </div>
                </div>
                <div class="special-chars">
                    <h4>ç‰¹æ®Šå­—ç¬¦è¯´æ˜</h4>
                    <div class="char-grid">
                        <div class="char-item"><code>*</code> <span>ä»»æ„å€¼</span></div>
                        <div class="char-item"><code>,</code> <span>å€¼åˆ—è¡¨ (1,3,5)</span></div>
                        <div class="char-item"><code>-</code> <span>èŒƒå›´ (1-5)</span></div>
                        <div class="char-item"><code>/</code> <span>æ­¥é•¿ (*/5 = æ¯5å•ä½)</span></div>
                    </div>
                </div>
            </div>
            
            <div id="referenceTab" class="tab-content">
                <div class="result-card">
                    <h3>Cron è¡¨è¾¾å¼æ ¼å¼</h3>
                    <pre style="background: var(--pico-code-background-color); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; overflow-x: auto;">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0 - 59)
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0 - 23)
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ—¥ (1 - 31)
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœˆ (1 - 12)
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ˜ŸæœŸ (0 - 6, å‘¨æ—¥=0)
â”‚ â”‚ â”‚ â”‚ â”‚
* * * * *</pre>
                    <h3>å­—æ®µå–å€¼èŒƒå›´</h3>
                    <table>
                        <thead><tr><th>å­—æ®µ</th><th>å–å€¼èŒƒå›´</th><th>ç‰¹æ®Šå­—ç¬¦</th></tr></thead>
                        <tbody>
                            <tr><td>åˆ†é’Ÿ</td><td>0-59</td><td>* , - /</td></tr>
                            <tr><td>å°æ—¶</td><td>0-23</td><td>* , - /</td></tr>
                            <tr><td>æ—¥</td><td>1-31</td><td>* , - /</td></tr>
                            <tr><td>æœˆ</td><td>1-12</td><td>* , - /</td></tr>
                            <tr><td>æ˜ŸæœŸ</td><td>0-6</td><td>* , - /</td></tr>
                        </tbody>
                    </table>
                    <h3 style="margin-top: 1.5rem;">å¸¸ç”¨ç¤ºä¾‹</h3>
                    <table>
                        <thead><tr><th>è¡¨è¾¾å¼</th><th>æè¿°</th></tr></thead>
                        <tbody>
                            <tr><td><code>* * * * *</code></td><td>æ¯åˆ†é’Ÿ</td></tr>
                            <tr><td><code>0 * * * *</code></td><td>æ¯å°æ—¶æ•´ç‚¹</td></tr>
                            <tr><td><code>0 0 * * *</code></td><td>æ¯å¤©åˆå¤œ</td></tr>
                            <tr><td><code>0 9 * * 1-5</code></td><td>å·¥ä½œæ—¥ä¸Šåˆ9ç‚¹</td></tr>
                            <tr><td><code>*/15 * * * *</code></td><td>æ¯15åˆ†é’Ÿ</td></tr>
                            <tr><td><code>0 0 1 * *</code></td><td>æ¯æœˆ1å·åˆå¤œ</td></tr>
                            <tr><td><code>0 0 * * 0</code></td><td>æ¯å‘¨æ—¥åˆå¤œ</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        function toggleTheme() {
            var html = document.documentElement;
            var newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.querySelector('.theme-icon').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }
        (function() {
            var savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.querySelector('.theme-icon').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        })();
        
        document.querySelectorAll('.tab-btn').forEach(function(btn) {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tab-btn').forEach(function(b) { b.classList.remove('active'); });
                document.querySelectorAll('.tab-content').forEach(function(c) { c.classList.remove('active'); });
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab + 'Tab').classList.add('active');
            });
        });
        
        document.querySelectorAll('.preset-btn').forEach(function(btn) {
            btn.addEventListener('click', function() {
                document.getElementById('cronInput').value = btn.dataset.cron;
                parseCron();
            });
        });
        
        var fieldNames = ['åˆ†é’Ÿ', 'å°æ—¶', 'æ—¥', 'æœˆ', 'æ˜ŸæœŸ'];
        var fieldRanges = [{min:0,max:59},{min:0,max:23},{min:1,max:31},{min:1,max:12},{min:0,max:6}];
        var weekdayNames = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];
        
        function validateField(value, idx) {
            var range = fieldRanges[idx];
            if (value === '*') return true;
            if (value.indexOf('*/') === 0) return !isNaN(parseInt(value.substring(2)));
            var parts = value.split(',');
            for (var i = 0; i < parts.length; i++) {
                var part = parts[i];
                if (part.indexOf('-') !== -1) {
                    var nums = part.split('-').map(Number);
                    if (isNaN(nums[0]) || isNaN(nums[1]) || nums[0] < range.min || nums[1] > range.max) return false;
                } else if (part.indexOf('/') !== -1) {
                    continue;
                } else {
                    var num = parseInt(part);
                    if (isNaN(num) || num < range.min || num > range.max) return false;
                }
            }
            return true;
        }
        
        function parseFieldMeaning(value, idx) {
            if (value === '*') return 'æ¯' + fieldNames[idx].replace('æ˜ŸæœŸ', 'å¤©');
            if (value.indexOf('*/') === 0) return 'æ¯ ' + value.substring(2) + ' ' + fieldNames[idx];
            if (idx === 4) {
                if (value.indexOf('-') !== -1) {
                    var nums = value.split('-').map(Number);
                    return weekdayNames[nums[0]] + ' è‡³ ' + weekdayNames[nums[1]];
                }
                return weekdayNames[parseInt(value)] || value;
            }
            if (value.indexOf('-') !== -1) {
                var nums = value.split('-');
                return nums[0] + ' è‡³ ' + nums[1];
            }
            return value;
        }
        
        function generateHumanReadable(parts) {
            var minute = parts[0], hour = parts[1], day = parts[2], month = parts[3], weekday = parts[4];
            if (parts.every(function(p) { return p === '*'; })) return 'æ¯åˆ†é’Ÿæ‰§è¡Œ';
            if (hour === '*' && day === '*' && month === '*' && weekday === '*') {
                if (minute === '0') return 'æ¯å°æ—¶æ•´ç‚¹æ‰§è¡Œ';
                if (minute.indexOf('*/') === 0) return 'æ¯ ' + minute.substring(2) + ' åˆ†é’Ÿæ‰§è¡Œ';
                return 'æ¯å°æ—¶çš„ç¬¬ ' + minute + ' åˆ†é’Ÿæ‰§è¡Œ';
            }
            if (day === '*' && month === '*' && weekday === '*') {
                return 'æ¯å¤© ' + hour + ':' + minute.padStart(2, '0') + ' æ‰§è¡Œ';
            }
            if (weekday === '1-5' && day === '*' && month === '*') {
                return 'åœ¨å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€è‡³å‘¨äº”ï¼‰çš„ ' + hour + ':' + minute.padStart(2, '0') + ' æ‰§è¡Œ';
            }
            if (weekday !== '*' && day === '*' && month === '*') {
                return 'åœ¨' + parseFieldMeaning(weekday, 4) + 'çš„ ' + hour + ':' + minute.padStart(2, '0') + ' æ‰§è¡Œ';
            }
            if (day !== '*' && month === '*' && weekday === '*') {
                return 'æ¯æœˆ ' + day + ' å· ' + hour + ':' + minute.padStart(2, '0') + ' æ‰§è¡Œ';
            }
            return 'åœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œ';
        }
        
        function matchesField(value, field) {
            if (field === '*') return true;
            if (field.indexOf('*/') === 0) return value % parseInt(field.substring(2)) === 0;
            var parts = field.split(',');
            for (var i = 0; i < parts.length; i++) {
                var part = parts[i];
                if (part.indexOf('-') !== -1) {
                    var nums = part.split('-').map(Number);
                    if (value >= nums[0] && value <= nums[1]) return true;
                } else if (parseInt(part) === value) return true;
            }
            return false;
        }
        
        function getNextRuns(parts, count) {
            count = count || 10;
            var runs = [], current = new Date(), iterations = 0;
            current.setSeconds(0); current.setMilliseconds(0);
            while (runs.length < count && iterations < 10000) {
                iterations++;
                current = new Date(current.getTime() + 60000);
                if (!matchesField(current.getMonth() + 1, parts[3])) continue;
                if (!matchesField(current.getDate(), parts[2])) continue;
                if (!matchesField(current.getDay(), parts[4])) continue;
                if (!matchesField(current.getHours(), parts[1])) continue;
                if (!matchesField(current.getMinutes(), parts[0])) continue;
                runs.push(new Date(current));
            }
            return runs;
        }
        
        function formatDate(date) {
            return date.toLocaleString('zh-CN', {year:'numeric',month:'2-digit',day:'2-digit',weekday:'short',hour:'2-digit',minute:'2-digit'});
        }
        
        function getRelativeTime(date) {
            var diffMins = Math.floor((date - new Date()) / 60000);
            var diffHours = Math.floor(diffMins / 60);
            var diffDays = Math.floor(diffHours / 24);
            if (diffMins < 60) return diffMins + ' åˆ†é’Ÿå';
            if (diffHours < 24) return diffHours + ' å°æ—¶å';
            return diffDays + ' å¤©å';
        }
        
        function parseCron() {
            var input = document.getElementById('cronInput').value.trim();
            var parts = input.split(/\s+/);
            var validationStatus = document.getElementById('validationStatus');
            var errorMessage = document.getElementById('errorMessage');
            
            if (parts.length !== 5) {
                validationStatus.className = 'validation-status invalid';
                validationStatus.querySelector('.status-icon').textContent = 'âœ—';
                validationStatus.querySelector('.status-text').textContent = 'æ— æ•ˆï¼šéœ€è¦ 5 ä¸ªå­—æ®µ';
                errorMessage.textContent = 'æœŸæœ› 5 ä¸ªå­—æ®µï¼Œå¾—åˆ° ' + parts.length + ' ä¸ª';
                errorMessage.classList.add('show');
                return;
            }
            
            for (var i = 0; i < 5; i++) {
                if (!validateField(parts[i], i)) {
                    validationStatus.className = 'validation-status invalid';
                    validationStatus.querySelector('.status-icon').textContent = 'âœ—';
                    validationStatus.querySelector('.status-text').textContent = 'æ— æ•ˆçš„ ' + fieldNames[i] + ' å­—æ®µ';
                    errorMessage.textContent = '"' + parts[i] + '" ä¸æ˜¯æœ‰æ•ˆå€¼';
                    errorMessage.classList.add('show');
                    return;
                }
            }
            
            validationStatus.className = 'validation-status valid';
            validationStatus.querySelector('.status-icon').textContent = 'âœ“';
            validationStatus.querySelector('.status-text').textContent = 'æœ‰æ•ˆçš„ Cron è¡¨è¾¾å¼';
            errorMessage.classList.remove('show');
            
            document.getElementById('humanReadable').textContent = generateHumanReadable(parts);
            
            var fieldBreakdown = document.getElementById('fieldBreakdown');
            fieldBreakdown.textContent = '';
            parts.forEach(function(part, i) {
                var div = document.createElement('div');
                div.className = 'field-item';
                div.innerHTML = '<span class="value">' + part + '</span><span class="label">' + fieldNames[i] + '</span><span class="meaning">' + parseFieldMeaning(part, i) + '</span>';
                fieldBreakdown.appendChild(div);
            });
            
            var nextRuns = document.getElementById('nextRuns');
            nextRuns.textContent = '';
            getNextRuns(parts).forEach(function(date) {
                var li = document.createElement('li');
                li.innerHTML = '<span>' + formatDate(date) + '</span><span class="relative">' + getRelativeTime(date) + '</span>';
                nextRuns.appendChild(li);
            });
            
            document.getElementById('buildMinute').value = parts[0];
            document.getElementById('buildHour').value = parts[1];
            document.getElementById('buildDay').value = parts[2];
            document.getElementById('buildMonth').value = parts[3];
            document.getElementById('buildWeekday').value = parts[4];
        }
        
        function applyBuilder() {
            var cron = [
                document.getElementById('buildMinute').value || '*',
                document.getElementById('buildHour').value || '*',
                document.getElementById('buildDay').value || '*',
                document.getElementById('buildMonth').value || '*',
                document.getElementById('buildWeekday').value || '*'
            ].join(' ');
            document.getElementById('cronInput').value = cron;
            document.querySelector('.tab-btn[data-tab="parse"]').click();
            parseCron();
        }
        
        function copyNextRuns() {
            var items = document.querySelectorAll('#nextRuns li span:first-child');
            var text = Array.from(items).map(function(s) { return s.textContent; }).join('\n');
            navigator.clipboard.writeText(text);
        }
        
        document.getElementById('cronInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') parseCron();
        });
        
        parseCron();
    </script>
</body>
</html>
