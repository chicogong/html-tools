<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ•°å­—é‡‘é¢å¤§å†™è½¬æ¢ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="æ•°å­—é‡‘é¢å¤§å†™è½¬æ¢ - WebUtils" />
    <meta name="keywords" content="number-words,converter,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/converter/number-words.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="æ•°å­—é‡‘é¢å¤§å†™è½¬æ¢ - WebUtils" />
    <meta property="og:description" content="æ•°å­—é‡‘é¢å¤§å†™è½¬æ¢ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/converter/number-words.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="æ•°å­—é‡‘é¢å¤§å†™è½¬æ¢ - WebUtils" />
    <meta name="twitter:description" content="æ•°å­—é‡‘é¢å¤§å†™è½¬æ¢ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme="light"] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
      }
      .theme-toggle {
        cursor: pointer;
        background: none;
        border: none;
        font-size: 1.5rem;
        padding: 0.5rem;
      }
      .input-section {
        margin-bottom: 2rem;
      }
      .input-row {
        display: flex;
        gap: 1rem;
        align-items: flex-end;
      }
      .input-row .input-group {
        flex: 1;
      }
      .input-row input[type="text"] {
        font-size: 1.5rem;
        text-align: right;
        font-family: Monaco, Menlo, monospace;
      }
      .result-section {
        margin-bottom: 2rem;
      }
      .result-box {
        background: var(--pico-card-background-color);
        border-radius: 12px;
        padding: 2rem;
        text-align: center;
      }
      .result-label {
        font-size: 0.9rem;
        color: var(--pico-muted-color);
        margin-bottom: 0.5rem;
      }
      .result-value {
        font-size: 2rem;
        font-weight: bold;
        color: var(--pico-primary);
        word-break: break-all;
        line-height: 1.5;
      }
      .result-value.small {
        font-size: 1.5rem;
      }
      .currency-prefix {
        color: var(--pico-muted-color);
      }
      .btn-group {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin-bottom: 1rem;
        justify-content: center;
      }
      .options-section {
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: var(--pico-card-background-color);
        border-radius: 8px;
      }
      .options-section h3 {
        margin-bottom: 1rem;
        font-size: 1rem;
      }
      .option-group {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
      }
      .option-group label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
      }
      #message {
        min-height: 2rem;
        text-align: center;
      }
      .error {
        color: var(--pico-del-color);
        padding: 1rem;
        border-radius: 8px;
        background: rgba(255, 0, 0, 0.1);
      }
      .success-msg {
        color: var(--pico-ins-color);
      }
      .examples {
        margin-top: 2rem;
      }
      .example-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }
      .example-item {
        padding: 1rem;
        background: var(--pico-card-background-color);
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.2s;
      }
      .example-item:hover {
        transform: translateY(-2px);
      }
      .example-number {
        font-size: 1.25rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
        font-family: monospace;
      }
      .example-chinese {
        font-size: 0.9rem;
        color: var(--pico-muted-color);
      }
      .quick-input {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
      }
      .quick-input button {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
      }
      .info-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }
      .info-card {
        padding: 1rem;
        background: var(--pico-card-background-color);
        border-radius: 8px;
      }
      .info-card h4 {
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
        color: var(--pico-primary);
      }
      .info-card p {
        font-size: 0.85rem;
        color: var(--pico-muted-color);
        margin: 0;
      }
      .formats {
        margin-top: 2rem;
      }
      .format-result {
        display: grid;
        gap: 1rem;
        margin-top: 1rem;
      }
      .format-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background: var(--pico-card-background-color);
        border-radius: 8px;
      }
      .format-item .label {
        font-size: 0.9rem;
        color: var(--pico-muted-color);
      }
      .format-item .value {
        font-weight: bold;
        font-family: monospace;
      }
      .format-item button {
        padding: 0.25rem 0.75rem;
        font-size: 0.8rem;
        margin-left: 1rem;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      æ•°å­—è½¬å¤§å†™
    </nav>
    <main class="container">
      <a
        href="../../index.html"
        style="
          display: inline-block;
          margin-bottom: 1rem;
          color: var(--pico-primary);
          text-decoration: none;
        "
      >
        â† è¿”å›é¦–é¡µ
      </a>
      <header>
        <h1>æ•°å­—é‡‘é¢å¤§å†™è½¬æ¢</h1>
        <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>
      </header>

      <section class="input-section">
        <div class="input-row">
          <div class="input-group">
            <label for="numberInput">è¾“å…¥é‡‘é¢æ•°å­—</label>
            <input
              type="text"
              id="numberInput"
              placeholder="ä¾‹å¦‚ï¼š12345.67"
              inputmode="decimal"
              autocomplete="off"
            />
          </div>
        </div>
        <div class="quick-input">
          <button class="secondary outline" onclick="appendNumber('0')">0</button>
          <button class="secondary outline" onclick="appendNumber('00')">00</button>
          <button class="secondary outline" onclick="appendNumber('000')">000</button>
          <button class="secondary outline" onclick="appendNumber('0000')">ä¸‡</button>
          <button class="secondary outline" onclick="appendNumber('00000000')">äº¿</button>
          <button class="secondary outline" onclick="appendNumber('.')">.</button>
          <button class="secondary outline" onclick="clearInput()">æ¸…ç©º</button>
          <button class="secondary outline" onclick="backspace()">é€€æ ¼</button>
        </div>
      </section>

      <section class="options-section">
        <h3>è½¬æ¢é€‰é¡¹</h3>
        <div class="option-group">
          <label>
            <input type="checkbox" id="optCurrency" checked />
            æ·»åŠ è´§å¸å•ä½ï¼ˆå…ƒï¼‰
          </label>
          <label>
            <input type="checkbox" id="optZheng" checked />
            æ•´æ•°æ·»åŠ "æ•´"
          </label>
          <label>
            <input type="checkbox" id="optPrefix" checked />
            æ·»åŠ äººæ°‘å¸å‰ç¼€
          </label>
          <label>
            <input type="checkbox" id="optNegative" />
            æ”¯æŒè´Ÿæ•°
          </label>
        </div>
      </section>

      <section class="result-section">
        <div class="result-box">
          <div class="result-label">ä¸­æ–‡å¤§å†™é‡‘é¢</div>
          <div class="result-value" id="resultValue">è¯·è¾“å…¥é‡‘é¢</div>
        </div>
      </section>

      <div class="btn-group">
        <button onclick="convert()">è½¬æ¢</button>
        <button class="secondary" onclick="copyResult()">å¤åˆ¶ç»“æœ</button>
      </div>

      <div id="message"></div>

      <section class="formats">
        <h3>å…¶ä»–æ ¼å¼</h3>
        <div class="format-result" id="formatResult">
          <div class="format-item">
            <div>
              <div class="label">åƒåˆ†ä½æ ¼å¼</div>
              <div class="value" id="formatThousands">-</div>
            </div>
            <button class="secondary outline" onclick="copyFormat('formatThousands')">å¤åˆ¶</button>
          </div>
          <div class="format-item">
            <div>
              <div class="label">ä¼šè®¡æ ¼å¼</div>
              <div class="value" id="formatAccounting">-</div>
            </div>
            <button class="secondary outline" onclick="copyFormat('formatAccounting')">å¤åˆ¶</button>
          </div>
          <div class="format-item">
            <div>
              <div class="label">ä¸­æ–‡å°å†™</div>
              <div class="value" id="formatChineseSmall">-</div>
            </div>
            <button class="secondary outline" onclick="copyFormat('formatChineseSmall')">
              å¤åˆ¶
            </button>
          </div>
        </div>
      </section>

      <section class="examples">
        <h3>å¸¸ç”¨ç¤ºä¾‹ï¼ˆç‚¹å‡»ä½¿ç”¨ï¼‰</h3>
        <div class="example-grid">
          <div class="example-item" onclick="useExample('100')">
            <div class="example-number">100</div>
            <div class="example-chinese">å£¹ä½°å…ƒæ•´</div>
          </div>
          <div class="example-item" onclick="useExample('1000')">
            <div class="example-number">1,000</div>
            <div class="example-chinese">å£¹ä»Ÿå…ƒæ•´</div>
          </div>
          <div class="example-item" onclick="useExample('10000')">
            <div class="example-number">10,000</div>
            <div class="example-chinese">å£¹ä¸‡å…ƒæ•´</div>
          </div>
          <div class="example-item" onclick="useExample('100000')">
            <div class="example-number">100,000</div>
            <div class="example-chinese">å£¹æ‹¾ä¸‡å…ƒæ•´</div>
          </div>
          <div class="example-item" onclick="useExample('1000000')">
            <div class="example-number">1,000,000</div>
            <div class="example-chinese">å£¹ä½°ä¸‡å…ƒæ•´</div>
          </div>
          <div class="example-item" onclick="useExample('10000000')">
            <div class="example-number">10,000,000</div>
            <div class="example-chinese">å£¹ä»Ÿä¸‡å…ƒæ•´</div>
          </div>
          <div class="example-item" onclick="useExample('100000000')">
            <div class="example-number">100,000,000</div>
            <div class="example-chinese">å£¹äº¿å…ƒæ•´</div>
          </div>
          <div class="example-item" onclick="useExample('12345.67')">
            <div class="example-number">12,345.67</div>
            <div class="example-chinese">å£¹ä¸‡è´°ä»Ÿåä½°è‚†æ‹¾ä¼å…ƒé™†è§’æŸ’åˆ†</div>
          </div>
          <div class="example-item" onclick="useExample('1001.01')">
            <div class="example-number">1,001.01</div>
            <div class="example-chinese">å£¹ä»Ÿé›¶å£¹å…ƒé›¶å£¹åˆ†</div>
          </div>
          <div class="example-item" onclick="useExample('10001000.10')">
            <div class="example-number">10,001,000.10</div>
            <div class="example-chinese">å£¹ä»Ÿä¸‡é›¶å£¹ä»Ÿå…ƒå£¹è§’</div>
          </div>
          <div class="example-item" onclick="useExample('0.50')">
            <div class="example-number">0.50</div>
            <div class="example-chinese">ä¼è§’</div>
          </div>
          <div class="example-item" onclick="useExample('100.05')">
            <div class="example-number">100.05</div>
            <div class="example-chinese">å£¹ä½°å…ƒé›¶ä¼åˆ†</div>
          </div>
        </div>
      </section>

      <details class="info-cards" style="margin-top: 2rem">
        <summary>ä¸­æ–‡å¤§å†™æ•°å­—å¯¹ç…§è¡¨</summary>
        <div class="info-cards" style="margin-top: 1rem">
          <div class="info-card">
            <h4>æ•°å­—å¯¹ç…§</h4>
            <p>
              0-é›¶ 1-å£¹ 2-è´° 3-å 4-è‚†
              <br />
              5-ä¼ 6-é™† 7-æŸ’ 8-æŒ 9-ç–
            </p>
          </div>
          <div class="info-card">
            <h4>å•ä½å¯¹ç…§</h4>
            <p>
              æ‹¾ ä½° ä»Ÿ ä¸‡ äº¿
              <br />
              å…ƒ è§’ åˆ†
            </p>
          </div>
          <div class="info-card">
            <h4>ä½¿ç”¨è§„èŒƒ</h4>
            <p>
              é‡‘é¢æ•°å­—å‰åŠ "äººæ°‘å¸"å­—æ ·
              <br />
              å¤§å†™é‡‘é¢æ•°å­—åˆ°å…ƒä¸ºæ­¢åŠ "æ•´"
            </p>
          </div>
          <div class="info-card">
            <h4>é€‚ç”¨èŒƒå›´</h4>
            <p>
              é“¶è¡Œç¥¨æ®ã€åˆåŒã€å‘ç¥¨
              <br />
              è´¢åŠ¡æŠ¥è¡¨ã€æ”¶æ®ç­‰æ­£å¼æ–‡ä»¶
            </p>
          </div>
        </div>
      </details>
    </main>

    <script>
      // Theme toggle
      window.toggleTheme = function () {
        var html = document.documentElement;
        var currentTheme = html.getAttribute("data-theme");
        var newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
      };

      // Load saved theme
      (function () {
        var savedTheme = localStorage.getItem("theme") || "light";
        document.documentElement.setAttribute("data-theme", savedTheme);
      })();

      function showMessage(msg, isError) {
        var messageDiv = document.getElementById("message");
        var p = document.createElement("p");
        p.className = isError ? "error" : "success-msg";
        p.textContent = msg;
        messageDiv.textContent = "";
        messageDiv.appendChild(p);
        setTimeout(function () {
          messageDiv.textContent = "";
        }, 3000);
      }

      window.useExample = function (value) {
        document.getElementById("numberInput").value = value;
        convert();
      };

      window.appendNumber = function (str) {
        var input = document.getElementById("numberInput");
        input.value += str;
        input.focus();
        convert();
      };

      window.clearInput = function () {
        document.getElementById("numberInput").value = "";
        document.getElementById("resultValue").textContent = "è¯·è¾“å…¥é‡‘é¢";
        document.getElementById("resultValue").className = "result-value";
        resetFormats();
      };

      window.backspace = function () {
        var input = document.getElementById("numberInput");
        input.value = input.value.slice(0, -1);
        if (input.value) {
          convert();
        } else {
          clearInput();
        }
      };

      function resetFormats() {
        document.getElementById("formatThousands").textContent = "-";
        document.getElementById("formatAccounting").textContent = "-";
        document.getElementById("formatChineseSmall").textContent = "-";
      }

      window.copyResult = function () {
        var result = document.getElementById("resultValue").textContent;
        if (result === "è¯·è¾“å…¥é‡‘é¢" || result.indexOf("é”™è¯¯") >= 0) {
          showMessage("æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹", true);
          return;
        }
        navigator.clipboard
          .writeText(result)
          .then(function () {
            showMessage("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿", false);
          })
          .catch(function () {
            showMessage("å¤åˆ¶å¤±è´¥", true);
          });
      };

      window.copyFormat = function (id) {
        var value = document.getElementById(id).textContent;
        if (value === "-") {
          showMessage("æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹", true);
          return;
        }
        navigator.clipboard
          .writeText(value)
          .then(function () {
            showMessage("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿", false);
          })
          .catch(function () {
            showMessage("å¤åˆ¶å¤±è´¥", true);
          });
      };

      // Chinese uppercase number conversion
      var cnNums = ["é›¶", "å£¹", "è´°", "å", "è‚†", "ä¼", "é™†", "æŸ’", "æŒ", "ç–"];
      var cnIntRadice = ["", "æ‹¾", "ä½°", "ä»Ÿ"];
      var cnIntUnits = ["", "ä¸‡", "äº¿", "å…†"];
      var cnDecUnits = ["è§’", "åˆ†"];
      var cnInteger = "æ•´";
      var cnIntLast = "å…ƒ";
      var cnNegative = "è´Ÿ";
      var maxNum = 9999999999999.99; // æœ€å¤§æ”¯æŒä¸‡äº¿çº§åˆ«

      function numberToChinese(num) {
        var addCurrency = document.getElementById("optCurrency").checked;
        var addZheng = document.getElementById("optZheng").checked;
        var addPrefix = document.getElementById("optPrefix").checked;
        var allowNegative = document.getElementById("optNegative").checked;

        // Clean input
        num = num.toString().replace(/,/g, "").replace(/\s/g, "");

        // Check for negative
        var negative = false;
        if (num.charAt(0) === "-") {
          if (!allowNegative) {
            return "é”™è¯¯ï¼šä¸æ”¯æŒè´Ÿæ•°ï¼Œè¯·åœ¨é€‰é¡¹ä¸­å¼€å¯";
          }
          negative = true;
          num = num.substring(1);
        }

        // Validate
        if (!/^[0-9]+\.?[0-9]*$/.test(num)) {
          return "é”™è¯¯ï¼šè¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—";
        }

        var numFloat = parseFloat(num);
        if (isNaN(numFloat)) {
          return "é”™è¯¯ï¼šè¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—";
        }

        if (numFloat > maxNum) {
          return "é”™è¯¯ï¼šæ•°å­—è¶…å‡ºæœ€å¤§èŒƒå›´";
        }

        // Handle zero
        if (numFloat === 0) {
          var zeroResult = cnNums[0];
          if (addCurrency) {
            zeroResult += cnIntLast;
            if (addZheng) {
              zeroResult += cnInteger;
            }
          }
          if (addPrefix) {
            zeroResult = "äººæ°‘å¸" + zeroResult;
          }
          return zeroResult;
        }

        // Split integer and decimal
        var parts = num.split(".");
        var integerPart = parts[0];
        var decimalPart = parts.length > 1 ? parts[1].substring(0, 2) : "";

        // Pad decimal to 2 digits
        if (decimalPart.length === 1) {
          decimalPart += "0";
        }

        var chineseStr = "";

        // Convert integer part
        if (parseInt(integerPart) > 0) {
          var zeroCount = 0;
          var intLen = integerPart.length;

          for (var i = 0; i < intLen; i++) {
            var n = integerPart.substring(i, i + 1);
            var p = intLen - i - 1;
            var q = Math.floor(p / 4);
            var m = p % 4;

            if (n === "0") {
              zeroCount++;
            } else {
              if (zeroCount > 0) {
                chineseStr += cnNums[0];
              }
              zeroCount = 0;
              chineseStr += cnNums[parseInt(n)] + cnIntRadice[m];
            }

            if (m === 0 && zeroCount < 4) {
              chineseStr += cnIntUnits[q];
            }
          }

          if (addCurrency) {
            chineseStr += cnIntLast;
          }
        }

        // Convert decimal part
        if (decimalPart) {
          var decInt = parseInt(decimalPart);
          if (decInt > 0) {
            var jiao = parseInt(decimalPart.charAt(0));
            var fen = decimalPart.length > 1 ? parseInt(decimalPart.charAt(1)) : 0;

            if (parseInt(integerPart) === 0 && !addCurrency) {
              // Only decimal, no integer
              if (jiao > 0) {
                chineseStr += cnNums[jiao] + cnDecUnits[0];
              }
              if (fen > 0) {
                if (jiao === 0) {
                  chineseStr += cnNums[0];
                }
                chineseStr += cnNums[fen] + cnDecUnits[1];
              }
            } else {
              if (jiao > 0) {
                chineseStr += cnNums[jiao] + cnDecUnits[0];
              } else if (fen > 0) {
                chineseStr += cnNums[0];
              }
              if (fen > 0) {
                chineseStr += cnNums[fen] + cnDecUnits[1];
              }
            }
          } else if (addCurrency && addZheng && parseInt(integerPart) > 0) {
            chineseStr += cnInteger;
          }
        } else if (addCurrency && addZheng && parseInt(integerPart) > 0) {
          chineseStr += cnInteger;
        }

        // Add prefix
        if (addPrefix) {
          chineseStr = "äººæ°‘å¸" + chineseStr;
        }

        // Add negative sign
        if (negative) {
          chineseStr = cnNegative + chineseStr;
        }

        return chineseStr;
      }

      // Format functions
      function formatThousands(num) {
        num = parseFloat(num.toString().replace(/,/g, ""));
        if (isNaN(num)) return "-";

        var parts = num.toFixed(2).split(".");
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return parts.join(".");
      }

      function formatAccounting(num) {
        num = parseFloat(num.toString().replace(/,/g, ""));
        if (isNaN(num)) return "-";

        var formatted = formatThousands(Math.abs(num));
        if (num < 0) {
          return "(" + formatted + ")";
        }
        return formatted;
      }

      function formatChineseSmall(num) {
        num = parseFloat(num.toString().replace(/,/g, ""));
        if (isNaN(num)) return "-";

        var smallNums = ["ã€‡", "ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹"];
        var units = ["", "å", "ç™¾", "åƒ", "ä¸‡", "å", "ç™¾", "åƒ", "äº¿"];

        var negative = num < 0;
        num = Math.abs(num);

        var parts = num.toString().split(".");
        var intPart = parts[0];
        var decPart = parts.length > 1 ? parts[1] : "";

        var result = "";
        var intLen = intPart.length;

        for (var i = 0; i < intLen; i++) {
          var digit = parseInt(intPart.charAt(i));
          var pos = intLen - i - 1;

          if (digit === 0) {
            if (result && result.charAt(result.length - 1) !== smallNums[0]) {
              result += smallNums[0];
            }
          } else {
            result += smallNums[digit];
            if (pos > 0) {
              result += units[pos % 9];
            }
          }

          // Add ä¸‡ or äº¿
          if (pos === 4 && result.charAt(result.length - 1) !== "ä¸‡") {
            if (result.charAt(result.length - 1) === smallNums[0]) {
              result = result.slice(0, -1);
            }
            result += "ä¸‡";
          }
          if (pos === 8 && result.charAt(result.length - 1) !== "äº¿") {
            if (result.charAt(result.length - 1) === smallNums[0]) {
              result = result.slice(0, -1);
            }
            result += "äº¿";
          }
        }

        // Remove trailing zero
        if (result.charAt(result.length - 1) === smallNums[0]) {
          result = result.slice(0, -1);
        }

        // Handle decimal
        if (decPart) {
          result += "ç‚¹";
          for (var j = 0; j < decPart.length; j++) {
            result += smallNums[parseInt(decPart.charAt(j))];
          }
        }

        if (negative) {
          result = "è´Ÿ" + result;
        }

        return result || smallNums[0];
      }

      function convert() {
        var input = document.getElementById("numberInput").value.trim();
        var resultDiv = document.getElementById("resultValue");

        if (!input) {
          resultDiv.textContent = "è¯·è¾“å…¥é‡‘é¢";
          resultDiv.className = "result-value";
          resetFormats();
          return;
        }

        var result = numberToChinese(input);
        resultDiv.textContent = result;

        if (result.indexOf("é”™è¯¯") >= 0) {
          resultDiv.className = "result-value error";
          resetFormats();
        } else {
          resultDiv.className = result.length > 20 ? "result-value small" : "result-value";

          // Update other formats
          var cleanNum = input.replace(/,/g, "");
          document.getElementById("formatThousands").textContent = formatThousands(cleanNum);
          document.getElementById("formatAccounting").textContent = formatAccounting(cleanNum);
          document.getElementById("formatChineseSmall").textContent = formatChineseSmall(cleanNum);
        }
      }

      // Auto-convert on input (debounced)
      var timeout;
      document.getElementById("numberInput").addEventListener("input", function () {
        clearTimeout(timeout);
        timeout = setTimeout(function () {
          convert();
        }, 300);
      });

      // Option change handlers
      var optionCheckboxes = document.querySelectorAll('.option-group input[type="checkbox"]');
      optionCheckboxes.forEach(function (checkbox) {
        checkbox.addEventListener("change", function () {
          if (document.getElementById("numberInput").value.trim()) {
            convert();
          }
        });
      });

      // Allow only valid number input
      document.getElementById("numberInput").addEventListener("keypress", function (e) {
        var char = String.fromCharCode(e.which);
        var value = this.value;

        // Allow: numbers, decimal point, minus sign
        if (!/[\d.-]/.test(char)) {
          e.preventDefault();
          return;
        }

        // Only one decimal point
        if (char === "." && value.indexOf(".") >= 0) {
          e.preventDefault();
          return;
        }

        // Minus only at start
        if (char === "-" && (value.length > 0 || this.selectionStart > 0)) {
          e.preventDefault();
          return;
        }

        // Max 2 decimal places
        var decimalIndex = value.indexOf(".");
        if (decimalIndex >= 0) {
          var decimals = value.substring(decimalIndex + 1);
          if (decimals.length >= 2 && this.selectionStart > decimalIndex && char !== ".") {
            e.preventDefault();
            return;
          }
        }
      });
    </script>
  </body>
</html>
