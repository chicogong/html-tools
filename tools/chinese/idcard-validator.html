<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>身份证号码验证解析器 - HTML Tools</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #10b981; --accent2: #06b6d4; --error: #f43f5e; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .card-title { font-size: 1rem; color: var(--text2); margin-bottom: 16px; font-weight: 500; }
        .input-group { display: flex; gap: 12px; margin-bottom: 16px; }
        .input-group input { flex: 1; padding: 14px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1.1rem; font-family: 'Courier New', monospace; letter-spacing: 1px; }
        .input-group input:focus { outline: none; border-color: var(--accent); }
        .btn { padding: 14px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.2s; }
        .btn-primary { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; }
        .btn-primary:hover { opacity: 0.9; }
        .btn-secondary { background: var(--bg); border: 1px solid var(--border); color: var(--text); padding: 14px 16px; }
        .btn-secondary:hover { border-color: var(--accent); }
        .result-hero { padding: 24px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
        .result-hero.valid { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; }
        .result-hero.invalid { background: linear-gradient(135deg, var(--error), #f97316); color: white; }
        .result-hero .icon { font-size: 2.5rem; margin-bottom: 8px; }
        .result-hero .status { font-size: 1.3rem; font-weight: 600; }
        .info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        @media (max-width: 500px) { .info-grid { grid-template-columns: 1fr; } }
        .info-item { background: var(--bg); border-radius: 8px; padding: 16px; }
        .info-item .label { font-size: 0.85rem; color: var(--text2); margin-bottom: 6px; }
        .info-item .value { font-size: 1.1rem; font-weight: 500; }
        .info-item .value.highlight { color: var(--accent); }
        .id-breakdown { background: var(--bg); border-radius: 8px; padding: 16px; margin-top: 16px; }
        .id-breakdown .title { font-size: 0.9rem; color: var(--text2); margin-bottom: 12px; }
        .id-parts { display: flex; flex-wrap: wrap; gap: 4px; font-family: 'Courier New', monospace; font-size: 1.1rem; }
        .id-part { padding: 8px 12px; border-radius: 6px; position: relative; }
        .id-part.region { background: rgba(99, 102, 241, 0.2); color: #818cf8; }
        .id-part.birth { background: rgba(16, 185, 129, 0.2); color: #34d399; }
        .id-part.seq { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
        .id-part.check { background: rgba(236, 72, 153, 0.2); color: #f472b6; }
        .legend { display: flex; gap: 16px; margin-top: 12px; flex-wrap: wrap; font-size: 0.85rem; color: var(--text2); }
        .legend-item { display: flex; align-items: center; gap: 6px; }
        .legend-dot { width: 12px; height: 12px; border-radius: 3px; }
        .hidden { display: none; }
        .error-msg { color: var(--error); font-size: 0.9rem; margin-top: 8px; }
            .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">← 返回</a>
        <h1>身份证号码验证解析器</h1>
        <p class="subtitle">验证身份证号码有效性，解析其中包含的信息</p>
        
        <div class="card">
            <div class="card-title">输入身份证号码</div>
            <div class="input-group">
                <input type="text" id="idInput" placeholder="请输入18位身份证号码" maxlength="18" oninput="validateInput()">
                <button class="btn btn-secondary" onclick="pasteFromClipboard()">粘贴</button>
                <button class="btn btn-primary" onclick="validate()">验证</button>
            </div>
            <div class="error-msg hidden" id="errorMsg"></div>
        </div>
        
        <div id="resultSection" class="hidden">
            <div class="result-hero" id="resultHero">
                <div class="icon" id="resultIcon"></div>
                <div class="status" id="resultStatus"></div>
            </div>
            
            <div class="card" id="infoCard">
                <div class="card-title">解析信息</div>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="label">户籍所在地</div>
                        <div class="value" id="region">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">出生日期</div>
                        <div class="value" id="birthDate">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">性别</div>
                        <div class="value" id="gender">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">年龄</div>
                        <div class="value highlight" id="age">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">生肖</div>
                        <div class="value" id="zodiac">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">星座</div>
                        <div class="value" id="constellation">-</div>
                    </div>
                </div>
                
                <div class="id-breakdown">
                    <div class="title">号码结构解析</div>
                    <div class="id-parts" id="idParts"></div>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(99, 102, 241, 0.5);"></div>地区码</div>
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(16, 185, 129, 0.5);"></div>出生日期</div>
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(245, 158, 11, 0.5);"></div>顺序码</div>
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(236, 72, 153, 0.5);"></div>校验码</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 地区码数据
        const regionData = {
            "11": "北京市", "12": "天津市", "13": "河北省", "14": "山西省", "15": "内蒙古自治区",
            "21": "辽宁省", "22": "吉林省", "23": "黑龙江省",
            "31": "上海市", "32": "江苏省", "33": "浙江省", "34": "安徽省", "35": "福建省", "36": "江西省", "37": "山东省",
            "41": "河南省", "42": "湖北省", "43": "湖南省", "44": "广东省", "45": "广西壮族自治区", "46": "海南省",
            "50": "重庆市", "51": "四川省", "52": "贵州省", "53": "云南省", "54": "西藏自治区",
            "61": "陕西省", "62": "甘肃省", "63": "青海省", "64": "宁夏回族自治区", "65": "新疆维吾尔自治区",
            "71": "台湾省", "81": "香港特别行政区", "82": "澳门特别行政区"
        };
        
        const cityData = {
            "1101": "北京市", "1201": "天津市", "3101": "上海市", "5001": "重庆市",
            "1301": "石家庄市", "1302": "唐山市", "1303": "秦皇岛市", "1304": "邯郸市",
            "1401": "太原市", "1402": "大同市", "1501": "呼和浩特市", "1502": "包头市",
            "2101": "沈阳市", "2102": "大连市", "2201": "长春市", "2301": "哈尔滨市",
            "3201": "南京市", "3202": "无锡市", "3203": "徐州市", "3204": "常州市", "3205": "苏州市",
            "3301": "杭州市", "3302": "宁波市", "3303": "温州市", "3401": "合肥市",
            "3501": "福州市", "3502": "厦门市", "3601": "南昌市", "3701": "济南市", "3702": "青岛市",
            "4101": "郑州市", "4102": "开封市", "4103": "洛阳市",
            "4201": "武汉市", "4301": "长沙市", "4401": "广州市", "4403": "深圳市",
            "4501": "南宁市", "4601": "海口市", "5101": "成都市", "5201": "贵阳市",
            "5301": "昆明市", "5401": "拉萨市", "6101": "西安市", "6201": "兰州市",
            "6301": "西宁市", "6401": "银川市", "6501": "乌鲁木齐市"
        };
        
        // 生肖
        const zodiacs = ['猴', '鸡', '狗', '猪', '鼠', '牛', '虎', '兔', '龙', '蛇', '马', '羊'];
        
        // 星座
        function getConstellation(month, day) {
            const dates = [20, 19, 21, 20, 21, 22, 23, 23, 23, 24, 23, 22];
            const names = ['水瓶座', '双鱼座', '白羊座', '金牛座', '双子座', '巨蟹座', '狮子座', '处女座', '天秤座', '天蝎座', '射手座', '摩羯座'];
            return day < dates[month - 1] ? names[month - 1] : names[month % 12];
        }
        
        // 验证输入
        function validateInput() {
            const input = document.getElementById('idInput');
            input.value = input.value.toUpperCase().replace(/[^0-9X]/g, '');
        }
        
        // 从剪贴板粘贴
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('idInput').value = text.trim().toUpperCase();
                validateInput();
            } catch (e) {
                console.error('无法访问剪贴板');
            }
        }
        
        // 计算校验码
        function calcCheckCode(id17) {
            const weights = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
            const checkCodes = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];
            let sum = 0;
            for (let i = 0; i < 17; i++) {
                sum += parseInt(id17[i]) * weights[i];
            }
            return checkCodes[sum % 11];
        }
        
        // 验证日期有效性
        function isValidDate(year, month, day) {
            const date = new Date(year, month - 1, day);
            return date.getFullYear() === year && 
                   date.getMonth() === month - 1 && 
                   date.getDate() === day &&
                   date <= new Date();
        }
        
        // 主验证函数
        function validate() {
            const id = document.getElementById('idInput').value.trim();
            const errorMsg = document.getElementById('errorMsg');
            const resultSection = document.getElementById('resultSection');
            const resultHero = document.getElementById('resultHero');
            const infoCard = document.getElementById('infoCard');
            
            errorMsg.classList.add('hidden');
            
            // 基本格式验证
            if (id.length !== 18) {
                showError('请输入18位身份证号码');
                return;
            }
            
            if (!/^\d{17}[\dX]$/.test(id)) {
                showError('身份证号码格式不正确');
                return;
            }
            
            // 地区码验证
            const provinceCode = id.substring(0, 2);
            if (!regionData[provinceCode]) {
                showResult(false, '地区码无效');
                return;
            }
            
            // 出生日期验证
            const year = parseInt(id.substring(6, 10));
            const month = parseInt(id.substring(10, 12));
            const day = parseInt(id.substring(12, 14));
            
            if (!isValidDate(year, month, day)) {
                showResult(false, '出生日期无效');
                return;
            }
            
            // 校验码验证
            const expectedCheck = calcCheckCode(id.substring(0, 17));
            if (id.charAt(17) !== expectedCheck) {
                showResult(false, '校验码错误');
                return;
            }
            
            // 验证通过，显示解析信息
            showResult(true, '身份证号码有效');
            showParsedInfo(id, year, month, day);
        }
        
        function showError(msg) {
            const errorMsg = document.getElementById('errorMsg');
            errorMsg.textContent = msg;
            errorMsg.classList.remove('hidden');
            document.getElementById('resultSection').classList.add('hidden');
        }
        
        function showResult(valid, message) {
            const resultSection = document.getElementById('resultSection');
            const resultHero = document.getElementById('resultHero');
            const infoCard = document.getElementById('infoCard');
            
            resultSection.classList.remove('hidden');
            resultHero.className = 'result-hero ' + (valid ? 'valid' : 'invalid');
            document.getElementById('resultIcon').textContent = valid ? '✓' : '✗';
            document.getElementById('resultStatus').textContent = message;
            
            if (!valid) {
                infoCard.classList.add('hidden');
            } else {
                infoCard.classList.remove('hidden');
            }
        }
        
        function showParsedInfo(id, year, month, day) {
            // 地区
            const provinceCode = id.substring(0, 2);
            const cityCode = id.substring(0, 4);
            let region = regionData[provinceCode];
            if (cityData[cityCode]) {
                region += ' ' + cityData[cityCode];
            }
            document.getElementById('region').textContent = region;
            
            // 出生日期
            document.getElementById('birthDate').textContent = `${year}年${month}月${day}日`;
            
            // 性别
            const genderCode = parseInt(id.charAt(16));
            document.getElementById('gender').textContent = genderCode % 2 === 1 ? '男' : '女';
            
            // 年龄
            const today = new Date();
            let age = today.getFullYear() - year;
            if (today.getMonth() + 1 < month || (today.getMonth() + 1 === month && today.getDate() < day)) {
                age--;
            }
            document.getElementById('age').textContent = age + '岁';
            
            // 生肖
            document.getElementById('zodiac').textContent = zodiacs[year % 12];
            
            // 星座
            document.getElementById('constellation').textContent = getConstellation(month, day);
            
            // 号码结构解析
            const partsContainer = document.getElementById('idParts');
            partsContainer.textContent = '';
            
            const parts = [
                { text: id.substring(0, 6), class: 'region', title: '地区码' },
                { text: id.substring(6, 14), class: 'birth', title: '出生日期' },
                { text: id.substring(14, 17), class: 'seq', title: '顺序码' },
                { text: id.substring(17, 18), class: 'check', title: '校验码' }
            ];
            
            parts.forEach(part => {
                const span = document.createElement('span');
                span.className = 'id-part ' + part.class;
                span.textContent = part.text;
                span.title = part.title;
                partsContainer.appendChild(span);
            });
        }
        
        // 回车键触发验证
        document.getElementById('idInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') validate();
        });
    </script>
</body>
</html>
