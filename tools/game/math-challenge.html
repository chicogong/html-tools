<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Êï∞Â≠¶ÊåëÊàò - HTML Tools</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --text-primary: #e8e8ed;
      --text-secondary: #a0a0b0;
      --accent-cyan: #00f5d4;
      --accent-magenta: #f72585;
      --border-subtle: #2a2a3a;
      --radius-md: 12px;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg-deep);
      color: var(--text-primary);
      min-height: 100vh;
      padding: 20px;
    }
    .container { max-width: 500px; margin: 0 auto; text-align: center; }
    .back-link {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.9rem;
      display: inline-block;
      margin-bottom: 20px;
    }
    h1 { font-size: 1.8rem; margin-bottom: 20px; }
    .stats {
      display: flex;
      justify-content: space-around;
      margin-bottom: 30px;
    }
    .stat { text-align: center; }
    .stat-value { font-size: 2rem; color: var(--accent-cyan); }
    .stat-label { font-size: 0.8rem; color: var(--text-secondary); }
    .difficulty {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .difficulty button {
      padding: 8px 16px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      cursor: pointer;
      font-family: inherit;
    }
    .difficulty button.active { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    .question-box {
      background: var(--bg-surface);
      padding: 40px;
      border-radius: var(--radius-md);
      margin-bottom: 20px;
    }
    .question { font-size: 3rem; margin-bottom: 20px; }
    input {
      width: 150px;
      padding: 15px;
      font-size: 2rem;
      font-family: inherit;
      background: var(--bg-deep);
      border: 2px solid var(--border-subtle);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      text-align: center;
      outline: none;
    }
    input:focus { border-color: var(--accent-cyan); }
    input.correct { border-color: #00ff88; background: rgba(0,255,136,0.1); }
    input.wrong { border-color: #ff6b6b; background: rgba(255,107,107,0.1); }
    .streak { margin-top: 20px; font-size: 1.2rem; }
    .streak-fire { color: #ff6b6b; }
    .progress {
      height: 6px;
      background: var(--border-subtle);
      border-radius: 3px;
      margin-bottom: 20px;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-cyan), var(--accent-magenta));
      border-radius: 3px;
      transition: width 0.3s;
    }
    .btn {
      padding: 12px 30px;
      font-size: 1rem;
      font-family: inherit;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta));
      border: none;
      border-radius: var(--radius-md);
      color: var(--bg-deep);
      cursor: pointer;
      font-weight: 600;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="../../index.html" class="back-link">‚Üê ËøîÂõûÈ¶ñÈ°µ</a>
    <h1>üî¢ Êï∞Â≠¶ÊåëÊàò</h1>
    
    <div class="difficulty">
      <button class="active" onclick="setDifficulty('easy', this)">ÁÆÄÂçï</button>
      <button onclick="setDifficulty('medium', this)">‰∏≠Á≠â</button>
      <button onclick="setDifficulty('hard', this)">Âõ∞Èöæ</button>
    </div>
    
    <div class="stats">
      <div class="stat">
        <div class="stat-value" id="score">0</div>
        <div class="stat-label">ÂæóÂàÜ</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="time">60</div>
        <div class="stat-label">Êó∂Èó¥</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="correct">0</div>
        <div class="stat-label">Ê≠£Á°Æ</div>
      </div>
    </div>
    
    <div class="progress"><div class="progress-fill" id="progress"></div></div>
    
    <div class="question-box">
      <div class="question" id="question">12 + 8 = ?</div>
      <input type="number" id="answer" autofocus />
    </div>
    
    <div class="streak" id="streak"></div>
    
    <button class="btn" id="startBtn" onclick="startGame()">ÂºÄÂßãÊ∏∏Êàè</button>
  </div>
  
  <script>
    let difficulty = 'easy';
    let score = 0;
    let correctCount = 0;
    let streak = 0;
    let currentAnswer = 0;
    let timeLeft = 60;
    let timer = null;
    let gameActive = false;
    
    const config = {
      easy: { max: 20, ops: ['+', '-'] },
      medium: { max: 50, ops: ['+', '-', '√ó'] },
      hard: { max: 100, ops: ['+', '-', '√ó', '√∑'] }
    };
    
    function setDifficulty(level, btn) {
      difficulty = level;
      document.querySelectorAll('.difficulty button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      if (!gameActive) generateQuestion();
    }
    
    function generateQuestion() {
      const cfg = config[difficulty];
      const op = cfg.ops[Math.floor(Math.random() * cfg.ops.length)];
      let a, b;
      
      if (op === '√∑') {
        b = Math.floor(Math.random() * 12) + 1;
        currentAnswer = Math.floor(Math.random() * 12) + 1;
        a = b * currentAnswer;
      } else {
        a = Math.floor(Math.random() * cfg.max) + 1;
        b = Math.floor(Math.random() * cfg.max) + 1;
        if (op === '-' && a < b) [a, b] = [b, a];
        
        switch (op) {
          case '+': currentAnswer = a + b; break;
          case '-': currentAnswer = a - b; break;
          case '√ó': currentAnswer = a * b; break;
        }
      }
      
      document.getElementById('question').textContent = `${a} ${op} ${b} = ?`;
      document.getElementById('answer').value = '';
      document.getElementById('answer').className = '';
    }
    
    function checkAnswer() {
      const input = document.getElementById('answer');
      const userAnswer = parseInt(input.value);
      
      if (userAnswer === currentAnswer) {
        streak++;
        correctCount++;
        const bonus = streak >= 5 ? 3 : streak >= 3 ? 2 : 1;
        const points = (difficulty === 'easy' ? 10 : difficulty === 'medium' ? 20 : 30) * bonus;
        score += points;
        input.className = 'correct';
        updateStreak();
      } else {
        streak = 0;
        input.className = 'wrong';
        updateStreak();
      }
      
      document.getElementById('score').textContent = score;
      document.getElementById('correct').textContent = correctCount;
      
      setTimeout(() => {
        generateQuestion();
        input.focus();
      }, 300);
    }
    
    function updateStreak() {
      const el = document.getElementById('streak');
      if (streak >= 3) {
        el.innerHTML = `<span class="streak-fire">üî•</span> ËøûÂáª x${streak}ÔºÅ`;
      } else {
        el.textContent = '';
      }
    }
    
    function startGame() {
      score = 0;
      correctCount = 0;
      streak = 0;
      timeLeft = 60;
      gameActive = true;
      
      document.getElementById('score').textContent = 0;
      document.getElementById('correct').textContent = 0;
      document.getElementById('time').textContent = 60;
      document.getElementById('startBtn').textContent = 'ÈáçÊñ∞ÂºÄÂßã';
      document.getElementById('answer').disabled = false;
      
      generateQuestion();
      document.getElementById('answer').focus();
      
      if (timer) clearInterval(timer);
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('time').textContent = timeLeft;
        document.getElementById('progress').style.width = (timeLeft / 60 * 100) + '%';
        if (timeLeft <= 0) endGame();
      }, 1000);
    }
    
    function endGame() {
      clearInterval(timer);
      gameActive = false;
      document.getElementById('answer').disabled = true;
      document.getElementById('question').textContent = `Ê∏∏ÊàèÁªìÊùü! ÂæóÂàÜ: ${score}`;
      
      const high = localStorage.getItem('math_high_' + difficulty) || 0;
      if (score > high) {
        localStorage.setItem('math_high_' + difficulty, score);
        document.getElementById('streak').innerHTML = 'üéâ Êñ∞Á∫™ÂΩïÔºÅ';
      }
    }
    
    document.getElementById('answer').addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && gameActive && this.value) {
        checkAnswer();
      }
    });
    
    generateQuestion();
  </script>
</body>
</html>
