<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹´å‡è®¡ç®—å™¨ - WebUtils</title>
  <!-- SEO Meta Tags -->
  <meta name="description" content="å¹´å‡è®¡ç®—å™¨ - WebUtils" />
  <meta name="keywords" content="annual-leave,life,tools,webutils" />
  <meta name="author" content="WebUtils" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://tools.realtime-ai.chat/tools/life/annual-leave.html" />

  <!-- Open Graph -->
  <meta property="og:title" content="å¹´å‡è®¡ç®—å™¨ - WebUtils" />
  <meta property="og:description" content="å¹´å‡è®¡ç®—å™¨ - WebUtils" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://tools.realtime-ai.chat/tools/life/annual-leave.html" />
  <meta property="og:site_name" content="WebUtils" />
  <meta property="og:locale" content="zh_CN" />
  <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
  <meta property="og:image:width" content="1280" />
  <meta property="og:image:height" content="640" />
  <meta property="og:image:type" content="image/png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="å¹´å‡è®¡ç®—å™¨ - WebUtils" />
  <meta name="twitter:description" content="å¹´å‡è®¡ç®—å™¨ - WebUtils" />
  <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <meta name="description" content="æ ¹æ®ã€ŠèŒå·¥å¸¦è–ªå¹´ä¼‘å‡æ¡ä¾‹ã€‹è®¡ç®—å¹´å‡å¤©æ•°ï¼Œæ”¯æŒç´¯è®¡å·¥é¾„è®¡ç®—ã€æ–°å…¥èŒæŠ˜ç®—ã€ç¦»èŒæŠ˜ç®—ã€æœªä¼‘å¹´å‡å·¥èµ„è¡¥å¿è®¡ç®—">
    <meta name="keywords" content="å¹´å‡è®¡ç®—,å¸¦è–ªå¹´ä¼‘å‡,å¹´å‡å¤©æ•°,å·¥é¾„è®¡ç®—,å¹´å‡è¡¥å¿,æœªä¼‘å¹´å‡">
    <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --bg-card: #1a1a24;
      --bg-input: #0e0e14;
      --text-primary: #e8e8ed;
      --text-secondary: #8888a0;
      --text-muted: #55556a;
      --border-subtle: #2a2a3a;
      --border-strong: #3a3a4a;
      --accent-cyan: #00f5d4;
      --accent-green: #10b981;
      --accent-red: #f43f5e;
      --accent-yellow: #fbbf24;
      --accent-purple: #a855f7;
      --glow-cyan: rgb(0, 245, 212, 0.15);
      --glow-green: rgb(16, 185, 129, 0.15);
      --glow-red: rgb(244, 63, 94, 0.15);
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
    }

    [data-theme="light"] {
      --bg-deep: #fafafa;
      --bg-surface: #fff;
      --bg-card: #fff;
      --bg-input: #f5f5f5;
      --bg-hover: #f5f5f5;
      --text-primary: #1a1a1a;
      --text-secondary: #666;
      --text-muted: #999;
      --border-subtle: #e5e5e5;
      --border-strong: #d5d5d5;
    }

    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid var(--border-subtle);
      background: var(--bg-card);
      cursor: pointer;
      font-size: 1.2rem;
      z-index: 100;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

        :root {
            --bg-color: #f5f7fa;
            --card-bg: #fff;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --border-color: #e1e8ed;
            --primary-color: #3498db;
            --primary-hover: #2980b9;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #1a1a2e;
                --card-bg: #16213e;
                --text-primary: #eaf0f6;
                --text-secondary: #a0aab4;
                --border-color: #2d3748;
                --primary-color: #5dade2;
                --primary-hover: #3498db;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: var(--bg-color);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 8px;
            font-size: 1.8rem;
        }

        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 0.95rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-group label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group select {
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--bg-color);
            color: var(--text-primary);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .help-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        /* è®¡ç®—æ¨¡å¼é€‰æ‹© */
        .mode-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .mode-tab {
            padding: 10px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
        }

        .mode-tab:hover {
            border-color: var(--primary-color);
        }

        .mode-tab.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        /* å·¥é¾„è¾“å…¥æ–¹å¼ */
        .input-method {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .method-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            background: var(--bg-color);
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .method-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .input-section {
            display: none;
        }

        .input-section.show {
            display: block;
        }

        /* ç»“æœå±•ç¤º */
        .result-section {
            display: none;
        }

        .result-section.show {
            display: block;
        }

        .result-main {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            border-radius: 16px;
            color: white;
            margin-bottom: 20px;
        }

        .result-value {
            font-size: 4rem;
            font-weight: 700;
            line-height: 1;
        }

        .result-unit {
            font-size: 1.5rem;
            opacity: 0.9;
        }

        .result-label {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-top: 8px;
        }

        .result-details {
            display: grid;
            gap: 12px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-color);
            border-radius: 8px;
        }

        .detail-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .detail-value {
            font-weight: 600;
            font-size: 1.05rem;
        }

        .detail-value.highlight {
            color: var(--primary-color);
        }

        /* æ”¿ç­–è¯´æ˜ */
        .policy-box {
            background: var(--bg-color);
            border-radius: 10px;
            padding: 16px;
            margin-top: 20px;
        }

        .policy-title {
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .policy-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .policy-table th,
        .policy-table td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .policy-table th {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .policy-table tr:last-child td {
            border-bottom: none;
        }

        /* è¡¥å¿è®¡ç®—åŒº */
        .compensation-section {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .compensation-section.show {
            display: block;
        }

        .compensation-result {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid var(--danger-color);
            border-radius: 10px;
            padding: 16px;
            margin-top: 16px;
        }

        .compensation-result .value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--danger-color);
        }

        .info-note {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 12px;
            padding: 10px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 6px;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            .result-value {
                font-size: 3rem;
            }
            .mode-tabs {
                flex-direction: column;
            }
            .mode-tab {
                text-align: center;
            }
        }
    
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
    <span id="theme-icon">ğŸŒ™</span>
  </button>

    <nav class="breadcrumb"><a href="../../index.html">é¦–é¡µ</a><span>â€º</span><a href="../../index.html#life">ç”Ÿæ´»å·¥å…·</a><span>â€º</span>å¹´å‡è®¡ç®—å™¨</nav>
    <div class="container">
        <h1>ğŸ–ï¸ å¹´å‡è®¡ç®—å™¨</h1>
        <p class="subtitle">ä¾æ®ã€ŠèŒå·¥å¸¦è–ªå¹´ä¼‘å‡æ¡ä¾‹ã€‹è®¡ç®—å¸¦è–ªå¹´ä¼‘å‡å¤©æ•°</p>

        <!-- è®¡ç®—æ¨¡å¼ -->
        <div class="card">
            <div class="card-title">
                <span>ğŸ“‹</span> é€‰æ‹©è®¡ç®—åœºæ™¯
            </div>
            <div class="mode-tabs">
                <button class="mode-tab active" data-mode="standard" onclick="switchMode('standard')">
                    ğŸ“… æ ‡å‡†å¹´å‡è®¡ç®—
                </button>
                <button class="mode-tab" data-mode="newEntry" onclick="switchMode('newEntry')">
                    ğŸ†• æ–°å…¥èŒæŠ˜ç®—
                </button>
                <button class="mode-tab" data-mode="resign" onclick="switchMode('resign')">
                    ğŸ‘‹ ç¦»èŒæŠ˜ç®—
                </button>
                <button class="mode-tab" data-mode="compensation" onclick="switchMode('compensation')">
                    ğŸ’° æœªä¼‘å¹´å‡è¡¥å¿
                </button>
            </div>
        </div>

        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="card">
            <div class="card-title">
                <span>âœï¸</span> è¾“å…¥ä¿¡æ¯
            </div>

            <!-- å·¥é¾„è¾“å…¥æ–¹å¼é€‰æ‹© -->
            <div class="form-group" style="margin-bottom: 16px;">
                <label>ç´¯è®¡å·¥é¾„è¾“å…¥æ–¹å¼</label>
                <div class="input-method">
                    <button class="method-btn active" data-method="years" onclick="switchInputMethod('years')">ç›´æ¥è¾“å…¥å¹´æ•°</button>
                    <button class="method-btn" data-method="date" onclick="switchInputMethod('date')">æŒ‰å·¥ä½œæ—¥æœŸè®¡ç®—</button>
                </div>
            </div>

            <!-- ç›´æ¥è¾“å…¥å¹´æ•° -->
            <div class="input-section show" id="yearsInput">
                <div class="form-row">
                    <div class="form-group">
                        <label>ç´¯è®¡å·¥é¾„ï¼ˆå¹´ï¼‰</label>
                        <input type="number" id="workYears" placeholder="è¾“å…¥ç´¯è®¡å·¥ä½œå¹´æ•°" min="0" max="50" step="1">
                        <span class="help-text">åŒ…æ‹¬æ‰€æœ‰å•ä½çš„ç´¯è®¡å·¥ä½œå¹´é™</span>
                    </div>
                </div>
            </div>

            <!-- æŒ‰æ—¥æœŸè®¡ç®— -->
            <div class="input-section" id="dateInput">
                <div class="form-row">
                    <div class="form-group">
                        <label>é¦–æ¬¡å‚åŠ å·¥ä½œæ—¥æœŸ</label>
                        <input type="date" id="firstWorkDate">
                        <span class="help-text">ç¬¬ä¸€ä»½å·¥ä½œçš„å…¥èŒæ—¥æœŸ</span>
                    </div>
                    <div class="form-group">
                        <label>è®¡ç®—æˆªæ­¢æ—¥æœŸ</label>
                        <input type="date" id="calcDate">
                        <span class="help-text">é€šå¸¸ä¸ºå½“å¹´12æœˆ31æ—¥</span>
                    </div>
                </div>
            </div>

            <!-- æ–°å…¥èŒæŠ˜ç®—ä¸“ç”¨ -->
            <div class="input-section" id="newEntrySection">
                <div class="form-row">
                    <div class="form-group">
                        <label>æ–°å•ä½å…¥èŒæ—¥æœŸ</label>
                        <input type="date" id="entryDate">
                    </div>
                    <div class="form-group">
                        <label>å½“å¹´å‰©ä½™å¤©æ•°è®¡ç®—æˆªæ­¢æ—¥</label>
                        <input type="date" id="yearEndDate">
                        <span class="help-text">é€šå¸¸ä¸º12æœˆ31æ—¥</span>
                    </div>
                </div>
            </div>

            <!-- ç¦»èŒæŠ˜ç®—ä¸“ç”¨ -->
            <div class="input-section" id="resignSection">
                <div class="form-row">
                    <div class="form-group">
                        <label>å½“å¹´å…¥èŒæ—¥æœŸ</label>
                        <input type="date" id="yearStartDate">
                        <span class="help-text">å½“å¹´1æœˆ1æ—¥æˆ–å…¥èŒæ—¥æœŸï¼ˆå–è¾ƒæ™šè€…ï¼‰</span>
                    </div>
                    <div class="form-group">
                        <label>ç¦»èŒæ—¥æœŸ</label>
                        <input type="date" id="resignDate">
                    </div>
                </div>
            </div>

            <!-- æœªä¼‘å¹´å‡è¡¥å¿ä¸“ç”¨ -->
            <div class="input-section" id="compensationSection">
                <div class="form-row">
                    <div class="form-group">
                        <label>åº”ä¼‘å¹´å‡å¤©æ•°</label>
                        <input type="number" id="totalLeaveDays" placeholder="åº”ä¼‘å¤©æ•°" min="0" max="20">
                    </div>
                    <div class="form-group">
                        <label>å·²ä¼‘å¹´å‡å¤©æ•°</label>
                        <input type="number" id="usedLeaveDays" placeholder="å·²ä¼‘å¤©æ•°" min="0" max="20">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>æœˆå·¥èµ„ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="monthlySalary" placeholder="ç¨å‰æœˆå·¥èµ„">
                        <span class="help-text">ç”¨äºè®¡ç®—æ—¥å·¥èµ„ï¼ˆæœˆå·¥èµ„Ã·21.75ï¼‰</span>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="calculate()" style="margin-top: 16px;">
                ğŸ§® è®¡ç®—å¹´å‡
            </button>
        </div>

        <!-- è®¡ç®—ç»“æœ -->
        <div class="result-section" id="resultSection">
            <div class="card">
                <div class="result-main" id="resultMain">
                    <div class="result-value" id="resultValue">0</div>
                    <div class="result-unit">å¤©</div>
                    <div class="result-label" id="resultLabel">åº”ä¼‘å¹´å‡å¤©æ•°</div>
                </div>

                <div class="result-details" id="resultDetails">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>

                <!-- è¡¥å¿è®¡ç®—ç»“æœ -->
                <div class="compensation-result" id="compensationResult" style="display: none;">
                    <div style="margin-bottom: 8px; color: var(--text-secondary);">æœªä¼‘å¹´å‡å·¥èµ„è¡¥å¿</div>
                    <div class="value" id="compensationValue">Â¥0</div>
                    <div class="info-note">
                        ğŸ’¡ æ ¹æ®è§„å®šï¼Œç”¨äººå•ä½ç»èŒå·¥åŒæ„ä¸å®‰æ’å¹´ä¼‘å‡æˆ–å®‰æ’çš„å¹´ä¼‘å‡å°‘äºåº”ä¼‘å¤©æ•°çš„ï¼Œåº”æŒ‰æ—¥å·¥èµ„çš„300%æ”¯ä»˜æŠ¥é…¬ï¼ˆå…¶ä¸­åŒ…å«æ­£å¸¸å·¥ä½œæœŸé—´çš„å·¥èµ„æ”¶å…¥ï¼‰ã€‚
                    </div>
                </div>
            </div>
        </div>

        <!-- æ”¿ç­–è¯´æ˜ -->
        <div class="card">
            <div class="policy-box">
                <div class="policy-title">
                    <span>ğŸ“œ</span> å¹´å‡æ”¿ç­–æ ‡å‡†
                </div>
                <table class="policy-table">
                    <thead>
                        <tr>
                            <th>ç´¯è®¡å·¥é¾„</th>
                            <th>å¹´å‡å¤©æ•°</th>
                            <th>è¯´æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ä¸æ»¡1å¹´</td>
                            <td>0å¤©</td>
                            <td>æš‚æ— å¹´å‡èµ„æ ¼</td>
                        </tr>
                        <tr>
                            <td>1å¹´ â‰¤ å·¥é¾„ &lt; 10å¹´</td>
                            <td>5å¤©</td>
                            <td>åŸºç¡€å¹´å‡</td>
                        </tr>
                        <tr>
                            <td>10å¹´ â‰¤ å·¥é¾„ &lt; 20å¹´</td>
                            <td>10å¤©</td>
                            <td>ä¸­çº§å¹´å‡</td>
                        </tr>
                        <tr>
                            <td>å·¥é¾„ â‰¥ 20å¹´</td>
                            <td>15å¤©</td>
                            <td>é«˜çº§å¹´å‡</td>
                        </tr>
                    </tbody>
                </table>
                <div class="info-note" style="margin-top: 12px;">
                    <strong>æ³¨æ„ï¼š</strong>
                    <ul style="margin: 8px 0 0 16px; line-height: 1.8;">
                        <li>ç´¯è®¡å·¥é¾„æŒ‡åœ¨æ‰€æœ‰ç”¨äººå•ä½çš„å·¥ä½œå¹´é™ä¹‹å’Œ</li>
                        <li>å›½å®¶æ³•å®šä¼‘å‡æ—¥ã€ä¼‘æ¯æ—¥ä¸è®¡å…¥å¹´ä¼‘å‡</li>
                        <li>æ–°å…¥èŒå‘˜å·¥æŒ‰å½“å¹´å‰©ä½™æ—¥å†å¤©æ•°æŠ˜ç®—å¹´å‡ï¼ˆä¸è¶³1æ•´å¤©ä¸äº«å—ï¼‰</li>
                        <li>ç¦»èŒæ—¶æŒ‰å½“å¹´å·²è¿‡æ—¥å†å¤©æ•°æŠ˜ç®—å¹´å‡</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentMode = 'standard';
        let inputMethod = 'years';

        // åˆå§‹åŒ–æ—¥æœŸ
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date();
            const yearEnd = new Date(today.getFullYear(), 11, 31);
            const yearStart = new Date(today.getFullYear(), 0, 1);
            
            document.getElementById('calcDate').value = yearEnd.toISOString().split('T')[0];
            document.getElementById('yearEndDate').value = yearEnd.toISOString().split('T')[0];
            document.getElementById('yearStartDate').value = yearStart.toISOString().split('T')[0];
            document.getElementById('resignDate').value = today.toISOString().split('T')[0];
            document.getElementById('entryDate').value = today.toISOString().split('T')[0];
        });

        function switchMode(mode) {
            currentMode = mode;
            
            // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
            document.querySelectorAll('.mode-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.mode === mode);
            });

            // æ˜¾ç¤º/éšè—å¯¹åº”çš„è¾“å…¥åŒºåŸŸ
            document.getElementById('newEntrySection').classList.toggle('show', mode === 'newEntry');
            document.getElementById('resignSection').classList.toggle('show', mode === 'resign');
            document.getElementById('compensationSection').classList.toggle('show', mode === 'compensation');

            // éšè—ç»“æœ
            document.getElementById('resultSection').classList.remove('show');
        }

        function switchInputMethod(method) {
            inputMethod = method;
            
            document.querySelectorAll('.method-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.method === method);
            });

            document.getElementById('yearsInput').classList.toggle('show', method === 'years');
            document.getElementById('dateInput').classList.toggle('show', method === 'date');
        }

        function getWorkYears() {
            if (inputMethod === 'years') {
                return parseFloat(document.getElementById('workYears').value) || 0;
            } else {
                const firstDate = new Date(document.getElementById('firstWorkDate').value);
                const calcDate = new Date(document.getElementById('calcDate').value);
                
                if (isNaN(firstDate.getTime()) || isNaN(calcDate.getTime())) {
                    return 0;
                }

                const diffTime = calcDate.getTime() - firstDate.getTime();
                const diffDays = diffTime / (1000 * 60 * 60 * 24);
                return diffDays / 365;
            }
        }

        function getBaseLeaveDays(workYears) {
            if (workYears < 1) return 0;
            if (workYears < 10) return 5;
            if (workYears < 20) return 10;
            return 15;
        }

        function calculate() {
            const workYears = getWorkYears();
            const baseDays = getBaseLeaveDays(workYears);
            
            let resultDays = baseDays;
            let details = [];
            let showCompensation = false;

            details.push({ label: 'ç´¯è®¡å·¥é¾„', value: workYears.toFixed(1) + ' å¹´' });
            details.push({ label: 'åŸºå‡†å¹´å‡', value: baseDays + ' å¤©' });

            switch (currentMode) {
                case 'standard':
                    resultDays = baseDays;
                    break;

                case 'newEntry': {
                    const entryDate = new Date(document.getElementById('entryDate').value);
                    const yearEndDate = new Date(document.getElementById('yearEndDate').value);
                    
                    if (isNaN(entryDate.getTime()) || isNaN(yearEndDate.getTime())) {
                        alert('è¯·å¡«å†™æ­£ç¡®çš„æ—¥æœŸ');
                        return;
                    }

                    const remainingDays = Math.ceil((yearEndDate - entryDate) / (1000 * 60 * 60 * 24)) + 1;
                    const yearDays = isLeapYear(entryDate.getFullYear()) ? 366 : 365;
                    
                    // æŠ˜ç®—å…¬å¼ï¼š(å½“å¹´åº¦å‰©ä½™æ—¥å†å¤©æ•°Ã·365å¤©)Ã—èŒå·¥æœ¬äººå…¨å¹´åº”äº«å—çš„å¹´ä¼‘å‡å¤©æ•°
                    resultDays = Math.floor((remainingDays / yearDays) * baseDays);
                    
                    details.push({ label: 'å…¥èŒæ—¥æœŸ', value: formatDate(entryDate) });
                    details.push({ label: 'å½“å¹´å‰©ä½™å¤©æ•°', value: remainingDays + ' å¤©' });
                    details.push({ label: 'æŠ˜ç®—æ¯”ä¾‹', value: (remainingDays / yearDays * 100).toFixed(1) + '%' });
                    break;
                }

                case 'resign': {
                    const yearStartDate = new Date(document.getElementById('yearStartDate').value);
                    const resignDate = new Date(document.getElementById('resignDate').value);
                    
                    if (isNaN(yearStartDate.getTime()) || isNaN(resignDate.getTime())) {
                        alert('è¯·å¡«å†™æ­£ç¡®çš„æ—¥æœŸ');
                        return;
                    }

                    const workedDays = Math.ceil((resignDate - yearStartDate) / (1000 * 60 * 60 * 24)) + 1;
                    const yearDays = isLeapYear(resignDate.getFullYear()) ? 366 : 365;
                    
                    // æŠ˜ç®—å…¬å¼ï¼š(å½“å¹´åº¦å·²è¿‡æ—¥å†å¤©æ•°Ã·365å¤©)Ã—èŒå·¥æœ¬äººå…¨å¹´åº”äº«å—çš„å¹´ä¼‘å‡å¤©æ•°
                    resultDays = Math.floor((workedDays / yearDays) * baseDays);
                    
                    details.push({ label: 'èµ·å§‹æ—¥æœŸ', value: formatDate(yearStartDate) });
                    details.push({ label: 'ç¦»èŒæ—¥æœŸ', value: formatDate(resignDate) });
                    details.push({ label: 'å½“å¹´å·²å·¥ä½œå¤©æ•°', value: workedDays + ' å¤©' });
                    details.push({ label: 'æŠ˜ç®—æ¯”ä¾‹', value: (workedDays / yearDays * 100).toFixed(1) + '%' });
                    break;
                }

                case 'compensation': {
                    const totalDays = parseFloat(document.getElementById('totalLeaveDays').value) || 0;
                    const usedDays = parseFloat(document.getElementById('usedLeaveDays').value) || 0;
                    const monthlySalary = parseFloat(document.getElementById('monthlySalary').value) || 0;
                    
                    const unusedDays = Math.max(0, totalDays - usedDays);
                    resultDays = unusedDays;
                    
                    // æ—¥å·¥èµ„ = æœˆå·¥èµ„ Ã· 21.75
                    const dailySalary = monthlySalary / 21.75;
                    // è¡¥å¿ = æœªä¼‘å¤©æ•° Ã— æ—¥å·¥èµ„ Ã— 300%ï¼ˆåŒ…å«æ­£å¸¸å·¥èµ„ï¼Œæ‰€ä»¥å®é™…é¢å¤–è¡¥å¿æ˜¯200%ï¼‰
                    const compensation = unusedDays * dailySalary * 2; // é¢å¤–è¡¥å¿éƒ¨åˆ†
                    
                    details.push({ label: 'åº”ä¼‘å¹´å‡', value: totalDays + ' å¤©' });
                    details.push({ label: 'å·²ä¼‘å¹´å‡', value: usedDays + ' å¤©' });
                    details.push({ label: 'æœªä¼‘å¹´å‡', value: unusedDays + ' å¤©', highlight: true });
                    
                    if (monthlySalary > 0) {
                        details.push({ label: 'æ—¥å·¥èµ„', value: 'Â¥' + dailySalary.toFixed(2) });
                        showCompensation = true;
                        document.getElementById('compensationValue').textContent = 'Â¥' + compensation.toFixed(2);
                    }
                    break;
                }
            }

            // æ˜¾ç¤ºç»“æœ
            document.getElementById('resultSection').classList.add('show');
            document.getElementById('resultValue').textContent = resultDays;
            
            const labelMap = {
                'standard': 'åº”ä¼‘å¹´å‡å¤©æ•°',
                'newEntry': 'å½“å¹´å¯äº«å¹´å‡ï¼ˆæŠ˜ç®—ï¼‰',
                'resign': 'ç¦»èŒå‰åº”ä¼‘å¹´å‡ï¼ˆæŠ˜ç®—ï¼‰',
                'compensation': 'æœªä¼‘å¹´å‡å¤©æ•°'
            };
            document.getElementById('resultLabel').textContent = labelMap[currentMode];

            // æ¸²æŸ“è¯¦æƒ…
            const detailsHtml = details.map(item => `
                <div class="detail-item">
                    <span class="detail-label">${item.label}</span>
                    <span class="detail-value ${item.highlight ? 'highlight' : ''}">${item.value}</span>
                </div>
            `).join('');
            document.getElementById('resultDetails').innerHTML = detailsHtml;

            // æ˜¾ç¤ºè¡¥å¿ç»“æœ
            document.getElementById('compensationResult').style.display = showCompensation ? 'block' : 'none';

            // æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        function isLeapYear(year) {
            return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
        }

        function formatDate(date) {
            return date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' });
        }
    
    // Theme toggle
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      html.setAttribute('data-theme', newTheme);
      document.getElementById('theme-icon').textContent = newTheme === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
      localStorage.setItem('theme', newTheme);
    }

    // Load saved theme
    const savedTheme = localStorage.getItem('theme') || 'dark';
    if (savedTheme === 'light') {
      document.documentElement.setAttribute('data-theme', 'light');
      document.getElementById('theme-icon').textContent = 'â˜€ï¸';
    }

</script>
</body>
</html>
