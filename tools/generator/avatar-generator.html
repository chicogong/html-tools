<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤´åƒç”Ÿæˆå™¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: white; text-align: center; margin-bottom: 20px; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .card { background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .preview { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 20px; }
        .avatar { border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }
        .avatar-lg { width: 150px; height: 150px; font-size: 48px; }
        .avatar-md { width: 80px; height: 80px; font-size: 28px; }
        .avatar-sm { width: 50px; height: 50px; font-size: 18px; }
        .controls { display: grid; gap: 16px; }
        .control-row { display: flex; gap: 16px; flex-wrap: wrap; align-items: center; }
        label { font-weight: 600; color: #333; min-width: 80px; }
        input[type="text"], select { padding: 10px 14px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; flex: 1; min-width: 200px; }
        input[type="color"] { width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer; }
        .color-presets { display: flex; flex-wrap: wrap; gap: 8px; }
        .color-preset { width: 36px; height: 36px; border-radius: 50%; cursor: pointer; border: 3px solid transparent; transition: all 0.2s; }
        .color-preset:hover { transform: scale(1.1); }
        .color-preset.active { border-color: #333; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); }
        .style-options { display: flex; flex-wrap: wrap; gap: 8px; }
        .style-option { padding: 8px 16px; background: #f0f0f0; border: 2px solid transparent; border-radius: 8px; cursor: pointer; font-size: 13px; }
        .style-option:hover { background: #e0e0e0; }
        .style-option.active { border-color: #667eea; background: #f0e6ff; }
        .actions { display: flex; gap: 12px; flex-wrap: wrap; }
        canvas { display: none; }
    
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
    <nav class="breadcrumb"><a href="../../index.html">é¦–é¡µ</a><span>â€º</span><a href="../../index.html#generator">ç”Ÿæˆå™¨</a><span>â€º</span>å¤´åƒç”Ÿæˆå™¨</nav>
    <div class="container">
        <h1>ğŸ‘¤ å¤´åƒç”Ÿæˆå™¨</h1>
        <div class="card">
            <div class="preview" id="preview">
                <div class="avatar avatar-lg" id="avatarLg">å¼ </div>
                <div class="avatar avatar-md" id="avatarMd">å¼ </div>
                <div class="avatar avatar-sm" id="avatarSm">å¼ </div>
            </div>
        </div>
        <div class="card">
            <div class="controls">
                <div class="control-row">
                    <label>åç§°</label>
                    <input type="text" id="nameInput" value="å¼ ä¸‰" oninput="updateAvatar()" placeholder="è¾“å…¥åç§°">
                </div>
                <div class="control-row">
                    <label>æ˜¾ç¤ºæ–¹å¼</label>
                    <div class="style-options">
                        <div class="style-option active" onclick="setStyle('first')" data-style="first">é¦–å­—</div>
                        <div class="style-option" onclick="setStyle('last')" data-style="last">æœ«å­—</div>
                        <div class="style-option" onclick="setStyle('initials')" data-style="initials">é¦–å­—æ¯</div>
                        <div class="style-option" onclick="setStyle('two')" data-style="two">å‰ä¸¤å­—</div>
                    </div>
                </div>
                <div class="control-row">
                    <label>å½¢çŠ¶</label>
                    <div class="style-options">
                        <div class="style-option active" onclick="setShape('circle')" data-shape="circle">åœ†å½¢</div>
                        <div class="style-option" onclick="setShape('rounded')" data-shape="rounded">åœ†è§’</div>
                        <div class="style-option" onclick="setShape('square')" data-shape="square">æ–¹å½¢</div>
                    </div>
                </div>
                <div class="control-row">
                    <label>èƒŒæ™¯è‰²</label>
                    <input type="color" id="bgColor" value="#667eea" onchange="updateAvatar()">
                    <div class="color-presets">
                        <div class="color-preset active" style="background: linear-gradient(135deg, #667eea, #764ba2);" onclick="setColor('#667eea', '#764ba2')"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #f093fb, #f5576c);" onclick="setColor('#f093fb', '#f5576c')"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #4facfe, #00f2fe);" onclick="setColor('#4facfe', '#00f2fe')"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #43e97b, #38f9d7);" onclick="setColor('#43e97b', '#38f9d7')"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #fa709a, #fee140);" onclick="setColor('#fa709a', '#fee140')"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #ff9a9e, #fecfef);" onclick="setColor('#ff9a9e', '#fecfef')"></div>
                        <div class="color-preset" style="background: #3498db;" onclick="setColor('#3498db', '#3498db')"></div>
                        <div class="color-preset" style="background: #e74c3c;" onclick="setColor('#e74c3c', '#e74c3c')"></div>
                        <div class="color-preset" style="background: #2ecc71;" onclick="setColor('#2ecc71', '#2ecc71')"></div>
                        <div class="color-preset" style="background: #9b59b6;" onclick="setColor('#9b59b6', '#9b59b6')"></div>
                    </div>
                </div>
                <div class="control-row">
                    <label>æ–‡å­—é¢œè‰²</label>
                    <input type="color" id="textColor" value="#ffffff" onchange="updateAvatar()">
                </div>
            </div>
            <div class="actions" style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="downloadAvatar(256)">ğŸ“¥ ä¸‹è½½å¤§å›¾ (256px)</button>
                <button class="btn btn-primary" onclick="downloadAvatar(128)">ğŸ“¥ ä¸‹è½½ä¸­å›¾ (128px)</button>
                <button class="btn btn-primary" onclick="downloadAvatar(64)">ğŸ“¥ ä¸‹è½½å°å›¾ (64px)</button>
                <button class="btn btn-primary" onclick="randomAvatar()">ğŸ² éšæœºç”Ÿæˆ</button>
            </div>
        </div>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        let currentStyle = 'first';
        let currentShape = 'circle';
        let color1 = '#667eea';
        let color2 = '#764ba2';
        
        function getInitials(name) {
            if (!name) return '?';
            name = name.trim();
            
            switch (currentStyle) {
                case 'first':
                    return name.charAt(0).toUpperCase();
                case 'last':
                    return name.charAt(name.length - 1).toUpperCase();
                case 'initials':
                    const parts = name.split(/\s+/);
                    if (parts.length >= 2) {
                        return (parts[0].charAt(0) + parts[parts.length - 1].charAt(0)).toUpperCase();
                    }
                    return name.charAt(0).toUpperCase();
                case 'two':
                    return name.substring(0, 2).toUpperCase();
                default:
                    return name.charAt(0).toUpperCase();
            }
        }
        
        function setStyle(style) {
            currentStyle = style;
            document.querySelectorAll('[data-style]').forEach(el => {
                el.classList.toggle('active', el.dataset.style === style);
            });
            updateAvatar();
        }
        
        function setShape(shape) {
            currentShape = shape;
            document.querySelectorAll('[data-shape]').forEach(el => {
                el.classList.toggle('active', el.dataset.shape === shape);
            });
            updateAvatar();
        }
        
        function setColor(c1, c2) {
            color1 = c1;
            color2 = c2;
            document.querySelectorAll('.color-preset').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
            updateAvatar();
        }
        
        function updateAvatar() {
            const name = document.getElementById('nameInput').value;
            const textColor = document.getElementById('textColor').value;
            const initials = getInitials(name);
            
            const gradient = `linear-gradient(135deg, ${color1}, ${color2})`;
            let borderRadius;
            switch (currentShape) {
                case 'circle': borderRadius = '50%'; break;
                case 'rounded': borderRadius = '20%'; break;
                case 'square': borderRadius = '0'; break;
            }
            
            ['avatarLg', 'avatarMd', 'avatarSm'].forEach(id => {
                const el = document.getElementById(id);
                el.textContent = initials;
                el.style.background = gradient;
                el.style.color = textColor;
                el.style.borderRadius = borderRadius;
            });
        }
        
        function downloadAvatar(size) {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = size;
            canvas.height = size;
            
            // Draw gradient background
            const gradient = ctx.createLinearGradient(0, 0, size, size);
            gradient.addColorStop(0, color1);
            gradient.addColorStop(1, color2);
            ctx.fillStyle = gradient;
            
            // Draw shape
            if (currentShape === 'circle') {
                ctx.beginPath();
                ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);
                ctx.fill();
            } else if (currentShape === 'rounded') {
                const radius = size * 0.2;
                ctx.beginPath();
                ctx.roundRect(0, 0, size, size, radius);
                ctx.fill();
            } else {
                ctx.fillRect(0, 0, size, size);
            }
            
            // Draw text
            const name = document.getElementById('nameInput').value;
            const initials = getInitials(name);
            const fontSize = size * 0.4;
            ctx.fillStyle = document.getElementById('textColor').value;
            ctx.font = `bold ${fontSize}px -apple-system, BlinkMacSystemFont, sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(initials, size / 2, size / 2);
            
            // Download
            const link = document.createElement('a');
            link.download = `avatar-${size}px.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        function randomAvatar() {
            const colors = [
                ['#667eea', '#764ba2'], ['#f093fb', '#f5576c'], ['#4facfe', '#00f2fe'],
                ['#43e97b', '#38f9d7'], ['#fa709a', '#fee140'], ['#ff9a9e', '#fecfef'],
                ['#a8edea', '#fed6e3'], ['#ffecd2', '#fcb69f'], ['#11998e', '#38ef7d']
            ];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            color1 = randomColor[0];
            color2 = randomColor[1];
            
            const shapes = ['circle', 'rounded', 'square'];
            setShape(shapes[Math.floor(Math.random() * shapes.length)]);
            
            updateAvatar();
        }
        
        updateAvatar();
    </script>
</body>
</html>