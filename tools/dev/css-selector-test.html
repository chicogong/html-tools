<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSS 选择器测试器 - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="CSS 选择器测试器 - WebUtils" />
    <meta name="keywords" content="css-selector-test,dev,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/dev/css-selector-test.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="CSS 选择器测试器 - WebUtils" />
    <meta property="og:description" content="CSS 选择器测试器 - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/dev/css-selector-test.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="CSS 选择器测试器 - WebUtils" />
    <meta name="twitter:description" content="CSS 选择器测试器 - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;

        /* 字体变量 */
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
      }

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      :root {
        --highlight-bg: #fef08a;
        --highlight-border: #eab308;
      }
      [data-theme="dark"] {
        --highlight-bg: #854d0e;
        --highlight-border: #ca8a04;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1000;
      }
      .editor-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 1rem;
      }
      @media (max-width: 768px) {
        .editor-container {
          grid-template-columns: 1fr;
        }
      }
      .editor-panel {
        display: flex;
        flex-direction: column;
      }
      .editor-panel label {
        font-weight: 600;
        margin-bottom: 0.5rem;
      }
      .editor-panel textarea {
        font-family: var(--font-mono);
        font-size: 0.875rem;
        min-height: 200px;
        resize: vertical;
      }
      .selector-input {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }
      .selector-input input {
        flex: 1;
        font-family: var(--font-mono);
      }
      .result-panel {
        border: 1px solid var(--pico-muted-border-color);
        border-radius: 0.5rem;
        padding: 1rem;
        min-height: 200px;
      }
      .result-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--pico-muted-border-color);
      }
      .match-count {
        font-size: 0.875rem;
        padding: 0.25rem 0.75rem;
        background: var(--pico-primary);
        color: white;
        border-radius: 1rem;
      }
      .preview-container {
        border: 1px dashed var(--pico-muted-border-color);
        padding: 1rem;
        border-radius: 0.5rem;
        background: var(--pico-background-color);
        min-height: 150px;
      }
      .preview-container .matched {
        background: var(--highlight-bg) !important;
        outline: 2px solid var(--highlight-border) !important;
        outline-offset: 2px;
      }
      .error-message {
        color: var(--pico-del-color);
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }
      .examples {
        margin-top: 1rem;
      }
      .example-btn {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
      }
      .matched-list {
        margin-top: 1rem;
        max-height: 200px;
        overflow-y: auto;
      }
      .matched-item {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        padding: 0.5rem;
        background: var(--pico-code-background-color);
        border-radius: 0.25rem;
        margin-bottom: 0.5rem;
        white-space: pre-wrap;
        word-break: break-all;
      }
      .help-section {
        margin-top: 2rem;
        padding: 1rem;
        background: var(--pico-card-background-color);
        border-radius: 0.5rem;
      }
      .help-section h3 {
        margin-bottom: 1rem;
      }
      .help-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 0.5rem;
      }
      .help-item {
        font-size: 0.875rem;
      }
      .help-item code {
        font-size: 0.75rem;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">首页</a>
      <span>›</span>
      CSS 选择器测试器
    </nav>
    <button class="theme-toggle" onclick="toggleTheme()">切换主题</button>

    <main class="container">
      <h1>CSS 选择器测试器</h1>
      <p>输入 HTML 代码和 CSS 选择器，实时查看匹配的元素</p>

      <div class="editor-container">
        <div class="editor-panel">
          <label for="htmlInput">HTML 代码</label>
          <textarea id="htmlInput" placeholder="在此输入 HTML 代码..."></textarea>
        </div>
        <div class="editor-panel">
          <label>预览与匹配结果</label>
          <div class="preview-container" id="previewContainer"></div>
        </div>
      </div>

      <div class="selector-input">
        <input
          type="text"
          id="selectorInput"
          placeholder="输入 CSS 选择器（如：div.class, #id, ul > li）"
          autofocus
        />
        <button onclick="testSelector()">测试</button>
      </div>

      <div class="examples">
        <small>示例选择器：</small>
        <button class="example-btn secondary outline" onclick="setSelector('div')">div</button>
        <button class="example-btn secondary outline" onclick="setSelector('.item')">
          `.item`
        </button>
        <button class="example-btn secondary outline" onclick="setSelector('#main')">#main</button>
        <button class="example-btn secondary outline" onclick="setSelector('ul > li')">
          ul &gt; li
        </button>
        <button class="example-btn secondary outline" onclick="setSelector('a[href]')">
          a[href]
        </button>
        <button class="example-btn secondary outline" onclick="setSelector(':first-child')">
          :first-child
        </button>
        <button class="example-btn secondary outline" onclick="setSelector('p + p')">p + p</button>
        <button class="example-btn secondary outline" onclick="setSelector('[class*=btn]')">
          [class*=btn]
        </button>
      </div>

      <div id="errorMessage" class="error-message"></div>

      <div class="result-panel">
        <div class="result-header">
          <span>匹配结果</span>
          <span class="match-count" id="matchCount">0 个匹配</span>
        </div>
        <div class="matched-list" id="matchedList"></div>
      </div>

      <div class="help-section">
        <h3>CSS 选择器参考</h3>
        <div class="help-grid">
          <div class="help-item">
            <code>element</code>
            元素选择器
          </div>
          <div class="help-item">
            <code>.class</code>
            类选择器
          </div>
          <div class="help-item">
            <code>#id</code>
            ID选择器
          </div>
          <div class="help-item">
            <code>*</code>
            通配选择器
          </div>
          <div class="help-item">
            <code>A B</code>
            后代选择器
          </div>
          <div class="help-item">
            <code>A &gt; B</code>
            子选择器
          </div>
          <div class="help-item">
            <code>A + B</code>
            相邻兄弟
          </div>
          <div class="help-item">
            <code>A ~ B</code>
            通用兄弟
          </div>
          <div class="help-item">
            <code>[attr]</code>
            属性存在
          </div>
          <div class="help-item">
            <code>[attr=val]</code>
            属性等于
          </div>
          <div class="help-item">
            <code>[attr^=val]</code>
            属性开头
          </div>
          <div class="help-item">
            <code>[attr$=val]</code>
            属性结尾
          </div>
          <div class="help-item">
            <code>[attr*=val]</code>
            属性包含
          </div>
          <div class="help-item">
            <code>:first-child</code>
            第一个子元素
          </div>
          <div class="help-item">
            <code>:last-child</code>
            最后子元素
          </div>
          <div class="help-item">
            <code>:nth-child(n)</code>
            第n个子元素
          </div>
          <div class="help-item">
            <code>:not(sel)</code>
            否定选择器
          </div>
          <div class="help-item">
            <code>:hover</code>
            鼠标悬停
          </div>
        </div>
      </div>
    </main>

    <script>
      const defaultHtml = `<div id="main" class="container">
    <header class="header">
        <h1>网站标题</h1>
        <nav>
            <ul class="nav-list">
                <li class="item active"><a href="#">首页</a></li>
                <li class="item"><a href="#">产品</a></li>
                <li class="item"><a href="#">关于</a></li>
            </ul>
        </nav>
    </header>
    <main class="content">
        <article class="post">
            <h2 class="title">文章标题</h2>
            <p class="intro">这是第一段文字。</p>
            <p>这是第二段文字。</p>
            <button class="btn btn-primary">主要按钮</button>
            <button class="btn btn-secondary">次要按钮</button>
        </article>
    </main>
    <footer>
        <p>&copy; 2024 示例网站</p>
    </footer>
</div>`;

      // 初始化
      document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        }

        document.getElementById("htmlInput").value = defaultHtml;
        updatePreview();

        // 实时更新预览
        document.getElementById("htmlInput").addEventListener("input", () => {
          updatePreview();
          testSelector();
        });

        // 实时测试选择器
        document.getElementById("selectorInput").addEventListener("input", testSelector);

        // 回车测试
        document.getElementById("selectorInput").addEventListener("keypress", (e) => {
          if (e.key === "Enter") testSelector();
        });
      });

      // 更新预览
      window.updatePreview = function () {
        const html = document.getElementById("htmlInput").value;
        const preview = document.getElementById("previewContainer");

        // 安全地设置HTML内容
        preview.textContent = "";
        const wrapper = document.createElement("div");
        wrapper.innerHTML = html;
        preview.appendChild(wrapper);
      };

      // 测试选择器
      function testSelector() {
        const selector = document.getElementById("selectorInput").value.trim();
        const preview = document.getElementById("previewContainer");
        const errorMsg = document.getElementById("errorMessage");
        const matchCount = document.getElementById("matchCount");
        const matchedList = document.getElementById("matchedList");

        // 清除之前的高亮
        preview.querySelectorAll(".matched").forEach((el) => {
          el.classList.remove("matched");
        });

        errorMsg.textContent = "";
        matchedList.textContent = "";

        if (!selector) {
          matchCount.textContent = "0 个匹配";
          return;
        }

        try {
          const matched = preview.querySelectorAll(selector);
          matchCount.textContent = matched.length + " 个匹配";

          matched.forEach((el, index) => {
            el.classList.add("matched");

            // 显示匹配元素的外层HTML（截断）
            const div = document.createElement("div");
            div.className = "matched-item";

            let outerHtml = el.outerHTML;
            if (outerHtml.length > 200) {
              // 只显示开标签
              const tagMatch = outerHtml.match(/^<[^>]+>/);
              outerHtml = tagMatch ? tagMatch[0] + "..." : outerHtml.substring(0, 200) + "...";
            }
            div.textContent = index + 1 + ". " + outerHtml;
            matchedList.appendChild(div);
          });
        } catch (e) {
          errorMsg.textContent = "无效的选择器: " + e.message;
          matchCount.textContent = "错误";
        }
      }

      // 设置示例选择器
      window.setSelector = function (selector) {
        document.getElementById("selectorInput").value = selector;
        testSelector();
      };

      // 主题切换
      window.toggleTheme = function () {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        html.setAttribute("data-theme", currentTheme === "light" ? "dark" : "light");
        localStorage.setItem("theme", html.getAttribute("data-theme"));
      };
    </script>
  </body>
</html>
