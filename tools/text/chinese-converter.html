<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡ç®€ç¹è½¬æ¢ | åœ¨çº¿å·¥å…·</title>
    <meta name="description" content="ä¸­æ–‡ç®€ä½“ç¹ä½“äº’è½¬ï¼Œæ”¯æŒå°æ¹¾ã€é¦™æ¸¯ç”¨è¯ä¹ æƒ¯è½¬æ¢">
    <meta name="keywords" content="ç®€ä½“,ç¹ä½“,ç®€ç¹è½¬æ¢,ä¸­æ–‡,å°æ¹¾,é¦™æ¸¯">
    <style>
        :root {
            --bg-color: #0a0a0a;
            --card-bg: #141414;
            --border-color: #262626;
            --text-primary: #fafafa;
            --text-secondary: #a1a1aa;
            --accent-color: #dc2626;
            --accent-hover: #b91c1c;
            --success-color: #22c55e;
        }
        
        [data-theme="light"] {
            --bg-color: #f5f5f5;
            --card-bg: #fff;
            --border-color: #e5e5e5;
            --text-primary: #171717;
            --text-secondary: #525252;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
        }
        
        .subtitle { color: var(--text-secondary); }
        
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            z-index: 100;
        }
        
        .back-link {
            position: fixed;
            top: 1rem;
            left: 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            z-index: 100;
        }
        
        .back-link:hover { color: var(--accent-color); }
        
        .converter-box {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
        }
        
        /* è½¬æ¢æ¨¡å¼é€‰æ‹© */
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            padding: 0.75rem 1.5rem;
            background: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        
        .mode-btn:hover {
            border-color: var(--accent-color);
            color: var(--text-primary);
        }
        
        .mode-btn.active {
            border-color: var(--accent-color);
            background: rgba(220, 38, 38, 0.1);
            color: var(--accent-color);
        }
        
        /* è¾“å…¥è¾“å‡ºåŒºåŸŸ */
        .io-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: stretch;
        }
        
        @media (max-width: 768px) {
            .io-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .io-panel {
            display: flex;
            flex-direction: column;
        }
        
        .io-panel label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        textarea {
            flex: 1;
            min-height: 300px;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: inherit;
            font-size: 1rem;
            color: var(--text-primary);
            resize: vertical;
            line-height: 1.8;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        
        .middle-actions {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .middle-actions {
                flex-direction: row;
                justify-content: center;
            }
        }
        
        .action-btn {
            width: 50px;
            height: 50px;
            background: var(--accent-color);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .action-btn:hover {
            background: var(--accent-hover);
            transform: scale(1.1);
        }
        
        .action-btn.secondary {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 1rem;
        }
        
        .action-btn.secondary:hover {
            border-color: var(--accent-color);
            color: var(--text-primary);
        }
        
        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        /* ç¤ºä¾‹ */
        .examples {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .examples h3 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }
        
        .example-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.75rem;
        }
        
        .example-item {
            padding: 0.75rem;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .example-item:hover {
            border-color: var(--accent-color);
        }
        
        .example-item .label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }
        
        .example-item .text {
            font-size: 0.9rem;
        }
        
        /* åŠ è½½çŠ¶æ€ */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }
        
        .loading.show {
            display: block;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-color);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“ ä¸»é¢˜</button>
    
    <div class="container">
        <header>
            <h1>ä¸­æ–‡ç®€ç¹è½¬æ¢</h1>
            <p class="subtitle">æ”¯æŒç®€ä½“ã€ç¹ä½“ï¼ˆå°æ¹¾ï¼‰ã€ç¹ä½“ï¼ˆé¦™æ¸¯ï¼‰äº’è½¬</p>
        </header>
        
        <div class="converter-box">
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="s2t" onclick="setMode('s2t')">ç®€ä½“ â†’ ç¹ä½“</button>
                <button class="mode-btn" data-mode="t2s" onclick="setMode('t2s')">ç¹ä½“ â†’ ç®€ä½“</button>
                <button class="mode-btn" data-mode="s2tw" onclick="setMode('s2tw')">ç®€ä½“ â†’ å°æ¹¾</button>
                <button class="mode-btn" data-mode="tw2s" onclick="setMode('tw2s')">å°æ¹¾ â†’ ç®€ä½“</button>
                <button class="mode-btn" data-mode="s2hk" onclick="setMode('s2hk')">ç®€ä½“ â†’ é¦™æ¸¯</button>
                <button class="mode-btn" data-mode="hk2s" onclick="setMode('hk2s')">é¦™æ¸¯ â†’ ç®€ä½“</button>
            </div>
            
            <div class="io-grid">
                <div class="io-panel">
                    <label id="inputLabel">ç®€ä½“ä¸­æ–‡</label>
                    <textarea id="input" placeholder="è¯·è¾“å…¥è¦è½¬æ¢çš„æ–‡å­—..."></textarea>
                    <div class="stats">
                        <span id="inputStats">0 å­—ç¬¦</span>
                    </div>
                </div>
                
                <div class="middle-actions">
                    <button class="action-btn" onclick="convert()" title="è½¬æ¢">â†’</button>
                    <button class="action-btn secondary" onclick="swap()" title="äº¤æ¢">â‡„</button>
                    <button class="action-btn secondary" onclick="copyOutput()" title="å¤åˆ¶">ğŸ“‹</button>
                    <button class="action-btn secondary" onclick="clearAll()" title="æ¸…ç©º">ğŸ—‘ï¸</button>
                </div>
                
                <div class="io-panel">
                    <label id="outputLabel">ç¹ä½“ä¸­æ–‡</label>
                    <textarea id="output" readonly placeholder="è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
                    <div class="stats">
                        <span id="outputStats">0 å­—ç¬¦</span>
                    </div>
                </div>
            </div>
            
            <div class="loading" id="loading">
                <div class="loading-spinner"></div>
                <p>æ­£åœ¨åŠ è½½è½¬æ¢åº“...</p>
            </div>
            
            <div class="examples">
                <h3>ç‚¹å‡»ç¤ºä¾‹å¿«é€Ÿä½“éªŒ</h3>
                <div class="example-list">
                    <div class="example-item" onclick="loadExample('è®¡ç®—æœºè½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆè´Ÿè´£ç¼–å†™ç¨‹åºä»£ç ')">
                        <div class="label">IT æœ¯è¯­</div>
                        <div class="text">è®¡ç®—æœºè½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆè´Ÿè´£ç¼–å†™ç¨‹åºä»£ç </div>
                    </div>
                    <div class="example-item" onclick="loadExample('ä¸­åäººæ°‘å…±å’Œå›½æ˜¯ä¸–ç•Œä¸Šäººå£æœ€å¤šçš„å›½å®¶')">
                        <div class="label">å¸¸è§å¥å­</div>
                        <div class="text">ä¸­åäººæ°‘å…±å’Œå›½æ˜¯ä¸–ç•Œä¸Šäººå£æœ€å¤šçš„å›½å®¶</div>
                    </div>
                    <div class="example-item" onclick="loadExample('å¤´å‘å¹²ç‡¥éœ€è¦ä½¿ç”¨æŠ¤å‘ç´ ä¿å…»')">
                        <div class="label">å¤šéŸ³å­—</div>
                        <div class="text">å¤´å‘å¹²ç‡¥éœ€è¦ä½¿ç”¨æŠ¤å‘ç´ ä¿å…»</div>
                    </div>
                    <div class="example-item" onclick="loadExample('çš‡ååœ¨çš‡å®«é‡Œé¢ç­‰å€™æ¶ˆæ¯')">
                        <div class="label">åŒéŸ³å¼‚å½¢</div>
                        <div class="text">çš‡ååœ¨çš‡å®«é‡Œé¢ç­‰å€™æ¶ˆæ¯</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- OpenCC WASM -->
    <script src="https://cdn.jsdelivr.net/npm/opencc-js@1.0.5/dist/umd/full.js"></script>
    
    <script>
        let currentMode = 's2t';
        let converter = null;
        
        const modeConfig = {
            's2t': { from: 'cn', to: 'tw', inputLabel: 'ç®€ä½“ä¸­æ–‡', outputLabel: 'ç¹ä½“ä¸­æ–‡' },
            't2s': { from: 'tw', to: 'cn', inputLabel: 'ç¹ä½“ä¸­æ–‡', outputLabel: 'ç®€ä½“ä¸­æ–‡' },
            's2tw': { from: 'cn', to: 'twp', inputLabel: 'ç®€ä½“ä¸­æ–‡', outputLabel: 'ç¹ä½“ï¼ˆå°æ¹¾ï¼‰' },
            'tw2s': { from: 'twp', to: 'cn', inputLabel: 'ç¹ä½“ï¼ˆå°æ¹¾ï¼‰', outputLabel: 'ç®€ä½“ä¸­æ–‡' },
            's2hk': { from: 'cn', to: 'hk', inputLabel: 'ç®€ä½“ä¸­æ–‡', outputLabel: 'ç¹ä½“ï¼ˆé¦™æ¸¯ï¼‰' },
            'hk2s': { from: 'hk', to: 'cn', inputLabel: 'ç¹ä½“ï¼ˆé¦™æ¸¯ï¼‰', outputLabel: 'ç®€ä½“ä¸­æ–‡' }
        };
        
        function setMode(mode) {
            currentMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.mode === mode);
            });
            
            // æ›´æ–°æ ‡ç­¾
            const config = modeConfig[mode];
            document.getElementById('inputLabel').textContent = config.inputLabel;
            document.getElementById('outputLabel').textContent = config.outputLabel;
            
            // åˆå§‹åŒ–è½¬æ¢å™¨
            initConverter();
            
            // å¦‚æœæœ‰å†…å®¹ï¼Œè‡ªåŠ¨è½¬æ¢
            if (document.getElementById('input').value) {
                convert();
            }
        }
        
        function initConverter() {
            const config = modeConfig[currentMode];
            try {
                converter = OpenCC.Converter({ from: config.from, to: config.to });
            } catch (e) {
                console.error('åˆå§‹åŒ–è½¬æ¢å™¨å¤±è´¥:', e);
            }
        }
        
        function convert() {
            const input = document.getElementById('input').value;
            
            if (!input.trim()) {
                document.getElementById('output').value = '';
                updateStats();
                return;
            }
            
            if (!converter) {
                initConverter();
            }
            
            try {
                const result = converter(input);
                document.getElementById('output').value = result;
            } catch (e) {
                console.error('è½¬æ¢å¤±è´¥:', e);
                document.getElementById('output').value = 'è½¬æ¢å¤±è´¥: ' + e.message;
            }
            
            updateStats();
        }
        
        function swap() {
            // äº¤æ¢æ¨¡å¼
            const swapMap = {
                's2t': 't2s', 't2s': 's2t',
                's2tw': 'tw2s', 'tw2s': 's2tw',
                's2hk': 'hk2s', 'hk2s': 's2hk'
            };
            
            // äº¤æ¢å†…å®¹
            const input = document.getElementById('input');
            const output = document.getElementById('output');
            const temp = input.value;
            input.value = output.value;
            output.value = temp;
            
            // åˆ‡æ¢æ¨¡å¼
            setMode(swapMap[currentMode]);
        }
        
        function copyOutput() {
            const output = document.getElementById('output');
            if (!output.value) {
                alert('æ²¡æœ‰å†…å®¹å¯å¤åˆ¶');
                return;
            }
            navigator.clipboard.writeText(output.value).then(() => {
                alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            });
        }
        
        function clearAll() {
            document.getElementById('input').value = '';
            document.getElementById('output').value = '';
            updateStats();
        }
        
        function loadExample(text) {
            document.getElementById('input').value = text;
            convert();
        }
        
        function updateStats() {
            const input = document.getElementById('input').value;
            const output = document.getElementById('output').value;
            
            document.getElementById('inputStats').textContent = `${input.length} å­—ç¬¦`;
            document.getElementById('outputStats').textContent = `${output.length} å­—ç¬¦`;
        }
        
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const next = current === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }
        
        // åˆå§‹åŒ–
        (function() {
            const saved = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', saved);
            
            // ç­‰å¾… OpenCC åŠ è½½
            const loading = document.getElementById('loading');
            
            function checkOpenCC() {
                if (typeof OpenCC !== 'undefined') {
                    loading.classList.remove('show');
                    initConverter();
                    
                    // ç»‘å®šè¾“å…¥äº‹ä»¶
                    document.getElementById('input').addEventListener('input', debounce(convert, 300));
                } else {
                    loading.classList.add('show');
                    setTimeout(checkOpenCC, 100);
                }
            }
            
            checkOpenCC();
        })();
        
        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }
    </script>
</body>
</html>
