<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>二进制转换器 - WebUtils</title>
  <meta name="description" content="在线二进制转换器，支持文本、二进制、十六进制、十进制互转">
  <meta name="keywords" content="二进制,十六进制,十进制,转换,binary,hex">
  <link rel="icon" href="../../favicon.svg" type="image/svg+xml">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container { max-width: 900px; margin: 0 auto; }
    .back-link { display: inline-flex; align-items: center; gap: 5px; color: #0f8; text-decoration: none; margin-bottom: 20px; }
    .back-link:hover { opacity: 0.8; }
    h1 { color: white; text-align: center; margin-bottom: 30px; font-size: 2rem; }
    .card {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      padding: 30px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
    }
    .input-group { margin-bottom: 20px; }
    .input-group label {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #0f8;
      margin-bottom: 10px;
      font-size: 14px;
    }
    .label-icon {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
    }
    .label-text { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .label-bin { background: linear-gradient(135deg, #0f8 0%, #00cc6a 100%); color: #0f0c29; }
    .label-dec { background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); }
    .label-hex { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
    .label-oct { background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); }
    textarea {
      width: 100%;
      height: 80px;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(0,255,136,0.3);
      border-radius: 10px;
      padding: 15px;
      color: white;
      font-family: Consolas, Monaco, monospace;
      font-size: 14px;
      resize: vertical;
    }
    textarea:focus { outline: none; border-color: #0f8; }
    textarea::placeholder { color: rgba(255,255,255,0.3); }
    .btn-group { display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap; }
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary { background: linear-gradient(135deg, #0f8 0%, #00cc6a 100%); color: #0f0c29; font-weight: 600; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0,255,136,0.4); }
    .btn-secondary { background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); }
    .btn-secondary:hover { background: rgba(255,255,255,0.2); }
    .copy-btn {
      position: absolute;
      right: 10px;
      top: 10px;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      background: rgba(255,255,255,0.1);
      color: rgba(255,255,255,0.7);
      font-size: 12px;
      cursor: pointer;
    }
    .copy-btn:hover { background: rgba(255,255,255,0.2); color: white; }
    .input-wrapper { position: relative; }
    .info-section { margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.3); border-radius: 12px; }
    .info-section h3 { color: #0f8; margin-bottom: 15px; }
    .char-display { display: inline-flex; flex-wrap: wrap; gap: 5px; margin-top: 10px; }
    .char-item {
      background: rgba(0,255,136,0.1);
      border: 1px solid rgba(0,255,136,0.3);
      border-radius: 4px;
      padding: 5px 8px;
      font-family: Consolas, monospace;
      font-size: 12px;
      color: #0f8;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="../../index.html" class="back-link">← 返回工具列表</a>
    <h1>二进制转换器</h1>
    <div class="card">
      <div class="input-group">
        <label><span class="label-icon label-text">Aa</span>文本</label>
        <div class="input-wrapper">
          <textarea id="textInput" placeholder="输入文本..."></textarea>
          <button class="copy-btn" onclick="copyValue('textInput')">复制</button>
        </div>
      </div>
      <div class="input-group">
        <label><span class="label-icon label-bin">01</span>二进制 (Binary)</label>
        <div class="input-wrapper">
          <textarea id="binaryInput" placeholder="01001000 01100101 01101100 01101100 01101111"></textarea>
          <button class="copy-btn" onclick="copyValue('binaryInput')">复制</button>
        </div>
      </div>
      <div class="input-group">
        <label><span class="label-icon label-dec">10</span>十进制 (Decimal)</label>
        <div class="input-wrapper">
          <textarea id="decimalInput" placeholder="72 101 108 108 111"></textarea>
          <button class="copy-btn" onclick="copyValue('decimalInput')">复制</button>
        </div>
      </div>
      <div class="input-group">
        <label><span class="label-icon label-hex">0x</span>十六进制 (Hexadecimal)</label>
        <div class="input-wrapper">
          <textarea id="hexInput" placeholder="48 65 6C 6C 6F"></textarea>
          <button class="copy-btn" onclick="copyValue('hexInput')">复制</button>
        </div>
      </div>
      <div class="input-group">
        <label><span class="label-icon label-oct">8</span>八进制 (Octal)</label>
        <div class="input-wrapper">
          <textarea id="octalInput" placeholder="110 145 154 154 157"></textarea>
          <button class="copy-btn" onclick="copyValue('octalInput')">复制</button>
        </div>
      </div>
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="clearAll()">清空</button>
        <button class="btn btn-primary" onclick="loadSample()">加载示例</button>
      </div>
      <div class="info-section">
        <h3>字符详情</h3>
        <div class="char-display" id="charDisplay"></div>
      </div>
    </div>
  </div>
  <script>
    const inputs = {
      text: document.getElementById('textInput'),
      binary: document.getElementById('binaryInput'),
      decimal: document.getElementById('decimalInput'),
      hex: document.getElementById('hexInput'),
      octal: document.getElementById('octalInput')
    };
    let isConverting = false;

    function textToNumbers(text) {
      const chars = [];
      for (let i = 0; i < text.length; i++) chars.push(text.charCodeAt(i));
      return chars;
    }

    function numbersToText(numbers) {
      return numbers.map(n => String.fromCharCode(n)).join('');
    }

    function updateAllFromText(text) {
      const numbers = textToNumbers(text);
      inputs.binary.value = numbers.map(n => n.toString(2).padStart(8, '0')).join(' ');
      inputs.decimal.value = numbers.join(' ');
      inputs.hex.value = numbers.map(n => n.toString(16).toUpperCase().padStart(2, '0')).join(' ');
      inputs.octal.value = numbers.map(n => n.toString(8).padStart(3, '0')).join(' ');
      updateCharDisplay(text);
    }

    function updateAllFromNumbers(numbers, sourceInput) {
      const text = numbersToText(numbers);
      if (sourceInput !== 'text') inputs.text.value = text;
      if (sourceInput !== 'binary') inputs.binary.value = numbers.map(n => n.toString(2).padStart(8, '0')).join(' ');
      if (sourceInput !== 'decimal') inputs.decimal.value = numbers.join(' ');
      if (sourceInput !== 'hex') inputs.hex.value = numbers.map(n => n.toString(16).toUpperCase().padStart(2, '0')).join(' ');
      if (sourceInput !== 'octal') inputs.octal.value = numbers.map(n => n.toString(8).padStart(3, '0')).join(' ');
      updateCharDisplay(text);
    }

    function parseInput(value, base) {
      const parts = value.trim().split(/\s+/);
      const numbers = [];
      for (const part of parts) {
        if (!part) continue;
        const num = parseInt(part, base);
        if (!isNaN(num) && num >= 0 && num <= 0x10FFFF) numbers.push(num);
      }
      return numbers;
    }

    function updateCharDisplay(text) {
      const display = document.getElementById('charDisplay');
      display.innerHTML = '';
      for (let i = 0; i < text.length && i < 50; i++) {
        const char = text[i];
        const code = text.charCodeAt(i);
        const item = document.createElement('span');
        item.className = 'char-item';
        let displayChar = char;
        if (code < 32 || code === 127) displayChar = '·';
        item.textContent = `'${displayChar}' = ${code}`;
        display.appendChild(item);
      }
      if (text.length > 50) {
        const more = document.createElement('span');
        more.className = 'char-item';
        more.textContent = `... +${text.length - 50}`;
        display.appendChild(more);
      }
    }

    function handleInput(sourceType) {
      if (isConverting) return;
      isConverting = true;
      try {
        const value = inputs[sourceType].value;
        if (sourceType === 'text') {
          updateAllFromText(value);
        } else {
          let base;
          switch (sourceType) {
            case 'binary': base = 2; break;
            case 'decimal': base = 10; break;
            case 'hex': base = 16; break;
            case 'octal': base = 8; break;
          }
          const numbers = parseInput(value, base);
          updateAllFromNumbers(numbers, sourceType);
        }
      } finally {
        isConverting = false;
      }
    }

    function clearAll() {
      Object.values(inputs).forEach(input => input.value = '');
      document.getElementById('charDisplay').innerHTML = '';
    }

    function loadSample() {
      inputs.text.value = 'Hello, World!';
      handleInput('text');
    }

    function copyValue(inputId) {
      const input = document.getElementById(inputId);
      navigator.clipboard.writeText(input.value).then(() => {
        const btn = input.parentElement.querySelector('.copy-btn');
        const originalText = btn.textContent;
        btn.textContent = '已复制';
        setTimeout(() => btn.textContent = originalText, 1500);
      });
    }

    inputs.text.addEventListener('input', () => handleInput('text'));
    inputs.binary.addEventListener('input', () => handleInput('binary'));
    inputs.decimal.addEventListener('input', () => handleInput('decimal'));
    inputs.hex.addEventListener('input', () => handleInput('hex'));
    inputs.octal.addEventListener('input', () => handleInput('octal'));
  </script>
</body>
</html>
