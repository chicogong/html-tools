<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JWTè§£ç å™¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0c3483 0%, #a2b6df 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: white; text-align: center; margin-bottom: 30px; font-size: 28px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .card { background: white; border-radius: 20px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        textarea { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 14px; font-family: monospace; resize: vertical; }
        textarea:focus { outline: none; border-color: #0c3483; }
        .sections { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 25px; }
        .section { background: #f8f9fa; padding: 20px; border-radius: 12px; }
        .section-title { font-weight: 600; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #e0e0e0; }
        .section-title.header { color: #e74c3c; border-color: #e74c3c; }
        .section-title.payload { color: #3498db; border-color: #3498db; }
        .section-title.signature { color: #2ecc71; border-color: #2ecc71; }
        pre { background: white; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 12px; line-height: 1.6; white-space: pre-wrap; word-break: break-all; }
        .token-display { margin-top: 20px; padding: 15px; background: #1a1a2e; border-radius: 10px; font-family: monospace; font-size: 14px; word-break: break-all; line-height: 1.8; }
        .token-display .header { color: #e74c3c; }
        .token-display .payload { color: #3498db; }
        .token-display .signature { color: #2ecc71; }
        .info { margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 10px; font-size: 14px; }
        .error { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 10px; margin-top: 20px; }
        @media (max-width: 768px) { .sections { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” JWTè§£ç å™¨</h1>
        <div class="card">
            <label>è¾“å…¥JWT Token</label>
            <textarea id="input" rows="4" placeholder="ç²˜è´´JWT token...">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</textarea>
            <div class="token-display" id="tokenDisplay"></div>
            <div id="error"></div>
            <div class="sections" id="sections">
                <div class="section">
                    <div class="section-title header">Header (å¤´éƒ¨)</div>
                    <pre id="headerContent">-</pre>
                </div>
                <div class="section">
                    <div class="section-title payload">Payload (è½½è·)</div>
                    <pre id="payloadContent">-</pre>
                </div>
                <div class="section">
                    <div class="section-title signature">Signature (ç­¾å)</div>
                    <pre id="signatureContent">-</pre>
                </div>
            </div>
            <div class="info">
                ğŸ’¡ <strong>æç¤º:</strong> JWTç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨ç‚¹(.)åˆ†éš”ï¼šHeader.Payload.Signatureã€‚Headerå’ŒPayloadæ˜¯Base64Urlç¼–ç çš„JSONã€‚
            </div>
        </div>
    </div>
    <script>
        function base64UrlDecode(str) {
            str = str.replace(/-/g, '+').replace(/_/g, '/');
            const pad = str.length % 4;
            if (pad) str += '='.repeat(4 - pad);
            return decodeURIComponent(atob(str).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));
        }
        function decode() {
            const token = document.getElementById('input').value.trim();
            const errorDiv = document.getElementById('error');
            errorDiv.innerHTML = '';
            if (!token) {
                document.getElementById('tokenDisplay').innerHTML = '';
                document.getElementById('headerContent').textContent = '-';
                document.getElementById('payloadContent').textContent = '-';
                document.getElementById('signatureContent').textContent = '-';
                return;
            }
            const parts = token.split('.');
            if (parts.length !== 3) {
                errorDiv.innerHTML = '<div class="error">æ— æ•ˆçš„JWTæ ¼å¼ï¼Œå¿…é¡»åŒ…å«3ä¸ªéƒ¨åˆ†</div>';
                return;
            }
            document.getElementById('tokenDisplay').innerHTML = 
                `<span class="header">${parts[0]}</span>.<span class="payload">${parts[1]}</span>.<span class="signature">${parts[2]}</span>`;
            try {
                const header = JSON.parse(base64UrlDecode(parts[0]));
                document.getElementById('headerContent').textContent = JSON.stringify(header, null, 2);
            } catch (e) {
                document.getElementById('headerContent').textContent = 'è§£ç å¤±è´¥: ' + e.message;
            }
            try {
                const payload = JSON.parse(base64UrlDecode(parts[1]));
                let displayPayload = { ...payload };
                if (payload.iat) displayPayload['iat_readable'] = new Date(payload.iat * 1000).toLocaleString();
                if (payload.exp) displayPayload['exp_readable'] = new Date(payload.exp * 1000).toLocaleString();
                if (payload.nbf) displayPayload['nbf_readable'] = new Date(payload.nbf * 1000).toLocaleString();
                document.getElementById('payloadContent').textContent = JSON.stringify(displayPayload, null, 2);
            } catch (e) {
                document.getElementById('payloadContent').textContent = 'è§£ç å¤±è´¥: ' + e.message;
            }
            document.getElementById('signatureContent').textContent = parts[2] + '\n\n(ç­¾åéœ€è¦å¯†é’¥éªŒè¯)';
        }
        document.getElementById('input').addEventListener('input', decode);
        decode();
    </script>
</body>
</html>
