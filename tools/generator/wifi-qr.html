<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô® - Âø´ÈÄüÂàÜ‰∫´WiFiÂØÜÁ†Å - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô® - Âø´ÈÄüÂàÜ‰∫´WiFiÂØÜÁ†Å - WebUtils" />
    <meta name="keywords" content="wifi-qr,generator,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/generator/wifi-qr.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô® - Âø´ÈÄüÂàÜ‰∫´WiFiÂØÜÁ†Å - WebUtils" />
    <meta property="og:description" content="WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô® - Âø´ÈÄüÂàÜ‰∫´WiFiÂØÜÁ†Å - WebUtils" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tools.realtime-ai.chat/tools/generator/wifi-qr.html" />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô® - Âø´ÈÄüÂàÜ‰∫´WiFiÂØÜÁ†Å - WebUtils" />
    <meta name="twitter:description" content="WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô® - Âø´ÈÄüÂàÜ‰∫´WiFiÂØÜÁ†Å - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <meta
      name="description"
      content="ÁîüÊàêWiFiËøûÊé•‰∫åÁª¥Á†ÅÔºåÊâ´Á†ÅÂç≥ÂèØËøûÊé•WiFiÁΩëÁªúÔºåÊîØÊåÅWPA/WPA2/WEPÂä†ÂØÜÊñπÂºèÔºåÂèØ‰∏ãËΩΩÈ´òÊ∏Ö‰∫åÁª¥Á†ÅÂõæÁâá"
    />
    <meta name="keywords" content="WiFi‰∫åÁª¥Á†Å,WiFiÂàÜ‰∫´,Êó†Á∫øÁΩëÁªú,‰∫åÁª¥Á†ÅÁîüÊàêÂô®,WiFiÂØÜÁ†ÅÂàÜ‰∫´" />
    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme="light"] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      :root {
        --bg-primary: #1a1a2e;
        --bg-secondary: #16213e;
        --bg-tertiary: #0f3460;
        --text-primary: #fff;
        --text-secondary: #a0a0a0;
        --accent: #00d9ff;
        --accent-hover: #00b8d9;
        --border: #2a2a4a;
        --success: #00c853;
        --warning: #ffc107;
        --error: #ff5252;
      }

      [data-theme="light"] {
        --bg-primary: #f5f5f5;
        --bg-secondary: #fff;
        --bg-tertiary: #e8e8e8;
        --text-primary: #1a1a2e;
        --text-secondary: #666;
        --border: #ddd;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        padding: 20px;
        transition: all 0.3s ease;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
        position: relative;
      }

      .header h1 {
        font-size: 2rem;
        margin-bottom: 10px;
        background: linear-gradient(135deg, var(--accent), #a855f7);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .header p {
        color: var(--text-secondary);
      }

      .back-link {
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        color: var(--accent);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 14px;
        opacity: 0.8;
        transition: opacity 0.2s;
      }

      .back-link:hover {
        opacity: 1;
      }

      .theme-toggle {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        background: var(--bg-tertiary);
        border: 1px solid var(--border);
        color: var(--text-primary);
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
        transition: all 0.3s ease;
      }

      .theme-toggle:hover {
        border-color: var(--accent);
      }

      .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
      }

      .card {
        background: var(--bg-secondary);
        border-radius: 16px;
        padding: 24px;
        border: 1px solid var(--border);
      }

      .card-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 20px;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--text-secondary);
        font-size: 14px;
      }

      .form-group input,
      .form-group select {
        width: 100%;
        padding: 12px 16px;
        background: var(--bg-tertiary);
        border: 1px solid var(--border);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: 14px;
        transition: all 0.3s ease;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(0, 217, 255, 0.1);
      }

      .input-group {
        position: relative;
      }

      .input-group input {
        padding-right: 48px;
      }

      .input-toggle {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .input-toggle:hover {
        color: var(--accent);
      }

      .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .checkbox-group input[type="checkbox"] {
        width: 18px;
        height: 18px;
        accent-color: var(--accent);
      }

      .checkbox-group label {
        margin: 0;
        cursor: pointer;
      }

      .btn {
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        width: 100%;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--accent), #a855f7);
        color: white;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 217, 255, 0.3);
      }

      .btn-secondary {
        background: var(--bg-tertiary);
        color: var(--text-primary);
        border: 1px solid var(--border);
      }

      .btn-secondary:hover {
        border-color: var(--accent);
      }

      .btn-group {
        display: flex;
        gap: 12px;
        margin-top: 16px;
      }

      .btn-group .btn {
        flex: 1;
      }

      /* QR Code Display */
      .qr-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 400px;
      }

      .qr-placeholder {
        width: 250px;
        height: 250px;
        background: var(--bg-tertiary);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-secondary);
        font-size: 14px;
        text-align: center;
        padding: 20px;
        border: 2px dashed var(--border);
      }

      .qr-container {
        background: white;
        padding: 20px;
        border-radius: 16px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .qr-container canvas {
        display: block;
      }

      .wifi-info {
        margin-top: 20px;
        text-align: center;
      }

      .wifi-info .ssid {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .wifi-info .encryption {
        font-size: 12px;
        color: var(--text-secondary);
        padding: 4px 12px;
        background: var(--bg-tertiary);
        border-radius: 20px;
        display: inline-block;
      }

      .download-options {
        display: flex;
        gap: 12px;
        margin-top: 24px;
        width: 100%;
        max-width: 300px;
      }

      .download-options .btn {
        flex: 1;
      }

      /* Color Picker */
      .color-options {
        display: flex;
        gap: 12px;
        margin-top: 16px;
      }

      .color-option {
        display: flex;
        flex-direction: column;
        gap: 8px;
        flex: 1;
      }

      .color-option label {
        font-size: 12px;
        color: var(--text-secondary);
      }

      .color-picker-wrapper {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .color-picker-wrapper input[type="color"] {
        width: 40px;
        height: 40px;
        padding: 0;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }

      .color-picker-wrapper input[type="text"] {
        flex: 1;
        padding: 8px 12px;
      }

      /* Size Slider */
      .size-slider {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .size-slider input[type="range"] {
        flex: 1;
        -webkit-appearance: none;
        height: 6px;
        background: var(--bg-tertiary);
        border-radius: 3px;
        outline: none;
      }

      .size-slider input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        background: var(--accent);
        border-radius: 50%;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .size-slider input[type="range"]::-webkit-slider-thumb:hover {
        transform: scale(1.2);
      }

      .size-value {
        min-width: 60px;
        text-align: center;
        font-size: 14px;
        color: var(--text-secondary);
      }

      /* Info Box */
      .info-box {
        background: rgba(0, 217, 255, 0.1);
        border: 1px solid rgba(0, 217, 255, 0.3);
        border-radius: 8px;
        padding: 16px;
        margin-top: 20px;
      }

      .info-box h4 {
        color: var(--accent);
        margin-bottom: 8px;
        font-size: 14px;
      }

      .info-box p {
        color: var(--text-secondary);
        font-size: 13px;
        line-height: 1.6;
      }

      /* Status */
      .status {
        padding: 12px 16px;
        border-radius: 8px;
        margin-top: 16px;
        display: none;
        text-align: center;
      }

      .status.success {
        display: block;
        background: rgba(0, 200, 83, 0.1);
        border: 1px solid var(--success);
        color: var(--success);
      }

      .status.error {
        display: block;
        background: rgba(255, 82, 82, 0.1);
        border: 1px solid var(--error);
        color: var(--error);
      }

      /* Presets */
      .preset-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 16px;
      }

      .preset-tag {
        padding: 6px 14px;
        background: var(--bg-tertiary);
        border: 1px solid var(--border);
        border-radius: 20px;
        font-size: 12px;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .preset-tag:hover {
        border-color: var(--accent);
        color: var(--accent);
      }

      .preset-tag.active {
        background: var(--accent);
        border-color: var(--accent);
        color: white;
      }

      @media (max-width: 768px) {
        .main-content {
          grid-template-columns: 1fr;
        }

        .header h1 {
          font-size: 1.5rem;
        }

        .back-link span {
          display: none;
        }

        .qr-section {
          min-height: 300px;
        }
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">È¶ñÈ°µ</a>
      <span>‚Ä∫</span>
      WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô®
    </nav>
    <div class="container">
      <div class="header">
        <a href="../../index.html" class="back-link">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M19 12H5M12 19l-7-7 7-7" />
          </svg>
          <span>ËøîÂõûÈ¶ñÈ°µ</span>
        </a>
        <h1>üì∂ WiFi ‰∫åÁª¥Á†ÅÁîüÊàêÂô®</h1>
        <p>ÁîüÊàêWiFiËøûÊé•‰∫åÁª¥Á†ÅÔºåÊâ´Á†ÅÂç≥ÂèØËøûÊé•</p>
        <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
      </div>

      <div class="main-content">
        <div class="card">
          <div class="card-title">
            <span>‚öôÔ∏è</span>
            WiFi ÈÖçÁΩÆ
          </div>

          <div class="form-group">
            <label>ÁΩëÁªúÂêçÁß∞ (SSID)</label>
            <input type="text" id="ssid" placeholder="ËæìÂÖ•WiFiÂêçÁß∞" oninput="generateQR()" />
          </div>

          <div class="form-group">
            <label>ÂØÜÁ†Å</label>
            <div class="input-group">
              <input
                type="password"
                id="password"
                placeholder="ËæìÂÖ•WiFiÂØÜÁ†Å"
                oninput="generateQR()"
              />
              <button class="input-toggle" onclick="togglePassword()">
                <svg
                  id="eyeIcon"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Âä†ÂØÜÊñπÂºè</label>
            <select id="encryption" onchange="generateQR()">
              <option value="WPA">WPA/WPA2/WPA3</option>
              <option value="WEP">WEP</option>
              <option value="nopass">Êó†ÂØÜÁ†Å (ÂºÄÊîæÁΩëÁªú)</option>
            </select>
          </div>

          <div class="form-group">
            <div class="checkbox-group">
              <input type="checkbox" id="hidden" onchange="generateQR()" />
              <label for="hidden">ÈöêËóèÁΩëÁªú (SSID‰∏çÂπøÊí≠)</label>
            </div>
          </div>

          <hr style="border: none; border-top: 1px solid var(--border); margin: 24px 0" />

          <div class="card-title">
            <span>üé®</span>
            Ê†∑ÂºèËÆæÁΩÆ
          </div>

          <div class="preset-tags">
            <span class="preset-tag active" onclick="applyPreset('default')">ÈªòËÆ§</span>
            <span class="preset-tag" onclick="applyPreset('blue')">ËìùËâ≤</span>
            <span class="preset-tag" onclick="applyPreset('green')">ÁªøËâ≤</span>
            <span class="preset-tag" onclick="applyPreset('purple')">Á¥´Ëâ≤</span>
            <span class="preset-tag" onclick="applyPreset('red')">Á∫¢Ëâ≤</span>
            <span class="preset-tag" onclick="applyPreset('orange')">Ê©ôËâ≤</span>
          </div>

          <div class="color-options">
            <div class="color-option">
              <label>ÂâçÊôØËâ≤</label>
              <div class="color-picker-wrapper">
                <input
                  type="color"
                  id="fgColor"
                  value="#000000"
                  onchange="
                    updateColorInput('fg');
                    generateQR();
                  "
                />
                <input
                  type="text"
                  id="fgColorText"
                  value="#000000"
                  onchange="
                    updateColorPicker('fg');
                    generateQR();
                  "
                />
              </div>
            </div>
            <div class="color-option">
              <label>ËÉåÊôØËâ≤</label>
              <div class="color-picker-wrapper">
                <input
                  type="color"
                  id="bgColor"
                  value="#FFFFFF"
                  onchange="
                    updateColorInput('bg');
                    generateQR();
                  "
                />
                <input
                  type="text"
                  id="bgColorText"
                  value="#FFFFFF"
                  onchange="
                    updateColorPicker('bg');
                    generateQR();
                  "
                />
              </div>
            </div>
          </div>

          <div class="form-group" style="margin-top: 20px">
            <label>‰∫åÁª¥Á†ÅÂ∞∫ÂØ∏</label>
            <div class="size-slider">
              <input
                type="range"
                id="qrSize"
                min="150"
                max="400"
                value="250"
                oninput="
                  updateSizeDisplay();
                  generateQR();
                "
              />
              <span class="size-value" id="sizeDisplay">250px</span>
            </div>
          </div>

          <div id="status" class="status"></div>
        </div>

        <div class="card">
          <div class="card-title">
            <span>üì±</span>
            ‰∫åÁª¥Á†ÅÈ¢ÑËßà
          </div>

          <div class="qr-section">
            <div id="qrPlaceholder" class="qr-placeholder">
              <span>
                ËæìÂÖ•WiFi‰ø°ÊÅØÂêé
                <br />
                Â∞ÜÂú®Ê≠§Â§ÑÁîüÊàê‰∫åÁª¥Á†Å
              </span>
            </div>

            <div id="qrDisplay" style="display: none">
              <div class="qr-container">
                <canvas id="qrCanvas"></canvas>
              </div>

              <div class="wifi-info">
                <div class="ssid" id="displaySsid"></div>
                <span class="encryption" id="displayEncryption"></span>
              </div>

              <div class="download-options">
                <button class="btn btn-primary" onclick="downloadQR('png')">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />
                  </svg>
                  PNG
                </button>
                <button class="btn btn-secondary" onclick="downloadQR('svg')">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />
                  </svg>
                  SVG
                </button>
              </div>
            </div>
          </div>

          <div class="info-box">
            <h4>üí° ‰ΩøÁî®ËØ¥Êòé</h4>
            <p>
              1. ËæìÂÖ•ÊÇ®ÁöÑWiFiÂêçÁß∞ÂíåÂØÜÁ†Å
              <br />
              2. ÈÄâÊã©Ê≠£Á°ÆÁöÑÂä†ÂØÜÊñπÂºè
              <br />
              3. ‰ΩøÁî®ÊâãÊú∫Áõ∏Êú∫ÊàñÊâ´Á†ÅÂ∫îÁî®Êâ´Êèè‰∫åÁª¥Á†Å
              <br />
              4. ÊâãÊú∫Â∞ÜËá™Âä®ËøûÊé•Âà∞WiFiÁΩëÁªú
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // QR Code Generation Library (Simple implementation)
      const QRCode = (function () {
        // QR Code generation using external API
        window.generate = function (text, canvas, options = {}) {
          const { size = 250, fgColor = "#000000", bgColor = "#FFFFFF" } = options;

          const ctx = canvas.getContext("2d");
          canvas.width = size;
          canvas.height = size;

          // Use QR Server API
          const img = new Image();
          img.crossOrigin = "anonymous";
          img.onload = function () {
            // Draw background
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, size, size);

            // Draw QR code
            ctx.drawImage(img, 0, 0, size, size);

            // Apply color overlay if not black
            if (fgColor !== "#000000") {
              ctx.globalCompositeOperation = "source-in";
              ctx.fillStyle = fgColor;
              ctx.fillRect(0, 0, size, size);
              ctx.globalCompositeOperation = "destination-over";
              ctx.fillStyle = bgColor;
              ctx.fillRect(0, 0, size, size);
              ctx.globalCompositeOperation = "source-over";
            }
          };

          img.onerror = function () {
            // Fallback: Generate using local algorithm
            generateLocal(text, canvas, options);
          };

          const fgHex = fgColor.replace("#", "");
          const bgHex = bgColor.replace("#", "");
          img.src = `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encodeURIComponent(text)}&color=${fgHex}&bgcolor=${bgHex}`;
        };

        // Simple local QR generation fallback
        function generateLocal(text, canvas, options) {
          const { size = 250, fgColor = "#000000", bgColor = "#FFFFFF" } = options;
          const ctx = canvas.getContext("2d");
          canvas.width = size;
          canvas.height = size;

          ctx.fillStyle = bgColor;
          ctx.fillRect(0, 0, size, size);

          ctx.fillStyle = fgColor;
          ctx.font = "12px monospace";
          ctx.textAlign = "center";
          ctx.fillText("QR Code", size / 2, size / 2 - 10);
          ctx.fillText("(ÁîüÊàê‰∏≠...)", size / 2, size / 2 + 10);
        }

        return { generate };
      })();

      // Color presets
      const presets = {
        default: { fg: "#000000", bg: "#FFFFFF" },
        blue: { fg: "#1e40af", bg: "#dbeafe" },
        green: { fg: "#166534", bg: "#dcfce7" },
        purple: { fg: "#7c3aed", bg: "#ede9fe" },
        red: { fg: "#dc2626", bg: "#fee2e2" },
        orange: { fg: "#ea580c", bg: "#ffedd5" }
      };

      // Theme
      window.toggleTheme = function () {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
      };

      function loadTheme() {
        const savedTheme = localStorage.getItem("theme") || "dark";
        document.documentElement.setAttribute("data-theme", savedTheme);
      }

      // Password visibility toggle
      window.togglePassword = function () {
        const input = document.getElementById("password");
        const icon = document.getElementById("eyeIcon");

        if (input.type === "password") {
          input.type = "text";
          icon.innerHTML = `
                    <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                    <line x1="1" y1="1" x2="23" y2="23"/>
                `;
        } else {
          input.type = "password";
          icon.innerHTML = `
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                `;
        }
      };

      // Color functions
      window.updateColorInput = function (type) {
        const picker = document.getElementById(type + "Color");
        const text = document.getElementById(type + "ColorText");
        text.value = picker.value.toUpperCase();
      };

      window.updateColorPicker = function (type) {
        const picker = document.getElementById(type + "Color");
        const text = document.getElementById(type + "ColorText");
        let value = text.value;

        if (!value.startsWith("#")) {
          value = "#" + value;
        }

        if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
          picker.value = value;
        }
      };

      window.applyPreset = function (name) {
        const preset = presets[name];
        if (!preset) return;

        document.getElementById("fgColor").value = preset.fg;
        document.getElementById("fgColorText").value = preset.fg.toUpperCase();
        document.getElementById("bgColor").value = preset.bg;
        document.getElementById("bgColorText").value = preset.bg.toUpperCase();

        // Update active state
        document.querySelectorAll(".preset-tag").forEach((tag) => tag.classList.remove("active"));
        event.target.classList.add("active");

        generateQR();
      };

      function updateSizeDisplay() {
        const size = document.getElementById("qrSize").value;
        document.getElementById("sizeDisplay").textContent = size + "px";
      }

      // Generate WiFi QR Code
      function generateQR() {
        const ssid = document.getElementById("ssid").value.trim();
        const password = document.getElementById("password").value;
        const encryption = document.getElementById("encryption").value;
        const hidden = document.getElementById("hidden").checked;

        if (!ssid) {
          document.getElementById("qrPlaceholder").style.display = "flex";
          document.getElementById("qrDisplay").style.display = "none";
          return;
        }

        // Build WiFi string
        // Format: WIFI:T:WPA;S:mynetwork;P:mypass;H:true;;
        let wifiString = "WIFI:";
        wifiString += "T:" + encryption + ";";
        wifiString += "S:" + escapeWifiString(ssid) + ";";

        if (encryption !== "nopass" && password) {
          wifiString += "P:" + escapeWifiString(password) + ";";
        }

        if (hidden) {
          wifiString += "H:true;";
        }

        wifiString += ";";

        // Get options
        const size = parseInt(document.getElementById("qrSize").value);
        const fgColor = document.getElementById("fgColor").value;
        const bgColor = document.getElementById("bgColor").value;

        // Generate QR Code
        const canvas = document.getElementById("qrCanvas");
        QRCode.generate(wifiString, canvas, { size, fgColor, bgColor });

        // Update display
        document.getElementById("qrPlaceholder").style.display = "none";
        document.getElementById("qrDisplay").style.display = "flex";
        document.getElementById("qrDisplay").style.flexDirection = "column";
        document.getElementById("qrDisplay").style.alignItems = "center";

        document.getElementById("displaySsid").textContent = ssid;
        document.getElementById("displayEncryption").textContent = getEncryptionLabel(encryption);
      }

      function escapeWifiString(str) {
        // Escape special characters: \ ; , " :
        return str
          .replace(/\\/g, "\\\\")
          .replace(/;/g, "\\;")
          .replace(/,/g, "\\,")
          .replace(/"/g, '\\"')
          .replace(/:/g, "\\:");
      }

      function getEncryptionLabel(enc) {
        const labels = {
          WPA: "WPA/WPA2/WPA3",
          WEP: "WEP",
          nopass: "ÂºÄÊîæÁΩëÁªú"
        };
        return labels[enc] || enc;
      }

      // Download functions
      window.downloadQR = function (format) {
        const ssid = document.getElementById("ssid").value.trim();
        if (!ssid) {
          showStatus("ËØ∑ÂÖàÁîüÊàê‰∫åÁª¥Á†Å", "error");
          return;
        }

        const canvas = document.getElementById("qrCanvas");
        const filename = `wifi-${ssid.replace(/[^a-zA-Z0-9]/g, "_")}`;

        if (format === "png") {
          const link = document.createElement("a");
          link.download = filename + ".png";
          link.href = canvas.toDataURL("image/png");
          link.click();
          showStatus("PNG Â∑≤‰∏ãËΩΩ", "success");
        } else if (format === "svg") {
          // Convert canvas to SVG
          const size = canvas.width;
          const imageData = canvas.toDataURL("image/png");

          const svg = `<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${size}" height="${size}" viewBox="0 0 ${size} ${size}">
    <image width="${size}" height="${size}" xlink:href="${imageData}"/>
</svg>`;

          const blob = new Blob([svg], { type: "image/svg+xml" });
          const link = document.createElement("a");
          link.download = filename + ".svg";
          link.href = URL.createObjectURL(blob);
          link.click();
          URL.revokeObjectURL(link.href);
          showStatus("SVG Â∑≤‰∏ãËΩΩ", "success");
        }
      };

      function showStatus(message, type) {
        const status = document.getElementById("status");
        status.textContent = message;
        status.className = "status " + type;
        setTimeout(() => {
          status.className = "status";
        }, 3000);
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
        loadTheme();
        updateSizeDisplay();
      });
    </script>
  </body>
</html>
