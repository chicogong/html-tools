<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1e1e1e; min-height: 100vh; padding: 20px; color: #d4d4d4; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { color: #569cd6; text-align: center; margin-bottom: 20px; }
        .card { background: #252526; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .regex-input { display: flex; gap: 8px; margin-bottom: 16px; }
        .regex-input input { flex: 1; padding: 12px 16px; background: #3c3c3c; border: 2px solid #569cd6; border-radius: 8px; color: #ce9178; font-family: 'Monaco', 'Menlo', monospace; font-size: 16px; }
        .flags { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 16px; }
        .flag { display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: #3c3c3c; border-radius: 6px; cursor: pointer; }
        .flag input { width: 16px; height: 16px; }
        .flag.active { background: #264f78; }
        textarea { width: 100%; height: 200px; padding: 16px; background: #1e1e1e; border: 1px solid #3c3c3c; border-radius: 8px; color: #d4d4d4; font-family: 'Monaco', 'Menlo', monospace; font-size: 14px; resize: vertical; }
        .result-area { background: #1e1e1e; border-radius: 8px; padding: 16px; min-height: 150px; font-family: monospace; line-height: 1.8; }
        .match { background: #264f78; color: #9cdcfe; padding: 2px 4px; border-radius: 3px; }
        .group { background: #4e342e; color: #ce9178; padding: 2px 4px; border-radius: 3px; margin: 0 2px; }
        .info { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-top: 16px; }
        .info-item { background: #3c3c3c; padding: 12px; border-radius: 8px; text-align: center; }
        .info-item .value { font-size: 24px; font-weight: bold; color: #4ec9b0; }
        .info-item .label { font-size: 12px; color: #808080; }
        .presets { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px; }
        .preset { padding: 6px 12px; background: #3c3c3c; border: none; border-radius: 6px; color: #d4d4d4; cursor: pointer; font-size: 12px; }
        .preset:hover { background: #569cd6; color: white; }
        .error { color: #f14c4c; background: #5a1d1d; padding: 12px; border-radius: 8px; margin-top: 12px; }
        .matches-list { margin-top: 16px; }
        .match-item { background: #3c3c3c; padding: 12px; border-radius: 8px; margin-bottom: 8px; }
        .match-item .index { color: #569cd6; font-size: 12px; }
        .match-item .value { color: #ce9178; font-family: monospace; }
        .match-item .groups { margin-top: 8px; font-size: 13px; }
        h3 { color: #569cd6; margin-bottom: 12px; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨</h1>
        <div class="card">
            <h3>å¸¸ç”¨æ­£åˆ™</h3>
            <div class="presets">
                <button class="preset" onclick="setRegex('[\\u4e00-\\u9fa5]+')">ä¸­æ–‡</button>
                <button class="preset" onclick="setRegex('\\d+')">æ•°å­—</button>
                <button class="preset" onclick="setRegex('[a-zA-Z]+')">å­—æ¯</button>
                <button class="preset" onclick="setRegex('[\\w.-]+@[\\w.-]+\\.\\w+')">é‚®ç®±</button>
                <button class="preset" onclick="setRegex('1[3-9]\\d{9}')">æ‰‹æœºå·</button>
                <button class="preset" onclick="setRegex('https?://[\\w.-]+(?:/[\\w./-]*)?')">URL</button>
                <button class="preset" onclick="setRegex('\\d{4}-\\d{2}-\\d{2}')">æ—¥æœŸ</button>
                <button class="preset" onclick="setRegex('#[0-9a-fA-F]{3,6}')">é¢œè‰²</button>
                <button class="preset" onclick="setRegex('\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}')">IPåœ°å€</button>
                <button class="preset" onclick="setRegex('<([a-z]+)[^>]*>.*?</\\1>')">HTMLæ ‡ç­¾</button>
            </div>
            <div class="regex-input">
                <span style="color: #569cd6; font-size: 20px; padding: 12px;">/</span>
                <input type="text" id="regex" placeholder="è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼..." oninput="test()">
                <span style="color: #569cd6; font-size: 20px; padding: 12px;">/</span>
                <input type="text" id="flagsInput" value="g" style="width: 60px;" oninput="test()">
            </div>
            <div class="flags">
                <label class="flag" onclick="toggleFlag('g')"><input type="checkbox" id="flag-g" checked>g (å…¨å±€)</label>
                <label class="flag" onclick="toggleFlag('i')"><input type="checkbox" id="flag-i">i (å¿½ç•¥å¤§å°å†™)</label>
                <label class="flag" onclick="toggleFlag('m')"><input type="checkbox" id="flag-m">m (å¤šè¡Œ)</label>
                <label class="flag" onclick="toggleFlag('s')"><input type="checkbox" id="flag-s">s (dotAll)</label>
                <label class="flag" onclick="toggleFlag('u')"><input type="checkbox" id="flag-u">u (Unicode)</label>
            </div>
        </div>
        <div class="card">
            <h3>æµ‹è¯•æ–‡æœ¬</h3>
            <textarea id="testText" oninput="test()" placeholder="è¾“å…¥è¦æµ‹è¯•çš„æ–‡æœ¬...">Hello World! ä½ å¥½ä¸–ç•Œï¼
æˆ‘çš„é‚®ç®±æ˜¯ test@example.com
ç”µè¯ï¼š13812345678
ç½‘å€ï¼šhttps://www.example.com/path
æ—¥æœŸï¼š2024-01-15
é¢œè‰²ï¼š#ff6b6b #333</textarea>
        </div>
        <div class="card">
            <h3>åŒ¹é…ç»“æœ</h3>
            <div class="result-area" id="result"></div>
            <div id="error"></div>
            <div class="info">
                <div class="info-item">
                    <div class="value" id="matchCount">0</div>
                    <div class="label">åŒ¹é…æ•°é‡</div>
                </div>
                <div class="info-item">
                    <div class="value" id="groupCount">0</div>
                    <div class="label">æ•è·ç»„</div>
                </div>
            </div>
        </div>
        <div class="card">
            <h3>åŒ¹é…è¯¦æƒ…</h3>
            <div class="matches-list" id="matchesList"></div>
        </div>
    </div>
    <script>
        function setRegex(pattern) {
            document.getElementById('regex').value = pattern;
            test();
        }
        
        function toggleFlag(flag) {
            const checkbox = document.getElementById('flag-' + flag);
            checkbox.checked = !checkbox.checked;
            updateFlags();
            test();
        }
        
        function updateFlags() {
            let flags = '';
            ['g', 'i', 'm', 's', 'u'].forEach(f => {
                if (document.getElementById('flag-' + f).checked) flags += f;
            });
            document.getElementById('flagsInput').value = flags;
        }
        
        function test() {
            const pattern = document.getElementById('regex').value;
            const flags = document.getElementById('flagsInput').value;
            const text = document.getElementById('testText').value;
            const resultEl = document.getElementById('result');
            const errorEl = document.getElementById('error');
            const matchesListEl = document.getElementById('matchesList');
            
            errorEl.innerHTML = '';
            
            if (!pattern) {
                resultEl.innerHTML = text.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br>');
                document.getElementById('matchCount').textContent = '0';
                document.getElementById('groupCount').textContent = '0';
                matchesListEl.innerHTML = '';
                return;
            }
            
            try {
                const regex = new RegExp(pattern, flags);
                const matches = [];
                let match;
                let lastIndex = 0;
                let html = '';
                
                if (flags.includes('g')) {
                    while ((match = regex.exec(text)) !== null) {
                        matches.push({ index: match.index, value: match[0], groups: match.slice(1) });
                        if (match.index === regex.lastIndex) regex.lastIndex++;
                    }
                } else {
                    match = regex.exec(text);
                    if (match) {
                        matches.push({ index: match.index, value: match[0], groups: match.slice(1) });
                    }
                }
                
                // Highlight matches
                let highlighted = '';
                let pos = 0;
                matches.forEach(m => {
                    highlighted += escapeHtml(text.slice(pos, m.index));
                    highlighted += `<span class="match">${escapeHtml(m.value)}</span>`;
                    pos = m.index + m.value.length;
                });
                highlighted += escapeHtml(text.slice(pos));
                resultEl.innerHTML = highlighted.replace(/\n/g, '<br>');
                
                document.getElementById('matchCount').textContent = matches.length;
                document.getElementById('groupCount').textContent = matches.length > 0 ? matches[0].groups.length : 0;
                
                // Match details
                matchesListEl.innerHTML = matches.map((m, i) => `
                    <div class="match-item">
                        <div class="index">åŒ¹é… ${i + 1} (ä½ç½®: ${m.index})</div>
                        <div class="value">"${escapeHtml(m.value)}"</div>
                        ${m.groups.length > 0 ? `<div class="groups">æ•è·ç»„: ${m.groups.map((g, j) => `<span class="group">$${j + 1}: "${escapeHtml(g || '')}"</span>`).join(' ')}</div>` : ''}
                    </div>
                `).join('');
                
            } catch (e) {
                resultEl.innerHTML = text.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br>');
                errorEl.innerHTML = `<div class="error">é”™è¯¯: ${e.message}</div>`;
                document.getElementById('matchCount').textContent = '0';
                matchesListEl.innerHTML = '';
            }
        }
        
        function escapeHtml(str) {
            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        }
        
        // Sync flags checkboxes with input
        document.getElementById('flagsInput').addEventListener('input', function() {
            const flags = this.value;
            ['g', 'i', 'm', 's', 'u'].forEach(f => {
                document.getElementById('flag-' + f).checked = flags.includes(f);
            });
        });
        
        test();
    </script>
</body>
</html>