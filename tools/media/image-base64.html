<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å›¾ç‰‡ Base64 è½¬æ¢å™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="å›¾ç‰‡ Base64 è½¬æ¢å™¨ - WebUtils" />
    <meta name="keywords" content="image-base64,media,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/media/image-base64.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="å›¾ç‰‡ Base64 è½¬æ¢å™¨ - WebUtils" />
    <meta property="og:description" content="å›¾ç‰‡ Base64 è½¬æ¢å™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/media/image-base64.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="å›¾ç‰‡ Base64 è½¬æ¢å™¨ - WebUtils" />
    <meta name="twitter:description" content="å›¾ç‰‡ Base64 è½¬æ¢å™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <meta name="description" content="å›¾ç‰‡ä¸ Base64 äº’è½¬ï¼Œæ”¯æŒé¢„è§ˆã€å¤åˆ¶å’Œä¸‹è½½ï¼Œå¯ç”Ÿæˆ Data URI" />
    <meta name="keywords" content="image,base64,è½¬æ¢,å›¾ç‰‡,data uri,ç¼–ç ,è§£ç " />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”„</text></svg>"
    />
    <style>
      :root {
        /* å­—ä½“å˜é‡ */
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      :root {
        --bg-primary: #fff;
        --bg-secondary: #f8fafc;
        --bg-tertiary: #f1f5f9;
        --color-text-primary: #1e293b;
        --color-text-secondary: #64748b;
        --border-color: #e2e8f0;
        --accent-color: #06b6d4;
        --accent-hover: #0891b2;
      }
      [data-theme="dark"] {
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --color-text-primary: #f1f5f9;
        --color-text-secondary: #94a3b8;
        --border-color: #475569;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--bg-primary);
        color: var(--color-text-primary);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 1100px;
        margin: 0 auto;
      }
      .header {
        text-align: center;
        margin-bottom: 25px;
      }
      .header h1 {
        font-size: 1.8rem;
        margin-bottom: 8px;
      }
      .header p {
        color: var(--color-text-secondary);
      }
      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-secondary);
        cursor: pointer;
        font-size: 1.2rem;
      }
      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }
      .tab-btn {
        padding: 12px 24px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-secondary);
        color: var(--color-text-primary);
        cursor: pointer;
        font-size: 0.95rem;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.2s;
      }
      .tab-btn:hover {
        background: var(--bg-tertiary);
      }
      .tab-btn.active {
        background: var(--accent-color);
        color: white;
        border-color: var(--accent-color);
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      .upload-area {
        background: var(--bg-secondary);
        border: 2px dashed var(--border-color);
        border-radius: 12px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
        margin-bottom: 20px;
      }
      .upload-area:hover,
      .upload-area.dragover {
        border-color: var(--accent-color);
        background: var(--bg-tertiary);
      }
      .upload-icon {
        font-size: 3rem;
        margin-bottom: 15px;
      }
      .upload-text {
        color: var(--color-text-secondary);
        margin-bottom: 10px;
      }
      .upload-hint {
        font-size: 0.8rem;
        color: var(--color-text-secondary);
      }
      #imageInput {
        display: none;
      }
      .result-section {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
      }
      .result-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }
      .result-header h3 {
        font-size: 1rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .result-info {
        display: flex;
        gap: 15px;
        font-size: 0.85rem;
        color: var(--color-text-secondary);
      }
      .preview-container {
        background: repeating-conic-gradient(var(--bg-tertiary) 0% 25%, var(--bg-primary) 0% 50%)
          50% / 16px 16px;
        border-radius: 8px;
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 200px;
        margin-bottom: 15px;
      }
      .preview-container img {
        max-width: 100%;
        max-height: 300px;
      }
      .code-output {
        background: var(--bg-primary);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 15px;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        word-break: break-all;
        max-height: 200px;
        overflow: auto;
        position: relative;
      }
      .btn-group {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        flex-wrap: wrap;
      }
      .btn {
        padding: 10px 16px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-primary);
        color: var(--color-text-primary);
        cursor: pointer;
        font-size: 0.85rem;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: all 0.2s;
      }
      .btn:hover {
        background: var(--bg-tertiary);
      }
      .btn-primary {
        background: var(--accent-color);
        color: white;
        border-color: var(--accent-color);
      }
      .btn-primary:hover {
        background: var(--accent-hover);
      }
      .base64-input {
        width: 100%;
        min-height: 200px;
        padding: 15px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-primary);
        color: var(--color-text-primary);
        font-family: var(--font-mono);
        font-size: 0.85rem;
        resize: vertical;
        margin-bottom: 15px;
      }
      .format-options {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
      }
      .format-option {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .format-option input {
        accent-color: var(--accent-color);
      }
      .format-option label {
        font-size: 0.9rem;
        cursor: pointer;
      }
      .toast {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 12px 24px;
        background: var(--color-text-primary);
        color: var(--bg-primary);
        border-radius: 8px;
        font-size: 0.9rem;
        opacity: 0;
        transition: opacity 0.3s;
        pointer-events: none;
      }
      .toast.show {
        opacity: 1;
      }
      @media (max-width: 600px) {
        .result-header {
          flex-direction: column;
          gap: 10px;
          align-items: flex-start;
        }
        .result-info {
          flex-wrap: wrap;
        }
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      å›¾ç‰‡ Base64 è½¬æ¢å™¨
    </nav>
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>

    <div class="container">
      <div class="header">
        <h1>ğŸ”„ å›¾ç‰‡ Base64 è½¬æ¢å™¨</h1>
        <p>å›¾ç‰‡è½¬ Base64 ç¼–ç ï¼Œæˆ– Base64 è½¬å›¾ç‰‡</p>
      </div>

      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('encode')">ğŸ–¼ï¸ å›¾ç‰‡ â†’ Base64</button>
        <button class="tab-btn" onclick="switchTab('decode')">ğŸ“ Base64 â†’ å›¾ç‰‡</button>
      </div>

      <!-- Encode Tab -->
      <div class="tab-content active" id="encodeTab">
        <div
          class="upload-area"
          id="uploadArea"
          onclick="document.getElementById('imageInput').click()"
        >
          <div class="upload-icon">ğŸ“·</div>
          <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ</div>
          <div class="upload-hint">æ”¯æŒ JPGã€PNGã€GIFã€WebPã€SVG ç­‰æ ¼å¼</div>
          <input type="file" id="imageInput" accept="image/*" />
        </div>

        <div class="result-section" id="encodeResult" style="display: none">
          <div class="result-header">
            <h3>ğŸ–¼ï¸ å›¾ç‰‡é¢„è§ˆ</h3>
            <div class="result-info">
              <span id="imageInfo"></span>
            </div>
          </div>
          <div class="preview-container">
            <img id="previewImage" src="data:," alt="Preview" />
          </div>

          <div class="format-options">
            <div class="format-option">
              <input
                type="radio"
                name="outputFormat"
                id="formatDataUri"
                value="dataUri"
                checked
                onchange="updateOutput()"
              />
              <label for="formatDataUri">Data URI (å®Œæ•´)</label>
            </div>
            <div class="format-option">
              <input
                type="radio"
                name="outputFormat"
                id="formatBase64"
                value="base64"
                onchange="updateOutput()"
              />
              <label for="formatBase64">ä»… Base64</label>
            </div>
            <div class="format-option">
              <input
                type="radio"
                name="outputFormat"
                id="formatHtml"
                value="html"
                onchange="updateOutput()"
              />
              <label for="formatHtml">HTML &lt;img&gt; æ ‡ç­¾</label>
            </div>
            <div class="format-option">
              <input
                type="radio"
                name="outputFormat"
                id="formatCss"
                value="css"
                onchange="updateOutput()"
              />
              <label for="formatCss">CSS background</label>
            </div>
          </div>

          <div class="code-output" id="encodeOutput"></div>

          <div class="btn-group">
            <button class="btn btn-primary" onclick="copyOutput()">ğŸ“‹ å¤åˆ¶</button>
            <button class="btn" onclick="downloadText()">ğŸ’¾ ä¸‹è½½ä¸ºæ–‡æœ¬</button>
          </div>
        </div>
      </div>

      <!-- Decode Tab -->
      <div class="tab-content" id="decodeTab">
        <div class="result-section">
          <h3 style="margin-bottom: 15px">ğŸ“ ç²˜è´´ Base64 æˆ– Data URI</h3>
          <textarea
            class="base64-input"
            id="base64Input"
            placeholder="ç²˜è´´ Base64 ç¼–ç æˆ–å®Œæ•´çš„ Data URI...&#10;&#10;ä¾‹å¦‚:&#10;data:image/png;base64,iVBORw0KGgo...&#10;æˆ–&#10;iVBORw0KGgo..."
            oninput="decodeBase64()"
          ></textarea>

          <div class="btn-group" style="margin-bottom: 20px">
            <button class="btn btn-primary" onclick="pasteFromClipboard()">ğŸ“‹ ä»å‰ªè´´æ¿ç²˜è´´</button>
            <button class="btn" onclick="clearInput()">ğŸ—‘ï¸ æ¸…ç©º</button>
          </div>
        </div>

        <div class="result-section" id="decodeResult" style="display: none">
          <div class="result-header">
            <h3>ğŸ–¼ï¸ è§£ç ç»“æœ</h3>
            <div class="result-info">
              <span id="decodeInfo"></span>
            </div>
          </div>
          <div class="preview-container">
            <img id="decodedImage" src="data:," alt="Decoded" />
          </div>

          <div class="btn-group">
            <button class="btn btn-primary" onclick="downloadImage()">ğŸ’¾ ä¸‹è½½å›¾ç‰‡</button>
          </div>
        </div>
      </div>
    </div>

    <div class="toast" id="toast">å·²å¤åˆ¶</div>

    <script>
      // Theme
      function initTheme() {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.setAttribute("data-theme", saved);
        } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          document.documentElement.setAttribute("data-theme", "dark");
        }
      }
      window.toggleTheme = function () {
        const current = document.documentElement.getAttribute("data-theme");
        const next = current === "dark" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme", next);
        localStorage.setItem("theme", next);
      };
      initTheme();

      let currentDataUri = "";
      let currentMimeType = "";
      let currentFileName = "";

      // Tab switching
      window.switchTab = function (tab) {
        document.querySelectorAll(".tab-btn").forEach((btn) => {
          btn.classList.toggle(
            "active",
            btn.textContent.includes(tab === "encode" ? "å›¾ç‰‡" : "Base64 â†’")
          );
        });
        document.querySelectorAll(".tab-content").forEach((content) => {
          content.classList.remove("active");
        });
        document.getElementById(tab + "Tab").classList.add("active");
      };

      // Drag and drop
      const uploadArea = document.getElementById("uploadArea");
      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("dragover");
      });
      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("dragover");
      });
      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("dragover");
        const file = e.dataTransfer.files[0];
        if (file && file.type.startsWith("image/")) {
          processImage(file);
        }
      });

      document.getElementById("imageInput").addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (file) processImage(file);
      });

      function processImage(file) {
        currentFileName = file.name;
        currentMimeType = file.type;

        const reader = new FileReader();
        reader.onload = (e) => {
          currentDataUri = e.target.result;

          // Show preview
          const img = document.getElementById("previewImage");
          img.src = currentDataUri;

          img.onload = () => {
            // Update info
            const base64Length = currentDataUri.split(",")[1].length;
            const sizeKB = ((base64Length * 0.75) / 1024).toFixed(2);
            document.getElementById("imageInfo").textContent =
              `${img.naturalWidth} Ã— ${img.naturalHeight} | ${file.type} | ~${sizeKB} KB (Base64)`;

            document.getElementById("encodeResult").style.display = "block";
            updateOutput();
          };
        };
        reader.readAsDataURL(file);
      }

      function updateOutput() {
        const format = document.querySelector('input[name="outputFormat"]:checked').value;
        const output = document.getElementById("encodeOutput");
        const base64 = currentDataUri.split(",")[1];

        switch (format) {
          case "dataUri":
            output.textContent = currentDataUri;
            break;
          case "base64":
            output.textContent = base64;
            break;
          case "html":
            output.textContent = `<img src="${currentDataUri}" alt="image">`;
            break;
          case "css":
            output.textContent = `background-image: url('${currentDataUri}');`;
            break;
        }
      }

      window.copyOutput = function () {
        const output = document.getElementById("encodeOutput").textContent;
        navigator.clipboard.writeText(output);
        showToast("å·²å¤åˆ¶");
      };

      window.downloadText = function () {
        const output = document.getElementById("encodeOutput").textContent;
        const blob = new Blob([output], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = currentFileName.replace(/\.[^.]+$/, "") + ".txt";
        a.click();
        URL.revokeObjectURL(url);
      };

      // Decode functions
      window.decodeBase64 = function () {
        const input = document.getElementById("base64Input").value.trim();
        if (!input) {
          document.getElementById("decodeResult").style.display = "none";
          return;
        }

        let dataUri = input;

        // If not a data URI, try to create one
        if (!input.startsWith("data:")) {
          // Try to detect image type from base64
          const mimeType = detectMimeType(input);
          dataUri = `data:${mimeType};base64,${input}`;
        }

        const img = document.getElementById("decodedImage");
        img.onload = () => {
          document.getElementById("decodeResult").style.display = "block";
          const base64 = dataUri.split(",")[1];
          const sizeKB = ((base64.length * 0.75) / 1024).toFixed(2);
          document.getElementById("decodeInfo").textContent =
            `${img.naturalWidth} Ã— ${img.naturalHeight} | ~${sizeKB} KB`;
        };
        img.onerror = () => {
          document.getElementById("decodeResult").style.display = "none";
        };
        img.src = dataUri;
      };

      function detectMimeType(base64) {
        // Check magic bytes
        const signatures = {
          "/9j/": "image/jpeg",
          iVBORw: "image/png",
          R0lGOD: "image/gif",
          UklGR: "image/webp",
          PHN2Zz: "image/svg+xml"
        };

        for (const [sig, mime] of Object.entries(signatures)) {
          if (base64.startsWith(sig)) return mime;
        }
        return "image/png"; // Default
      }

      window.pasteFromClipboard = async function () {
        try {
          const text = await navigator.clipboard.readText();
          document.getElementById("base64Input").value = text;
          decodeBase64();
        } catch (e) {
          alert("æ— æ³•è®¿é—®å‰ªè´´æ¿");
        }
      };

      window.clearInput = function () {
        document.getElementById("base64Input").value = "";
        document.getElementById("decodeResult").style.display = "none";
      };

      window.downloadImage = function () {
        const img = document.getElementById("decodedImage");
        const a = document.createElement("a");
        a.href = img.src;

        // Get extension from mime type
        const mimeMatch = img.src.match(/data:image\/([^;]+)/);
        const ext = mimeMatch ? mimeMatch[1].replace("jpeg", "jpg") : "png";

        a.download = `decoded-image.${ext}`;
        a.click();
      };

      function showToast(msg) {
        const toast = document.getElementById("toast");
        toast.textContent = msg;
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 2000);
      }
    </script>
  </body>
</html>
