<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gravatar å¤´åƒæŸ¥è¯¢ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="Gravatar å¤´åƒæŸ¥è¯¢ - WebUtils" />
    <meta name="keywords" content="gravatar-checker,network,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/network/gravatar-checker.html"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="Gravatar å¤´åƒæŸ¥è¯¢ - WebUtils" />
    <meta property="og:description" content="Gravatar å¤´åƒæŸ¥è¯¢ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/network/gravatar-checker.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Gravatar å¤´åƒæŸ¥è¯¢ - WebUtils" />
    <meta name="twitter:description" content="Gravatar å¤´åƒæŸ¥è¯¢ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <meta name="description" content="é€šè¿‡é‚®ç®±æŸ¥è¯¢ Gravatar å…¨çƒé€šç”¨å¤´åƒ" />
    <meta name="keywords" content="Gravatar,å¤´åƒ,é‚®ç®±,avatar,æŸ¥è¯¢" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, blinkmacsystemfont, 'Segoe UI', roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --bg-elevated: #1a1a24;
        --border-subtle: #2a2a3a;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #a0a0b0;
        --color-text-muted: #606070;
        --color-accent-cyan: #00f5d4;
        --color-accent-purple: #bf5af2;
        --accent-green: #30d158;
        --accent-orange: #ff9f0a;
        --accent-red: #ff453a;
        --accent-blue: #1e88e5;
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 16px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }

      .container {
        max-width: 700px;
        margin: 0 auto;
        padding: 24px 20px;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        color: var(--color-text-secondary);
        text-decoration: none;
        font-size: 14px;
        margin-bottom: 20px;
        transition: color 0.2s;
      }

      .back-link:hover {
        color: var(--color-accent-cyan);
      }

      h1 {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 8px;
        background: linear-gradient(135deg, var(--accent-blue), var(--color-accent-purple));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .subtitle {
        color: var(--color-text-secondary);
        margin-bottom: 24px;
        font-size: 15px;
      }

      .search-card {
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
        margin-bottom: 24px;
      }

      .search-form {
        display: flex;
        gap: 12px;
      }

      .search-input {
        flex: 1;
        padding: 14px 16px;
        background: var(--bg-elevated);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--color-text-primary);
        font-family: inherit;
        font-size: 15px;
        transition: border-color 0.2s;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--accent-blue);
      }

      .search-input::placeholder {
        color: var(--color-text-muted);
      }

      .btn {
        padding: 14px 24px;
        border: none;
        border-radius: var(--radius-md);
        font-family: inherit;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-primary {
        background: var(--accent-blue);
        color: #fff;
      }

      .btn-primary:hover {
        background: #1976d2;
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(30, 136, 229, 0.3);
      }

      .result-card {
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 32px;
        text-align: center;
        display: none;
      }

      .result-card.show {
        display: block;
      }

      .avatar-container {
        position: relative;
        width: 200px;
        height: 200px;
        margin: 0 auto 24px;
      }

      .avatar {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 4px solid var(--border-subtle);
        object-fit: cover;
        background: var(--bg-elevated);
      }

      .avatar-badge {
        position: absolute;
        bottom: 8px;
        right: 8px;
        padding: 6px 12px;
        background: var(--accent-green);
        color: #fff;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
      }

      .avatar-badge.not-found {
        background: var(--accent-orange);
      }

      .email-display {
        font-family: var(--font-mono);
        font-size: 14px;
        color: var(--color-text-secondary);
        margin-bottom: 8px;
      }

      .hash-display {
        font-family: var(--font-mono);
        font-size: 12px;
        color: var(--color-text-muted);
        word-break: break-all;
        margin-bottom: 24px;
      }

      .size-options {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: center;
        margin-bottom: 24px;
      }

      .size-btn {
        padding: 10px 16px;
        background: var(--bg-elevated);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-secondary);
        font-family: inherit;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .size-btn:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }

      .size-btn.active {
        background: var(--color-accent-cyan);
        border-color: var(--color-accent-cyan);
        color: #000;
      }

      .download-section {
        display: flex;
        gap: 12px;
        justify-content: center;
      }

      .btn-download {
        background: var(--bg-elevated);
        border: 1px solid var(--border-subtle);
        color: var(--color-text-secondary);
      }

      .btn-download:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }

      .info-section {
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 20px;
        margin-top: 24px;
      }

      .info-section h3 {
        font-size: 16px;
        margin-bottom: 12px;
        color: var(--color-text-primary);
      }

      .info-section p {
        font-size: 14px;
        color: var(--color-text-secondary);
        margin-bottom: 12px;
      }

      .info-section a {
        color: var(--color-accent-cyan);
        text-decoration: none;
      }

      .info-section a:hover {
        text-decoration: underline;
      }

      .loading {
        display: none;
        text-align: center;
        padding: 40px;
      }

      .loading.show {
        display: block;
      }

      .spinner {
        width: 40px;
        height: 40px;
        border: 3px solid var(--border-subtle);
        border-top-color: var(--color-accent-cyan);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 16px;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @media (max-width: 500px) {
        .search-form {
          flex-direction: column;
        }

        .avatar-container {
          width: 150px;
          height: 150px;
        }

        .avatar {
          width: 150px;
          height: 150px;
        }

        .size-options {
          flex-direction: column;
          align-items: center;
        }

        .download-section {
          flex-direction: column;
        }
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      Gravatar å¤´åƒæŸ¥è¯¢
    </nav>
    <div class="container">
      <h1>Gravatar å¤´åƒæŸ¥è¯¢</h1>
      <p class="subtitle">è¾“å…¥é‚®ç®±åœ°å€ï¼Œè·å–å…³è”çš„ Gravatar å…¨çƒé€šç”¨å¤´åƒ</p>

      <div class="search-card">
        <form class="search-form" onsubmit="searchGravatar(event)">
          <input
            type="email"
            class="search-input"
            id="emailInput"
            placeholder="è¾“å…¥é‚®ç®±åœ°å€..."
            required
          />
          <button type="submit" class="btn btn-primary">æŸ¥è¯¢</button>
        </form>
      </div>

      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>æ­£åœ¨æŸ¥è¯¢...</p>
      </div>

      <div class="result-card" id="resultCard">
        <div class="avatar-container">
          <img
            class="avatar"
            id="avatarImg"
            src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
            alt="Gravatar"
          />
          <span class="avatar-badge" id="avatarBadge">å·²æ‰¾åˆ°</span>
        </div>
        <div class="email-display" id="emailDisplay"></div>
        <div class="hash-display" id="hashDisplay"></div>

        <div class="size-options" id="sizeOptions">
          <button class="size-btn" onclick="changeSize(80)">80px</button>
          <button class="size-btn" onclick="changeSize(100)">100px</button>
          <button class="size-btn active" onclick="changeSize(200)">200px</button>
          <button class="size-btn" onclick="changeSize(400)">400px</button>
          <button class="size-btn" onclick="changeSize(500)">500px</button>
        </div>

        <div class="download-section">
          <button class="btn btn-download" onclick="copyUrl()">å¤åˆ¶é“¾æ¥</button>
          <button class="btn btn-download" onclick="downloadAvatar()">ä¸‹è½½å¤´åƒ</button>
        </div>
      </div>

      <div class="info-section">
        <h3>å…³äº Gravatar</h3>
        <p>
          Gravatar (Globally Recognized Avatar) æ˜¯ä¸€ä¸ªå…¨çƒé€šç”¨å¤´åƒæœåŠ¡ã€‚ç”¨æˆ·åªéœ€åœ¨ Gravatar
          ç½‘ç«™æ³¨å†Œå¹¶ä¸Šä¼ å¤´åƒï¼Œä¹‹ååœ¨æ”¯æŒ Gravatar çš„ç½‘ç«™ä¸Šä½¿ç”¨åŒä¸€é‚®ç®±ï¼Œå°±ä¼šè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”å¤´åƒã€‚
        </p>
        <p>WordPressã€GitHubã€Stack Overflow ç­‰ä¼—å¤šç½‘ç«™éƒ½æ”¯æŒ Gravatarã€‚</p>
        <p>
          å®˜ç½‘:
          <a href="https://gravatar.com" target="_blank" rel="noopener">gravatar.com</a>
        </p>
      </div>
    </div>

    <script>
      (function () {
        "use strict";

        let currentHash = "";
        let currentSize = 200;
        let hasCustomAvatar = false;

        async function md5(string) {
          const msgBuffer = new TextEncoder().encode(string);
          const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
          // Gravatar actually uses MD5, but we'll use a simple implementation
          // For production, use a proper MD5 library
          return md5Simple(string);
        }

        // Simple MD5 implementation
        function md5Simple(string) {
          function rotateLeft(value, shift) {
            return (value << shift) | (value >>> (32 - shift));
          }

          function addUnsigned(x, y) {
            const lsw = (x & 0xffff) + (y & 0xffff);
            const msw = (x >> 16) + (y >> 16) + (lsw >> 16);
            return (msw << 16) | (lsw & 0xffff);
          }

          function F(x, y, z) {
            return (x & y) | (~x & z);
          }
          function G(x, y, z) {
            return (x & z) | (y & ~z);
          }
          function H(x, y, z) {
            return x ^ y ^ z;
          }
          function I(x, y, z) {
            return y ^ (x | ~z);
          }

          function FF(a, b, c, d, x, s, ac) {
            a = addUnsigned(a, addUnsigned(addUnsigned(F(b, c, d), x), ac));
            return addUnsigned(rotateLeft(a, s), b);
          }

          function GG(a, b, c, d, x, s, ac) {
            a = addUnsigned(a, addUnsigned(addUnsigned(G(b, c, d), x), ac));
            return addUnsigned(rotateLeft(a, s), b);
          }

          function HH(a, b, c, d, x, s, ac) {
            a = addUnsigned(a, addUnsigned(addUnsigned(H(b, c, d), x), ac));
            return addUnsigned(rotateLeft(a, s), b);
          }

          function II(a, b, c, d, x, s, ac) {
            a = addUnsigned(a, addUnsigned(addUnsigned(I(b, c, d), x), ac));
            return addUnsigned(rotateLeft(a, s), b);
          }

          function convertToWordArray(string) {
            let lWordCount;
            const lMessageLength = string.length;
            const lNumberOfWordsTemp1 = lMessageLength + 8;
            const lNumberOfWordsTemp2 = (lNumberOfWordsTemp1 - (lNumberOfWordsTemp1 % 64)) / 64;
            const lNumberOfWords = (lNumberOfWordsTemp2 + 1) * 16;
            const lWordArray = Array(lNumberOfWords - 1);
            let lBytePosition = 0;
            let lByteCount = 0;

            while (lByteCount < lMessageLength) {
              lWordCount = (lByteCount - (lByteCount % 4)) / 4;
              lBytePosition = (lByteCount % 4) * 8;
              lWordArray[lWordCount] =
                (lWordArray[lWordCount] || 0) | (string.charCodeAt(lByteCount) << lBytePosition);
              lByteCount++;
            }

            lWordCount = (lByteCount - (lByteCount % 4)) / 4;
            lBytePosition = (lByteCount % 4) * 8;
            lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);
            lWordArray[lNumberOfWords - 2] = lMessageLength << 3;
            lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;

            return lWordArray;
          }

          function wordToHex(lValue) {
            let wordToHexValue = "",
              wordToHexValueTemp = "",
              lByte,
              lCount;
            for (lCount = 0; lCount <= 3; lCount++) {
              lByte = (lValue >>> (lCount * 8)) & 255;
              wordToHexValueTemp = "0" + lByte.toString(16);
              wordToHexValue += wordToHexValueTemp.substr(wordToHexValueTemp.length - 2, 2);
            }
            return wordToHexValue;
          }

          const x = convertToWordArray(string);
          let a = 0x67452301,
            b = 0xefcdab89,
            c = 0x98badcfe,
            d = 0x10325476;
          const S11 = 7,
            S12 = 12,
            S13 = 17,
            S14 = 22;
          const S21 = 5,
            S22 = 9,
            S23 = 14,
            S24 = 20;
          const S31 = 4,
            S32 = 11,
            S33 = 16,
            S34 = 23;
          const S41 = 6,
            S42 = 10,
            S43 = 15,
            S44 = 21;

          for (let k = 0; k < x.length; k += 16) {
            const AA = a,
              BB = b,
              CC = c,
              DD = d;

            a = FF(a, b, c, d, x[k], S11, 0xd76aa478);
            d = FF(d, a, b, c, x[k + 1], S12, 0xe8c7b756);
            c = FF(c, d, a, b, x[k + 2], S13, 0x242070db);
            b = FF(b, c, d, a, x[k + 3], S14, 0xc1bdceee);
            a = FF(a, b, c, d, x[k + 4], S11, 0xf57c0faf);
            d = FF(d, a, b, c, x[k + 5], S12, 0x4787c62a);
            c = FF(c, d, a, b, x[k + 6], S13, 0xa8304613);
            b = FF(b, c, d, a, x[k + 7], S14, 0xfd469501);
            a = FF(a, b, c, d, x[k + 8], S11, 0x698098d8);
            d = FF(d, a, b, c, x[k + 9], S12, 0x8b44f7af);
            c = FF(c, d, a, b, x[k + 10], S13, 0xffff5bb1);
            b = FF(b, c, d, a, x[k + 11], S14, 0x895cd7be);
            a = FF(a, b, c, d, x[k + 12], S11, 0x6b901122);
            d = FF(d, a, b, c, x[k + 13], S12, 0xfd987193);
            c = FF(c, d, a, b, x[k + 14], S13, 0xa679438e);
            b = FF(b, c, d, a, x[k + 15], S14, 0x49b40821);

            a = GG(a, b, c, d, x[k + 1], S21, 0xf61e2562);
            d = GG(d, a, b, c, x[k + 6], S22, 0xc040b340);
            c = GG(c, d, a, b, x[k + 11], S23, 0x265e5a51);
            b = GG(b, c, d, a, x[k], S24, 0xe9b6c7aa);
            a = GG(a, b, c, d, x[k + 5], S21, 0xd62f105d);
            d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);
            c = GG(c, d, a, b, x[k + 15], S23, 0xd8a1e681);
            b = GG(b, c, d, a, x[k + 4], S24, 0xe7d3fbc8);
            a = GG(a, b, c, d, x[k + 9], S21, 0x21e1cde6);
            d = GG(d, a, b, c, x[k + 14], S22, 0xc33707d6);
            c = GG(c, d, a, b, x[k + 3], S23, 0xf4d50d87);
            b = GG(b, c, d, a, x[k + 8], S24, 0x455a14ed);
            a = GG(a, b, c, d, x[k + 13], S21, 0xa9e3e905);
            d = GG(d, a, b, c, x[k + 2], S22, 0xfcefa3f8);
            c = GG(c, d, a, b, x[k + 7], S23, 0x676f02d9);
            b = GG(b, c, d, a, x[k + 12], S24, 0x8d2a4c8a);

            a = HH(a, b, c, d, x[k + 5], S31, 0xfffa3942);
            d = HH(d, a, b, c, x[k + 8], S32, 0x8771f681);
            c = HH(c, d, a, b, x[k + 11], S33, 0x6d9d6122);
            b = HH(b, c, d, a, x[k + 14], S34, 0xfde5380c);
            a = HH(a, b, c, d, x[k + 1], S31, 0xa4beea44);
            d = HH(d, a, b, c, x[k + 4], S32, 0x4bdecfa9);
            c = HH(c, d, a, b, x[k + 7], S33, 0xf6bb4b60);
            b = HH(b, c, d, a, x[k + 10], S34, 0xbebfbc70);
            a = HH(a, b, c, d, x[k + 13], S31, 0x289b7ec6);
            d = HH(d, a, b, c, x[k], S32, 0xeaa127fa);
            c = HH(c, d, a, b, x[k + 3], S33, 0xd4ef3085);
            b = HH(b, c, d, a, x[k + 6], S34, 0x4881d05);
            a = HH(a, b, c, d, x[k + 9], S31, 0xd9d4d039);
            d = HH(d, a, b, c, x[k + 12], S32, 0xe6db99e5);
            c = HH(c, d, a, b, x[k + 15], S33, 0x1fa27cf8);
            b = HH(b, c, d, a, x[k + 2], S34, 0xc4ac5665);

            a = II(a, b, c, d, x[k], S41, 0xf4292244);
            d = II(d, a, b, c, x[k + 7], S42, 0x432aff97);
            c = II(c, d, a, b, x[k + 14], S43, 0xab9423a7);
            b = II(b, c, d, a, x[k + 5], S44, 0xfc93a039);
            a = II(a, b, c, d, x[k + 12], S41, 0x655b59c3);
            d = II(d, a, b, c, x[k + 3], S42, 0x8f0ccc92);
            c = II(c, d, a, b, x[k + 10], S43, 0xffeff47d);
            b = II(b, c, d, a, x[k + 1], S44, 0x85845dd1);
            a = II(a, b, c, d, x[k + 8], S41, 0x6fa87e4f);
            d = II(d, a, b, c, x[k + 15], S42, 0xfe2ce6e0);
            c = II(c, d, a, b, x[k + 6], S43, 0xa3014314);
            b = II(b, c, d, a, x[k + 13], S44, 0x4e0811a1);
            a = II(a, b, c, d, x[k + 4], S41, 0xf7537e82);
            d = II(d, a, b, c, x[k + 11], S42, 0xbd3af235);
            c = II(c, d, a, b, x[k + 2], S43, 0x2ad7d2bb);
            b = II(b, c, d, a, x[k + 9], S44, 0xeb86d391);

            a = addUnsigned(a, AA);
            b = addUnsigned(b, BB);
            c = addUnsigned(c, CC);
            d = addUnsigned(d, DD);
          }

          return (wordToHex(a) + wordToHex(b) + wordToHex(c) + wordToHex(d)).toLowerCase();
        }

        function getGravatarUrl(hash, size) {
          return `https://www.gravatar.com/avatar/${hash}?s=${size}&d=404`;
        }

        function getGravatarUrlWithDefault(hash, size) {
          return `https://www.gravatar.com/avatar/${hash}?s=${size}&d=mp`;
        }

        async function searchGravatar(e) {
          e.preventDefault();

          const email = document.getElementById("emailInput").value.trim().toLowerCase();
          if (!email) return;

          const loading = document.getElementById("loading");
          const resultCard = document.getElementById("resultCard");

          loading.classList.add("show");
          resultCard.classList.remove("show");

          currentHash = md5Simple(email);
          currentSize = 200;

          // æ£€æŸ¥æ˜¯å¦æœ‰è‡ªå®šä¹‰å¤´åƒ
          const testUrl = getGravatarUrl(currentHash, 80);

          try {
            const response = await fetch(testUrl, { method: "HEAD" });
            hasCustomAvatar = response.ok;
          } catch (e) {
            hasCustomAvatar = false;
          }

          // æ˜¾ç¤ºç»“æœ
          const avatarImg = document.getElementById("avatarImg");
          const avatarBadge = document.getElementById("avatarBadge");
          const emailDisplay = document.getElementById("emailDisplay");
          const hashDisplay = document.getElementById("hashDisplay");

          avatarImg.src = getGravatarUrlWithDefault(currentHash, currentSize);
          emailDisplay.textContent = email;
          hashDisplay.textContent = `MD5: ${currentHash}`;

          if (hasCustomAvatar) {
            avatarBadge.textContent = "å·²æ‰¾åˆ°";
            avatarBadge.classList.remove("not-found");
          } else {
            avatarBadge.textContent = "é»˜è®¤å¤´åƒ";
            avatarBadge.classList.add("not-found");
          }

          // æ›´æ–°å°ºå¯¸æŒ‰é’®çŠ¶æ€
          updateSizeButtons();

          loading.classList.remove("show");
          resultCard.classList.add("show");
        }

        function changeSize(size) {
          currentSize = size;
          const avatarImg = document.getElementById("avatarImg");
          avatarImg.src = getGravatarUrlWithDefault(currentHash, size);
          updateSizeButtons();
        }

        function updateSizeButtons() {
          document.querySelectorAll(".size-btn").forEach((btn) => {
            btn.classList.remove("active");
            if (btn.textContent === `${currentSize}px`) {
              btn.classList.add("active");
            }
          });
        }

        function copyUrl() {
          const url = getGravatarUrlWithDefault(currentHash, currentSize);
          navigator.clipboard.writeText(url).then(() => {
            alert("é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
          });
        }

        function downloadAvatar() {
          const url = getGravatarUrlWithDefault(currentHash, currentSize);
          const a = document.createElement("a");
          a.href = url;
          a.download = `gravatar_${currentHash}_${currentSize}.png`;
          a.target = "_blank";
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
        }

        // æš´éœ²å…¨å±€å‡½æ•°
        window.searchGravatar = searchGravatar;
        window.changeSize = changeSize;
        window.copyUrl = copyUrl;
        window.downloadAvatar = downloadAvatar;
      })();

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        document.getElementById("theme-icon").textContent = newTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", newTheme);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem("theme") || "dark";
      if (savedTheme === "light") {
        document.documentElement.setAttribute("data-theme", "light");
        document.getElementById("theme-icon").textContent = "â˜€ï¸";
      }
    </script>
  </body>
</html>
