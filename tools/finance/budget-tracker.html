<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é¢„ç®—è¿½è¸ªå™¨ - WebUtils</title>
  <meta name="description" content="è®°å½•æ”¶æ”¯ï¼Œç®¡ç†é¢„ç®—ï¼Œå¯è§†åŒ–è´¢åŠ¡çŠ¶å†µ" />
  <meta name="keywords" content="é¢„ç®— æ”¶æ”¯ è®°è´¦ è´¢åŠ¡ budget tracker expense income" />
  <meta name="author" content="WebUtils" />
  <link rel="canonical" href="https://tools.realtime-ai.chat/tools/finance/budget-tracker.html" />

  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg-deep:#0a0a0f;--bg-surface:#12121a;--bg-card:#1a1a24;--text-primary:#e8e8ed;--text-secondary:#9898a4;--text-muted:#5c5c66;--accent-blue:#4d9fff;--accent-cyan:#00f5d4;--accent-green:#00d26a;--accent-red:#ff6b6b;--accent-orange:#ff9f43;--border-subtle:#2a2a36;--radius-sm:6px;--radius-md:10px;--radius-lg:14px}
    [data-theme="light"]{--bg-deep:#fafafa;--bg-surface:#fff;--bg-card:#fff;--text-primary:#1a1a1a;--text-secondary:#666;--text-muted:#999;--border-subtle:#e5e5e5}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Space Grotesk',system-ui,sans-serif;background:var(--bg-deep);color:var(--text-primary);min-height:100vh;line-height:1.6}
    .bg-grid{position:fixed;inset:0;background-image:linear-gradient(rgba(77,159,255,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(77,159,255,.03) 1px,transparent 1px);background-size:50px 50px;pointer-events:none;z-index:0}
    .container{position:relative;z-index:1;max-width:1000px;margin:0 auto;padding:2rem 1.5rem}
    .theme-toggle{position:fixed;top:1rem;right:1rem;width:40px;height:40px;border-radius:50%;border:1px solid var(--border-subtle);background:var(--bg-card);cursor:pointer;font-size:1.2rem;z-index:100;transition:all .2s}
    .theme-toggle:hover{border-color:var(--accent-cyan);transform:scale(1.1)}
    .breadcrumb{display:flex;align-items:center;gap:8px;font-size:.85rem;padding:8px 14px;background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:var(--radius-sm);margin-bottom:1.5rem;flex-wrap:wrap}
    .breadcrumb a{color:var(--text-secondary);text-decoration:none}
    .breadcrumb a:hover{color:var(--accent-cyan)}
    .breadcrumb-separator{color:var(--text-muted)}
    .breadcrumb-current{color:var(--text-primary);font-weight:500}
    h1{font-size:2rem;font-weight:600;margin-bottom:.5rem;background:linear-gradient(135deg,var(--text-primary),var(--accent-green));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-align:center}
    .subtitle{color:var(--text-secondary);margin-bottom:2rem;text-align:center}
    .summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:2rem}
    .summary-card{background:var(--bg-card);border:2px solid var(--border-subtle);border-radius:var(--radius-lg);padding:1.5rem;text-align:center}
    .summary-card.income{border-color:var(--accent-green)}
    .summary-card.expense{border-color:var(--accent-red)}
    .summary-card.balance{border-color:var(--accent-cyan)}
    .summary-value{font-family:'JetBrains Mono',monospace;font-size:2.5rem;font-weight:700;margin:.5rem 0}
    .summary-card.income .summary-value{color:var(--accent-green)}
    .summary-card.expense .summary-value{color:var(--accent-red)}
    .summary-card.balance .summary-value{color:var(--accent-cyan)}
    .summary-label{font-size:.9rem;color:var(--text-muted)}
    .add-transaction{display:flex;gap:1rem;background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:var(--radius-lg);padding:1.5rem;margin-bottom:1.5rem;flex-wrap:wrap}
    .add-transaction input,.add-transaction select{flex:1;min-width:120px;padding:.75rem;border:1px solid var(--border-subtle);border-radius:var(--radius-sm);background:var(--bg-surface);color:var(--text-primary);font-family:inherit}
    .add-transaction input:focus,.add-transaction select:focus{outline:none;border-color:var(--accent-blue)}
    .add-transaction button{padding:.75rem 1.5rem;border:none;border-radius:var(--radius-sm);background:var(--accent-green);color:#000;font-family:inherit;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap}
    .add-transaction button:hover{background:var(--accent-cyan)}
    .transactions-list{display:flex;flex-direction:column;gap:.75rem}
    .transaction-item{background:var(--bg-card);border:1px solid var(--border-subtle);border-left:4px solid;border-radius:var(--radius-sm);padding:1rem;display:flex;justify-content:space-between;align-items:center}
    .transaction-item.income{border-left-color:var(--accent-green)}
    .transaction-item.expense{border-left-color:var(--accent-red)}
    .transaction-info{flex:1}
    .transaction-desc{font-weight:600;margin-bottom:.25rem}
    .transaction-meta{font-size:.85rem;color:var(--text-muted);font-family:'JetBrains Mono',monospace}
    .transaction-amount{font-family:'JetBrains Mono',monospace;font-size:1.2rem;font-weight:700;margin-right:1rem}
    .transaction-item.income .transaction-amount{color:var(--accent-green)}
    .transaction-item.expense .transaction-amount{color:var(--accent-red)}
    .transaction-delete{padding:.5rem 1rem;border:1px solid var(--border-subtle);border-radius:var(--radius-sm);background:transparent;color:var(--text-muted);cursor:pointer;transition:all .2s}
    .transaction-delete:hover{border-color:var(--accent-red);color:var(--accent-red)}
    .empty-state{text-align:center;padding:3rem 1rem;color:var(--text-muted)}
    footer{margin-top:3rem;padding-top:1.5rem;border-top:1px solid var(--border-subtle);text-align:center;color:var(--text-muted);font-size:.85rem}
    footer a{color:var(--accent-blue);text-decoration:none}
    @media(max-width:600px){.add-transaction{flex-direction:column}}
  </style>
</head>
<body>
  <div class="bg-grid"></div>
  <div class="container">
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span class="breadcrumb-separator">/</span>
      <a href="../../index.html#finance">è´¢åŠ¡å·¥å…·</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">é¢„ç®—è¿½è¸ª</span>
    </nav>

    <h1>ğŸ’° é¢„ç®—è¿½è¸ªå™¨</h1>
    <p class="subtitle">è®°å½•æ¯ä¸€ç¬”æ”¶æ”¯ï¼ŒæŒæ¡è´¢åŠ¡çŠ¶å†µ</p>

    <div class="summary">
      <div class="summary-card income">
        <div class="summary-label">æ€»æ”¶å…¥</div>
        <div class="summary-value" id="totalIncome">Â¥0</div>
      </div>
      <div class="summary-card expense">
        <div class="summary-label">æ€»æ”¯å‡º</div>
        <div class="summary-value" id="totalExpense">Â¥0</div>
      </div>
      <div class="summary-card balance">
        <div class="summary-label">ç»“ä½™</div>
        <div class="summary-value" id="balance">Â¥0</div>
      </div>
    </div>

    <div class="add-transaction">
      <input type="text" id="description" placeholder="æè¿°" onkeypress="handleEnter(event)">
      <input type="number" id="amount" placeholder="é‡‘é¢" min="0" step="0.01" onkeypress="handleEnter(event)">
      <select id="type">
        <option value="income">æ”¶å…¥</option>
        <option value="expense">æ”¯å‡º</option>
      </select>
      <select id="category">
        <option value="å·¥èµ„">å·¥èµ„</option>
        <option value="é¤é¥®">é¤é¥®</option>
        <option value="äº¤é€š">äº¤é€š</option>
        <option value="è´­ç‰©">è´­ç‰©</option>
        <option value="å¨±ä¹">å¨±ä¹</option>
        <option value="åŒ»ç–—">åŒ»ç–—</option>
        <option value="å…¶ä»–">å…¶ä»–</option>
      </select>
      <button onclick="addTransaction()">+ æ·»åŠ </button>
    </div>

    <div class="transactions-list" id="transactionsList">
      <div class="empty-state">æš‚æ— äº¤æ˜“è®°å½•</div>
    </div>

    <footer>
      <a href="https://github.com/nicexe/html-tools" target="_blank">GitHub</a>
    </footer>
  </div>

  <script>
    const STORAGE_KEY = 'html_tools_budget_v1';
    let transactions = [];

    function loadTransactions() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        transactions = saved ? JSON.parse(saved) : [];
      } catch (e) {
        transactions = [];
      }
      render();
    }

    function saveTransactions() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(transactions));
    }

    function handleEnter(event) {
      if (event.key === 'Enter') {
        addTransaction();
      }
    }

    function addTransaction() {
      const description = document.getElementById('description').value.trim();
      const amount = parseFloat(document.getElementById('amount').value);
      const type = document.getElementById('type').value;
      const category = document.getElementById('category').value;

      if (!description || !amount || amount <= 0) {
        alert('è¯·è¾“å…¥æè¿°å’Œé‡‘é¢');
        return;
      }

      transactions.unshift({
        id: Date.now(),
        description,
        amount,
        type,
        category,
        date: new Date().toISOString()
      });

      document.getElementById('description').value = '';
      document.getElementById('amount').value = '';

      saveTransactions();
      render();
    }

    function deleteTransaction(id) {
      if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) return;
      transactions = transactions.filter(t => t.id !== id);
      saveTransactions();
      render();
    }

    function render() {
      const container = document.getElementById('transactionsList');

      if (transactions.length === 0) {
        container.innerHTML = '<div class="empty-state">æš‚æ— äº¤æ˜“è®°å½•</div>';
        updateSummary();
        return;
      }

      container.innerHTML = transactions.map(t => `
        <div class="transaction-item ${t.type}">
          <div class="transaction-info">
            <div class="transaction-desc">${t.description}</div>
            <div class="transaction-meta">
              ${t.category} Â· ${new Date(t.date).toLocaleDateString('zh-CN')}
            </div>
          </div>
          <div class="transaction-amount">
            ${t.type === 'income' ? '+' : '-'}Â¥${t.amount.toFixed(2)}
          </div>
          <button class="transaction-delete" onclick="deleteTransaction(${t.id})">Ã—</button>
        </div>
      `).join('');

      updateSummary();
    }

    function updateSummary() {
      const income = transactions
        .filter(t => t.type === 'income')
        .reduce((sum, t) => sum + t.amount, 0);

      const expense = transactions
        .filter(t => t.type === 'expense')
        .reduce((sum, t) => sum + t.amount, 0);

      const balance = income - expense;

      document.getElementById('totalIncome').textContent = 'Â¥' + income.toFixed(2);
      document.getElementById('totalExpense').textContent = 'Â¥' + expense.toFixed(2);
      document.getElementById('balance').textContent = 'Â¥' + balance.toFixed(2);
    }

    // Initialize
    loadTransactions();

    window.toggleTheme = function() {
      const html = document.documentElement;
      const btn = document.querySelector('.theme-toggle');
      const current = html.getAttribute('data-theme');
      const next = current === 'light' ? 'dark' : 'light';
      html.setAttribute('data-theme', next);
      btn.textContent = next === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
      localStorage.setItem('theme', next);
    };

    (function() {
      const saved = localStorage.getItem('theme');
      if (saved) {
        document.documentElement.setAttribute('data-theme', saved);
        document.querySelector('.theme-toggle').textContent = saved === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
      }
    })();
  </script>
</body>
</html>
