<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favicon ÁîüÊàêÂô® - ÁΩëÁ´ôÂõæÊ†áÂú®Á∫øÂà∂‰Ωú</title>
    <meta name="description" content="Âú®Á∫øÁîüÊàêÁΩëÁ´ô Favicon ÂõæÊ†áÔºåÊîØÊåÅ‰ªéÂõæÁâá„ÄÅEmoji„ÄÅÊñáÂ≠óÁîüÊàêÂ§öÂ∞∫ÂØ∏ ICO/PNG Ê†ºÂºèÂõæÊ†á">
    <meta name="keywords" content="faviconÁîüÊàêÂô®,ÁΩëÁ´ôÂõæÊ†á,icoÁîüÊàê,favicon.ico,ÂõæÊ†áÂà∂‰Ωú">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f0f23;
            --text-primary: #eee;
            --text-secondary: #aaa;
            --border-color: #333;
            --accent-color: #8b5cf6;
            --accent-hover: #a78bfa;
        }
        [data-theme="light"] {
            --bg-primary: #fff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        h1 { font-size: 1.8rem; }
        .header-actions { display: flex; gap: 10px; align-items: center; }
        .theme-toggle, .btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .theme-toggle:hover, .btn:hover { border-color: var(--accent-color); }
        .btn-primary {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .btn-primary:hover { background: var(--accent-hover); }
        .back-link {
            color: var(--accent-color);
            text-decoration: none;
            font-size: 14px;
        }
        .back-link:hover { text-decoration: underline; }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
        }
        .card-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
        }
        .tab {
            flex: 1;
            padding: 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            text-align: center;
            transition: all 0.2s;
        }
        .tab:hover { border-color: var(--accent-color); }
        .tab.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .upload-area:hover { border-color: var(--accent-color); }
        .upload-area.has-image { padding: 20px; }
        .upload-area img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
        }
        .upload-area input { display: none; }
        .upload-hint {
            color: var(--text-secondary);
            margin-top: 10px;
            font-size: 13px;
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            max-height: 250px;
            overflow-y: auto;
            padding: 10px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }
        .emoji-item {
            padding: 10px;
            text-align: center;
            font-size: 24px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .emoji-item:hover { background: var(--bg-secondary); }
        .emoji-item.selected {
            background: var(--accent-color);
            border-radius: 6px;
        }

        .text-input-section .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .color-input-wrapper {
            display: flex;
            gap: 10px;
        }
        .color-input-wrapper input[type="color"] {
            width: 50px;
            height: 42px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            padding: 2px;
        }
        .color-input-wrapper input[type="text"] {
            flex: 1;
        }

        .preview-section {
            text-align: center;
        }
        .preview-canvas-wrapper {
            display: inline-block;
            padding: 20px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .preview-canvas-wrapper canvas {
            border-radius: 8px;
        }

        .size-previews {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        .size-preview {
            text-align: center;
        }
        .size-preview canvas {
            background: repeating-conic-gradient(#ddd 0% 25%, #fff 0% 50%) 50% / 10px 10px;
            border-radius: 4px;
        }
        [data-theme="dark"] .size-preview canvas {
            background: repeating-conic-gradient(#333 0% 25%, #222 0% 50%) 50% / 10px 10px;
        }
        .size-preview .label {
            margin-top: 8px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .download-section {
            margin-top: 20px;
        }
        .download-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }
        .download-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
        }
        .download-option:has(input:checked) {
            border-color: var(--accent-color);
            background: rgba(139, 92, 246, 0.1);
        }
        .download-option input { cursor: pointer; }

        .code-block {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé® Favicon ÁîüÊàêÂô®</h1>
            <div class="header-actions">
                <a href="../../index.html" class="back-link">‚Üê ËøîÂõûÈ¶ñÈ°µ</a>
                <button class="theme-toggle" onclick="toggleTheme()">üåì ‰∏ªÈ¢ò</button>
            </div>
        </header>

        <div class="main-grid">
            <div class="input-section">
                <div class="card">
                    <div class="tabs">
                        <div class="tab active" data-tab="image">üì∑ ÂõæÁâá</div>
                        <div class="tab" data-tab="emoji">üòÄ Emoji</div>
                        <div class="tab" data-tab="text">Aa ÊñáÂ≠ó</div>
                    </div>

                    <div class="tab-content active" id="image-tab">
                        <div class="upload-area" id="uploadArea" onclick="document.getElementById('imageInput').click()">
                            <div class="upload-icon">üìÅ</div>
                            <div style="font-size: 16px; margin: 10px 0;">ÁÇπÂáªÊàñÊãñÊãΩ‰∏ä‰º†ÂõæÁâá</div>
                            <div class="upload-hint">ÊîØÊåÅ PNG, JPG, SVG, WebP</div>
                            <input type="file" id="imageInput" accept="image/*">
                        </div>
                    </div>

                    <div class="tab-content" id="emoji-tab">
                        <div class="emoji-grid" id="emojiGrid"></div>
                    </div>

                    <div class="tab-content text-input-section" id="text-tab">
                        <div class="form-group">
                            <label>ÊñáÂ≠óÂÜÖÂÆπ (1-2‰∏™Â≠óÁ¨¶)</label>
                            <input type="text" id="textInput" maxlength="2" value="Hi" placeholder="ËæìÂÖ•ÊñáÂ≠ó">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ÊñáÂ≠óÈ¢úËâ≤</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="textColor" value="#ffffff">
                                    <input type="text" id="textColorHex" value="#ffffff">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>ËÉåÊôØÈ¢úËâ≤</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="bgColor" value="#8b5cf6">
                                    <input type="text" id="bgColorHex" value="#8b5cf6">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Â≠ó‰Ωì</label>
                                <select id="fontFamily">
                                    <option value="Arial, sans-serif">Arial</option>
                                    <option value="'Helvetica Neue', sans-serif">Helvetica</option>
                                    <option value="Georgia, serif">Georgia</option>
                                    <option value="'Times New Roman', serif">Times New Roman</option>
                                    <option value="'Courier New', monospace">Courier New</option>
                                    <option value="Impact, sans-serif">Impact</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ÂúÜËßí</label>
                                <select id="borderRadius">
                                    <option value="0">Êó†ÂúÜËßí</option>
                                    <option value="8">Â∞èÂúÜËßí</option>
                                    <option value="16" selected>‰∏≠ÂúÜËßí</option>
                                    <option value="32">Â§ßÂúÜËßí</option>
                                    <option value="64">ÂúÜÂΩ¢</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="output-section">
                <div class="card preview-section">
                    <div class="card-title">È¢ÑËßà</div>
                    <div class="preview-canvas-wrapper">
                        <canvas id="previewCanvas" width="128" height="128"></canvas>
                    </div>

                    <div class="size-previews">
                        <div class="size-preview">
                            <canvas id="preview16" width="16" height="16"></canvas>
                            <div class="label">16√ó16</div>
                        </div>
                        <div class="size-preview">
                            <canvas id="preview32" width="32" height="32"></canvas>
                            <div class="label">32√ó32</div>
                        </div>
                        <div class="size-preview">
                            <canvas id="preview48" width="48" height="48"></canvas>
                            <div class="label">48√ó48</div>
                        </div>
                        <div class="size-preview">
                            <canvas id="preview64" width="64" height="64"></canvas>
                            <div class="label">64√ó64</div>
                        </div>
                        <div class="size-preview">
                            <canvas id="preview128" width="128" height="128"></canvas>
                            <div class="label">128√ó128</div>
                        </div>
                    </div>
                </div>

                <div class="card download-section">
                    <div class="card-title">‰∏ãËΩΩ</div>
                    <div class="download-options">
                        <label class="download-option">
                            <input type="checkbox" checked data-size="16"> 16√ó16
                        </label>
                        <label class="download-option">
                            <input type="checkbox" checked data-size="32"> 32√ó32
                        </label>
                        <label class="download-option">
                            <input type="checkbox" data-size="48"> 48√ó48
                        </label>
                        <label class="download-option">
                            <input type="checkbox" data-size="64"> 64√ó64
                        </label>
                        <label class="download-option">
                            <input type="checkbox" data-size="128"> 128√ó128
                        </label>
                        <label class="download-option">
                            <input type="checkbox" data-size="180"> 180√ó180 (Apple)
                        </label>
                        <label class="download-option">
                            <input type="checkbox" data-size="192"> 192√ó192 (Android)
                        </label>
                        <label class="download-option">
                            <input type="checkbox" data-size="512"> 512√ó512
                        </label>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="downloadSelected()">üì• ‰∏ãËΩΩÈÄâ‰∏≠Â∞∫ÂØ∏</button>
                        <button class="btn" onclick="downloadAll()">üì¶ ‰∏ãËΩΩÂÖ®ÈÉ® (ZIP)</button>
                    </div>

                    <div class="code-block">
                        <div style="color: var(--text-secondary); margin-bottom: 10px;">HTML ‰ª£Á†Å:</div>
                        &lt;link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"&gt;<br>
                        &lt;link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"&gt;<br>
                        &lt;link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"&gt;
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSource = null; // 'image', 'emoji', or 'text'
        let sourceImage = null;
        let selectedEmoji = 'üöÄ';

        // Popular emojis
        const emojis = [
            'üöÄ', '‚≠ê', 'üî•', 'üí°', 'üéØ', 'üé®', 'üíé', 'üåü',
            '‚ù§Ô∏è', 'üíô', 'üíö', 'üíú', 'üß°', 'üíõ', 'üñ§', 'ü§ç',
            'üì±', 'üíª', 'üñ•Ô∏è', '‚å®Ô∏è', 'üñ±Ô∏è', 'üîß', '‚öôÔ∏è', 'üõ†Ô∏è',
            'üìä', 'üìà', 'üìâ', 'üìã', 'üìå', 'üìç', 'üîó', 'üîí',
            'üè†', 'üè¢', 'üè™', 'üè≠', 'üèóÔ∏è', 'üåç', 'üåé', 'üåè',
            '‚òÄÔ∏è', 'üåô', '‚ö°', 'üåà', '‚ùÑÔ∏è', 'üîÜ', 'üí´', '‚ú®',
            'üéµ', 'üé∂', 'üé¨', 'üéÆ', 'üé≤', 'üé™', 'üé≠', 'üé™',
            'üçé', 'üçä', 'üçã', 'üçá', 'üçì', 'ü•ù', 'üçë', 'üçí'
        ];

        // Theme handling
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const newTheme = current === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Tab handling
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab + '-tab').classList.add('active');
                
                if (tab.dataset.tab === 'emoji') {
                    currentSource = 'emoji';
                    renderFavicon();
                } else if (tab.dataset.tab === 'text') {
                    currentSource = 'text';
                    renderFavicon();
                }
            });
        });

        // Initialize emoji grid
        function initEmojiGrid() {
            const grid = document.getElementById('emojiGrid');
            emojis.forEach(emoji => {
                const item = document.createElement('div');
                item.className = 'emoji-item' + (emoji === selectedEmoji ? ' selected' : '');
                item.textContent = emoji;
                item.onclick = () => {
                    document.querySelectorAll('.emoji-item').forEach(e => e.classList.remove('selected'));
                    item.classList.add('selected');
                    selectedEmoji = emoji;
                    currentSource = 'emoji';
                    renderFavicon();
                };
                grid.appendChild(item);
            });
        }

        // Image upload
        const uploadArea = document.getElementById('uploadArea');
        const imageInput = document.getElementById('imageInput');

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--accent-color)';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '';
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                loadImage(file);
            }
        });

        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) loadImage(file);
        });

        function loadImage(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    sourceImage = img;
                    currentSource = 'image';
                    uploadArea.classList.add('has-image');
                    uploadArea.innerHTML = `<img src="${e.target.result}" alt="Uploaded">`;
                    renderFavicon();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // Color input sync
        ['text', 'bg'].forEach(prefix => {
            const colorInput = document.getElementById(prefix + 'Color');
            const hexInput = document.getElementById(prefix + 'ColorHex');
            
            colorInput.addEventListener('input', () => {
                hexInput.value = colorInput.value;
                if (currentSource === 'text') renderFavicon();
            });
            
            hexInput.addEventListener('input', () => {
                if (/^#[0-9A-Fa-f]{6}$/.test(hexInput.value)) {
                    colorInput.value = hexInput.value;
                    if (currentSource === 'text') renderFavicon();
                }
            });
        });

        // Text inputs
        ['textInput', 'fontFamily', 'borderRadius'].forEach(id => {
            document.getElementById(id).addEventListener('input', () => {
                if (currentSource === 'text') renderFavicon();
            });
        });

        // Render favicon
        function renderFavicon() {
            const canvas = document.getElementById('previewCanvas');
            const ctx = canvas.getContext('2d');
            const size = 128;
            
            ctx.clearRect(0, 0, size, size);

            if (currentSource === 'image' && sourceImage) {
                // Draw image centered and cropped to square
                const srcSize = Math.min(sourceImage.width, sourceImage.height);
                const srcX = (sourceImage.width - srcSize) / 2;
                const srcY = (sourceImage.height - srcSize) / 2;
                ctx.drawImage(sourceImage, srcX, srcY, srcSize, srcSize, 0, 0, size, size);
            } else if (currentSource === 'emoji') {
                ctx.font = '100px serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(selectedEmoji, size / 2, size / 2 + 5);
            } else if (currentSource === 'text') {
                const text = document.getElementById('textInput').value || 'Hi';
                const textColor = document.getElementById('textColor').value;
                const bgColor = document.getElementById('bgColor').value;
                const fontFamily = document.getElementById('fontFamily').value;
                const radius = parseInt(document.getElementById('borderRadius').value);
                
                // Draw background
                ctx.fillStyle = bgColor;
                if (radius > 0) {
                    roundRect(ctx, 0, 0, size, size, radius);
                    ctx.fill();
                } else {
                    ctx.fillRect(0, 0, size, size);
                }
                
                // Draw text
                ctx.fillStyle = textColor;
                ctx.font = `bold ${text.length === 1 ? 80 : 60}px ${fontFamily}`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(text, size / 2, size / 2 + 4);
            }

            // Update size previews
            updateSizePreviews();
        }

        function roundRect(ctx, x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
        }

        function updateSizePreviews() {
            const sourceCanvas = document.getElementById('previewCanvas');
            [16, 32, 48, 64, 128].forEach(size => {
                const canvas = document.getElementById('preview' + size);
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, size, size);
                ctx.drawImage(sourceCanvas, 0, 0, size, size);
            });
        }

        function generateCanvas(size) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            const sourceCanvas = document.getElementById('previewCanvas');
            ctx.drawImage(sourceCanvas, 0, 0, size, size);
            return canvas;
        }

        function downloadSelected() {
            const checkboxes = document.querySelectorAll('.download-option input:checked');
            checkboxes.forEach(cb => {
                const size = parseInt(cb.dataset.size);
                const canvas = generateCanvas(size);
                downloadCanvas(canvas, `favicon-${size}x${size}.png`);
            });
        }

        function downloadCanvas(canvas, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        async function downloadAll() {
            // Simple version - download each file
            const sizes = [16, 32, 48, 64, 128, 180, 192, 512];
            for (const size of sizes) {
                const canvas = generateCanvas(size);
                downloadCanvas(canvas, `favicon-${size}x${size}.png`);
                await new Promise(r => setTimeout(r, 100)); // Small delay between downloads
            }
        }

        // Initialize
        initTheme();
        initEmojiGrid();
        currentSource = 'emoji';
        renderFavicon();
    </script>
</body>
</html>
