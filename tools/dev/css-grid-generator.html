<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Grid ç”Ÿæˆå™¨ | HTML Tools</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        body { padding: 1rem; }
        .container { max-width: 1400px; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        header h1 { margin: 0; font-size: 1.5rem; }
        .main-layout { display: grid; grid-template-columns: 300px 1fr; gap: 1.5rem; }
        @media (max-width: 900px) { .main-layout { grid-template-columns: 1fr; } }
        .controls-panel { background: var(--pico-card-background-color); padding: 1rem; border-radius: 8px; height: fit-content; }
        .controls-panel h3 { margin: 0 0 1rem; font-size: 1rem; border-bottom: 1px solid var(--pico-muted-border-color); padding-bottom: 0.5rem; }
        .control-group { margin-bottom: 1rem; }
        .control-group label { display: block; font-size: 0.85rem; margin-bottom: 0.25rem; }
        .control-group input, .control-group select { width: 100%; margin-bottom: 0; }
        .control-row { display: flex; gap: 0.5rem; }
        .control-row input { flex: 1; }
        .preview-panel { background: var(--pico-card-background-color); padding: 1rem; border-radius: 8px; }
        .preview-panel h3 { margin: 0 0 1rem; font-size: 1rem; }
        .grid-preview { min-height: 400px; border: 2px dashed var(--pico-muted-border-color); border-radius: 4px; padding: 0.5rem; }
        .grid-item { background: var(--pico-primary-background); border: 1px solid var(--pico-primary); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 0.85rem; font-weight: bold; color: var(--pico-primary); cursor: pointer; transition: all 0.2s; min-height: 60px; }
        .grid-item:hover { background: var(--pico-primary); color: white; }
        .grid-item.selected { background: var(--pico-primary); color: white; box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3); }
        .code-panel { margin-top: 1rem; }
        .code-panel h3 { margin: 0 0 0.5rem; font-size: 1rem; }
        .code-output { position: relative; }
        .code-output pre { font-family: Monaco, Menlo, monospace; font-size: 0.8rem; background: var(--pico-background-color); padding: 1rem; border-radius: 4px; overflow-x: auto; margin: 0; white-space: pre-wrap; }
        .copy-btn { position: absolute; top: 0.5rem; right: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; }
        .presets { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
        .presets button { padding: 0.25rem 0.5rem; font-size: 0.75rem; }
        .item-editor { margin-top: 1rem; padding: 1rem; background: var(--pico-background-color); border-radius: 4px; display: none; }
        .item-editor.active { display: block; }
        .item-editor h4 { margin: 0 0 0.5rem; font-size: 0.9rem; }
        .btn-group { display: flex; gap: 0.5rem; margin-top: 0.5rem; }
        .btn-group button { flex: 1; padding: 0.5rem; font-size: 0.8rem; }
        .track-list { display: flex; flex-wrap: wrap; gap: 0.25rem; margin-top: 0.25rem; }
        .track-item { display: flex; align-items: center; gap: 0.25rem; background: var(--pico-background-color); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem; }
        .track-item input { width: 60px; padding: 0.2rem; font-size: 0.8rem; margin: 0; }
        .track-item button { padding: 0.1rem 0.3rem; font-size: 0.7rem; margin: 0; }
        .add-track-btn { padding: 0.25rem 0.5rem; font-size: 0.75rem; margin-top: 0.25rem; }
    </style>
</head>
<body>
    <main class="container">
        <header>
            <h1>ğŸ“ CSS Grid ç”Ÿæˆå™¨</h1>
            <button id="themeToggle" class="outline" style="padding: 0.5rem;">ğŸŒ“</button>
        </header>

        <div class="presets">
            <span style="line-height: 2;">é¢„è®¾å¸ƒå±€ï¼š</span>
            <button class="outline" onclick="applyPreset('2col')">ä¸¤æ å¸ƒå±€</button>
            <button class="outline" onclick="applyPreset('3col')">ä¸‰æ ç­‰å®½</button>
            <button class="outline" onclick="applyPreset('holy')">åœ£æ¯å¸ƒå±€</button>
            <button class="outline" onclick="applyPreset('sidebar')">ä¾§è¾¹æ </button>
            <button class="outline" onclick="applyPreset('gallery')">å›¾ç‰‡ç”»å»Š</button>
            <button class="outline" onclick="applyPreset('dashboard')">ä»ªè¡¨ç›˜</button>
        </div>

        <div class="main-layout">
            <div class="controls-panel">
                <h3>å®¹å™¨å±æ€§</h3>
                
                <div class="control-group">
                    <label>åˆ—å®šä¹‰ (grid-template-columns)</label>
                    <div class="track-list" id="colTracks"></div>
                    <button class="outline add-track-btn" onclick="addTrack('col')">+ æ·»åŠ åˆ—</button>
                </div>

                <div class="control-group">
                    <label>è¡Œå®šä¹‰ (grid-template-rows)</label>
                    <div class="track-list" id="rowTracks"></div>
                    <button class="outline add-track-btn" onclick="addTrack('row')">+ æ·»åŠ è¡Œ</button>
                </div>

                <div class="control-group">
                    <label>åˆ—é—´è· (column-gap)</label>
                    <input type="text" id="columnGap" value="10px" oninput="updateGrid()">
                </div>

                <div class="control-group">
                    <label>è¡Œé—´è· (row-gap)</label>
                    <input type="text" id="rowGap" value="10px" oninput="updateGrid()">
                </div>

                <div class="control-group">
                    <label>justify-items</label>
                    <select id="justifyItems" onchange="updateGrid()">
                        <option value="stretch">stretch</option>
                        <option value="start">start</option>
                        <option value="end">end</option>
                        <option value="center">center</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>align-items</label>
                    <select id="alignItems" onchange="updateGrid()">
                        <option value="stretch">stretch</option>
                        <option value="start">start</option>
                        <option value="end">end</option>
                        <option value="center">center</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>å­é¡¹æ•°é‡</label>
                    <input type="number" id="itemCount" value="6" min="1" max="20" onchange="updateItemCount()">
                </div>

                <div class="item-editor" id="itemEditor">
                    <h4>ç¼–è¾‘å­é¡¹ #<span id="editingItemNum"></span></h4>
                    <div class="control-group">
                        <label>grid-column</label>
                        <div class="control-row">
                            <input type="text" id="itemColStart" placeholder="èµ·å§‹" oninput="updateItemStyle()">
                            <input type="text" id="itemColEnd" placeholder="ç»“æŸ" oninput="updateItemStyle()">
                        </div>
                    </div>
                    <div class="control-group">
                        <label>grid-row</label>
                        <div class="control-row">
                            <input type="text" id="itemRowStart" placeholder="èµ·å§‹" oninput="updateItemStyle()">
                            <input type="text" id="itemRowEnd" placeholder="ç»“æŸ" oninput="updateItemStyle()">
                        </div>
                    </div>
                    <div class="btn-group">
                        <button class="outline" onclick="resetItemStyle()">é‡ç½®</button>
                        <button class="outline" onclick="closeItemEditor()">å…³é—­</button>
                    </div>
                </div>
            </div>

            <div class="preview-panel">
                <h3>é¢„è§ˆ</h3>
                <div class="grid-preview" id="gridPreview"></div>

                <div class="code-panel">
                    <h3>ç”Ÿæˆçš„ CSS</h3>
                    <div class="code-output">
                        <pre id="cssCode"></pre>
                        <button class="outline copy-btn" onclick="copyCode()">å¤åˆ¶</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let columns = ['1fr', '1fr', '1fr'];
        let rows = ['auto', 'auto'];
        let itemStyles = {};
        let selectedItem = null;

        const presets = {
            '2col': { cols: ['1fr', '1fr'], rows: ['auto'], items: 2 },
            '3col': { cols: ['1fr', '1fr', '1fr'], rows: ['auto'], items: 3 },
            'holy': { cols: ['200px', '1fr', '200px'], rows: ['auto', '1fr', 'auto'], items: 5,
                styles: { 1: { colStart: '1', colEnd: '4' }, 4: { colStart: '1', colEnd: '4' } } },
            'sidebar': { cols: ['250px', '1fr'], rows: ['auto', '1fr'], items: 3,
                styles: { 1: { colStart: '1', colEnd: '3' } } },
            'gallery': { cols: ['repeat(auto-fill, minmax(200px, 1fr))'], rows: ['auto'], items: 8 },
            'dashboard': { cols: ['1fr', '1fr', '1fr'], rows: ['auto', '1fr', '1fr'], items: 6,
                styles: { 1: { colStart: '1', colEnd: '3' }, 4: { rowStart: '2', rowEnd: '4' } } }
        };

        function renderTracks() {
            const colContainer = document.getElementById('colTracks');
            const rowContainer = document.getElementById('rowTracks');
            
            colContainer.textContent = '';
            rowContainer.textContent = '';
            
            columns.forEach((val, i) => {
                const item = createTrackItem(val, 'col', i);
                colContainer.appendChild(item);
            });
            
            rows.forEach((val, i) => {
                const item = createTrackItem(val, 'row', i);
                rowContainer.appendChild(item);
            });
        }

        function createTrackItem(value, type, index) {
            const item = document.createElement('div');
            item.className = 'track-item';
            
            const input = document.createElement('input');
            input.type = 'text';
            input.value = value;
            input.onchange = function() {
                if (type === 'col') columns[index] = this.value;
                else rows[index] = this.value;
                updateGrid();
            };
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'outline';
            removeBtn.textContent = 'Ã—';
            removeBtn.onclick = function() {
                if (type === 'col' && columns.length > 1) {
                    columns.splice(index, 1);
                } else if (type === 'row' && rows.length > 1) {
                    rows.splice(index, 1);
                }
                renderTracks();
                updateGrid();
            };
            
            item.appendChild(input);
            item.appendChild(removeBtn);
            return item;
        }

        window.addTrack = function(type) {
            if (type === 'col') columns.push('1fr');
            else rows.push('auto');
            renderTracks();
            updateGrid();
        };

        function updateGrid() {
            const preview = document.getElementById('gridPreview');
            const colGap = document.getElementById('columnGap').value;
            const rowGap = document.getElementById('rowGap').value;
            const justifyItems = document.getElementById('justifyItems').value;
            const alignItems = document.getElementById('alignItems').value;
            
            preview.style.display = 'grid';
            preview.style.gridTemplateColumns = columns.join(' ');
            preview.style.gridTemplateRows = rows.join(' ');
            preview.style.columnGap = colGap;
            preview.style.rowGap = rowGap;
            preview.style.justifyItems = justifyItems;
            preview.style.alignItems = alignItems;
            
            // åº”ç”¨å­é¡¹æ ·å¼
            Array.from(preview.children).forEach((child, i) => {
                const num = i + 1;
                const style = itemStyles[num] || {};
                child.style.gridColumnStart = style.colStart || '';
                child.style.gridColumnEnd = style.colEnd || '';
                child.style.gridRowStart = style.rowStart || '';
                child.style.gridRowEnd = style.rowEnd || '';
            });
            
            generateCode();
        }

        function updateItemCount() {
            const count = parseInt(document.getElementById('itemCount').value) || 1;
            const preview = document.getElementById('gridPreview');
            
            preview.textContent = '';
            
            for (let i = 1; i <= count; i++) {
                const item = document.createElement('div');
                item.className = 'grid-item';
                if (selectedItem === i) item.classList.add('selected');
                item.textContent = i;
                item.onclick = function() { selectItem(i); };
                preview.appendChild(item);
            }
            
            updateGrid();
        }

        function selectItem(num) {
            selectedItem = num;
            
            document.querySelectorAll('.grid-item').forEach((el, i) => {
                el.classList.toggle('selected', i + 1 === num);
            });
            
            const editor = document.getElementById('itemEditor');
            editor.classList.add('active');
            document.getElementById('editingItemNum').textContent = num;
            
            const style = itemStyles[num] || {};
            document.getElementById('itemColStart').value = style.colStart || '';
            document.getElementById('itemColEnd').value = style.colEnd || '';
            document.getElementById('itemRowStart').value = style.rowStart || '';
            document.getElementById('itemRowEnd').value = style.rowEnd || '';
        }

        window.updateItemStyle = function() {
            if (!selectedItem) return;
            
            itemStyles[selectedItem] = {
                colStart: document.getElementById('itemColStart').value,
                colEnd: document.getElementById('itemColEnd').value,
                rowStart: document.getElementById('itemRowStart').value,
                rowEnd: document.getElementById('itemRowEnd').value
            };
            
            updateGrid();
        };

        window.resetItemStyle = function() {
            if (!selectedItem) return;
            delete itemStyles[selectedItem];
            document.getElementById('itemColStart').value = '';
            document.getElementById('itemColEnd').value = '';
            document.getElementById('itemRowStart').value = '';
            document.getElementById('itemRowEnd').value = '';
            updateGrid();
        };

        function closeItemEditor() {
            selectedItem = null;
            document.querySelectorAll('.grid-item').forEach(el => el.classList.remove('selected'));
            document.getElementById('itemEditor').classList.remove('active');
        }

        function generateCode() {
            const colGap = document.getElementById('columnGap').value;
            const rowGap = document.getElementById('rowGap').value;
            const justifyItems = document.getElementById('justifyItems').value;
            const alignItems = document.getElementById('alignItems').value;
            
            let css = '.container {\n';
            css += '  display: grid;\n';
            css += '  grid-template-columns: ' + columns.join(' ') + ';\n';
            css += '  grid-template-rows: ' + rows.join(' ') + ';\n';
            if (colGap !== '0' && colGap !== '0px') css += '  column-gap: ' + colGap + ';\n';
            if (rowGap !== '0' && rowGap !== '0px') css += '  row-gap: ' + rowGap + ';\n';
            if (justifyItems !== 'stretch') css += '  justify-items: ' + justifyItems + ';\n';
            if (alignItems !== 'stretch') css += '  align-items: ' + alignItems + ';\n';
            css += '}\n';
            
            // å­é¡¹æ ·å¼
            Object.keys(itemStyles).forEach(num => {
                const style = itemStyles[num];
                if (style.colStart || style.colEnd || style.rowStart || style.rowEnd) {
                    css += '\n.item-' + num + ' {\n';
                    if (style.colStart && style.colEnd) {
                        css += '  grid-column: ' + style.colStart + ' / ' + style.colEnd + ';\n';
                    } else {
                        if (style.colStart) css += '  grid-column-start: ' + style.colStart + ';\n';
                        if (style.colEnd) css += '  grid-column-end: ' + style.colEnd + ';\n';
                    }
                    if (style.rowStart && style.rowEnd) {
                        css += '  grid-row: ' + style.rowStart + ' / ' + style.rowEnd + ';\n';
                    } else {
                        if (style.rowStart) css += '  grid-row-start: ' + style.rowStart + ';\n';
                        if (style.rowEnd) css += '  grid-row-end: ' + style.rowEnd + ';\n';
                    }
                    css += '}\n';
                }
            });
            
            document.getElementById('cssCode').textContent = css;
        }

        window.copyCode = function() {
            const code = document.getElementById('cssCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = 'å·²å¤åˆ¶!';
                setTimeout(() => btn.textContent = 'å¤åˆ¶', 1500);
            });
        };

        window.applyPreset = function(name) {
            const preset = presets[name];
            if (!preset) return;
            
            columns = [...preset.cols];
            rows = [...preset.rows];
            itemStyles = preset.styles ? JSON.parse(JSON.stringify(preset.styles)) : {};
            document.getElementById('itemCount').value = preset.items;
            
            closeItemEditor();
            renderTracks();
            updateItemCount();
        };

        // ä¸»é¢˜åˆ‡æ¢
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', savedTheme);
        
        themeToggle.addEventListener('click', function() {
            const current = html.getAttribute('data-theme');
            const next = current === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        });

        // åˆå§‹åŒ–
        renderTracks();
        updateItemCount();
    </script>
</body>
</html>
