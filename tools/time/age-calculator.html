<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¹´é¾„è®¡ç®—å™¨ - WebUtils</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --bg-card: #1a1a24;
      --bg-input: #0e0e14;
      --text-primary: #e8e8ed;
      --text-secondary: #8888a0;
      --text-muted: #55556a;
      --border-subtle: #2a2a3a;
      --accent-cyan: #00f5d4;
      --accent-blue: #4cc9f0;
      --accent-green: #10b981;
      --accent-red: #f43f5e;
      --accent-yellow: #fbbf24;
      --accent-purple: #a855f7;
      --glow-cyan: rgb(0, 245, 212, 0.15);
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      background: var(--bg-deep);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }

    .bg-grid {
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 900px;
      margin: 0 auto;
      padding: 24px;
      min-height: 100vh;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 8px 14px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      transition: all 0.2s ease;
      margin-bottom: 24px;
    }

    .back-link:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }

    h1 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .desc {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 20px;
    }

    .input-section {
      margin-bottom: 20px;
    }

    .input-section label {
      display: block;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 10px;
    }

    input[type="date"] {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1rem;
      padding: 12px 16px;
      background: var(--bg-input);
      border: 2px solid var(--border-subtle);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      width: 100%;
      max-width: 300px;
    }

    input:focus {
      outline: none;
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 4px var(--glow-cyan);
    }

    .age-display {
      text-align: center;
      padding: 30px;
    }

    .age-main {
      font-family: 'JetBrains Mono', monospace;
      font-size: 3.5rem;
      font-weight: 700;
      color: var(--accent-cyan);
      text-shadow: 0 0 30px var(--glow-cyan);
    }

    .age-unit {
      font-size: 1.5rem;
      color: var(--text-secondary);
      margin-left: 8px;
    }

    .age-detail {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.1rem;
      color: var(--text-secondary);
      margin-top: 8px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 24px;
    }

    .stat-card {
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: 20px;
      text-align: center;
    }

    .stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--accent-cyan);
    }

    .stat-value.blue { color: var(--accent-blue); }
    .stat-value.green { color: var(--accent-green); }
    .stat-value.yellow { color: var(--accent-yellow); }
    .stat-value.purple { color: var(--accent-purple); }
    .stat-value.red { color: var(--accent-red); }

    .stat-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 8px;
    }

    .birthday-info {
      margin-top: 24px;
      padding: 20px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
    }

    .birthday-info h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid var(--border-subtle);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
    }

    .info-row:last-child {
      border-bottom: none;
    }

    .info-row .label {
      color: var(--text-muted);
    }

    .info-row .value {
      color: var(--accent-cyan);
    }

    .zodiac {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }

    .zodiac-item {
      flex: 1;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: 16px;
      text-align: center;
    }

    .zodiac-icon {
      font-size: 2rem;
      margin-bottom: 8px;
    }

    .zodiac-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--accent-cyan);
    }

    .zodiac-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 4px;
    }

    footer {
      text-align: center;
      margin-top: 32px;
      padding-top: 16px;
      border-top: 1px solid var(--border-subtle);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    footer a {
      color: var(--accent-cyan);
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div class="bg-grid"></div>

  <div class="container">
    <a href="../../index.html" class="back-link">â† è¿”å›</a>

    <h1>å¹´é¾„è®¡ç®—å™¨</h1>
    <p class="desc">æ ¹æ®å‡ºç”Ÿæ—¥æœŸè®¡ç®—ç²¾ç¡®å¹´é¾„ã€ç”Ÿè‚–ã€æ˜Ÿåº§ç­‰ä¿¡æ¯</p>

    <div class="card">
      <div class="input-section">
        <label>å‡ºç”Ÿæ—¥æœŸ</label>
        <input type="date" id="birthDate" max="">
      </div>

      <div class="age-display" id="ageDisplay" style="display: none;">
        <div>
          <span class="age-main" id="ageYears">0</span>
          <span class="age-unit">å²</span>
        </div>
        <div class="age-detail" id="ageDetail"></div>
      </div>

      <div class="stats-grid" id="statsGrid" style="display: none;">
        <div class="stat-card">
          <div class="stat-value" id="statMonths">0</div>
          <div class="stat-label">æ€»æœˆæ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-value blue" id="statWeeks">0</div>
          <div class="stat-label">æ€»å‘¨æ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-value green" id="statDays">0</div>
          <div class="stat-label">æ€»å¤©æ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-value yellow" id="statHours">0</div>
          <div class="stat-label">æ€»å°æ—¶æ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-value purple" id="statMinutes">0</div>
          <div class="stat-label">æ€»åˆ†é’Ÿæ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-value red" id="statNextBirthday">0</div>
          <div class="stat-label">è·ä¸‹æ¬¡ç”Ÿæ—¥ï¼ˆå¤©ï¼‰</div>
        </div>
      </div>

      <div class="zodiac" id="zodiacSection" style="display: none;">
        <div class="zodiac-item">
          <div class="zodiac-icon" id="zodiacAnimalIcon">ğŸ€</div>
          <div class="zodiac-name" id="zodiacAnimal">é¼ </div>
          <div class="zodiac-label">ç”Ÿè‚–</div>
        </div>
        <div class="zodiac-item">
          <div class="zodiac-icon" id="zodiacStarIcon">â™ˆ</div>
          <div class="zodiac-name" id="zodiacStar">ç™½ç¾Šåº§</div>
          <div class="zodiac-label">æ˜Ÿåº§</div>
        </div>
      </div>

      <div class="birthday-info" id="birthdayInfo" style="display: none;">
        <h3>æ›´å¤šä¿¡æ¯</h3>
        <div class="info-row">
          <span class="label">å‡ºç”Ÿæ˜ŸæœŸ</span>
          <span class="value" id="birthWeekday">-</span>
        </div>
        <div class="info-row">
          <span class="label">ä¸‹æ¬¡ç”Ÿæ—¥æ˜ŸæœŸ</span>
          <span class="value" id="nextBirthdayWeekday">-</span>
        </div>
        <div class="info-row">
          <span class="label">å·²åº¦è¿‡çš„ç”Ÿæ—¥</span>
          <span class="value" id="birthdaysPassed">-</span>
        </div>
        <div class="info-row">
          <span class="label">å‡ºç”Ÿå­£èŠ‚</span>
          <span class="value" id="birthSeason">-</span>
        </div>
      </div>
    </div>

    <footer>
      <a href="https://github.com/chicogong/html-tools" target="_blank">GitHub</a> Â·
      çº¯å‰ç«¯ Â· æ— æœåŠ¡å™¨ Â·
      <a href="../../index.html">WebUtils</a>
    </footer>
  </div>

  <script>
    var birthDateEl = document.getElementById('birthDate');
    var LS_KEY = 'age_calculator_v1';

    // Set max date to today
    birthDateEl.max = new Date().toISOString().split('T')[0];

    var ZODIAC_ANIMALS = ['é¼ ', 'ç‰›', 'è™', 'å…”', 'é¾™', 'è›‡', 'é©¬', 'ç¾Š', 'çŒ´', 'é¸¡', 'ç‹—', 'çŒª'];
    var ZODIAC_ANIMAL_ICONS = ['ğŸ€', 'ğŸ‚', 'ğŸ…', 'ğŸ‡', 'ğŸ‰', 'ğŸ', 'ğŸ´', 'ğŸ‘', 'ğŸµ', 'ğŸ”', 'ğŸ•', 'ğŸ·'];
    
    var ZODIAC_STARS = [
      { name: 'æ‘©ç¾¯åº§', icon: 'â™‘', start: [1, 1], end: [1, 19] },
      { name: 'æ°´ç“¶åº§', icon: 'â™’', start: [1, 20], end: [2, 18] },
      { name: 'åŒé±¼åº§', icon: 'â™“', start: [2, 19], end: [3, 20] },
      { name: 'ç™½ç¾Šåº§', icon: 'â™ˆ', start: [3, 21], end: [4, 19] },
      { name: 'é‡‘ç‰›åº§', icon: 'â™‰', start: [4, 20], end: [5, 20] },
      { name: 'åŒå­åº§', icon: 'â™Š', start: [5, 21], end: [6, 21] },
      { name: 'å·¨èŸ¹åº§', icon: 'â™‹', start: [6, 22], end: [7, 22] },
      { name: 'ç‹®å­åº§', icon: 'â™Œ', start: [7, 23], end: [8, 22] },
      { name: 'å¤„å¥³åº§', icon: 'â™', start: [8, 23], end: [9, 22] },
      { name: 'å¤©ç§¤åº§', icon: 'â™', start: [9, 23], end: [10, 23] },
      { name: 'å¤©èåº§', icon: 'â™', start: [10, 24], end: [11, 22] },
      { name: 'å°„æ‰‹åº§', icon: 'â™', start: [11, 23], end: [12, 21] },
      { name: 'æ‘©ç¾¯åº§', icon: 'â™‘', start: [12, 22], end: [12, 31] }
    ];

    var WEEKDAYS = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
    var SEASONS = ['å†¬å­£', 'æ˜¥å­£', 'å¤å­£', 'ç§‹å­£'];

    function getZodiacAnimal(year) {
      var index = (year - 1900) % 12;
      return {
        name: ZODIAC_ANIMALS[index],
        icon: ZODIAC_ANIMAL_ICONS[index]
      };
    }

    function getZodiacStar(month, day) {
      for (var i = 0; i < ZODIAC_STARS.length; i++) {
        var z = ZODIAC_STARS[i];
        var afterStart = month > z.start[0] || (month === z.start[0] && day >= z.start[1]);
        var beforeEnd = month < z.end[0] || (month === z.end[0] && day <= z.end[1]);
        if (afterStart && beforeEnd) {
          return { name: z.name, icon: z.icon };
        }
      }
      return { name: 'æ‘©ç¾¯åº§', icon: 'â™‘' };
    }

    function getSeason(month) {
      if (month >= 3 && month <= 5) return 'æ˜¥å­£';
      if (month >= 6 && month <= 8) return 'å¤å­£';
      if (month >= 9 && month <= 11) return 'ç§‹å­£';
      return 'å†¬å­£';
    }

    function calculateAge(birthDate) {
      var now = new Date();
      var birth = new Date(birthDate);
      
      var years = now.getFullYear() - birth.getFullYear();
      var months = now.getMonth() - birth.getMonth();
      var days = now.getDate() - birth.getDate();
      
      if (days < 0) {
        months--;
        var lastMonth = new Date(now.getFullYear(), now.getMonth(), 0);
        days += lastMonth.getDate();
      }
      
      if (months < 0) {
        years--;
        months += 12;
      }
      
      return { years: years, months: months, days: days };
    }

    function getDaysUntilNextBirthday(birthDate) {
      var now = new Date();
      var birth = new Date(birthDate);
      var nextBirthday = new Date(now.getFullYear(), birth.getMonth(), birth.getDate());
      
      if (nextBirthday <= now) {
        nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
      }
      
      var diff = nextBirthday - now;
      return {
        days: Math.ceil(diff / (1000 * 60 * 60 * 24)),
        date: nextBirthday
      };
    }

    function formatNumber(num) {
      return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

    function calculate() {
      var birthDate = birthDateEl.value;
      if (!birthDate) return;
      
      var birth = new Date(birthDate);
      var now = new Date();
      
      if (birth > now) {
        alert('å‡ºç”Ÿæ—¥æœŸä¸èƒ½æ™šäºä»Šå¤©');
        return;
      }
      
      // Calculate age
      var age = calculateAge(birthDate);
      document.getElementById('ageYears').textContent = age.years;
      document.getElementById('ageDetail').textContent = age.years + ' å¹´ ' + age.months + ' ä¸ªæœˆ ' + age.days + ' å¤©';
      
      // Calculate total stats
      var totalDays = Math.floor((now - birth) / (1000 * 60 * 60 * 24));
      var totalHours = Math.floor((now - birth) / (1000 * 60 * 60));
      var totalMinutes = Math.floor((now - birth) / (1000 * 60));
      var totalWeeks = Math.floor(totalDays / 7);
      var totalMonths = age.years * 12 + age.months;
      
      document.getElementById('statMonths').textContent = formatNumber(totalMonths);
      document.getElementById('statWeeks').textContent = formatNumber(totalWeeks);
      document.getElementById('statDays').textContent = formatNumber(totalDays);
      document.getElementById('statHours').textContent = formatNumber(totalHours);
      document.getElementById('statMinutes').textContent = formatNumber(totalMinutes);
      
      // Next birthday
      var nextBirthday = getDaysUntilNextBirthday(birthDate);
      document.getElementById('statNextBirthday').textContent = nextBirthday.days;
      
      // Zodiac
      var zodiacAnimal = getZodiacAnimal(birth.getFullYear());
      var zodiacStar = getZodiacStar(birth.getMonth() + 1, birth.getDate());
      
      document.getElementById('zodiacAnimal').textContent = zodiacAnimal.name;
      document.getElementById('zodiacAnimalIcon').textContent = zodiacAnimal.icon;
      document.getElementById('zodiacStar').textContent = zodiacStar.name;
      document.getElementById('zodiacStarIcon').textContent = zodiacStar.icon;
      
      // More info
      document.getElementById('birthWeekday').textContent = WEEKDAYS[birth.getDay()];
      document.getElementById('nextBirthdayWeekday').textContent = WEEKDAYS[nextBirthday.date.getDay()];
      document.getElementById('birthdaysPassed').textContent = age.years + ' æ¬¡';
      document.getElementById('birthSeason').textContent = getSeason(birth.getMonth() + 1);
      
      // Show sections
      document.getElementById('ageDisplay').style.display = 'block';
      document.getElementById('statsGrid').style.display = 'grid';
      document.getElementById('zodiacSection').style.display = 'flex';
      document.getElementById('birthdayInfo').style.display = 'block';
      
      // Save
      localStorage.setItem(LS_KEY, birthDate);
    }

    birthDateEl.addEventListener('change', calculate);

    // Load saved
    var saved = localStorage.getItem(LS_KEY);
    if (saved) {
      birthDateEl.value = saved;
      calculate();
    }
  </script>
</body>
</html>
