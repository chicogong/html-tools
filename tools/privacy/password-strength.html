<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¯†ç å¼ºåº¦æ£€æŸ¥å™¨ - WebUtils</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --bg-card: #1a1a24;
      --bg-input: #0e0e14;
      --text-primary: #e8e8ed;
      --text-secondary: #8888a0;
      --text-muted: #55556a;
      --border-subtle: #2a2a3a;
      --accent-cyan: #00f5d4;
      --accent-green: #10b981;
      --accent-yellow: #fbbf24;
      --accent-red: #f43f5e;
      --glow-cyan: rgb(0, 245, 212, 0.15);
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      background: var(--bg-deep);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }

    .bg-grid {
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
      min-height: 100vh;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 8px 14px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      transition: all 0.2s ease;
      margin-bottom: 24px;
    }

    .back-link:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }

    h1 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      margin-bottom: 8px;
    }

    .desc {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 20px;
    }

    .input-section {
      margin-bottom: 24px;
    }

    .input-section label {
      display: block;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 10px;
    }

    .password-input-group {
      position: relative;
      display: flex;
      gap: 12px;
    }

    .password-wrapper {
      flex: 1;
      position: relative;
    }

    input[type="text"], input[type="password"] {
      width: 100%;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      padding: 12px 16px;
      padding-right: 50px;
      background: var(--bg-input);
      border: 2px solid var(--border-subtle);
      border-radius: var(--radius-md);
      color: var(--text-primary);
    }

    input:focus {
      outline: none;
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 4px var(--glow-cyan);
    }

    .toggle-visibility {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      padding: 8px;
      font-size: 1.2rem;
      transition: color 0.2s;
    }

    .toggle-visibility:hover {
      color: var(--accent-cyan);
    }

    .strength-meter {
      margin-bottom: 24px;
    }

    .strength-meter h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 12px;
      text-transform: uppercase;
    }

    .strength-bar-container {
      height: 8px;
      background: var(--bg-surface);
      border-radius: var(--radius-sm);
      overflow: hidden;
      margin-bottom: 12px;
    }

    .strength-bar {
      height: 100%;
      width: 0%;
      transition: all 0.3s ease;
      border-radius: var(--radius-sm);
    }

    .strength-bar.weak {
      width: 25%;
      background: var(--accent-red);
    }

    .strength-bar.fair {
      width: 50%;
      background: var(--accent-yellow);
    }

    .strength-bar.good {
      width: 75%;
      background: var(--accent-cyan);
    }

    .strength-bar.strong {
      width: 100%;
      background: var(--accent-green);
    }

    .strength-text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      text-align: center;
      font-weight: 600;
    }

    .strength-text.weak {
      color: var(--accent-red);
    }

    .strength-text.fair {
      color: var(--accent-yellow);
    }

    .strength-text.good {
      color: var(--accent-cyan);
    }

    .strength-text.strong {
      color: var(--accent-green);
    }

    .checks-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin-bottom: 24px;
    }

    .check-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      transition: all 0.2s ease;
    }

    .check-item.pass {
      border-color: var(--accent-green);
      color: var(--accent-green);
    }

    .check-item.fail {
      border-color: var(--border-subtle);
      color: var(--text-muted);
    }

    .check-icon {
      font-size: 1rem;
      font-weight: 700;
    }

    .suggestions {
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: 16px;
      margin-bottom: 24px;
    }

    .suggestions h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 12px;
      text-transform: uppercase;
    }

    .suggestion-list {
      list-style: none;
    }

    .suggestion-item {
      display: flex;
      gap: 10px;
      padding: 8px 0;
      border-bottom: 1px solid var(--border-subtle);
      font-size: 0.85rem;
    }

    .suggestion-item:last-child {
      border-bottom: none;
    }

    .suggestion-bullet {
      color: var(--accent-cyan);
      font-weight: 700;
    }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .option-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .option-group label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
    }

    input[type="number"], select {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      padding: 10px 12px;
      background: var(--bg-surface);
      border: 2px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--accent-cyan);
    }

    .generated-password {
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: 16px;
      margin-bottom: 24px;
      display: none;
    }

    .generated-password.show {
      display: block;
    }

    .generated-password h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 12px;
      text-transform: uppercase;
    }

    .generated-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.2rem;
      color: var(--accent-cyan);
      word-break: break-all;
      padding: 12px;
      background: var(--bg-input);
      border-radius: var(--radius-sm);
    }

    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      padding: 10px 16px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }

    button:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }

    button.primary {
      background: var(--accent-cyan);
      border-color: var(--accent-cyan);
      color: var(--bg-deep);
    }

    button.primary:hover {
      background: #00dfc4;
    }

    .status {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 16px;
    }

    .status.success {
      color: var(--accent-green);
    }

    .status.success::before {
      content: 'âœ“ ';
    }

    .status.error {
      color: var(--accent-red);
    }

    .status.error::before {
      content: 'âœ— ';
    }

    footer {
      text-align: center;
      margin-top: 32px;
      padding-top: 16px;
      border-top: 1px solid var(--border-subtle);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    footer a {
      color: var(--accent-cyan);
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div class="bg-grid"></div>

  <div class="container">
    <a href="../../index.html" class="back-link">â† è¿”å›</a>

    <h1>å¯†ç å¼ºåº¦æ£€æŸ¥å™¨</h1>
    <p class="desc">å®æ—¶æ£€æŸ¥å¯†ç å¼ºåº¦ï¼Œè·å–å®‰å…¨å»ºè®®ï¼Œç”Ÿæˆå¼ºå¯†ç </p>

    <div class="card">
      <div class="input-section">
        <label>è¾“å…¥å¯†ç </label>
        <div class="password-input-group">
          <div class="password-wrapper">
            <input type="password" id="password" placeholder="è¾“å…¥è¦æ£€æŸ¥çš„å¯†ç ..." />
            <button class="toggle-visibility" id="toggleVisibility" type="button">ğŸ‘</button>
          </div>
          <button id="btnCheck" class="primary">æ£€æŸ¥</button>
        </div>
      </div>

      <div class="strength-meter">
        <h3>å¯†ç å¼ºåº¦</h3>
        <div class="strength-bar-container">
          <div class="strength-bar" id="strengthBar"></div>
        </div>
        <div class="strength-text" id="strengthText">è¯·è¾“å…¥å¯†ç </div>
      </div>

      <div class="checks-grid" id="checksGrid">
        <div class="check-item fail" data-check="length">
          <span class="check-icon">âœ—</span>
          <span>è‡³å°‘ 8 ä¸ªå­—ç¬¦</span>
        </div>
        <div class="check-item fail" data-check="uppercase">
          <span class="check-icon">âœ—</span>
          <span>åŒ…å«å¤§å†™å­—æ¯</span>
        </div>
        <div class="check-item fail" data-check="lowercase">
          <span class="check-icon">âœ—</span>
          <span>åŒ…å«å°å†™å­—æ¯</span>
        </div>
        <div class="check-item fail" data-check="numbers">
          <span class="check-icon">âœ—</span>
          <span>åŒ…å«æ•°å­—</span>
        </div>
        <div class="check-item fail" data-check="special">
          <span class="check-icon">âœ—</span>
          <span>åŒ…å«ç‰¹æ®Šå­—ç¬¦</span>
        </div>
        <div class="check-item fail" data-check="length16">
          <span class="check-icon">âœ—</span>
          <span>è‡³å°‘ 16 ä¸ªå­—ç¬¦</span>
        </div>
      </div>

      <div class="suggestions" id="suggestions" style="display: none;">
        <h3>æ”¹è¿›å»ºè®®</h3>
        <ul class="suggestion-list" id="suggestionList"></ul>
      </div>

      <div class="options-grid">
        <div class="option-group">
          <label>å¯†ç é•¿åº¦</label>
          <input type="number" id="genLength" value="16" min="8" max="64" />
        </div>
        <div class="option-group">
          <label>å­—ç¬¦ç±»å‹</label>
          <select id="charType">
            <option value="all">å…¨éƒ¨å­—ç¬¦</option>
            <option value="alphanumeric">å­—æ¯ + æ•°å­—</option>
            <option value="letters">ä»…å­—æ¯</option>
            <option value="custom">è‡ªå®šä¹‰</option>
          </select>
        </div>
        <div class="option-group">
          <label>è‡ªå®šä¹‰å­—ç¬¦</label>
          <input type="text" id="customChars" placeholder="ä¾‹å¦‚: abc123!@#" disabled />
        </div>
      </div>

      <div class="generated-password" id="generatedPassword">
        <h3>ç”Ÿæˆçš„å¯†ç </h3>
        <div class="generated-value" id="generatedValue"></div>
      </div>

      <div class="actions">
        <button id="btnGenerate">ç”Ÿæˆå¼ºå¯†ç </button>
        <button id="btnCopyGenerated">å¤åˆ¶ç”Ÿæˆçš„å¯†ç </button>
        <button id="btnCopyInput">å¤åˆ¶è¾“å…¥å¯†ç </button>
        <button id="btnClear">æ¸…ç©º</button>
      </div>

      <div id="status" class="status"></div>
    </div>

    <footer>
      <a href="https://github.com/chicogong/html-tools" target="_blank">GitHub</a> Â·
      çº¯å‰ç«¯ Â· æ— æœåŠ¡å™¨ Â·
      <a href="../../index.html">WebUtils</a>
    </footer>
  </div>

  <script>
    const passwordEl = document.getElementById('password');
    const toggleVisibilityEl = document.getElementById('toggleVisibility');
    const strengthBarEl = document.getElementById('strengthBar');
    const strengthTextEl = document.getElementById('strengthText');
    const checksGridEl = document.getElementById('checksGrid');
    const suggestionsEl = document.getElementById('suggestions');
    const suggestionListEl = document.getElementById('suggestionList');
    const genLengthEl = document.getElementById('genLength');
    const charTypeEl = document.getElementById('charType');
    const customCharsEl = document.getElementById('customChars');
    const generatedPasswordEl = document.getElementById('generatedPassword');
    const generatedValueEl = document.getElementById('generatedValue');
    const statusEl = document.getElementById('status');

    function calculateStrength(password) {
      if (!password) {
        return { score: 0, level: 'none', checks: {}, suggestions: [] };
      }

      const checks = {
        length: password.length >= 8,
        uppercase: /[A-Z]/.test(password),
        lowercase: /[a-z]/.test(password),
        numbers: /\d/.test(password),
        special: /[!@#$%^&*(),.?":{}|<>]/.test(password),
        length16: password.length >= 16
      };

      let score = 0;
      if (checks.length) score += 1;
      if (checks.uppercase) score += 1;
      if (checks.lowercase) score += 1;
      if (checks.numbers) score += 1;
      if (checks.special) score += 1;
      if (checks.length16) score += 2;

      const suggestions = [];
      if (!checks.length) suggestions.push('å¯†ç é•¿åº¦è‡³å°‘éœ€è¦ 8 ä¸ªå­—ç¬¦');
      if (!checks.uppercase) suggestions.push('æ·»åŠ å¤§å†™å­—æ¯ (A-Z)');
      if (!checks.lowercase) suggestions.push('æ·»åŠ å°å†™å­—æ¯ (a-z)');
      if (!checks.numbers) suggestions.push('æ·»åŠ æ•°å­— (0-9)');
      if (!checks.special) suggestions.push('æ·»åŠ ç‰¹æ®Šå­—ç¬¦ (!@#$%^&*)');
      if (!checks.length16) suggestions.push('ä½¿ç”¨ 16 ä¸ªå­—ç¬¦ä»¥ä¸Šçš„å¯†ç ä»¥è·å¾—æ›´é«˜å¼ºåº¦');

      let level;
      if (score <= 2) level = 'weak';
      else if (score <= 4) level = 'fair';
      else if (score <= 6) level = 'good';
      else level = 'strong';

      return { score, level, checks, suggestions };
    }

    function updateStrengthMeter() {
      const password = passwordEl.value;
      const { score, level, checks, suggestions } = calculateStrength(password);

      if (!password) {
        strengthBarEl.className = 'strength-bar';
        strengthTextEl.textContent = 'è¯·è¾“å…¥å¯†ç ';
        strengthTextEl.className = 'strength-text';
        suggestionsEl.style.display = 'none';
        return;
      }

      strengthBarEl.className = 'strength-bar ' + level;
      const levelTexts = {
        weak: 'å¼±',
        fair: 'ä¸€èˆ¬',
        good: 'è‰¯å¥½',
        strong: 'å¼º'
      };
      strengthTextEl.textContent = levelTexts[level];
      strengthTextEl.className = 'strength-text ' + level;

      checksGridEl.querySelectorAll('.check-item').forEach(function(item) {
        const checkType = item.getAttribute('data-check');
        const passed = checks[checkType];
        item.className = 'check-item ' + (passed ? 'pass' : 'fail');
        item.querySelector('.check-icon').textContent = passed ? 'âœ“' : 'âœ—';
      });

      if (suggestions.length > 0) {
        suggestionsEl.style.display = 'block';
        suggestionListEl.innerHTML = '';
        suggestions.forEach(function(suggestion) {
          const li = document.createElement('li');
          li.className = 'suggestion-item';
          li.innerHTML =
            '<span class="suggestion-bullet">â€¢</span>' +
            '<span>' + suggestion + '</span>';
          suggestionListEl.appendChild(li);
        });
      } else {
        suggestionsEl.style.display = 'none';
      }
    }

    function generatePassword() {
      const length = parseInt(genLengthEl.value) || 16;
      const charType = charTypeEl.value;
      let chars = '';

      switch (charType) {
        case 'all':
          chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?';
          break;
        case 'alphanumeric':
          chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
          break;
        case 'letters':
          chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
          break;
        case 'custom':
          chars = customCharsEl.value || 'abcdefghijklmnopqrstuvwxyz';
          break;
        }

      if (!chars) {
        showStatus('è¯·è¾“å…¥è‡ªå®šä¹‰å­—ç¬¦', 'error');
        return;
      }

      let password = '';
      const array = new Uint32Array(length);
      window.crypto.getRandomValues(array);

      for (let i = 0; i < length; i++) {
        password += chars[array[i] % chars.length];
      }

      generatedValueEl.textContent = password;
      generatedPasswordEl.classList.add('show');
      showStatus('å¯†ç å·²ç”Ÿæˆ', 'success');
    }

    function showStatus(msg, type) {
      statusEl.textContent = msg;
      statusEl.className = 'status ' + (type || '');
    }

    toggleVisibilityEl.onclick = function() {
      if (passwordEl.type === 'password') {
        passwordEl.type = 'text';
        toggleVisibilityEl.textContent = 'ğŸ”’';
      } else {
        passwordEl.type = 'password';
        toggleVisibilityEl.textContent = 'ğŸ‘';
      }
    };

    document.getElementById('btnCheck').onclick = updateStrengthMeter;

    document.getElementById('btnGenerate').onclick = generatePassword;

    document.getElementById('btnCopyGenerated').onclick = async function() {
      if (!generatedValueEl.textContent) {
        showStatus('æ²¡æœ‰ç”Ÿæˆçš„å¯†ç ', 'error');
        return;
      }
      try {
        await navigator.clipboard.writeText(generatedValueEl.textContent);
        showStatus('ç”Ÿæˆçš„å¯†ç å·²å¤åˆ¶', 'success');
      } catch (e) {
        showStatus('å¤åˆ¶å¤±è´¥', 'error');
      }
    };

    document.getElementById('btnCopyInput').onclick = async function() {
      if (!passwordEl.value) {
        showStatus('æ²¡æœ‰è¾“å…¥çš„å¯†ç ', 'error');
        return;
      }
      try {
        await navigator.clipboard.writeText(passwordEl.value);
        showStatus('è¾“å…¥çš„å¯†ç å·²å¤åˆ¶', 'success');
      } catch (e) {
        showStatus('å¤åˆ¶å¤±è´¥', 'error');
      }
    };

    document.getElementById('btnClear').onclick = function() {
      passwordEl.value = '';
      generatedPasswordEl.classList.remove('show');
      generatedValueEl.textContent = '';
      statusEl.textContent = '';
      updateStrengthMeter();
    };

    charTypeEl.onchange = function() {
      customCharsEl.disabled = this.value !== 'custom';
    };

    passwordEl.addEventListener('input', updateStrengthMeter);

    updateStrengthMeter();
  </script>
</body>
</html>