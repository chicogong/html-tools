<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±‡ç‡è½¬æ¢å™¨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        body { min-height: 100vh; padding: 2rem 1rem; }
        .container { max-width: 700px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        .converter-box { background: var(--pico-muted-border-color); border-radius: var(--pico-border-radius); padding: 1.5rem; }
        .currency-row { display: flex; gap: 1rem; align-items: end; margin-bottom: 1rem; }
        .currency-row > div:first-child { flex: 2; }
        .currency-row > div:last-child { flex: 1; }
        .swap-btn { display: flex; justify-content: center; margin: 1rem 0; }
        .swap-btn button { width: auto; padding: 0.5rem 1rem; }
        .result-display { background: var(--pico-background-color); border-radius: var(--pico-border-radius); padding: 1.5rem; margin-top: 1rem; text-align: center; }
        .result-amount { font-size: 2rem; font-weight: bold; color: var(--pico-primary); }
        .result-rate { color: var(--pico-muted-color); margin-top: 0.5rem; }
        .rate-table { margin-top: 2rem; }
        .rate-table table { width: 100%; }
        .rate-input-section { margin-top: 2rem; padding: 1rem; background: var(--pico-card-background-color); border-radius: var(--pico-border-radius); }
        .rate-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem; }
        .rate-grid label { font-size: 0.85rem; }
        .rate-grid input { padding: 0.4rem; font-size: 0.9rem; }
        .flag { font-size: 1.2rem; margin-right: 0.5rem; }
    </style>
</head>
<body>
    <main class="container">
        <a href="../../index.html" style="display:inline-block;margin-bottom:1rem;color:var(--pico-primary);text-decoration:none;">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>æ±‡ç‡è½¬æ¢å™¨</h1>
            <button id="themeToggle" class="outline" onclick="toggleTheme()">ğŸŒ™</button>
        </header>

        <div class="converter-box">
            <div class="currency-row">
                <div>
                    <label>é‡‘é¢</label>
                    <input type="number" id="amount" value="1000" step="any" oninput="convert()">
                </div>
                <div>
                    <label>è´§å¸</label>
                    <select id="fromCurrency" onchange="convert()">
                        <option value="CNY">ğŸ‡¨ğŸ‡³ CNY äººæ°‘å¸</option>
                        <option value="USD">ğŸ‡ºğŸ‡¸ USD ç¾å…ƒ</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º EUR æ¬§å…ƒ</option>
                        <option value="GBP">ğŸ‡¬ğŸ‡§ GBP è‹±é•‘</option>
                        <option value="JPY">ğŸ‡¯ğŸ‡µ JPY æ—¥å…ƒ</option>
                        <option value="HKD">ğŸ‡­ğŸ‡° HKD æ¸¯å¸</option>
                        <option value="KRW">ğŸ‡°ğŸ‡· KRW éŸ©å…ƒ</option>
                        <option value="SGD">ğŸ‡¸ğŸ‡¬ SGD æ–°åŠ å¡å…ƒ</option>
                        <option value="AUD">ğŸ‡¦ğŸ‡º AUD æ¾³å…ƒ</option>
                        <option value="CAD">ğŸ‡¨ğŸ‡¦ CAD åŠ å…ƒ</option>
                        <option value="CHF">ğŸ‡¨ğŸ‡­ CHF ç‘å£«æ³•éƒ</option>
                        <option value="THB">ğŸ‡¹ğŸ‡­ THB æ³°é“¢</option>
                        <option value="MYR">ğŸ‡²ğŸ‡¾ MYR é©¬æ¥è¥¿äºšæ—å‰ç‰¹</option>
                        <option value="RUB">ğŸ‡·ğŸ‡º RUB ä¿„ç½—æ–¯å¢å¸ƒ</option>
                        <option value="INR">ğŸ‡®ğŸ‡³ INR å°åº¦å¢æ¯”</option>
                    </select>
                </div>
            </div>

            <div class="swap-btn">
                <button class="outline" onclick="swapCurrencies()">â‡… äº¤æ¢</button>
            </div>

            <div class="currency-row">
                <div>
                    <label>è½¬æ¢ä¸º</label>
                    <select id="toCurrency" onchange="convert()">
                        <option value="CNY">ğŸ‡¨ğŸ‡³ CNY äººæ°‘å¸</option>
                        <option value="USD" selected>ğŸ‡ºğŸ‡¸ USD ç¾å…ƒ</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º EUR æ¬§å…ƒ</option>
                        <option value="GBP">ğŸ‡¬ğŸ‡§ GBP è‹±é•‘</option>
                        <option value="JPY">ğŸ‡¯ğŸ‡µ JPY æ—¥å…ƒ</option>
                        <option value="HKD">ğŸ‡­ğŸ‡° HKD æ¸¯å¸</option>
                        <option value="KRW">ğŸ‡°ğŸ‡· KRW éŸ©å…ƒ</option>
                        <option value="SGD">ğŸ‡¸ğŸ‡¬ SGD æ–°åŠ å¡å…ƒ</option>
                        <option value="AUD">ğŸ‡¦ğŸ‡º AUD æ¾³å…ƒ</option>
                        <option value="CAD">ğŸ‡¨ğŸ‡¦ CAD åŠ å…ƒ</option>
                        <option value="CHF">ğŸ‡¨ğŸ‡­ CHF ç‘å£«æ³•éƒ</option>
                        <option value="THB">ğŸ‡¹ğŸ‡­ THB æ³°é“¢</option>
                        <option value="MYR">ğŸ‡²ğŸ‡¾ MYR é©¬æ¥è¥¿äºšæ—å‰ç‰¹</option>
                        <option value="RUB">ğŸ‡·ğŸ‡º RUB ä¿„ç½—æ–¯å¢å¸ƒ</option>
                        <option value="INR">ğŸ‡®ğŸ‡³ INR å°åº¦å¢æ¯”</option>
                    </select>
                </div>
            </div>

            <div class="result-display">
                <div class="result-amount" id="resultAmount">0.00</div>
                <div class="result-rate" id="resultRate">1 CNY = 0.1379 USD</div>
            </div>
        </div>

        <details class="rate-input-section">
            <summary>è‡ªå®šä¹‰æ±‡ç‡ï¼ˆç›¸å¯¹äº1 CNYï¼‰</summary>
            <p style="font-size: 0.85rem; color: var(--pico-muted-color);">é»˜è®¤æ±‡ç‡ä¸ºå‚è€ƒå€¼ï¼Œå¯æ ¹æ®å®é™…æ±‡ç‡è°ƒæ•´</p>
            <div class="rate-grid" id="rateInputs"></div>
            <button class="outline" style="margin-top: 1rem;" onclick="resetRates()">é‡ç½®ä¸ºé»˜è®¤æ±‡ç‡</button>
        </details>

        <div class="rate-table">
            <h4>å¸¸ç”¨æ±‡ç‡å‚è€ƒè¡¨ï¼ˆåŸºäº1äººæ°‘å¸ï¼‰</h4>
            <table id="rateTable">
                <thead><tr><th>è´§å¸</th><th>ä»£ç </th><th>æ±‡ç‡</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <article style="margin-top: 2rem;">
            <h4>ä½¿ç”¨è¯´æ˜</h4>
            <ul>
                <li>æ±‡ç‡ä¸ºå‚è€ƒå€¼ï¼Œå®é™…æ±‡ç‡ä»¥é“¶è¡Œæˆ–äº¤æ˜“å¹³å°ä¸ºå‡†</li>
                <li>å¯åœ¨"è‡ªå®šä¹‰æ±‡ç‡"ä¸­è°ƒæ•´å„è´§å¸æ±‡ç‡</li>
                <li>ç‚¹å‡»"äº¤æ¢"æŒ‰é’®å¯å¿«é€Ÿåˆ‡æ¢æºè´§å¸å’Œç›®æ ‡è´§å¸</li>
            </ul>
        </article>
    </main>

    <script>
        // é»˜è®¤æ±‡ç‡ï¼ˆç›¸å¯¹äº1 CNYï¼‰
        const defaultRates = {
            CNY: 1,
            USD: 0.1379,
            EUR: 0.1267,
            GBP: 0.1088,
            JPY: 21.26,
            HKD: 1.0784,
            KRW: 188.5,
            SGD: 0.1849,
            AUD: 0.2109,
            CAD: 0.1878,
            CHF: 0.1216,
            THB: 4.89,
            MYR: 0.6498,
            RUB: 12.58,
            INR: 11.52
        };

        const currencyNames = {
            CNY: 'äººæ°‘å¸', USD: 'ç¾å…ƒ', EUR: 'æ¬§å…ƒ', GBP: 'è‹±é•‘', JPY: 'æ—¥å…ƒ',
            HKD: 'æ¸¯å¸', KRW: 'éŸ©å…ƒ', SGD: 'æ–°åŠ å¡å…ƒ', AUD: 'æ¾³å…ƒ', CAD: 'åŠ å…ƒ',
            CHF: 'ç‘å£«æ³•éƒ', THB: 'æ³°é“¢', MYR: 'æ—å‰ç‰¹', RUB: 'å¢å¸ƒ', INR: 'å¢æ¯”'
        };

        const currencyFlags = {
            CNY: 'ğŸ‡¨ğŸ‡³', USD: 'ğŸ‡ºğŸ‡¸', EUR: 'ğŸ‡ªğŸ‡º', GBP: 'ğŸ‡¬ğŸ‡§', JPY: 'ğŸ‡¯ğŸ‡µ',
            HKD: 'ğŸ‡­ğŸ‡°', KRW: 'ğŸ‡°ğŸ‡·', SGD: 'ğŸ‡¸ğŸ‡¬', AUD: 'ğŸ‡¦ğŸ‡º', CAD: 'ğŸ‡¨ğŸ‡¦',
            CHF: 'ğŸ‡¨ğŸ‡­', THB: 'ğŸ‡¹ğŸ‡­', MYR: 'ğŸ‡²ğŸ‡¾', RUB: 'ğŸ‡·ğŸ‡º', INR: 'ğŸ‡®ğŸ‡³'
        };

        let rates = { ...defaultRates };

        function toggleTheme() {
            const html = document.documentElement;
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            document.getElementById('themeToggle').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
            localStorage.setItem('theme', newTheme);
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('themeToggle').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        function convert() {
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            const from = document.getElementById('fromCurrency').value;
            const to = document.getElementById('toCurrency').value;

            // å…ˆè½¬æ¢ä¸ºCNYï¼Œå†è½¬æ¢ä¸ºç›®æ ‡è´§å¸
            const amountInCNY = amount / rates[from];
            const result = amountInCNY * rates[to];

            const directRate = rates[to] / rates[from];

            document.getElementById('resultAmount').textContent = result.toLocaleString('zh-CN', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 4
            }) + ' ' + to;

            document.getElementById('resultRate').textContent = 
                '1 ' + from + ' = ' + directRate.toFixed(6) + ' ' + to;
        }

        function swapCurrencies() {
            const fromSelect = document.getElementById('fromCurrency');
            const toSelect = document.getElementById('toCurrency');
            const temp = fromSelect.value;
            fromSelect.value = toSelect.value;
            toSelect.value = temp;
            convert();
        }

        function buildRateInputs() {
            const container = document.getElementById('rateInputs');
            container.textContent = '';
            
            Object.keys(rates).forEach(code => {
                if (code === 'CNY') return;
                const div = document.createElement('div');
                div.innerHTML = '<label>' + currencyFlags[code] + ' ' + code + '</label>' +
                    '<input type="number" step="any" value="' + rates[code] + '" ' +
                    'onchange="updateRate(\'' + code + '\', this.value)" id="rate_' + code + '">';
                container.appendChild(div);
            });
        }

        function updateRate(code, value) {
            rates[code] = parseFloat(value) || defaultRates[code];
            convert();
            updateRateTable();
        }

        function resetRates() {
            rates = { ...defaultRates };
            buildRateInputs();
            convert();
            updateRateTable();
        }

        function updateRateTable() {
            const tbody = document.querySelector('#rateTable tbody');
            tbody.textContent = '';
            
            Object.keys(rates).forEach(code => {
                const tr = document.createElement('tr');
                tr.innerHTML = '<td>' + currencyFlags[code] + ' ' + currencyNames[code] + '</td>' +
                    '<td>' + code + '</td>' +
                    '<td>' + rates[code].toFixed(6) + '</td>';
                tbody.appendChild(tr);
            });
        }

        loadTheme();
        buildRateInputs();
        updateRateTable();
        convert();
    </script>
</body>
</html>
