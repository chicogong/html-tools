<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IP åœ°å€å·¥å…· - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="IP åœ°å€å·¥å…·é›†" />
    <meta name="keywords" content="ip åœ°å€å·¥å…·" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/network/ip-tools.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="IP åœ°å€å·¥å…· - WebUtils" />
    <meta property="og:description" content="IP åœ°å€å·¥å…·é›†" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tools.realtime-ai.chat/tools/network/ip-tools.html" />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="IP åœ°å€å·¥å…· - WebUtils" />
    <meta name="twitter:description" content="IP åœ°å€å·¥å…·é›†" />
    <!-- OG Image -->
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-purple: #9d4edd;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }
      [data-theme='light'] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: 'Space Grotesk', system-ui, sans-serif;
        background: var(--bg-deep);
        color: var(--text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }

      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
          linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
        z-index: 0;
      }

      .container {
        position: relative;
        z-index: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: 24px;
        min-height: 100vh;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.85rem;
        color: var(--text-secondary);
        text-decoration: none;
        padding: 8px 14px;
        background: var(--bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        transition: all 0.2s ease;
        margin-bottom: 24px;
      }

      .back-link:hover {
        border-color: var(--accent-cyan);
        color: var(--accent-cyan);
      }

      h1 {
        font-family: 'JetBrains Mono', monospace;
        font-size: 1.5rem;
        margin-bottom: 8px;
      }

      .desc {
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-bottom: 24px;
      }

      .card {
        background: var(--bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
        margin-bottom: 20px;
      }

      .input-section {
        margin-bottom: 24px;
      }

      .input-section label {
        display: block;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 10px;
      }

      .ip-input-group {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .ip-input-group input[type='text'] {
        flex: 1;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.9rem;
        padding: 12px 16px;
        background: var(--bg-input);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--text-primary);
      }

      .ip-input-group input:focus {
        outline: none;
        border-color: var(--accent-cyan);
        box-shadow: 0 0 0 4px var(--glow-cyan);
      }

      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 24px;
      }

      .option-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .option-group label {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        color: var(--text-muted);
        text-transform: uppercase;
      }

      input[type='number'],
      select {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.9rem;
        padding: 10px 12px;
        background: var(--bg-surface);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--text-primary);
      }

      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 16px;
        margin-bottom: 24px;
      }

      .result-card {
        background: var(--bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 16px;
        transition: all 0.2s ease;
      }

      .result-card:hover {
        border-color: var(--accent-cyan);
      }

      .result-title {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        color: var(--text-muted);
        text-transform: uppercase;
        margin-bottom: 8px;
      }

      .result-value {
        font-family: 'JetBrains Mono', monospace;
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
        word-break: break-all;
      }

      .result-value.ipv4 {
        color: var(--accent-cyan);
      }

      .result-value.ipv6 {
        color: var(--accent-purple);
      }

      .subnet-info {
        background: var(--bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 16px;
        margin-bottom: 24px;
      }

      .subnet-info h3 {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.9rem;
        color: var(--text-muted);
        margin-bottom: 12px;
        text-transform: uppercase;
      }

      .subnet-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
      }

      .subnet-item {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .subnet-label {
        font-size: 0.75rem;
        color: var(--text-muted);
      }

      .subnet-value {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.9rem;
        color: var(--text-primary);
        font-weight: 500;
      }

      .binary-view {
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 12px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        line-height: 1.4;
        margin-bottom: 24px;
        word-break: break-all;
      }

      .binary-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        margin-bottom: 4px;
        text-transform: uppercase;
      }

      .binary-content {
        color: var(--accent-cyan);
      }

      .actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      button {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.85rem;
        padding: 10px 16px;
        background: var(--bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }

      button:hover {
        border-color: var(--accent-cyan);
        color: var(--accent-cyan);
      }

      button.primary {
        background: var(--accent-cyan);
        border-color: var(--accent-cyan);
        color: var(--bg-deep);
      }

      button.primary:hover {
        background: #00dfc4;
      }

      .status {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-top: 16px;
      }

      .status.success {
        color: var(--accent-green);
      }

      .status.success::before {
        content: 'âœ“ ';
      }

      .status.error {
        color: var(--accent-red);
      }

      .status.error::before {
        content: 'âœ— ';
      }

      footer {
        text-align: center;
        margin-top: 32px;
        padding-top: 16px;
        border-top: 1px solid var(--border-subtle);
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        color: var(--text-muted);
      }

      footer a {
        color: var(--accent-cyan);
        text-decoration: none;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      IP åœ°å€å·¥å…·
    </nav>
    <div class="bg-grid"></div>

    <div class="container">
      <a href="../../index.html" class="back-link">â† è¿”å›</a>
      <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>

      <h1>IP åœ°å€å·¥å…·</h1>
      <p class="desc">IP åœ°å€åˆ†æã€å­ç½‘è®¡ç®—ã€CIDR è½¬æ¢ç­‰ç½‘ç»œå·¥å…·</p>

      <div class="card">
        <div class="input-section">
          <label>IP åœ°å€ / CIDR</label>
          <div class="ip-input-group">
            <input
              type="text"
              id="input"
              placeholder="192.168.1.1 æˆ– 192.168.1.0/24"
              value="192.168.1.1"
            />
            <button id="btnAnalyze" class="primary">åˆ†æ</button>
          </div>
        </div>

        <div class="options-grid">
          <div class="option-group">
            <label>è½¬æ¢ç±»å‹</label>
            <select id="conversionType">
              <option value="auto">è‡ªåŠ¨æ£€æµ‹</option>
              <option value="ipv4">IPv4</option>
              <option value="ipv6">IPv6</option>
              <option value="cidr">CIDR è®¡ç®—</option>
            </select>
          </div>
          <div class="option-group">
            <label>å­ç½‘æ©ç ä½æ•°</label>
            <input type="number" id="subnetBits" value="24" min="0" max="32" />
          </div>
          <div class="option-group">
            <label>æ ¼å¼</label>
            <select id="outputFormat">
              <option value="decimal">åè¿›åˆ¶</option>
              <option value="binary">äºŒè¿›åˆ¶</option>
              <option value="hex">åå…­è¿›åˆ¶</option>
            </select>
          </div>
        </div>

        <div class="results-grid" id="resultsGrid"></div>

        <div class="subnet-info" id="subnetInfo" style="display: none">
          <h3>å­ç½‘ä¿¡æ¯</h3>
          <div class="subnet-details" id="subnetDetails"></div>
        </div>

        <div class="binary-view" id="binaryView" style="display: none">
          <div class="binary-label">äºŒè¿›åˆ¶è¡¨ç¤º</div>
          <div class="binary-content" id="binaryContent"></div>
        </div>

        <div class="actions">
          <button id="btnCopy">å¤åˆ¶ç»“æœ</button>
          <button id="btnPaste">ç²˜è´´ IP</button>
          <button id="btnRandom">éšæœº IP</button>
          <button id="btnClear">æ¸…ç©º</button>
        </div>

        <div id="status" class="status"></div>
      </div>

      <footer>
        <a href="https://github.com/chicogong/html-tools" target="_blank">GitHub</a>
        Â· çº¯å‰ç«¯ Â· æ— æœåŠ¡å™¨ Â·
        <a href="../../index.html">WebUtils</a>
      </footer>
    </div>

    <script>
      const inputEl = document.getElementById('input');
      const conversionTypeEl = document.getElementById('conversionType');
      const subnetBitsEl = document.getElementById('subnetBits');
      const outputFormatEl = document.getElementById('outputFormat');
      const resultsGridEl = document.getElementById('resultsGrid');
      const subnetInfoEl = document.getElementById('subnetInfo');
      const subnetDetailsEl = document.getElementById('subnetDetails');
      const binaryViewEl = document.getElementById('binaryView');
      const binaryContentEl = document.getElementById('binaryContent');
      const statusEl = document.getElementById('status');
      const LS_KEY = 'ip_tools_input_v1';

      function isValidIPv4(ip) {
        const ipv4Regex =
          /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
        return ipv4Regex.test(ip);
      }

      function isValidIPv6(ip) {
        const ipv6Regex =
          /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;
        return ipv6Regex.test(ip);
      }

      function isValidCIDR(cidr) {
        const cidrRegex =
          /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/([0-9]|[12][0-9]|3[0-2])$/;
        return cidrRegex.test(cidr);
      }

      function ipToDecimal(ip) {
        const parts = ip.split('.').map(Number);
        return (parts[0] << 24) + (parts[1] << 16) + (parts[2] << 8) + parts[3];
      }

      function decimalToIP(decimal) {
        return [
          (decimal >> 24) & 0xff,
          (decimal >> 16) & 0xff,
          (decimal >> 8) & 0xff,
          decimal & 0xff
        ].join('.');
      }

      function ipToBinary(ip) {
        const parts = ip.split('.').map(Number);
        return parts.map((part) => part.toString(2).padStart(8, '0')).join('.');
      }

      function calculateSubnet(ip, bits) {
        const decimalIP = ipToDecimal(ip);
        const mask = (0xffffffff << (32 - bits)) >>> 0;
        const network = decimalIP & mask;
        const broadcast = network | (~mask >>> 0);
        const firstUsable = network + 1;
        const lastUsable = broadcast - 1;
        const totalHosts = Math.pow(2, 32 - bits);
        const usableHosts = Math.max(0, totalHosts - 2);

        return {
          network: decimalToIP(network),
          broadcast: decimalToIP(broadcast),
          firstUsable: decimalToIP(firstUsable),
          lastUsable: decimalToIP(lastUsable),
          mask: decimalToIP(mask),
          maskBits: bits,
          totalHosts: totalHosts,
          usableHosts: usableHosts
        };
      }

      function analyzeIP() {
        const input = inputEl.value.trim();
        if (!input) {
          showStatus('è¯·è¾“å…¥ IP åœ°å€', 'error');
          return;
        }

        let ip = input;
        let cidrBits = 32;
        let isCIDR = false;

        if (isValidCIDR(input)) {
          const [ipPart, bits] = input.split('/');
          ip = ipPart;
          cidrBits = parseInt(bits);
          isCIDR = true;
        } else if (!isValidIPv4(ip) && !isValidIPv6(ip)) {
          showStatus('IP åœ°å€æ ¼å¼æ— æ•ˆ', 'error');
          return;
        }

        subnetBitsEl.value = cidrBits;

        const isIPv4 = isValidIPv4(ip);
        const isIPv6 = isValidIPv6(ip);
        const ipType = isIPv4 ? 'IPv4' : isIPv6 ? 'IPv6' : 'æœªçŸ¥';

        resultsGridEl.innerHTML = '';
        subnetInfoEl.style.display = 'none';
        subnetDetailsEl.innerHTML = '';
        binaryViewEl.style.display = 'none';

        const results = [];

        if (isIPv4) {
          const decimal = ipToDecimal(ip);
          const binary = ipToBinary(ip);
          const hex = decimal.toString(16).toUpperCase().padStart(8, '0');
          const hexFormatted = hex.match(/.{2}/g).join(':');

          results.push({ title: 'IP ç±»å‹', value: ipType, className: 'ipv4' });
          results.push({ title: 'åè¿›åˆ¶', value: decimal.toLocaleString() });
          results.push({ title: 'äºŒè¿›åˆ¶', value: binary });
          results.push({ title: 'åå…­è¿›åˆ¶', value: '0x' + hex });

          binaryViewEl.style.display = 'block';
          binaryContentEl.textContent = binary;

          if (conversionTypeEl.value === 'cidr' || isCIDR) {
            const subnet = calculateSubnet(ip, cidrBits);
            subnetInfoEl.style.display = 'block';

            const subnetDetails = [
              { label: 'ç½‘ç»œåœ°å€', value: subnet.network },
              { label: 'å¹¿æ’­åœ°å€', value: subnet.broadcast },
              { label: 'å¯ç”¨èŒƒå›´', value: `${subnet.firstUsable} - ${subnet.lastUsable}` },
              { label: 'å­ç½‘æ©ç ', value: `${subnet.mask} (/${subnet.maskBits})` },
              { label: 'æ€»ä¸»æœºæ•°', value: subnet.totalHosts.toLocaleString() },
              { label: 'å¯ç”¨ä¸»æœºæ•°', value: subnet.usableHosts.toLocaleString() }
            ];

            subnetDetailsEl.innerHTML = '';
            subnetDetails.forEach(function (detail) {
              const item = document.createElement('div');
              item.className = 'subnet-item';
              item.innerHTML =
                '<div class="subnet-label">' +
                detail.label +
                '</div>' +
                '<div class="subnet-value">' +
                detail.value +
                '</div>';
              subnetDetailsEl.appendChild(item);
            });
          }
        } else if (isIPv6) {
          results.push({ title: 'IP ç±»å‹', value: ipType, className: 'ipv6' });
          results.push({ title: 'å‹ç¼©å½¢å¼', value: ip });
          results.push({ title: 'æ‰©å±•å½¢å¼', value: expandIPv6(ip) });
          results.push({ title: 'å¤‡æ³¨', value: 'IPv6 å­ç½‘è®¡ç®—æš‚ä¸æ”¯æŒ' });
        }

        results.forEach(function (result) {
          const card = document.createElement('div');
          card.className = 'result-card';
          card.innerHTML =
            '<div class="result-title">' +
            result.title +
            '</div>' +
            '<div class="result-value ' +
            (result.className || '') +
            '">' +
            result.value +
            '</div>';
          resultsGridEl.appendChild(card);
        });

        showStatus('åˆ†æå®Œæˆ', 'success');
      }

      function expandIPv6(ip) {
        const parts = ip.split(':');
        const missingParts = 8 - parts.filter((p) => p !== '').length;
        const expanded = [];

        for (let i = 0; i < parts.length; i++) {
          if (parts[i] === '') {
            for (let j = 0; j < missingParts; j++) {
              expanded.push('0000');
            }
          } else {
            expanded.push(parts[i].padStart(4, '0'));
          }
        }

        return expanded.join(':');
      }

      function showStatus(msg, type) {
        statusEl.textContent = msg;
        statusEl.className = 'status ' + (type || '');
      }

      function randomIPv4() {
        const parts = [];
        for (let i = 0; i < 4; i++) {
          parts.push(Math.floor(Math.random() * 256));
        }
        inputEl.value = parts.join('.');
        analyzeIP();
      }

      function reset() {
        inputEl.value = '192.168.1.1';
        conversionTypeEl.value = 'auto';
        subnetBitsEl.value = '24';
        outputFormatEl.value = 'decimal';
        resultsGridEl.innerHTML = '';
        subnetInfoEl.style.display = 'none';
        subnetDetailsEl.innerHTML = '';
        binaryViewEl.style.display = 'none';
        binaryContentEl.textContent = '';
        statusEl.textContent = '';
        localStorage.removeItem(LS_KEY);
      }

      document.getElementById('btnAnalyze').onclick = analyzeIP;

      document.getElementById('btnCopy').onclick = async function () {
        const results = [];
        resultsGridEl.querySelectorAll('.result-card').forEach(function (card) {
          const title = card.querySelector('.result-title').textContent;
          const value = card.querySelector('.result-value').textContent;
          results.push(`${title}: ${value}`);
        });

        if (subnetInfoEl.style.display !== 'none') {
          results.push('');
          results.push('å­ç½‘ä¿¡æ¯:');
          subnetDetailsEl.querySelectorAll('.subnet-item').forEach(function (item) {
            const label = item.querySelector('.subnet-label').textContent;
            const value = item.querySelector('.subnet-value').textContent;
            results.push(`  ${label}: ${value}`);
          });
        }

        const output = results.join('\n');

        try {
          await navigator.clipboard.writeText(output);
          showStatus('å·²å¤åˆ¶', 'success');
        } catch (e) {
          showStatus('å¤åˆ¶å¤±è´¥', 'error');
        }
      };

      document.getElementById('btnPaste').onclick = async function () {
        try {
          const text = await navigator.clipboard.readText();
          inputEl.value = text.trim();
          showStatus('å·²ç²˜è´´', 'success');
        } catch (e) {
          showStatus('æ— æ³•è®¿é—®å‰ªè´´æ¿', 'error');
        }
      };

      document.getElementById('btnRandom').onclick = randomIPv4;

      document.getElementById('btnClear').onclick = reset;

      inputEl.addEventListener('input', function () {
        localStorage.setItem(LS_KEY, this.value);
      });

      [conversionTypeEl, subnetBitsEl, outputFormatEl].forEach(function (el) {
        el.addEventListener('change', analyzeIP);
      });

      const saved = localStorage.getItem(LS_KEY);
      if (saved) inputEl.value = saved;

      analyzeIP();
      window.toggleTheme = function () {
        const html = document.documentElement;
        const btn = document.querySelector('.theme-toggle');
        const next = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
        html.setAttribute('data-theme', next);
        btn.textContent = next === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
        localStorage.setItem('theme', next);
      };
      (function () {
        const saved = localStorage.getItem('theme');
        if (saved) {
          document.documentElement.setAttribute('data-theme', saved);
          const btn = document.querySelector('.theme-toggle');
          if (btn) btn.textContent = saved === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
        }
      })();
    </script>
  </body>
</html>
