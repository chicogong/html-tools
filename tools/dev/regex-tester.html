<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨ - HTML Tools</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --primary: #ec4899;
            --primary-hover: #db2777;
            --success: #22c55e;
            --match-bg: rgba(236, 72, 153, 0.2);
        }

  <!-- JSON-LD BreadcrumbList Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "é¦–é¡µ",
        "item": "https://tools.realtime-ai.chat/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "å¼€å‘å·¥å…·",
        "item": "https://tools.realtime-ai.chat/#dev"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "æ­£åˆ™æµ‹è¯•å™¨",
        "item": "https://tools.realtime-ai.chat/tools/dev/regex-tester.html"
      }
    ]
  }
  </script>

  <style>
    :root {
      --bg: #f8f9fa;
      --card-bg: #fff;
      --text: #212529;
      --text-muted: #6c757d;
      --border: #dee2e6;
      --primary: #0d6efd;
      --primary-hover: #0b5ed7;
      --success: #198754;
      --danger: #dc3545;
      --warning: #fd7e14;
      --highlight: #fff3cd;
      --highlight-group: #d1ecf1;
      --shadow: 0 2px 8px rgb(0,0,0,0.08);
      --radius: 8px;
    }
    [data-theme="dark"] {
      --bg: #0a0a0f;
      --card-bg: #1a1a24;
      --text: #e8e8ed;
      --text-muted: #8888a0;
      --border: #2a2a3a;
      --highlight: #3d3d00;
      --highlight-group: #1a3a4a;
      --shadow: 0 2px 8px rgb(0,0,0,0.3);
    }
    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid var(--border);
      background: var(--card-bg);
      cursor: pointer;
      font-size: 1.2rem;
      z-index: 100;
      transition: all 0.2s;
    }
    .theme-toggle:hover {
      transform: scale(1.1);
    }
    * { box-sizing: border-box; }

        [data-theme="light"] {
            --card-bg: #ffffff;
            --border-color: #e2e8f0;
            --editor-bg: #f8fafc;
        }

        body { padding: 2rem; min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; }

    /* Breadcrumb Navigation */
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
      font-size: 0.9rem;
      flex-wrap: wrap;
    }

    .breadcrumb a {
      color: var(--primary);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .breadcrumb a:hover {
      text-decoration: underline;
    }

    .breadcrumb-separator {
      color: var(--text-muted);
      user-select: none;
    }

    .breadcrumb-current {
      color: var(--text);
      font-weight: 500;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 16px;
      color: var(--primary);
      text-decoration: none;
      font-size: 0.9rem;
    }

        .theme-toggle { background: none; border: 1px solid var(--border-color); cursor: pointer; padding: 0.5rem; border-radius: 0.5rem; font-size: 1.25rem; width: 42px; height: 42px; }

        .card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; }
        .card-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; }

        .regex-input-wrapper { display: flex; align-items: center; background: var(--editor-bg); border: 2px solid var(--border-color); border-radius: 0.5rem; padding: 0.5rem; font-family: monospace; }
        .regex-input-wrapper:focus-within { border-color: var(--primary); }
        .regex-delimiter { color: var(--primary); font-size: 1.25rem; padding: 0 0.5rem; }
        .regex-input-wrapper input { flex: 1; border: none; background: none; font-family: inherit; font-size: 1rem; padding: 0.5rem; color: inherit; }
        .regex-input-wrapper input:focus { outline: none; }
        .flags-input { width: 60px; text-align: center; border-left: 1px solid var(--border-color); }

        .flags-toggles { display: flex; gap: 0.5rem; margin-top: 0.75rem; flex-wrap: wrap; }
        .flag-btn { padding: 0.375rem 0.75rem; border: 1px solid var(--border-color); border-radius: 0.375rem; background: none; cursor: pointer; font-size: 0.8125rem; font-family: monospace; }
        .flag-btn:hover { border-color: var(--primary); }
        .flag-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        textarea { width: 100%; padding: 1rem; border: 1px solid var(--border-color); border-radius: 0.5rem; background: var(--editor-bg); color: inherit; font-family: monospace; font-size: 0.875rem; line-height: 1.8; resize: vertical; min-height: 150px; }
        textarea:focus { outline: none; border-color: var(--primary); }

        .test-output { padding: 1rem; background: var(--editor-bg); border-radius: 0.5rem; font-family: monospace; font-size: 0.875rem; line-height: 1.8; min-height: 150px; white-space: pre-wrap; word-break: break-all; }
        .match-highlight { background: var(--match-bg); border-bottom: 2px solid var(--primary); border-radius: 2px; padding: 0 2px; }

        .match-card { background: var(--editor-bg); border-radius: 0.5rem; padding: 1rem; margin-top: 1rem; }
        .match-summary { display: flex; gap: 1.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
        .match-stat { display: flex; align-items: center; gap: 0.5rem; }
        .match-stat-value { font-size: 1.5rem; font-weight: 700; color: var(--primary); }
        .match-stat-label { font-size: 0.875rem; color: var(--muted-color); }

        .match-item { display: flex; gap: 1rem; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem; margin-bottom: 0.5rem; font-size: 0.875rem; }
        .match-index { background: var(--primary); color: white; padding: 0.125rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; font-weight: 600; height: fit-content; }
        .match-content { flex: 1; }
        .match-value { font-family: monospace; word-break: break-all; }

        .presets-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.5rem; margin-top: 1rem; }
        .preset-btn { padding: 0.5rem 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem; background: none; cursor: pointer; text-align: left; }
        .preset-btn:hover { border-color: var(--primary); background: rgba(236, 72, 153, 0.05); }
        .preset-name { font-size: 0.875rem; font-weight: 500; }
        .preset-pattern { font-size: 0.75rem; color: var(--muted-color); font-family: monospace; margin-top: 0.25rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        .error-msg { color: #ef4444; background: rgba(239, 68, 68, 0.1); padding: 0.75rem 1rem; border-radius: 0.5rem; margin-top: 0.5rem; font-size: 0.875rem; }

        .replace-section { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color); }
        .replace-input { width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem; font-family: monospace; font-size: 0.875rem; background: var(--editor-bg); color: inherit; }
        .replace-input:focus { outline: none; border-color: var(--primary); }

        .info-box { background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 0.5rem; padding: 1rem; font-size: 0.875rem; }
        .info-box h4 { margin: 0 0 0.5rem 0; color: #3b82f6; }
    </style>
</head>
<body>
  <div class="container">
    <nav class="breadcrumb" aria-label="Breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span class="breadcrumb-separator">/</span>
      <a href="../../index.html#dev">å¼€å‘å·¥å…·</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">æ­£åˆ™æµ‹è¯•å™¨</span>
    </nav>
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">â˜€ï¸</button>
    <h1>æ­£åˆ™æµ‹è¯•å™¨</h1>
    <p class="desc">æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®æ—¶é«˜äº®åŒ¹é…ç»“æœï¼Œå±•ç¤ºæ•è·ç»„</p>

        <div class="card">
            <div class="card-title">ğŸ“ æ­£åˆ™è¡¨è¾¾å¼</div>
            <div class="regex-input-wrapper">
                <span class="regex-delimiter">/</span>
                <input type="text" id="regexInput" placeholder="è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼..." oninput="testRegex()">
                <span class="regex-delimiter">/</span>
                <input type="text" id="flagsInput" class="flags-input" value="g" placeholder="gim" oninput="testRegex()">
            </div>
            <div class="flags-toggles">
                <button class="flag-btn active" data-flag="g" onclick="toggleFlag('g')">g å…¨å±€</button>
                <button class="flag-btn" data-flag="i" onclick="toggleFlag('i')">i å¿½ç•¥å¤§å°å†™</button>
                <button class="flag-btn" data-flag="m" onclick="toggleFlag('m')">m å¤šè¡Œ</button>
                <button class="flag-btn" data-flag="s" onclick="toggleFlag('s')">s ç‚¹åŒ¹é…æ¢è¡Œ</button>
            </div>
            <div id="regexError" class="error-msg" style="display: none;"></div>
        </div>

        <div class="card">
            <div class="card-title">ğŸ“„ æµ‹è¯•æ–‡æœ¬</div>
            <textarea id="testInput" placeholder="è¾“å…¥è¦æµ‹è¯•çš„æ–‡æœ¬..." oninput="testRegex()">Hello World! æˆ‘çš„é‚®ç®±æ˜¯ test@example.comï¼Œç”µè¯æ˜¯ 13812345678ã€‚
å¦ä¸€ä¸ªé‚®ç®±: hello@test.orgï¼Œå¤‡ç”¨ç”µè¯ 139-8765-4321ã€‚
IP åœ°å€: 192.168.1.1ï¼Œç½‘å€: https://www.example.com</textarea>
            <div class="replace-section">
                <label style="font-size: 0.875rem; font-weight: 500;">æ›¿æ¢ä¸º:</label>
                <input type="text" id="replaceInput" class="replace-input" placeholder="æ›¿æ¢æ–‡æœ¬ (æ”¯æŒ $1, $2 æ•è·ç»„å¼•ç”¨)" oninput="testRegex()">
            </div>
        </div>

        <div class="card">
            <div class="card-title">âœ¨ åŒ¹é…ç»“æœ</div>
            <div class="test-output" id="highlightOutput"></div>
            <div class="match-card" id="matchCard" style="display: none;">
                <div class="match-summary">
                    <div class="match-stat"><span class="match-stat-value" id="matchCount">0</span><span class="match-stat-label">åŒ¹é…æ•°</span></div>
                </div>
                <div id="matchList"></div>
            </div>
        </div>

        <div class="card" id="replaceCard" style="display: none;">
            <div class="card-title">ğŸ”„ æ›¿æ¢ç»“æœ</div>
            <div class="test-output" id="replaceOutput"></div>
        </div>

        <div class="card">
            <div class="card-title">ğŸ“š å¸¸ç”¨æ­£åˆ™é¢„è®¾</div>
            <div class="presets-grid" id="presetsGrid"></div>
        </div>

        <div class="card info-box">
            <h4>ğŸ’¡ æ­£åˆ™è¡¨è¾¾å¼é€ŸæŸ¥</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-top: 0.5rem;">
                <div><code>.</code> ä»»æ„å­—ç¬¦ | <code>\d</code> æ•°å­— | <code>\w</code> å•è¯å­—ç¬¦ | <code>\s</code> ç©ºç™½</div>
                <div><code>*</code> 0+ | <code>+</code> 1+ | <code>?</code> 0æˆ–1 | <code>{n,m}</code> nåˆ°mä¸ª</div>
                <div><code>^</code> å¼€å¤´ | <code>$</code> ç»“å°¾ | <code>\b</code> å•è¯è¾¹ç•Œ</div>
                <div><code>()</code> æ•è·ç»„ | <code>(?:)</code> éæ•è·ç»„ | <code>[abc]</code> å­—ç¬¦ç±»</div>
            </div>
        </div>
    </div>

    <script>
        const presets = [
            { name: 'é‚®ç®±åœ°å€', pattern: '[\\w.-]+@[\\w.-]+\\.\\w+', flags: 'gi' },
            { name: 'æ‰‹æœºå·ç ', pattern: '1[3-9]\\d{9}', flags: 'g' },
            { name: 'URL é“¾æ¥', pattern: 'https?://[\\w.-]+(?:/[\\w./-]*)?', flags: 'gi' },
            { name: 'IPv4 åœ°å€', pattern: '\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}', flags: 'g' },
            { name: 'æ—¥æœŸ YYYY-MM-DD', pattern: '\\d{4}-\\d{2}-\\d{2}', flags: 'g' },
            { name: 'åå…­è¿›åˆ¶é¢œè‰²', pattern: '#[0-9A-Fa-f]{3,8}', flags: 'gi' },
            { name: 'HTML æ ‡ç­¾', pattern: '<[^>]+>', flags: 'g' },
            { name: 'ä¸­æ–‡å­—ç¬¦', pattern: '[\\u4e00-\\u9fa5]+', flags: 'g' },
            { name: 'æ•°å­—å«å°æ•°', pattern: '-?\\d+(?:\\.\\d+)?', flags: 'g' },
            { name: 'èº«ä»½è¯å·', pattern: '\\d{17}[\\dXx]', flags: 'g' },
            { name: 'ç”¨æˆ·å', pattern: '[a-zA-Z]\\w{2,15}', flags: 'g' },
            { name: 'å¯†ç å¼ºåº¦', pattern: '^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$', flags: '' }
        ];

        function toggleTheme() {
            const html = document.documentElement;
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.querySelector('.theme-toggle').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.querySelector('.theme-toggle').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        function toggleFlag(flag) {
            const flagsInput = document.getElementById('flagsInput');
            let flags = flagsInput.value;
            const btn = document.querySelector('.flag-btn[data-flag="' + flag + '"]');
            if (flags.includes(flag)) {
                flags = flags.replace(flag, '');
                btn.classList.remove('active');
            } else {
                flags += flag;
                btn.classList.add('active');
            }
            flagsInput.value = flags;
            testRegex();
        }

        function updateFlagButtons() {
            const flags = document.getElementById('flagsInput').value;
            document.querySelectorAll('.flag-btn').forEach(btn => {
                btn.classList.toggle('active', flags.includes(btn.dataset.flag));
            });
        }

        function testRegex() {
            const pattern = document.getElementById('regexInput').value;
            const flags = document.getElementById('flagsInput').value;
            const testText = document.getElementById('testInput').value;
            const replaceText = document.getElementById('replaceInput').value;
            const errorDiv = document.getElementById('regexError');
            const highlightOutput = document.getElementById('highlightOutput');
            const matchCard = document.getElementById('matchCard');
            const matchList = document.getElementById('matchList');
            const replaceCard = document.getElementById('replaceCard');
            const replaceOutput = document.getElementById('replaceOutput');

            updateFlagButtons();
            errorDiv.style.display = 'none';

            if (!pattern) {
                highlightOutput.textContent = testText;
                matchCard.style.display = 'none';
                replaceCard.style.display = 'none';
                return;
            }

            let regex;
            try {
                regex = new RegExp(pattern, flags);
            } catch (e) {
                errorDiv.textContent = 'æ­£åˆ™é”™è¯¯: ' + e.message;
                errorDiv.style.display = 'block';
                highlightOutput.textContent = testText;
                matchCard.style.display = 'none';
                replaceCard.style.display = 'none';
                return;
            }

            // é«˜äº®
            highlightOutput.textContent = '';
            let lastIndex = 0;
            const matches = [];
            let match;
            const globalRegex = new RegExp(pattern, flags.includes('g') ? flags : flags + 'g');

            while ((match = globalRegex.exec(testText)) !== null) {
                matches.push({ value: match[0], index: match.index, groups: match.slice(1) });
                if (!flags.includes('g')) break;
            }

            if (matches.length > 0) {
                matches.forEach(m => {
                    if (m.index > lastIndex) {
                        highlightOutput.appendChild(document.createTextNode(testText.substring(lastIndex, m.index)));
                    }
                    const span = document.createElement('span');
                    span.className = 'match-highlight';
                    span.textContent = m.value;
                    highlightOutput.appendChild(span);
                    lastIndex = m.index + m.value.length;
                });
                if (lastIndex < testText.length) {
                    highlightOutput.appendChild(document.createTextNode(testText.substring(lastIndex)));
                }

                matchCard.style.display = 'block';
                document.getElementById('matchCount').textContent = matches.length;

                matchList.textContent = '';
                matches.slice(0, 30).forEach((m, i) => {
                    const item = document.createElement('div');
                    item.className = 'match-item';
                    const idx = document.createElement('span');
                    idx.className = 'match-index';
                    idx.textContent = '#' + (i + 1);
                    const content = document.createElement('div');
                    content.className = 'match-content';
                    const val = document.createElement('div');
                    val.className = 'match-value';
                    val.textContent = '"' + m.value + '" (ä½ç½®: ' + m.index + ')';
                    content.appendChild(val);
                    if (m.groups.length > 0) {
                        const groups = document.createElement('div');
                        groups.style.fontSize = '0.8125rem';
                        groups.style.color = 'var(--muted-color)';
                        groups.style.marginTop = '0.25rem';
                        m.groups.forEach((g, gi) => {
                            groups.appendChild(document.createTextNode('$' + (gi + 1) + ': ' + (g || 'ç©º') + ' '));
                        });
                        content.appendChild(groups);
                    }
                    item.appendChild(idx);
                    item.appendChild(content);
                    matchList.appendChild(item);
                });
            } else {
                highlightOutput.textContent = testText;
                matchCard.style.display = 'none';
            }

            // æ›¿æ¢
            if (replaceText && matches.length > 0) {
                replaceCard.style.display = 'block';
                replaceOutput.textContent = testText.replace(regex, replaceText);
            } else {
                replaceCard.style.display = 'none';
            }
        }

        function loadPreset(pattern, flags) {
            document.getElementById('regexInput').value = pattern;
            document.getElementById('flagsInput').value = flags;
            testRegex();
        }

        function renderPresets() {
            const grid = document.getElementById('presetsGrid');
            presets.forEach(p => {
                const btn = document.createElement('button');
                btn.className = 'preset-btn';
                btn.onclick = function() { loadPreset(p.pattern, p.flags); };
                const name = document.createElement('div');
                name.className = 'preset-name';
                name.textContent = p.name;
                const pat = document.createElement('div');
                pat.className = 'preset-pattern';
                pat.textContent = '/' + p.pattern + '/' + p.flags;
                btn.appendChild(name);
                btn.appendChild(pat);
                grid.appendChild(btn);
            });
        }

        initTheme();
        renderPresets();
        loadPreset('[\\w.-]+@[\\w.-]+\\.\\w+', 'gi');
    </script>
</body>
</html>
