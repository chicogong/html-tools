<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È¢úËâ≤ÈÄâÊã©Âô® - WebUtils</title>
    <style>
        :root {
            --bg-color: #f5f5f5;
            --card-bg: #fff;
            --text-color: #333;
            --border-color: #e0e0e0;
            --primary-color: #e91e63;
            --primary-hover: #c2185b;
            --shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #1a1a1a;
                --card-bg: #2d2d2d;
                --text-color: #e0e0e0;
                --border-color: #444;
                --shadow: 0 2px 12px rgba(0,0,0,0.3);
            }
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 8px;
            font-size: 24px;
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 24px;
            font-size: 14px;
        }
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        .color-preview-large {
            width: 100%;
            height: 150px;
            border-radius: 12px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--border-color);
        }
        .color-preview-large::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, #ccc 25%, transparent 25%),
                        linear-gradient(-45deg, #ccc 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #ccc 75%),
                        linear-gradient(-45deg, transparent 75%, #ccc 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0;
            z-index: 0;
        }
        .color-fill {
            position: absolute;
            inset: 0;
            z-index: 1;
        }
        .picker-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .picker-left {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .native-picker {
            width: 100%;
            height: 200px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            padding: 0;
        }
        .slider-group {
            margin-bottom: 16px;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .slider-value {
            font-weight: 600;
            font-family: monospace;
        }
        .slider {
            width: 100%;
            height: 12px;
            border-radius: 6px;
            -webkit-appearance: none;
            outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 2px solid #333;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        #sliderR { background: linear-gradient(to right, #000, #f00); }
        #sliderG { background: linear-gradient(to right, #000, #0f0); }
        #sliderB { background: linear-gradient(to right, #000, #00f); }
        #sliderH { background: linear-gradient(to right, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00); }
        #sliderS { background: linear-gradient(to right, #888, var(--primary-color)); }
        #sliderL { background: linear-gradient(to right, #000, #888, #fff); }
        #sliderA { background: linear-gradient(to right, transparent, var(--primary-color)); }
        .format-section {
            margin-top: 20px;
        }
        .format-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            padding: 12px;
            background: var(--bg-color);
            border-radius: 8px;
        }
        .format-label {
            min-width: 50px;
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
        }
        .format-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text-color);
            font-family: monospace;
            font-size: 14px;
        }
        .format-copy {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: var(--primary-color);
            color: white;
            font-size: 12px;
            cursor: pointer;
        }
        .format-copy:hover {
            background: var(--primary-hover);
        }
        .palette-section {
            margin-top: 20px;
        }
        .section-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #888;
        }
        .palette-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
        }
        .palette-color {
            aspect-ratio: 1;
            border-radius: 6px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        .palette-color:hover {
            transform: scale(1.1);
            border-color: var(--text-color);
        }
        .history-section {
            margin-top: 20px;
        }
        .history-colors {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .history-color {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid var(--border-color);
            transition: all 0.2s;
        }
        .history-color:hover {
            transform: scale(1.1);
        }
        .contrast-section {
            margin-top: 20px;
            padding: 16px;
            background: var(--bg-color);
            border-radius: 8px;
        }
        .contrast-preview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 12px;
        }
        .contrast-box {
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }
        .contrast-text {
            font-size: 18px;
            font-weight: 600;
        }
        .contrast-ratio {
            font-size: 12px;
            margin-top: 8px;
            opacity: 0.8;
        }
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }
        .tab {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 13px;
            cursor: pointer;
        }
        .tab.active {
            background: var(--primary-color);
            color: white;
        }
        .tab-panel {
            display: none;
        }
        .tab-panel.active {
            display: block;
        }
        @media (max-width: 600px) {
            .picker-section {
                grid-template-columns: 1fr;
            }
            .palette-grid {
                grid-template-columns: repeat(8, 1fr);
            }
        }
    
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
    <nav class="breadcrumb"><a href="../../index.html">È¶ñÈ°µ</a><span>‚Ä∫</span><a href="../../index.html#life">ÁîüÊ¥ªÂ∑•ÂÖ∑</a><span>‚Ä∫</span>È¢úËâ≤ÈÄâÊã©Âô®</nav>
    <div class="container">
        <h1>üé® È¢úËâ≤ÈÄâÊã©Âô®</h1>
        <p class="subtitle">ÈÄâÊã©È¢úËâ≤ÔºåËé∑Âèñ HEX„ÄÅRGB„ÄÅHSL Á≠âÊ†ºÂºè‰ª£Á†Å</p>

        <div class="card">
            <div class="color-preview-large">
                <div class="color-fill" id="colorPreview"></div>
            </div>

            <div class="picker-section">
                <div class="picker-left">
                    <input type="color" class="native-picker" id="nativePicker" value="#e91e63" oninput="onNativePickerChange()">
                </div>
                <div class="picker-right">
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('rgb')">RGB</button>
                        <button class="tab" onclick="switchTab('hsl')">HSL</button>
                    </div>
                    
                    <div class="tab-panel active" id="rgbPanel">
                        <div class="slider-group">
                            <div class="slider-label">
                                <span>R (Á∫¢)</span>
                                <span class="slider-value" id="rValue">233</span>
                            </div>
                            <input type="range" class="slider" id="sliderR" min="0" max="255" value="233" oninput="onRGBChange()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-label">
                                <span>G (Áªø)</span>
                                <span class="slider-value" id="gValue">30</span>
                            </div>
                            <input type="range" class="slider" id="sliderG" min="0" max="255" value="30" oninput="onRGBChange()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-label">
                                <span>B (Ëìù)</span>
                                <span class="slider-value" id="bValue">99</span>
                            </div>
                            <input type="range" class="slider" id="sliderB" min="0" max="255" value="99" oninput="onRGBChange()">
                        </div>
                    </div>

                    <div class="tab-panel" id="hslPanel">
                        <div class="slider-group">
                            <div class="slider-label">
                                <span>H (Ëâ≤Áõ∏)</span>
                                <span class="slider-value" id="hValue">340</span>
                            </div>
                            <input type="range" class="slider" id="sliderH" min="0" max="360" value="340" oninput="onHSLChange()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-label">
                                <span>S (È•±ÂíåÂ∫¶)</span>
                                <span class="slider-value" id="sValue">82</span>
                            </div>
                            <input type="range" class="slider" id="sliderS" min="0" max="100" value="82" oninput="onHSLChange()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-label">
                                <span>L (‰∫ÆÂ∫¶)</span>
                                <span class="slider-value" id="lValue">52</span>
                            </div>
                            <input type="range" class="slider" id="sliderL" min="0" max="100" value="52" oninput="onHSLChange()">
                        </div>
                    </div>

                    <div class="slider-group">
                        <div class="slider-label">
                            <span>A (ÈÄèÊòéÂ∫¶)</span>
                            <span class="slider-value" id="aValue">100%</span>
                        </div>
                        <input type="range" class="slider" id="sliderA" min="0" max="100" value="100" oninput="onAlphaChange()">
                    </div>
                </div>
            </div>

            <div class="format-section">
                <div class="format-item">
                    <span class="format-label">HEX</span>
                    <input type="text" class="format-input" id="hexInput" value="#E91E63" oninput="onHexInput()">
                    <button class="format-copy" onclick="copyFormat('hex')">Â§çÂà∂</button>
                </div>
                <div class="format-item">
                    <span class="format-label">RGB</span>
                    <input type="text" class="format-input" id="rgbInput" value="rgb(233, 30, 99)" readonly>
                    <button class="format-copy" onclick="copyFormat('rgb')">Â§çÂà∂</button>
                </div>
                <div class="format-item">
                    <span class="format-label">RGBA</span>
                    <input type="text" class="format-input" id="rgbaInput" value="rgba(233, 30, 99, 1)" readonly>
                    <button class="format-copy" onclick="copyFormat('rgba')">Â§çÂà∂</button>
                </div>
                <div class="format-item">
                    <span class="format-label">HSL</span>
                    <input type="text" class="format-input" id="hslInput" value="hsl(340, 82%, 52%)" readonly>
                    <button class="format-copy" onclick="copyFormat('hsl')">Â§çÂà∂</button>
                </div>
            </div>

            <div class="contrast-section">
                <div class="section-title">ÂØπÊØîÂ∫¶È¢ÑËßà</div>
                <div class="contrast-preview">
                    <div class="contrast-box" id="contrastWhite">
                        <div class="contrast-text">ÁôΩËâ≤ÊñáÂ≠ó</div>
                        <div class="contrast-ratio" id="ratioWhite">ÂØπÊØîÂ∫¶: -</div>
                    </div>
                    <div class="contrast-box" id="contrastBlack">
                        <div class="contrast-text">ÈªëËâ≤ÊñáÂ≠ó</div>
                        <div class="contrast-ratio" id="ratioBlack">ÂØπÊØîÂ∫¶: -</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-title">üé≠ È¢ÑËÆæË∞ÉËâ≤Êùø</div>
            <div class="palette-grid" id="paletteGrid"></div>
        </div>

        <div class="card">
            <div class="section-title">üìú ÂéÜÂè≤È¢úËâ≤</div>
            <div class="history-colors" id="historyColors">
                <div style="color: #888; font-size: 14px;">ÈÄâÊã©È¢úËâ≤Âêé‰ºöËá™Âä®‰øùÂ≠òÂà∞ÂéÜÂè≤</div>
            </div>
        </div>
    </div>

    <script>
        // È¢ÑËÆæË∞ÉËâ≤Êùø
        const palette = [
            '#F44336', '#E91E63', '#9C27B0', '#673AB7', '#3F51B5',
            '#2196F3', '#03A9F4', '#00BCD4', '#009688', '#4CAF50',
            '#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800',
            '#FF5722', '#795548', '#9E9E9E', '#607D8B', '#000000',
            '#FFCDD2', '#F8BBD9', '#E1BEE7', '#D1C4E9', '#C5CAE9',
            '#BBDEFB', '#B3E5FC', '#B2EBF2', '#B2DFDB', '#C8E6C9',
            '#DCEDC8', '#F0F4C3', '#FFF9C4', '#FFECB3', '#FFE0B2',
            '#FFCCBC', '#D7CCC8', '#F5F5F5', '#CFD8DC', '#FFFFFF'
        ];

        let currentColor = { r: 233, g: 30, b: 99, a: 1 };
        let history = JSON.parse(localStorage.getItem('colorHistory') || '[]');

        // ÂàùÂßãÂåñ
        function init() {
            renderPalette();
            renderHistory();
            updateAllFromRGB();
        }

        function renderPalette() {
            const grid = document.getElementById('paletteGrid');
            grid.innerHTML = palette.map(color => 
                `<div class="palette-color" style="background: ${color}" onclick="selectPaletteColor('${color}')"></div>`
            ).join('');
        }

        function renderHistory() {
            const container = document.getElementById('historyColors');
            if (history.length === 0) {
                container.innerHTML = '<div style="color: #888; font-size: 14px;">ÈÄâÊã©È¢úËâ≤Âêé‰ºöËá™Âä®‰øùÂ≠òÂà∞ÂéÜÂè≤</div>';
                return;
            }
            container.innerHTML = history.map(color => 
                `<div class="history-color" style="background: ${color}" onclick="selectPaletteColor('${color}')"></div>`
            ).join('');
        }

        function addToHistory(hex) {
            if (history.includes(hex)) {
                history = history.filter(c => c !== hex);
            }
            history.unshift(hex);
            if (history.length > 20) history.pop();
            localStorage.setItem('colorHistory', JSON.stringify(history));
            renderHistory();
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            
            if (tab === 'rgb') {
                document.querySelector('.tab:nth-child(1)').classList.add('active');
                document.getElementById('rgbPanel').classList.add('active');
            } else {
                document.querySelector('.tab:nth-child(2)').classList.add('active');
                document.getElementById('hslPanel').classList.add('active');
            }
        }

        function selectPaletteColor(hex) {
            const rgb = hexToRgb(hex);
            currentColor.r = rgb.r;
            currentColor.g = rgb.g;
            currentColor.b = rgb.b;
            updateAllFromRGB();
            addToHistory(hex);
        }

        function onNativePickerChange() {
            const hex = document.getElementById('nativePicker').value;
            const rgb = hexToRgb(hex);
            currentColor.r = rgb.r;
            currentColor.g = rgb.g;
            currentColor.b = rgb.b;
            updateAllFromRGB();
            addToHistory(hex.toUpperCase());
        }

        function onRGBChange() {
            currentColor.r = parseInt(document.getElementById('sliderR').value);
            currentColor.g = parseInt(document.getElementById('sliderG').value);
            currentColor.b = parseInt(document.getElementById('sliderB').value);
            updateAllFromRGB();
        }

        function onHSLChange() {
            const h = parseInt(document.getElementById('sliderH').value);
            const s = parseInt(document.getElementById('sliderS').value);
            const l = parseInt(document.getElementById('sliderL').value);
            const rgb = hslToRgb(h, s, l);
            currentColor.r = rgb.r;
            currentColor.g = rgb.g;
            currentColor.b = rgb.b;
            updateAllFromRGB(false);
        }

        function onAlphaChange() {
            currentColor.a = parseInt(document.getElementById('sliderA').value) / 100;
            updateFormats();
            updatePreview();
        }

        function onHexInput() {
            let hex = document.getElementById('hexInput').value.trim();
            if (!hex.startsWith('#')) hex = '#' + hex;
            
            if (/^#[0-9A-Fa-f]{6}$/.test(hex)) {
                const rgb = hexToRgb(hex);
                currentColor.r = rgb.r;
                currentColor.g = rgb.g;
                currentColor.b = rgb.b;
                updateAllFromRGB();
            }
        }

        function updateAllFromRGB(updateHSL = true) {
            // Êõ¥Êñ∞ RGB ÊªëÂùó
            document.getElementById('sliderR').value = currentColor.r;
            document.getElementById('sliderG').value = currentColor.g;
            document.getElementById('sliderB').value = currentColor.b;
            document.getElementById('rValue').textContent = currentColor.r;
            document.getElementById('gValue').textContent = currentColor.g;
            document.getElementById('bValue').textContent = currentColor.b;

            // Êõ¥Êñ∞ HSL ÊªëÂùó
            if (updateHSL) {
                const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
                document.getElementById('sliderH').value = hsl.h;
                document.getElementById('sliderS').value = hsl.s;
                document.getElementById('sliderL').value = hsl.l;
                document.getElementById('hValue').textContent = hsl.h;
                document.getElementById('sValue').textContent = hsl.s;
                document.getElementById('lValue').textContent = hsl.l;
            }

            // Êõ¥Êñ∞ÂéüÁîüÈÄâÊã©Âô®
            document.getElementById('nativePicker').value = rgbToHex(currentColor.r, currentColor.g, currentColor.b);

            updateFormats();
            updatePreview();
            updateContrast();
        }

        function updateFormats() {
            const { r, g, b, a } = currentColor;
            const hex = rgbToHex(r, g, b);
            const hsl = rgbToHsl(r, g, b);

            document.getElementById('hexInput').value = hex;
            document.getElementById('rgbInput').value = `rgb(${r}, ${g}, ${b})`;
            document.getElementById('rgbaInput').value = `rgba(${r}, ${g}, ${b}, ${a})`;
            document.getElementById('hslInput').value = `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
            document.getElementById('aValue').textContent = Math.round(a * 100) + '%';
        }

        function updatePreview() {
            const { r, g, b, a } = currentColor;
            document.getElementById('colorPreview').style.background = `rgba(${r}, ${g}, ${b}, ${a})`;
        }

        function updateContrast() {
            const { r, g, b } = currentColor;
            const hex = rgbToHex(r, g, b);
            
            document.getElementById('contrastWhite').style.background = hex;
            document.getElementById('contrastWhite').style.color = '#fff';
            document.getElementById('contrastBlack').style.background = hex;
            document.getElementById('contrastBlack').style.color = '#000';

            const luminance = getLuminance(r, g, b);
            const whiteLum = 1;
            const blackLum = 0;

            const ratioWhite = (Math.max(luminance, whiteLum) + 0.05) / (Math.min(luminance, whiteLum) + 0.05);
            const ratioBlack = (Math.max(luminance, blackLum) + 0.05) / (Math.min(luminance, blackLum) + 0.05);

            document.getElementById('ratioWhite').textContent = `ÂØπÊØîÂ∫¶: ${ratioWhite.toFixed(2)}:1`;
            document.getElementById('ratioBlack').textContent = `ÂØπÊØîÂ∫¶: ${ratioBlack.toFixed(2)}:1`;
        }

        function copyFormat(type) {
            const inputs = {
                hex: 'hexInput',
                rgb: 'rgbInput',
                rgba: 'rgbaInput',
                hsl: 'hslInput'
            };
            const value = document.getElementById(inputs[type]).value;
            navigator.clipboard.writeText(value).then(() => {
                const btn = event.target;
                const original = btn.textContent;
                btn.textContent = 'Â∑≤Â§çÂà∂';
                setTimeout(() => btn.textContent = original, 1000);
            });
        }

        // È¢úËâ≤ËΩ¨Êç¢ÂáΩÊï∞
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : { r: 0, g: 0, b: 0 };
        }

        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('').toUpperCase();
        }

        function rgbToHsl(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }

            return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100) };
        }

        function hslToRgb(h, s, l) {
            h /= 360; s /= 100; l /= 100;
            let r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }

            return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };
        }

        function getLuminance(r, g, b) {
            const a = [r, g, b].map(v => {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
        }

        init();
    </script>
</body>
</html>
