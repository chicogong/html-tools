<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS é€‰æ‹©å™¨æµ‹è¯•å™¨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --primary-color: #264de4;
            --secondary-color: #2965f1;
            --accent-color: #f5f5f5;
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }
        [data-theme="dark"] { --accent-color: #1a1a2e; }
        body { min-height: 100vh; padding: 2rem; }
        .container { max-width: 1400px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid var(--primary-color); }
        .logo { display: flex; align-items: center; gap: 0.75rem; }
        .logo svg { width: 48px; height: 48px; }
        h1 { margin: 0; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .theme-toggle { background: none; border: 2px solid var(--primary-color); border-radius: 50%; width: 44px; height: 44px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition); }
        .theme-toggle:hover { background: var(--primary-color); color: white; }
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; min-height: 70vh; }
        @media (max-width: 900px) { .main-grid { grid-template-columns: 1fr; } }
        .panel { background: var(--accent-color); border-radius: var(--border-radius); padding: 1.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--primary-color); }
        .panel-title { font-weight: 600; color: var(--primary-color); margin: 0; }
        .selector-input { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
        .selector-input input { flex: 1; font-family: monospace; margin-bottom: 0; }
        .btn-primary { background: var(--primary-color); border-color: var(--primary-color); }
        .btn-primary:hover { background: #1e3cb8; }
        .btn-secondary { background: transparent; border: 2px solid var(--primary-color); color: var(--primary-color); }
        .btn-secondary:hover { background: var(--primary-color); color: white; }
        textarea { font-family: 'Monaco', 'Menlo', monospace; font-size: 13px; min-height: 300px; }
        .result-info { background: rgba(38, 77, 228, 0.1); padding: 1rem; border-radius: var(--border-radius); margin-bottom: 1rem; }
        .result-info .count { font-size: 2rem; font-weight: bold; color: var(--primary-color); }
        .preview-frame { border: 2px solid var(--primary-color); border-radius: var(--border-radius); min-height: 300px; padding: 1rem; background: white; overflow: auto; }
        .preview-frame .matched { outline: 3px solid #22c55e !important; outline-offset: 2px; background-color: rgba(34, 197, 94, 0.2) !important; }
        .toast { position: fixed; bottom: 2rem; right: 2rem; padding: 1rem 2rem; background: var(--primary-color); color: white; border-radius: var(--border-radius); box-shadow: 0 4px 12px rgba(0,0,0,0.3); transform: translateY(100px); opacity: 0; transition: var(--transition); z-index: 1000; }
        .toast.show { transform: translateY(0); opacity: 1; }
        .examples { margin-top: 1rem; }
        .examples h4 { margin: 0 0 0.5rem 0; color: var(--primary-color); }
        .example-btn { display: inline-block; padding: 0.25rem 0.5rem; margin: 0.25rem; font-size: 0.8rem; font-family: monospace; background: rgba(38, 77, 228, 0.1); border: 1px solid var(--primary-color); border-radius: 4px; cursor: pointer; transition: var(--transition); }
        .example-btn:hover { background: var(--primary-color); color: white; }
        .matched-list { max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 0.85rem; }
        .matched-item { padding: 0.5rem; margin-bottom: 0.25rem; background: rgba(34, 197, 94, 0.1); border-radius: 4px; border-left: 3px solid #22c55e; word-break: break-all; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <rect x="10" y="10" width="80" height="80" rx="10" fill="#264de4"/>
                    <text x="50" y="65" text-anchor="middle" fill="white" font-size="36" font-weight="bold">{ }</text>
                </svg>
                <h1>CSS é€‰æ‹©å™¨æµ‹è¯•å™¨</h1>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">
                <span id="theme-icon">ğŸŒ™</span>
            </button>
        </header>
        
        <div class="main-grid">
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">ğŸ“ HTML è¾“å…¥</h3>
                    <button class="btn-secondary" onclick="loadSampleHtml()">åŠ è½½ç¤ºä¾‹</button>
                </div>
                <textarea id="htmlInput" placeholder="åœ¨æ­¤è¾“å…¥ HTML ä»£ç ..." oninput="testSelector()"></textarea>
                
                <div class="examples">
                    <h4>å¸¸ç”¨é€‰æ‹©å™¨ç¤ºä¾‹</h4>
                    <button class="example-btn" onclick="trySelector('.class')">`.class`</button>
                    <button class="example-btn" onclick="trySelector('#id')">`#id`</button>
                    <button class="example-btn" onclick="trySelector('div')">`div`</button>
                    <button class="example-btn" onclick="trySelector('div > p')">`div > p`</button>
                    <button class="example-btn" onclick="trySelector('div p')">`div p`</button>
                    <button class="example-btn" onclick="trySelector('div + p')">`div + p`</button>
                    <button class="example-btn" onclick="trySelector('div ~ p')">`div ~ p`</button>
                    <button class="example-btn" onclick="trySelector('[data-*]')">`[data-*]`</button>
                    <button class="example-btn" onclick="trySelector(':first-child')">`*:first-child`</button>
                    <button class="example-btn" onclick="trySelector(':last-child')">`*:last-child`</button>
                    <button class="example-btn" onclick="trySelector(':nth-child(2)')">`*:nth-child(2)`</button>
                    <button class="example-btn" onclick="trySelector(':not(.class)')">`*:not(.class)`</button>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">ğŸ¯ é€‰æ‹©å™¨æµ‹è¯•</h3>
                </div>
                
                <div class="selector-input">
                    <input type="text" id="selectorInput" placeholder="è¾“å…¥ CSS é€‰æ‹©å™¨..." oninput="testSelector()">
                    <button class="btn-primary" onclick="testSelector()">æµ‹è¯•</button>
                </div>
                
                <div class="result-info">
                    <div class="count" id="matchCount">0</div>
                    <div>ä¸ªå…ƒç´ åŒ¹é…</div>
                </div>
                
                <div class="panel-header">
                    <h3 class="panel-title">ğŸ‘ï¸ é¢„è§ˆ</h3>
                    <button class="btn-secondary" onclick="copyMatched()">å¤åˆ¶åŒ¹é…</button>
                </div>
                <div class="preview-frame" id="previewFrame"></div>
                
                <div style="margin-top: 1rem;">
                    <h4 style="color: var(--primary-color); margin: 0 0 0.5rem 0;">åŒ¹é…çš„å…ƒç´ </h4>
                    <div class="matched-list" id="matchedList"></div>
                </div>
            </div>
        </div>
    </div>
    <div id="toast" class="toast"></div>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.getElementById('theme-icon').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }
        
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('theme-icon').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }
        
        function loadSampleHtml() {
            const sample = `<div class="container">
  <header id="main-header">
    <h1 class="title">æ¬¢è¿</h1>
    <nav class="nav">
      <a href="#" class="link active">é¦–é¡µ</a>
      <a href="#" class="link">å…³äº</a>
      <a href="#" class="link">æœåŠ¡</a>
    </nav>
  </header>
  
  <main>
    <article class="post" data-id="1">
      <h2>æ–‡ç« æ ‡é¢˜ 1</h2>
      <p class="content">è¿™æ˜¯ç¬¬ä¸€ç¯‡æ–‡ç« çš„å†…å®¹ã€‚</p>
      <span class="tag">æŠ€æœ¯</span>
    </article>
    
    <article class="post" data-id="2">
      <h2>æ–‡ç« æ ‡é¢˜ 2</h2>
      <p class="content">è¿™æ˜¯ç¬¬äºŒç¯‡æ–‡ç« çš„å†…å®¹ã€‚</p>
      <span class="tag">ç”Ÿæ´»</span>
    </article>
    
    <aside class="sidebar">
      <ul class="list">
        <li class="item">é¡¹ç›® 1</li>
        <li class="item">é¡¹ç›® 2</li>
        <li class="item">é¡¹ç›® 3</li>
      </ul>
    </aside>
  </main>
  
  <footer>
    <p>&copy; 2024 ç¤ºä¾‹ç½‘ç«™</p>
  </footer>
</div>`;
            document.getElementById('htmlInput').value = sample;
            testSelector();
        }
        
        function trySelector(selector) {
            document.getElementById('selectorInput').value = selector;
            testSelector();
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function testSelector() {
            const html = document.getElementById('htmlInput').value;
            const selector = document.getElementById('selectorInput').value;
            const previewFrame = document.getElementById('previewFrame');
            const matchedList = document.getElementById('matchedList');
            
            // Clear previous
            while (previewFrame.firstChild) previewFrame.removeChild(previewFrame.firstChild);
            while (matchedList.firstChild) matchedList.removeChild(matchedList.firstChild);
            
            if (!html.trim()) {
                document.getElementById('matchCount').textContent = '0';
                return;
            }
            
            // Parse HTML
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            // Copy content to preview
            const content = doc.body.cloneNode(true);
            previewFrame.appendChild(content);
            
            if (!selector.trim()) {
                document.getElementById('matchCount').textContent = '0';
                return;
            }
            
            try {
                const matched = previewFrame.querySelectorAll(selector);
                document.getElementById('matchCount').textContent = matched.length;
                
                matched.forEach((el, index) => {
                    el.classList.add('matched');
                    
                    // Add to list
                    const item = document.createElement('div');
                    item.className = 'matched-item';
                    
                    // Get element description
                    let desc = el.tagName.toLowerCase();
                    if (el.id) desc += '#' + el.id;
                    if (el.className && typeof el.className === 'string') {
                        const classes = el.className.split(' ').filter(c => c && c !== 'matched');
                        if (classes.length > 0) desc += '.' + classes.join('.');
                    }
                    
                    item.textContent = (index + 1) + '. ' + desc;
                    matchedList.appendChild(item);
                });
            } catch (e) {
                document.getElementById('matchCount').textContent = 'é”™è¯¯';
                const errorItem = document.createElement('div');
                errorItem.className = 'matched-item';
                errorItem.style.borderLeftColor = '#ef4444';
                errorItem.style.background = 'rgba(239, 68, 68, 0.1)';
                errorItem.textContent = 'æ— æ•ˆçš„é€‰æ‹©å™¨: ' + e.message;
                matchedList.appendChild(errorItem);
            }
        }
        
        function copyMatched() {
            const selector = document.getElementById('selectorInput').value;
            if (selector) {
                navigator.clipboard.writeText(selector).then(function() {
                    showToast('é€‰æ‹©å™¨å·²å¤åˆ¶ï¼');
                });
            }
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(function() { toast.classList.remove('show'); }, 2000);
        }
        
        initTheme();
        loadSampleHtml();
    </script>
</body>
</html>
