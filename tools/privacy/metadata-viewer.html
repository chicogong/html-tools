<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨ - WebUtils" />
    <meta name="keywords" content="metadata-viewer,privacy,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/privacy/metadata-viewer.html"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨ - WebUtils" />
    <meta property="og:description" content="æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/privacy/metadata-viewer.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨ - WebUtils" />
    <meta name="twitter:description" content="æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      .container {
        max-width: 1100px;
        padding: 20px;
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }
      .drop-zone {
        border: 3px dashed var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
        padding: 3rem 2rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 1.5rem;
      }
      .drop-zone:hover,
      .drop-zone.dragover {
        border-color: var(--pico-primary);
        background: var(--pico-primary-focus);
      }
      .drop-zone-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
      }
      .drop-zone p {
        margin: 0.5rem 0;
        color: var(--pico-muted-color);
      }
      .file-input {
        display: none;
      }
      .panel {
        border: 1px solid var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
        padding: 1rem;
        background: var(--pico-card-background-color);
        margin-bottom: 1rem;
      }
      .panel h3 {
        margin-top: 0;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--pico-muted-border-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .panel h3 .badge {
        font-size: 0.75rem;
        padding: 0.2rem 0.5rem;
        background: var(--pico-primary);
        color: white;
        border-radius: 3px;
        font-weight: normal;
      }
      .file-preview {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 1.5rem;
        margin-bottom: 1rem;
      }
      @media (max-width: 600px) {
        .file-preview {
          grid-template-columns: 1fr;
        }
      }
      .preview-image {
        max-width: 200px;
        max-height: 200px;
        object-fit: contain;
        border-radius: var(--pico-border-radius);
        background: var(--pico-background-color);
      }
      .preview-icon {
        width: 120px;
        height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4rem;
        background: var(--pico-background-color);
        border-radius: var(--pico-border-radius);
      }
      .basic-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 0.75rem;
      }
      .info-item {
        background: var(--pico-background-color);
        padding: 0.75rem;
        border-radius: var(--pico-border-radius);
      }
      .info-label {
        font-size: 0.8rem;
        color: var(--pico-muted-color);
        margin-bottom: 0.25rem;
      }
      .info-value {
        font-weight: bold;
        word-break: break-all;
      }
      .metadata-table {
        width: 100%;
        border-collapse: collapse;
      }
      .metadata-table th,
      .metadata-table td {
        padding: 0.5rem 0.75rem;
        text-align: left;
        border-bottom: 1px solid var(--pico-muted-border-color);
      }
      .metadata-table th {
        background: var(--pico-background-color);
        font-weight: bold;
        width: 35%;
      }
      .metadata-table td {
        word-break: break-all;
      }
      .metadata-table tr:last-child th,
      .metadata-table tr:last-child td {
        border-bottom: none;
      }
      .category-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }
      .category-tab {
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
        border: 1px solid var(--pico-muted-border-color);
        background: var(--pico-background-color);
        border-radius: var(--pico-border-radius);
        cursor: pointer;
      }
      .category-tab:hover {
        background: var(--pico-primary-focus);
      }
      .category-tab.active {
        background: var(--pico-primary);
        color: white;
        border-color: var(--pico-primary);
      }
      .empty-state {
        text-align: center;
        padding: 2rem;
        color: var(--pico-muted-color);
      }
      .privacy-warning {
        background: #fef3c7;
        color: #92400e;
        padding: 0.75rem 1rem;
        border-radius: var(--pico-border-radius);
        margin-bottom: 1rem;
        display: flex;
        align-items: flex-start;
        gap: 0.5rem;
      }
      [data-theme="dark"] .privacy-warning {
        background: #92400e;
        color: #fef3c7;
      }
      .privacy-warning-icon {
        font-size: 1.2rem;
      }
      .toolbar {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }
      .toolbar button {
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
        margin: 0;
      }
      .json-view {
        background: var(--pico-background-color);
        border: 1px solid var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
        padding: 1rem;
        max-height: 400px;
        overflow: auto;
        font-family: Monaco, Menlo, "Ubuntu Mono", monospace;
        font-size: 12px;
        white-space: pre-wrap;
        overflow-wrap: break-word;
      }
      .gps-link {
        color: var(--pico-primary);
        text-decoration: underline;
        cursor: pointer;
      }
      .hidden {
        display: none;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨
    </nav>
    <main class="container">
      <div class="header">
        <h1>æ–‡ä»¶å…ƒæ•°æ®æŸ¥çœ‹å™¨</h1>
        <button id="themeToggle" class="outline">æ·±è‰²æ¨¡å¼</button>
      </div>

      <div class="drop-zone" id="dropZone">
        <div class="drop-zone-icon">ğŸ“</div>
        <p><strong>æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</strong></p>
        <p>æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
        <p><small>æ”¯æŒå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€æ–‡æ¡£ç­‰å¤šç§æ ¼å¼</small></p>
        <input type="file" id="fileInput" class="file-input" />
      </div>

      <div id="resultArea" class="hidden">
        <div id="privacyWarning" class="privacy-warning hidden">
          <span class="privacy-warning-icon">âš ï¸</span>
          <div>
            <strong>éšç§æç¤ºï¼š</strong>
            æ­¤æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ GPS ä½ç½®ï¼‰ï¼Œåˆ†äº«å‰è¯·è€ƒè™‘ç§»é™¤è¿™äº›å…ƒæ•°æ®ã€‚
          </div>
        </div>

        <div class="panel">
          <h3>åŸºæœ¬ä¿¡æ¯</h3>
          <div class="file-preview">
            <div id="filePreview"></div>
            <div class="basic-info" id="basicInfo"></div>
          </div>
        </div>

        <div class="panel" id="metadataPanel">
          <h3>
            <span>è¯¦ç»†å…ƒæ•°æ®</span>
            <span class="badge" id="metadataCount">0 é¡¹</span>
          </h3>
          <div class="category-tabs" id="categoryTabs"></div>
          <div id="metadataContent"></div>
        </div>

        <div class="panel">
          <h3>åŸå§‹æ•°æ® (JSON)</h3>
          <div class="toolbar">
            <button class="secondary" onclick="copyJson()" aria-label="å¤åˆ¶ JSON">å¤åˆ¶ JSON</button>
            <button class="secondary" onclick="downloadJson()" aria-label="ä¸‹è½½ JSON">
              ä¸‹è½½ JSON
            </button>
          </div>
          <div class="json-view" id="jsonView"></div>
        </div>
      </div>
    </main>

    <script>
      const themeToggle = document.getElementById("themeToggle");
      const dropZone = document.getElementById("dropZone");
      const fileInput = document.getElementById("fileInput");
      const resultArea = document.getElementById("resultArea");
      const privacyWarning = document.getElementById("privacyWarning");
      const filePreviewEl = document.getElementById("filePreview");
      const basicInfoEl = document.getElementById("basicInfo");
      const categoryTabsEl = document.getElementById("categoryTabs");
      const metadataContentEl = document.getElementById("metadataContent");
      const metadataCountEl = document.getElementById("metadataCount");
      const jsonViewEl = document.getElementById("jsonView");

      let currentMetadata = null;
      let currentCategory = "all";

      // æ–‡ä»¶ç±»å‹å›¾æ ‡æ˜ å°„
      const fileIcons = {
        image: "ğŸ–¼ï¸",
        video: "ğŸ¬",
        audio: "ğŸµ",
        "application/pdf": "ğŸ“„",
        "application/msword": "ğŸ“",
        "application/vnd.openxmlformats-officedocument": "ğŸ“",
        text: "ğŸ“ƒ",
        "application/zip": "ğŸ“¦",
        "application/x-rar": "ğŸ“¦",
        default: "ğŸ“"
      };

      // ä¸»é¢˜åˆ‡æ¢
      function initTheme() {
        const savedTheme = localStorage.getItem("metadata-viewer-theme") || "light";
        document.documentElement.setAttribute("data-theme", savedTheme);
        updateThemeButton(savedTheme);
      }

      function updateThemeButton(theme) {
        themeToggle.textContent = theme === "dark" ? "æµ…è‰²æ¨¡å¼" : "æ·±è‰²æ¨¡å¼";
      }

      themeToggle.addEventListener("click", () => {
        const currentTheme = document.documentElement.getAttribute("data-theme");
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme", newTheme);
        localStorage.setItem("metadata-viewer-theme", newTheme);
        updateThemeButton(newTheme);
      });

      // æ‹–æ‹½å¤„ç†
      dropZone.addEventListener("click", () => fileInput.click());

      dropZone.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropZone.classList.add("dragover");
      });

      dropZone.addEventListener("dragleave", () => {
        dropZone.classList.remove("dragover");
      });

      dropZone.addEventListener("drop", (e) => {
        e.preventDefault();
        dropZone.classList.remove("dragover");
        if (e.dataTransfer.files.length > 0) {
          handleFile(e.dataTransfer.files[0]);
        }
      });

      fileInput.addEventListener("change", (e) => {
        if (e.target.files.length > 0) {
          handleFile(e.target.files[0]);
        }
        fileInput.value = "";
      });

      // å¤„ç†æ–‡ä»¶
      function handleFile(file) {
        const metadata = {
          basic: {
            name: file.name,
            size: file.size,
            type: file.type || "unknown",
            lastModified: new Date(file.lastModified)
          },
          file: {},
          image: {},
          exif: {},
          other: {}
        };

        // æ–‡ä»¶æ‰©å±•å
        const ext = file.name.split(".").pop().toLowerCase();
        metadata.file.extension = ext;

        // åˆ¤æ–­æ–‡ä»¶ç±»å‹ç±»åˆ«
        const typeCategory = file.type.split("/")[0];

        // å¤„ç†å›¾ç‰‡
        if (typeCategory === "image") {
          const reader = new FileReader();
          reader.onload = (e) => {
            // æ˜¾ç¤ºé¢„è§ˆ
            filePreviewEl.innerHTML = `<img class="preview-image" src="${e.target.result}" alt="Preview">`;

            // è·å–å›¾ç‰‡å°ºå¯¸
            const img = new Image();
            img.onload = () => {
              metadata.image.width = img.naturalWidth;
              metadata.image.height = img.naturalHeight;
              metadata.image.aspectRatio = (img.naturalWidth / img.naturalHeight).toFixed(2);

              // å°è¯•è¯»å– EXIF
              readImageExif(e.target.result, metadata);
            };
            img.src = e.target.result;
          };
          reader.readAsDataURL(file);
        } else {
          // éå›¾ç‰‡æ–‡ä»¶æ˜¾ç¤ºå›¾æ ‡
          const icon = getFileIcon(file.type);
          filePreviewEl.innerHTML = `<div class="preview-icon">${icon}</div>`;
          displayMetadata(metadata);
        }
      }

      // è·å–æ–‡ä»¶å›¾æ ‡
      function getFileIcon(mimeType) {
        if (!mimeType) return fileIcons.default;

        const category = mimeType.split("/")[0];
        if (fileIcons[mimeType]) return fileIcons[mimeType];
        if (fileIcons[category]) return fileIcons[category];

        for (const key in fileIcons) {
          if (mimeType.startsWith(key)) return fileIcons[key];
        }

        return fileIcons.default;
      }

      // è¯»å–å›¾ç‰‡ EXIFï¼ˆç®€åŒ–ç‰ˆï¼Œä½¿ç”¨ canvas æ–¹å¼ï¼‰
      function readImageExif(dataUrl, metadata) {
        // ç®€åŒ–çš„ EXIF è¯»å– - åªèƒ½è·å–åŸºæœ¬ä¿¡æ¯
        // å®Œæ•´çš„ EXIF è¯»å–éœ€è¦ä¸“é—¨çš„åº“å¦‚ exif-js

        // æ£€æŸ¥æ˜¯å¦ä¸º JPEG
        if (dataUrl.includes("data:image/jpeg")) {
          metadata.exif.format = "JPEG";
          metadata.exif.note = "å®Œæ•´ EXIF è¯»å–éœ€è¦ä¸“é—¨çš„è§£æåº“";
        } else if (dataUrl.includes("data:image/png")) {
          metadata.file.format = "PNG";
          metadata.file.note = "PNG æ ¼å¼é€šå¸¸ä¸åŒ…å« EXIF ä¿¡æ¯";
        }

        displayMetadata(metadata);
      }

      // æ˜¾ç¤ºå…ƒæ•°æ®
      function displayMetadata(metadata) {
        currentMetadata = metadata;
        resultArea.classList.remove("hidden");

        // åŸºæœ¬ä¿¡æ¯
        basicInfoEl.innerHTML = `
                <div class="info-item">
                    <div class="info-label">æ–‡ä»¶å</div>
                    <div class="info-value">${metadata.basic.name}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">æ–‡ä»¶å¤§å°</div>
                    <div class="info-value">${formatSize(metadata.basic.size)}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">MIME ç±»å‹</div>
                    <div class="info-value">${metadata.basic.type}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ä¿®æ”¹æ—¶é—´</div>
                    <div class="info-value">${formatDate(metadata.basic.lastModified)}</div>
                </div>
                ${
                  metadata.image.width
                    ? `
                <div class="info-item">
                    <div class="info-label">å›¾ç‰‡å°ºå¯¸</div>
                    <div class="info-value">${metadata.image.width} Ã— ${metadata.image.height} px</div>
                </div>
                <div class="info-item">
                    <div class="info-label">å®½é«˜æ¯”</div>
                    <div class="info-value">${metadata.image.aspectRatio}</div>
                </div>
                `
                    : ""
                }
            `;

        // æ„å»ºåˆ†ç±»æ•°æ®
        const categories = {
          all: { label: "å…¨éƒ¨", data: {} },
          file: { label: "æ–‡ä»¶ä¿¡æ¯", data: metadata.file },
          image: { label: "å›¾ç‰‡ä¿¡æ¯", data: metadata.image },
          exif: { label: "EXIF æ•°æ®", data: metadata.exif }
        };

        // åˆå¹¶æ‰€æœ‰æ•°æ®åˆ° all
        Object.assign(categories.all.data, metadata.file, metadata.image, metadata.exif);

        // æ¸²æŸ“åˆ†ç±»æ ‡ç­¾
        const tabs = Object.entries(categories)
          .filter(([key, cat]) => Object.keys(cat.data).length > 0 || key === "all")
          .map(
            ([key, cat]) => `
                    <button class="category-tab ${key === currentCategory ? "active" : ""}" 
                            onclick="switchCategory('${key}')" aria-label="${cat.label}">${cat.label}</button>
                `
          )
          .join("");
        categoryTabsEl.innerHTML = tabs;

        // æ¸²æŸ“å…ƒæ•°æ®è¡¨æ ¼
        renderMetadataTable(categories[currentCategory].data);

        // æ›´æ–°è®¡æ•°
        const totalCount = Object.keys(categories.all.data).length;
        metadataCountEl.textContent = `${totalCount} é¡¹`;

        // JSON è§†å›¾
        jsonViewEl.textContent = JSON.stringify(metadata, null, 2);

        // éšç§è­¦å‘Šï¼ˆå¦‚æœæœ‰ GPS æ•°æ®ï¼‰
        const hasGps = metadata.exif && (metadata.exif.GPSLatitude || metadata.exif.gps);
        privacyWarning.classList.toggle("hidden", !hasGps);
      }

      // åˆ‡æ¢åˆ†ç±»
      window.switchCategory = function (category) {
        currentCategory = category;
        if (currentMetadata) {
          displayMetadata(currentMetadata);
        }
      };

      // æ¸²æŸ“å…ƒæ•°æ®è¡¨æ ¼
      function renderMetadataTable(data) {
        const entries = Object.entries(data).filter(
          ([k, v]) => v !== undefined && v !== null && v !== ""
        );

        if (entries.length === 0) {
          metadataContentEl.innerHTML = '<div class="empty-state">æš‚æ— æ•°æ®</div>';
          return;
        }

        const rows = entries
          .map(([key, value]) => {
            let displayValue = value;
            if (typeof value === "object") {
              displayValue = JSON.stringify(value);
            }
            return `
                    <tr>
                        <th>${formatKey(key)}</th>
                        <td>${displayValue}</td>
                    </tr>
                `;
          })
          .join("");

        metadataContentEl.innerHTML = `
                <table class="metadata-table">
                    ${rows}
                </table>
            `;
      }

      // æ ¼å¼åŒ–é”®å
      function formatKey(key) {
        return key
          .replace(/([A-Z])/g, " $1")
          .replace(/^./, (str) => str.toUpperCase())
          .replace(/_/g, " ");
      }

      // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
      function formatSize(bytes) {
        if (bytes < 1024) return bytes + " B";
        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + " KB";
        if (bytes < 1024 * 1024 * 1024) return (bytes / (1024 * 1024)).toFixed(2) + " MB";
        return (bytes / (1024 * 1024 * 1024)).toFixed(2) + " GB";
      }

      // æ ¼å¼åŒ–æ—¥æœŸ
      function formatDate(date) {
        return date.toLocaleString("zh-CN", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit"
        });
      }

      // å¤åˆ¶ JSON
      window.copyJson = function () {
        if (!currentMetadata) return;
        navigator.clipboard.writeText(JSON.stringify(currentMetadata, null, 2)).then(() => {
          alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
        });
      };

      // ä¸‹è½½ JSON
      window.downloadJson = function () {
        if (!currentMetadata) return;
        const content = JSON.stringify(currentMetadata, null, 2);
        const blob = new Blob([content], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `${currentMetadata.basic.name}_metadata.json`;
        a.click();
        URL.revokeObjectURL(url);
      };

      // åˆå§‹åŒ–
      initTheme();

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        document.getElementById("theme-icon").textContent = newTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", newTheme);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem("theme") || "dark";
      if (savedTheme === "light") {
        document.documentElement.setAttribute("data-theme", "light");
        document.getElementById("theme-icon").textContent = "â˜€ï¸";
      }
    </script>
  </body>
</html>
