<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®‰å…¨å¤´æ£€æµ‹å™¨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --primary-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }
        
        body {
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--pico-primary);
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        .input-section {
            background: var(--pico-card-background-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .input-section textarea {
            width: 100%;
            min-height: 200px;
            font-family: Monaco, Menlo, 'Ubuntu Mono', monospace;
            font-size: 0.85rem;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .score-section {
            background: var(--pico-card-background-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
        }
        
        .score-circle::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
            padding: 8px;
            background: conic-gradient(var(--score-color) calc(var(--score) * 1%), var(--pico-secondary-background) 0);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
        }
        
        .score-value {
            font-size: 3rem;
            font-weight: 700;
            z-index: 1;
        }
        
        .score-label {
            font-size: 0.9rem;
            color: var(--pico-muted-color);
            z-index: 1;
        }
        
        .score-grade {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 0.5rem;
        }
        
        .grade-A { color: var(--success-color); }
        .grade-B { color: #22c55e; }
        .grade-C { color: var(--warning-color); }
        .grade-D { color: #f97316; }
        .grade-F { color: var(--error-color); }
        
        .results-section {
            margin-top: 2rem;
        }
        
        .header-card {
            background: var(--pico-card-background-color);
            border-radius: 12px;
            margin-bottom: 1rem;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .header-card-header {
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        
        .header-card-header.present {
            border-left: 4px solid var(--success-color);
        }
        
        .header-card-header.missing {
            border-left: 4px solid var(--error-color);
        }
        
        .header-card-header.warning {
            border-left: 4px solid var(--warning-color);
        }
        
        .header-info {
            flex: 1;
        }
        
        .header-name {
            font-weight: 700;
            font-family: Monaco, Menlo, 'Ubuntu Mono', monospace;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .header-desc {
            font-size: 0.9rem;
            color: var(--pico-muted-color);
            margin-top: 0.25rem;
        }
        
        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.85rem;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .status-present {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }
        
        .status-missing {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error-color);
        }
        
        .status-warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }
        
        .header-card-body {
            padding: 0 1.5rem 1.5rem;
            display: none;
        }
        
        .header-card-body.expanded {
            display: block;
        }
        
        .current-value {
            background: var(--pico-secondary-background);
            padding: 0.75rem;
            border-radius: 4px;
            font-family: Monaco, Menlo, 'Ubuntu Mono', monospace;
            font-size: 0.85rem;
            word-break: break-all;
            margin-bottom: 1rem;
        }
        
        .recommendation {
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            padding: 1rem;
        }
        
        .recommendation h4 {
            margin: 0 0 0.5rem;
            color: var(--primary-color);
            font-size: 0.9rem;
        }
        
        .recommendation code {
            display: block;
            background: var(--pico-secondary-background);
            padding: 0.75rem;
            border-radius: 4px;
            font-size: 0.8rem;
            word-break: break-all;
            margin-top: 0.5rem;
        }
        
        .toggle-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            font-size: 1.25rem;
            transition: transform 0.2s;
        }
        
        .toggle-btn.expanded {
            transform: rotate(180deg);
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .summary-item {
            background: var(--pico-secondary-background);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        
        .summary-value {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .summary-value.success { color: var(--success-color); }
        .summary-value.warning { color: var(--warning-color); }
        .summary-value.danger { color: var(--error-color); }
        
        .summary-label {
            font-size: 0.85rem;
            color: var(--pico-muted-color);
        }
        
        @media (max-width: 768px) {
            .header-card-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
    
    <main class="container">
        <a href="../../index.html" style="display:inline-block;margin-bottom:1rem;color:var(--pico-primary);text-decoration:none;">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>ğŸ”’ å®‰å…¨å¤´æ£€æµ‹å™¨</h1>
            <p>æ£€æµ‹ HTTP å“åº”å¤´ä¸­çš„å®‰å…¨é…ç½®ï¼Œæä¾›æ”¹è¿›å»ºè®®</p>
        </header>
        
        <section class="input-section">
            <label for="headersInput">ç²˜è´´ HTTP å“åº”å¤´</label>
            <textarea id="headersInput" placeholder="HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
Strict-Transport-Security: max-age=31536000
Content-Security-Policy: default-src 'self'
..."></textarea>
            
            <div class="btn-group">
                <button onclick="analyzeHeaders()">ğŸ” æ£€æµ‹å®‰å…¨å¤´</button>
                <button class="secondary" onclick="loadSample('good')">âœ… å®‰å…¨ç¤ºä¾‹</button>
                <button class="secondary" onclick="loadSample('bad')">âŒ ä¸å®‰å…¨ç¤ºä¾‹</button>
                <button class="secondary" onclick="clearAll()">ğŸ—‘ï¸ æ¸…ç©º</button>
            </div>
        </section>
        
        <section class="score-section" id="scoreSection" style="display: none;">
            <div class="score-circle" id="scoreCircle">
                <span class="score-value" id="scoreValue">0</span>
                <span class="score-label">å®‰å…¨è¯„åˆ†</span>
            </div>
            <div class="score-grade" id="scoreGrade"></div>
            
            <div class="summary-grid" id="summaryGrid"></div>
        </section>
        
        <section class="results-section" id="resultsSection" style="display: none;">
            <h3>ğŸ“‹ è¯¦ç»†æ£€æµ‹ç»“æœ</h3>
            <div id="headersContainer"></div>
        </section>
    </main>
    
    <script>
        // ä¸»é¢˜åˆ‡æ¢
        window.toggleTheme = function() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            document.querySelector('.theme-toggle').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
            localStorage.setItem('theme', newTheme);
        };
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        document.querySelector('.theme-toggle').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        
        // å®‰å…¨å¤´é…ç½®
        const securityHeaders = [
            {
                name: 'Strict-Transport-Security',
                importance: 'critical',
                weight: 20,
                description: 'HSTS - å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨ HTTPS è¿æ¥',
                recommendation: 'max-age=31536000; includeSubDomains; preload',
                validate: function(value) {
                    if (!value) return { status: 'missing', message: 'æœªè®¾ç½® HSTSï¼Œç½‘ç«™å®¹æ˜“å—åˆ°é™çº§æ”»å‡»' };
                    var maxAge = value.match(/max-age=(\d+)/i);
                    if (!maxAge || parseInt(maxAge[1]) < 31536000) {
                        return { status: 'warning', message: 'max-age å»ºè®®è‡³å°‘è®¾ç½®ä¸º 31536000ï¼ˆ1å¹´ï¼‰' };
                    }
                    if (value.toLowerCase().indexOf('includesubdomains') === -1) {
                        return { status: 'warning', message: 'å»ºè®®æ·»åŠ  includeSubDomains ä¿æŠ¤å­åŸŸå' };
                    }
                    return { status: 'present', message: 'HSTS é…ç½®æ­£ç¡®' };
                }
            },
            {
                name: 'Content-Security-Policy',
                importance: 'critical',
                weight: 25,
                description: 'CSP - é˜²æ­¢ XSS å’Œæ•°æ®æ³¨å…¥æ”»å‡»',
                recommendation: "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'",
                validate: function(value) {
                    if (!value) return { status: 'missing', message: 'æœªè®¾ç½® CSPï¼Œç½‘ç«™å®¹æ˜“å—åˆ° XSS æ”»å‡»' };
                    if (value.indexOf("'unsafe-eval'") !== -1) {
                        return { status: 'warning', message: "åŒ…å« 'unsafe-eval'ï¼Œå­˜åœ¨å®‰å…¨é£é™©" };
                    }
                    if (value.indexOf('default-src') === -1 && value.indexOf('script-src') === -1) {
                        return { status: 'warning', message: 'CSP ç­–ç•¥ä¸å®Œæ•´ï¼Œå»ºè®®è‡³å°‘è®¾ç½® default-src æˆ– script-src' };
                    }
                    return { status: 'present', message: 'CSP å·²é…ç½®' };
                }
            },
            {
                name: 'X-Content-Type-Options',
                importance: 'high',
                weight: 10,
                description: 'é˜²æ­¢æµè§ˆå™¨ MIME ç±»å‹å—…æ¢',
                recommendation: 'nosniff',
                validate: function(value) {
                    if (!value) return { status: 'missing', message: 'æœªè®¾ç½®ï¼Œæµè§ˆå™¨å¯èƒ½é”™è¯¯è§£ææ–‡ä»¶ç±»å‹' };
                    if (value.toLowerCase() !== 'nosniff') {
                        return { status: 'warning', message: 'å€¼åº”è¯¥è®¾ç½®ä¸º nosniff' };
                    }
                    return { status: 'present', message: 'å·²æ­£ç¡®è®¾ç½®ä¸º nosniff' };
                }
            },
            {
                name: 'X-Frame-Options',
                importance: 'high',
                weight: 10,
                description: 'é˜²æ­¢ç‚¹å‡»åŠ«æŒæ”»å‡»',
                recommendation: 'DENY æˆ– SAMEORIGIN',
                validate: function(value) {
                    if (!value) return { status: 'missing', message: 'æœªè®¾ç½®ï¼Œé¡µé¢å¯èƒ½è¢«æ¶æ„ç½‘ç«™åµŒå…¥ iframe' };
                    var upper = value.toUpperCase();
                    if (upper !== 'DENY' && upper !== 'SAMEORIGIN' && upper.indexOf('ALLOW-FROM') !== 0) {
                        return { status: 'warning', message: 'æ— æ•ˆå€¼ï¼Œåº”ä¸º DENYã€SAMEORIGIN æˆ– ALLOW-FROM' };
                    }
                    return { status: 'present', message: 'å·²æ­£ç¡®é…ç½®' };
                }
            },
            {
                name: 'X-XSS-Protection',
                importance: 'medium',
                weight: 5,
                description: 'å¯ç”¨æµè§ˆå™¨å†…ç½® XSS è¿‡æ»¤å™¨',
                recommendation: '1; mode=block',
                validate: function(value) {
                    if (!value) return { status: 'warning', message: 'æœªè®¾ç½®ï¼ˆæ³¨æ„ï¼šç°ä»£æµè§ˆå™¨å·²å¼ƒç”¨ï¼Œæ¨èä½¿ç”¨ CSPï¼‰' };
                    if (value === '0') {
                        return { status: 'warning', message: 'XSS è¿‡æ»¤å™¨å·²ç¦ç”¨' };
                    }
                    if (value.indexOf('mode=block') === -1) {
                        return { status: 'warning', message: 'å»ºè®®æ·»åŠ  mode=block' };
                    }
                    return { status: 'present', message: 'å·²å¯ç”¨ XSS è¿‡æ»¤å™¨' };
                }
            },
            {
                name: 'Referrer-Policy',
                importance: 'medium',
                weight: 10,
                description: 'æ§åˆ¶ Referer å¤´çš„å‘é€ç­–ç•¥',
                recommendation: 'strict-origin-when-cross-origin',
                validate: function(value) {
                    if (!value) return { status: 'missing', message: 'æœªè®¾ç½®ï¼Œå¯èƒ½æ³„éœ²æ•æ„Ÿ URL ä¿¡æ¯' };
                    var validPolicies = ['no-referrer', 'no-referrer-when-downgrade', 'origin', 'origin-when-cross-origin', 'same-origin', 'strict-origin', 'strict-origin-when-cross-origin', 'unsafe-url'];
                    if (validPolicies.indexOf(value.toLowerCase()) === -1) {
                        return { status: 'warning', message: 'æ— æ•ˆçš„ç­–ç•¥å€¼' };
                    }
                    if (value.toLowerCase() === 'unsafe-url') {
                        return { status: 'warning', message: 'unsafe-url ä¼šæ³„éœ²å®Œæ•´ URLï¼Œå­˜åœ¨éšç§é£é™©' };
                    }
                    return { status: 'present', message: 'å·²æ­£ç¡®é…ç½®' };
                }
            },
            {
                name: 'Permissions-Policy',
                importance: 'medium',
                weight: 10,
                description: 'æ§åˆ¶æµè§ˆå™¨åŠŸèƒ½çš„ä½¿ç”¨æƒé™',
                recommendation: 'geolocation=(), microphone=(), camera=()',
                validate: function(value) {
                    if (!value) return { status: 'missing', message: 'æœªè®¾ç½®ï¼Œæ— æ³•é™åˆ¶æ•æ„Ÿæµè§ˆå™¨åŠŸèƒ½' };
                    return { status: 'present', message: 'å·²é…ç½®æƒé™ç­–ç•¥' };
                }
            },
            {
                name: 'X-Permitted-Cross-Domain-Policies',
                importance: 'low',
                weight: 5,
                description: 'æ§åˆ¶ Adobe Flash å’Œ PDF çš„è·¨åŸŸç­–ç•¥',
                recommendation: 'none',
                validate: function(value) {
                    if (!value) return { status: 'warning', message: 'æœªè®¾ç½®ï¼ˆå¦‚æœä¸ä½¿ç”¨ Flash/PDF å¯å¿½ç•¥ï¼‰' };
                    return { status: 'present', message: 'å·²é…ç½®' };
                }
            },
            {
                name: 'Cache-Control',
                importance: 'medium',
                weight: 5,
                description: 'æ§åˆ¶æ•æ„Ÿé¡µé¢çš„ç¼“å­˜ç­–ç•¥',
                recommendation: 'no-storeï¼ˆå¯¹äºæ•æ„Ÿé¡µé¢ï¼‰',
                validate: function(value) {
                    if (!value) return { status: 'warning', message: 'æœªè®¾ç½®ç¼“å­˜ç­–ç•¥' };
                    return { status: 'present', message: 'å·²è®¾ç½®ç¼“å­˜ç­–ç•¥' };
                }
            }
        ];
        
        // æ£€æŸ¥çš„å±é™©å¤´
        const dangerousHeaders = [
            {
                name: 'Server',
                description: 'æœåŠ¡å™¨è½¯ä»¶ä¿¡æ¯',
                validate: function(value) {
                    if (value) return { status: 'warning', message: 'æš´éœ²æœåŠ¡å™¨ä¿¡æ¯ï¼Œå»ºè®®ç§»é™¤æˆ–éšè—' };
                    return null;
                }
            },
            {
                name: 'X-Powered-By',
                description: 'åç«¯æŠ€æœ¯æ ˆä¿¡æ¯',
                validate: function(value) {
                    if (value) return { status: 'warning', message: 'æš´éœ²æŠ€æœ¯æ ˆä¿¡æ¯ï¼Œå¼ºçƒˆå»ºè®®ç§»é™¤' };
                    return null;
                }
            }
        ];
        
        window.loadSample = function(type) {
            var samples = {
                good: 'HTTP/1.1 200 OK\nContent-Type: text/html; charset=UTF-8\nStrict-Transport-Security: max-age=31536000; includeSubDomains; preload\nContent-Security-Policy: default-src \'self\'; script-src \'self\'; style-src \'self\' \'unsafe-inline\'; img-src \'self\' data: https:; font-src \'self\'\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-XSS-Protection: 1; mode=block\nReferrer-Policy: strict-origin-when-cross-origin\nPermissions-Policy: geolocation=(), microphone=(), camera=()\nCache-Control: no-store',
                bad: 'HTTP/1.1 200 OK\nContent-Type: text/html\nServer: Apache/2.4.41 (Ubuntu)\nX-Powered-By: PHP/7.4.3\nCache-Control: max-age=3600'
            };
            
            document.getElementById('headersInput').value = samples[type];
        };
        
        window.clearAll = function() {
            document.getElementById('headersInput').value = '';
            document.getElementById('scoreSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'none';
        };
        
        window.analyzeHeaders = function() {
            var input = document.getElementById('headersInput').value.trim();
            if (!input) {
                alert('è¯·è¾“å…¥ HTTP å“åº”å¤´');
                return;
            }
            
            // è§£æå“åº”å¤´
            var headers = {};
            var lines = input.split('\n');
            lines.forEach(function(line) {
                var trimmed = line.trim();
                if (!trimmed || trimmed.match(/^HTTP\/[\d.]+\s+\d+/)) return;
                
                var colonIndex = trimmed.indexOf(':');
                if (colonIndex > 0) {
                    var name = trimmed.substring(0, colonIndex).trim();
                    var value = trimmed.substring(colonIndex + 1).trim();
                    headers[name.toLowerCase()] = { originalName: name, value: value };
                }
            });
            
            // æ£€æµ‹ç»“æœ
            var results = [];
            var totalWeight = 0;
            var earnedWeight = 0;
            
            securityHeaders.forEach(function(sh) {
                var headerData = headers[sh.name.toLowerCase()];
                var value = headerData ? headerData.value : null;
                var validation = sh.validate(value);
                
                totalWeight += sh.weight;
                if (validation.status === 'present') {
                    earnedWeight += sh.weight;
                } else if (validation.status === 'warning') {
                    earnedWeight += sh.weight * 0.5;
                }
                
                results.push({
                    name: sh.name,
                    importance: sh.importance,
                    description: sh.description,
                    recommendation: sh.recommendation,
                    currentValue: value,
                    status: validation.status,
                    message: validation.message
                });
            });
            
            // æ£€æŸ¥å±é™©å¤´
            dangerousHeaders.forEach(function(dh) {
                var headerData = headers[dh.name.toLowerCase()];
                var value = headerData ? headerData.value : null;
                var validation = dh.validate(value);
                
                if (validation) {
                    results.push({
                        name: dh.name,
                        importance: 'info',
                        description: dh.description,
                        recommendation: 'å»ºè®®ç§»é™¤æ­¤å“åº”å¤´',
                        currentValue: value,
                        status: validation.status,
                        message: validation.message
                    });
                    earnedWeight -= 5; // æ‰£åˆ†
                }
            });
            
            var score = Math.max(0, Math.min(100, Math.round((earnedWeight / totalWeight) * 100)));
            
            renderResults(score, results);
        };
        
        function renderResults(score, results) {
            // æ˜¾ç¤ºè¯„åˆ†
            document.getElementById('scoreSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'block';
            
            var scoreCircle = document.getElementById('scoreCircle');
            var scoreColor;
            var grade;
            
            if (score >= 90) {
                scoreColor = 'var(--success-color)';
                grade = 'A';
            } else if (score >= 75) {
                scoreColor = '#22c55e';
                grade = 'B';
            } else if (score >= 60) {
                scoreColor = 'var(--warning-color)';
                grade = 'C';
            } else if (score >= 40) {
                scoreColor = '#f97316';
                grade = 'D';
            } else {
                scoreColor = 'var(--error-color)';
                grade = 'F';
            }
            
            scoreCircle.style.setProperty('--score', score);
            scoreCircle.style.setProperty('--score-color', scoreColor);
            document.getElementById('scoreValue').textContent = score;
            document.getElementById('scoreValue').style.color = scoreColor;
            
            var gradeEl = document.getElementById('scoreGrade');
            gradeEl.textContent = 'ç­‰çº§: ' + grade;
            gradeEl.className = 'score-grade grade-' + grade;
            
            // ç»Ÿè®¡
            var stats = {
                present: results.filter(function(r) { return r.status === 'present'; }).length,
                warning: results.filter(function(r) { return r.status === 'warning'; }).length,
                missing: results.filter(function(r) { return r.status === 'missing'; }).length
            };
            
            var summaryGrid = document.getElementById('summaryGrid');
            summaryGrid.textContent = '';
            
            var summaryItems = [
                { value: stats.present, label: 'å·²é…ç½®', class: 'success' },
                { value: stats.warning, label: 'éœ€æ”¹è¿›', class: 'warning' },
                { value: stats.missing, label: 'ç¼ºå¤±', class: 'danger' }
            ];
            
            summaryItems.forEach(function(item) {
                var div = document.createElement('div');
                div.className = 'summary-item';
                
                var value = document.createElement('div');
                value.className = 'summary-value ' + item.class;
                value.textContent = item.value;
                
                var label = document.createElement('div');
                label.className = 'summary-label';
                label.textContent = item.label;
                
                div.appendChild(value);
                div.appendChild(label);
                summaryGrid.appendChild(div);
            });
            
            // è¯¦ç»†ç»“æœ
            var container = document.getElementById('headersContainer');
            container.textContent = '';
            
            // æŒ‰çŠ¶æ€æ’åºï¼šmissing > warning > present
            results.sort(function(a, b) {
                var order = { missing: 0, warning: 1, present: 2 };
                return order[a.status] - order[b.status];
            });
            
            results.forEach(function(result) {
                var card = document.createElement('div');
                card.className = 'header-card';
                
                var header = document.createElement('div');
                header.className = 'header-card-header ' + result.status;
                
                var info = document.createElement('div');
                info.className = 'header-info';
                
                var name = document.createElement('div');
                name.className = 'header-name';
                var icon = result.status === 'present' ? 'âœ…' : result.status === 'warning' ? 'âš ï¸' : 'âŒ';
                name.textContent = icon + ' ' + result.name;
                
                var desc = document.createElement('div');
                desc.className = 'header-desc';
                desc.textContent = result.description;
                
                info.appendChild(name);
                info.appendChild(desc);
                
                var badge = document.createElement('span');
                badge.className = 'status-badge status-' + result.status;
                badge.textContent = result.status === 'present' ? 'å·²é…ç½®' : result.status === 'warning' ? 'éœ€æ”¹è¿›' : 'ç¼ºå¤±';
                
                var toggleBtn = document.createElement('button');
                toggleBtn.className = 'toggle-btn';
                toggleBtn.textContent = 'â–¼';
                toggleBtn.onclick = function() {
                    var body = card.querySelector('.header-card-body');
                    body.classList.toggle('expanded');
                    this.classList.toggle('expanded');
                };
                
                header.appendChild(info);
                header.appendChild(badge);
                header.appendChild(toggleBtn);
                
                var body = document.createElement('div');
                body.className = 'header-card-body';
                
                if (result.currentValue) {
                    var currentLabel = document.createElement('strong');
                    currentLabel.textContent = 'å½“å‰å€¼ï¼š';
                    body.appendChild(currentLabel);
                    
                    var currentValue = document.createElement('div');
                    currentValue.className = 'current-value';
                    currentValue.textContent = result.currentValue;
                    body.appendChild(currentValue);
                }
                
                var messageP = document.createElement('p');
                messageP.textContent = result.message;
                body.appendChild(messageP);
                
                if (result.status !== 'present') {
                    var rec = document.createElement('div');
                    rec.className = 'recommendation';
                    
                    var recTitle = document.createElement('h4');
                    recTitle.textContent = 'ğŸ’¡ æ¨èé…ç½®';
                    
                    var recCode = document.createElement('code');
                    recCode.textContent = result.name + ': ' + result.recommendation;
                    
                    rec.appendChild(recTitle);
                    rec.appendChild(recCode);
                    body.appendChild(rec);
                }
                
                card.appendChild(header);
                card.appendChild(body);
                container.appendChild(card);
            });
        }
    </script>
</body>
</html>