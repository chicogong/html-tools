<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>package.json ÁîüÊàêÂô®</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --primary-color: #cb3837;
            --secondary-color: #1a1a1a;
            --accent-color: #f5f5f5;
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }
        
        [data-theme="dark"] {
            --accent-color: #2a2a2a;
        }
        
        body {
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .logo svg {
            width: 48px;
            height: 48px;
        }
        
        h1 {
            margin: 0;
            background: linear-gradient(135deg, var(--primary-color), #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .theme-toggle {
            background: none;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .theme-toggle:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            min-height: 75vh;
        }
        
        @media (max-width: 1000px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: var(--accent-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--primary-color);
        }
        
        .panel-title {
            font-weight: 600;
            color: var(--primary-color);
            margin: 0;
        }
        
        .form-section {
            background: rgba(203, 56, 55, 0.05);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .form-section h4 {
            margin: 0 0 1rem 0;
            color: var(--primary-color);
            font-size: 0.95rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            font-size: 0.85rem;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            margin-bottom: 0;
        }
        
        .inline-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }
        
        .dep-item {
            display: grid;
            grid-template-columns: 1fr 100px auto;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            align-items: center;
        }
        
        .dep-item input {
            margin-bottom: 0;
        }
        
        .script-item {
            display: grid;
            grid-template-columns: 120px 1fr auto;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            align-items: center;
        }
        
        .script-item input {
            margin-bottom: 0;
        }
        
        .add-btn {
            width: 100%;
            padding: 0.5rem;
            margin-top: 0.5rem;
            background: transparent;
            border: 1px dashed var(--primary-color);
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
            border-radius: var(--border-radius);
        }
        
        .add-btn:hover {
            background: rgba(203, 56, 55, 0.1);
        }
        
        pre {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1rem;
            border-radius: var(--border-radius);
            overflow: auto;
            white-space: pre;
            min-height: 60vh;
        }
        
        .json-key { color: #9cdcfe; }
        .json-string { color: #ce9178; }
        .json-number { color: #b5cea8; }
        .json-boolean { color: #569cd6; }
        
        .btn-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .btn-primary {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background: #a82e2d;
            border-color: #a82e2d;
        }
        
        .btn-secondary {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .template-btns {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .template-btn {
            padding: 0.25rem 0.75rem;
            font-size: 0.85rem;
            border-radius: 20px;
            background: rgba(203, 56, 55, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .template-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 2rem;
            background: var(--primary-color);
            color: white;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
            z-index: 1000;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .checkbox-item input {
            margin: 0;
        }
        
        .keyword-input {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding: 0.5rem;
            border: 1px solid var(--pico-form-element-border-color);
            border-radius: var(--border-radius);
            min-height: 40px;
        }
        
        .keyword-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        
        .keyword-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0;
            font-size: 1rem;
            line-height: 1;
        }
        
        .keyword-input input {
            border: none;
            outline: none;
            flex: 1;
            min-width: 100px;
            background: transparent;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <rect x="10" y="10" width="80" height="80" rx="8" fill="#cb3837"/>
                    <text x="50" y="65" text-anchor="middle" fill="white" font-size="40" font-weight="bold">npm</text>
                </svg>
                <h1>package.json ÁîüÊàêÂô®</h1>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()" title="ÂàáÊç¢‰∏ªÈ¢ò">
                <span id="theme-icon">üåô</span>
            </button>
        </header>
        
        <div class="template-btns">
            <button class="template-btn" onclick="loadTemplate('basic')">Âü∫Á°ÄÈ°πÁõÆ</button>
            <button class="template-btn" onclick="loadTemplate('react')">React Â∫îÁî®</button>
            <button class="template-btn" onclick="loadTemplate('vue')">Vue Â∫îÁî®</button>
            <button class="template-btn" onclick="loadTemplate('node')">Node.js ÊúçÂä°</button>
            <button class="template-btn" onclick="loadTemplate('express')">Express API</button>
            <button class="template-btn" onclick="loadTemplate('library')">NPM Â∫ì</button>
        </div>
        
        <div class="main-grid">
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">üì¶ ÈÖçÁΩÆÈÄâÈ°π</h3>
                </div>
                
                <div class="form-section">
                    <h4>üìã Âü∫Êú¨‰ø°ÊÅØ</h4>
                    <div class="form-group">
                        <label>ÂåÖÂêçÁß∞</label>
                        <input type="text" id="pkgName" value="my-project" oninput="generate()">
                    </div>
                    <div class="inline-group">
                        <div class="form-group">
                            <label>ÁâàÊú¨Âè∑</label>
                            <input type="text" id="pkgVersion" value="1.0.0" oninput="generate()">
                        </div>
                        <div class="form-group">
                            <label>ËÆ∏ÂèØËØÅ</label>
                            <select id="pkgLicense" onchange="generate()">
                                <option value="MIT">MIT</option>
                                <option value="ISC">ISC</option>
                                <option value="Apache-2.0">Apache 2.0</option>
                                <option value="GPL-3.0">GPL 3.0</option>
                                <option value="BSD-3-Clause">BSD 3-Clause</option>
                                <option value="UNLICENSED">UNLICENSED</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ÊèèËø∞</label>
                        <input type="text" id="pkgDescription" placeholder="È°πÁõÆÊèèËø∞..." oninput="generate()">
                    </div>
                    <div class="form-group">
                        <label>ÂÖ≥ÈîÆËØç</label>
                        <div class="keyword-input" id="keywordsInput" onclick="focusKeywordInput()">
                            <input type="text" id="keywordText" placeholder="ËæìÂÖ•ÂÖ≥ÈîÆËØçÂêéÊåâÂõûËΩ¶..." onkeydown="handleKeyword(event)">
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>üë§ ‰ΩúËÄÖ‰ø°ÊÅØ</h4>
                    <div class="inline-group">
                        <div class="form-group">
                            <label>‰ΩúËÄÖÂêçÁß∞</label>
                            <input type="text" id="authorName" placeholder="Your Name" oninput="generate()">
                        </div>
                        <div class="form-group">
                            <label>ÈÇÆÁÆ±</label>
                            <input type="email" id="authorEmail" placeholder="email@example.com" oninput="generate()">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‰ªìÂ∫ìÂú∞ÂùÄ</label>
                        <input type="text" id="repoUrl" placeholder="https://github.com/username/repo" oninput="generate()">
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>‚öôÔ∏è ÂÖ•Âè£Êñá‰ª∂</h4>
                    <div class="inline-group">
                        <div class="form-group">
                            <label>main (CJS)</label>
                            <input type="text" id="pkgMain" value="index.js" oninput="generate()">
                        </div>
                        <div class="form-group">
                            <label>module (ESM)</label>
                            <input type="text" id="pkgModule" placeholder="dist/index.mjs" oninput="generate()">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Á±ªÂûã</label>
                        <select id="pkgType" onchange="generate()">
                            <option value="">ÈªòËÆ§ (CommonJS)</option>
                            <option value="module">module (ESM)</option>
                            <option value="commonjs">commonjs</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>üìú Scripts</h4>
                    <div id="scriptsList"></div>
                    <button class="add-btn" onclick="addScript()">+ Ê∑ªÂä† Script</button>
                </div>
                
                <div class="form-section">
                    <h4>üì¶ Dependencies</h4>
                    <div id="depsList"></div>
                    <button class="add-btn" onclick="addDep('deps')">+ Ê∑ªÂä†‰æùËµñ</button>
                </div>
                
                <div class="form-section">
                    <h4>üîß DevDependencies</h4>
                    <div id="devDepsList"></div>
                    <button class="add-btn" onclick="addDep('devDeps')">+ Ê∑ªÂä†ÂºÄÂèë‰æùËµñ</button>
                </div>
                
                <div class="form-section">
                    <h4>üéØ Engines</h4>
                    <div class="inline-group">
                        <div class="form-group">
                            <label>Node.js ÁâàÊú¨</label>
                            <input type="text" id="engineNode" placeholder=">=18.0.0" oninput="generate()">
                        </div>
                        <div class="form-group">
                            <label>npm ÁâàÊú¨</label>
                            <input type="text" id="engineNpm" placeholder=">=9.0.0" oninput="generate()">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">üìÑ package.json</h3>
                    <div class="btn-group">
                        <button class="btn-primary" onclick="copyJson()">Â§çÂà∂</button>
                        <button class="btn-secondary" onclick="downloadJson()">‰∏ãËΩΩ</button>
                    </div>
                </div>
                <pre id="jsonOutput"></pre>
            </div>
        </div>
    </div>
    
    <div id="toast" class="toast"></div>

    <script>
        let keywords = [];
        let scripts = [
            { name: 'start', cmd: 'node index.js' },
            { name: 'dev', cmd: 'nodemon index.js' },
            { name: 'test', cmd: 'jest' },
            { name: 'build', cmd: 'npm run compile' }
        ];
        let deps = [];
        let devDeps = [];
        
        const templates = {
            basic: {
                name: 'my-project',
                version: '1.0.0',
                description: '',
                main: 'index.js',
                type: '',
                scripts: [
                    { name: 'start', cmd: 'node index.js' },
                    { name: 'test', cmd: 'echo "Error: no test specified" && exit 1' }
                ],
                deps: [],
                devDeps: []
            },
            react: {
                name: 'my-react-app',
                version: '0.1.0',
                description: 'A React application',
                main: 'src/index.js',
                type: 'module',
                scripts: [
                    { name: 'start', cmd: 'react-scripts start' },
                    { name: 'build', cmd: 'react-scripts build' },
                    { name: 'test', cmd: 'react-scripts test' },
                    { name: 'eject', cmd: 'react-scripts eject' }
                ],
                deps: [
                    { name: 'react', version: '^18.2.0' },
                    { name: 'react-dom', version: '^18.2.0' },
                    { name: 'react-scripts', version: '^5.0.1' }
                ],
                devDeps: [
                    { name: '@types/react', version: '^18.2.0' },
                    { name: '@types/react-dom', version: '^18.2.0' }
                ]
            },
            vue: {
                name: 'my-vue-app',
                version: '0.1.0',
                description: 'A Vue.js application',
                main: 'src/main.js',
                type: 'module',
                scripts: [
                    { name: 'dev', cmd: 'vite' },
                    { name: 'build', cmd: 'vite build' },
                    { name: 'preview', cmd: 'vite preview' }
                ],
                deps: [
                    { name: 'vue', version: '^3.4.0' },
                    { name: 'vue-router', version: '^4.2.0' },
                    { name: 'pinia', version: '^2.1.0' }
                ],
                devDeps: [
                    { name: '@vitejs/plugin-vue', version: '^5.0.0' },
                    { name: 'vite', version: '^5.0.0' }
                ]
            },
            node: {
                name: 'my-node-service',
                version: '1.0.0',
                description: 'A Node.js service',
                main: 'src/index.js',
                type: 'module',
                scripts: [
                    { name: 'start', cmd: 'node src/index.js' },
                    { name: 'dev', cmd: 'nodemon src/index.js' },
                    { name: 'test', cmd: 'jest' },
                    { name: 'lint', cmd: 'eslint src/' }
                ],
                deps: [
                    { name: 'dotenv', version: '^16.3.0' }
                ],
                devDeps: [
                    { name: 'nodemon', version: '^3.0.0' },
                    { name: 'jest', version: '^29.7.0' },
                    { name: 'eslint', version: '^8.56.0' }
                ]
            },
            express: {
                name: 'my-express-api',
                version: '1.0.0',
                description: 'An Express.js REST API',
                main: 'src/server.js',
                type: '',
                scripts: [
                    { name: 'start', cmd: 'node src/server.js' },
                    { name: 'dev', cmd: 'nodemon src/server.js' },
                    { name: 'test', cmd: 'jest --coverage' }
                ],
                deps: [
                    { name: 'express', version: '^4.18.0' },
                    { name: 'cors', version: '^2.8.5' },
                    { name: 'helmet', version: '^7.1.0' },
                    { name: 'morgan', version: '^1.10.0' },
                    { name: 'dotenv', version: '^16.3.0' }
                ],
                devDeps: [
                    { name: 'nodemon', version: '^3.0.0' },
                    { name: 'jest', version: '^29.7.0' },
                    { name: 'supertest', version: '^6.3.0' }
                ]
            },
            library: {
                name: 'my-npm-package',
                version: '1.0.0',
                description: 'A reusable npm package',
                main: 'dist/index.js',
                module: 'dist/index.mjs',
                type: 'module',
                scripts: [
                    { name: 'build', cmd: 'tsup src/index.ts --format cjs,esm --dts' },
                    { name: 'test', cmd: 'vitest' },
                    { name: 'prepublishOnly', cmd: 'npm run build' }
                ],
                deps: [],
                devDeps: [
                    { name: 'typescript', version: '^5.3.0' },
                    { name: 'tsup', version: '^8.0.0' },
                    { name: 'vitest', version: '^1.0.0' }
                ]
            }
        };
        
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.getElementById('theme-icon').textContent = newTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }
        
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('theme-icon').textContent = savedTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }
        
        function loadTemplate(name) {
            const t = templates[name];
            document.getElementById('pkgName').value = t.name;
            document.getElementById('pkgVersion').value = t.version;
            document.getElementById('pkgDescription').value = t.description;
            document.getElementById('pkgMain').value = t.main;
            document.getElementById('pkgModule').value = t.module || '';
            document.getElementById('pkgType').value = t.type || '';
            
            scripts = [...t.scripts];
            deps = [...t.deps];
            devDeps = [...t.devDeps];
            
            renderScripts();
            renderDeps('deps');
            renderDeps('devDeps');
            generate();
            showToast('Â∑≤Âä†ËΩΩ ' + name + ' Ê®°Êùø');
        }
        
        function focusKeywordInput() {
            document.getElementById('keywordText').focus();
        }
        
        function handleKeyword(e) {
            if (e.key === 'Enter' && e.target.value.trim()) {
                e.preventDefault();
                keywords.push(e.target.value.trim());
                e.target.value = '';
                renderKeywords();
                generate();
            }
        }
        
        function removeKeyword(index) {
            keywords.splice(index, 1);
            renderKeywords();
            generate();
        }
        
        function renderKeywords() {
            const container = document.getElementById('keywordsInput');
            const input = document.getElementById('keywordText');
            
            // Remove existing tags
            const tags = container.querySelectorAll('.keyword-tag');
            tags.forEach(tag => tag.remove());
            
            // Add tags before input
            keywords.forEach((kw, index) => {
                const tag = document.createElement('span');
                tag.className = 'keyword-tag';
                tag.textContent = kw;
                
                const removeBtn = document.createElement('button');
                removeBtn.textContent = '√ó';
                removeBtn.onclick = function(e) {
                    e.stopPropagation();
                    removeKeyword(index);
                };
                tag.appendChild(removeBtn);
                
                container.insertBefore(tag, input);
            });
        }
        
        function addScript() {
            scripts.push({ name: '', cmd: '' });
            renderScripts();
        }
        
        function removeScript(index) {
            scripts.splice(index, 1);
            renderScripts();
            generate();
        }
        
        function updateScript(index, field, value) {
            scripts[index][field] = value;
            generate();
        }
        
        function renderScripts() {
            const container = document.getElementById('scriptsList');
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }
            
            scripts.forEach((script, index) => {
                const item = document.createElement('div');
                item.className = 'script-item';
                
                const nameInput = document.createElement('input');
                nameInput.type = 'text';
                nameInput.value = script.name;
                nameInput.placeholder = 'name';
                nameInput.onchange = function() { updateScript(index, 'name', this.value); };
                item.appendChild(nameInput);
                
                const cmdInput = document.createElement('input');
                cmdInput.type = 'text';
                cmdInput.value = script.cmd;
                cmdInput.placeholder = 'command';
                cmdInput.onchange = function() { updateScript(index, 'cmd', this.value); };
                item.appendChild(cmdInput);
                
                const removeBtn = document.createElement('button');
                removeBtn.textContent = '√ó';
                removeBtn.style.padding = '0.5rem';
                removeBtn.onclick = function() { removeScript(index); };
                item.appendChild(removeBtn);
                
                container.appendChild(item);
            });
        }
        
        function addDep(type) {
            if (type === 'deps') {
                deps.push({ name: '', version: '^1.0.0' });
                renderDeps('deps');
            } else {
                devDeps.push({ name: '', version: '^1.0.0' });
                renderDeps('devDeps');
            }
        }
        
        function removeDep(type, index) {
            if (type === 'deps') {
                deps.splice(index, 1);
                renderDeps('deps');
            } else {
                devDeps.splice(index, 1);
                renderDeps('devDeps');
            }
            generate();
        }
        
        function updateDep(type, index, field, value) {
            if (type === 'deps') {
                deps[index][field] = value;
            } else {
                devDeps[index][field] = value;
            }
            generate();
        }
        
        function renderDeps(type) {
            const list = type === 'deps' ? deps : devDeps;
            const containerId = type === 'deps' ? 'depsList' : 'devDepsList';
            const container = document.getElementById(containerId);
            
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }
            
            list.forEach((dep, index) => {
                const item = document.createElement('div');
                item.className = 'dep-item';
                
                const nameInput = document.createElement('input');
                nameInput.type = 'text';
                nameInput.value = dep.name;
                nameInput.placeholder = 'package-name';
                nameInput.onchange = function() { updateDep(type, index, 'name', this.value); };
                item.appendChild(nameInput);
                
                const versionInput = document.createElement('input');
                versionInput.type = 'text';
                versionInput.value = dep.version;
                versionInput.placeholder = '^1.0.0';
                versionInput.onchange = function() { updateDep(type, index, 'version', this.value); };
                item.appendChild(versionInput);
                
                const removeBtn = document.createElement('button');
                removeBtn.textContent = '√ó';
                removeBtn.style.padding = '0.5rem';
                removeBtn.onclick = function() { removeDep(type, index); };
                item.appendChild(removeBtn);
                
                container.appendChild(item);
            });
        }
        
        function generate() {
            const pkg = {};
            
            const name = document.getElementById('pkgName').value;
            if (name) pkg.name = name;
            
            const version = document.getElementById('pkgVersion').value;
            if (version) pkg.version = version;
            
            const description = document.getElementById('pkgDescription').value;
            if (description) pkg.description = description;
            
            const main = document.getElementById('pkgMain').value;
            if (main) pkg.main = main;
            
            const module = document.getElementById('pkgModule').value;
            if (module) pkg.module = module;
            
            const type = document.getElementById('pkgType').value;
            if (type) pkg.type = type;
            
            if (keywords.length > 0) {
                pkg.keywords = keywords;
            }
            
            // Author
            const authorName = document.getElementById('authorName').value;
            const authorEmail = document.getElementById('authorEmail').value;
            if (authorName || authorEmail) {
                if (authorName && authorEmail) {
                    pkg.author = authorName + ' <' + authorEmail + '>';
                } else {
                    pkg.author = authorName || authorEmail;
                }
            }
            
            const license = document.getElementById('pkgLicense').value;
            if (license) pkg.license = license;
            
            // Repository
            const repoUrl = document.getElementById('repoUrl').value;
            if (repoUrl) {
                pkg.repository = {
                    type: 'git',
                    url: repoUrl
                };
            }
            
            // Scripts
            const validScripts = scripts.filter(s => s.name && s.cmd);
            if (validScripts.length > 0) {
                pkg.scripts = {};
                validScripts.forEach(s => {
                    pkg.scripts[s.name] = s.cmd;
                });
            }
            
            // Dependencies
            const validDeps = deps.filter(d => d.name);
            if (validDeps.length > 0) {
                pkg.dependencies = {};
                validDeps.forEach(d => {
                    pkg.dependencies[d.name] = d.version || '*';
                });
            }
            
            // DevDependencies
            const validDevDeps = devDeps.filter(d => d.name);
            if (validDevDeps.length > 0) {
                pkg.devDependencies = {};
                validDevDeps.forEach(d => {
                    pkg.devDependencies[d.name] = d.version || '*';
                });
            }
            
            // Engines
            const engineNode = document.getElementById('engineNode').value;
            const engineNpm = document.getElementById('engineNpm').value;
            if (engineNode || engineNpm) {
                pkg.engines = {};
                if (engineNode) pkg.engines.node = engineNode;
                if (engineNpm) pkg.engines.npm = engineNpm;
            }
            
            document.getElementById('jsonOutput').textContent = JSON.stringify(pkg, null, 2);
        }
        
        function copyJson() {
            const json = document.getElementById('jsonOutput').textContent;
            navigator.clipboard.writeText(json).then(function() {
                showToast('Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ');
            });
        }
        
        function downloadJson() {
            const json = document.getElementById('jsonOutput').textContent;
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'package.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast('Êñá‰ª∂Â∑≤‰∏ãËΩΩÔºÅ');
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(function() {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Initialize
        initTheme();
        renderScripts();
        renderDeps('deps');
        renderDeps('devDeps');
        generate();
    </script>
</body>
</html>
