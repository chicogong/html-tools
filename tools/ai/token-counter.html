<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token ËÆ°Êï∞Âô® - AI ÊñáÊú¨ÂàÜËØçÁªüËÆ°</title>
    <meta name="description" content="Âú®Á∫øËÆ°ÁÆóÊñáÊú¨ÁöÑ Token Êï∞ÈáèÔºåÊîØÊåÅ GPT-4„ÄÅClaude„ÄÅDeepSeek Á≠â‰∏ªÊµÅ AI Ê®°ÂûãÁöÑÂàÜËØçÁªüËÆ°ÂíåË¥πÁî®‰º∞ÁÆó">
    <meta name="keywords" content="token counter,tokenËÆ°Êï∞,AIÂàÜËØç,GPT token,Claude token,tiktoken">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f0f23;
            --text-primary: #eee;
            --text-secondary: #aaa;
            --border-color: #333;
            --accent-color: #4f46e5;
            --accent-hover: #6366f1;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }
        [data-theme="light"] {
            --bg-primary: #fff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        h1 { font-size: 1.8rem; }
        .header-actions { display: flex; gap: 10px; align-items: center; }
        .theme-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        .theme-toggle:hover { border-color: var(--accent-color); }
        .back-link {
            color: var(--accent-color);
            text-decoration: none;
            font-size: 14px;
        }
        .back-link:hover { text-decoration: underline; }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
        }
        .card-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .input-section textarea {
            width: 100%;
            height: 400px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            color: var(--text-primary);
            font-family: Monaco, Menlo, 'Ubuntu Mono', monospace;
            font-size: 14px;
            resize: vertical;
            line-height: 1.6;
        }
        .input-section textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        .input-section textarea::placeholder { color: var(--text-secondary); }

        .input-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary {
            background: var(--accent-color);
            color: white;
        }
        .btn-primary:hover { background: var(--accent-hover); }
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        .btn-secondary:hover { border-color: var(--accent-color); }

        .sidebar { display: flex; flex-direction: column; gap: 20px; }

        .model-selector select {
            width: 100%;
            padding: 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
        }
        .model-selector select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .stat-item {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-item.full-width { grid-column: 1 / -1; }
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .cost-breakdown { margin-top: 15px; }
        .cost-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }
        .cost-item:last-child { border-bottom: none; }
        .cost-label { color: var(--text-secondary); }
        .cost-value { font-weight: 600; }

        .info-section {
            margin-top: 30px;
        }
        .info-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
        }
        .info-card h3 {
            font-size: 1rem;
            margin-bottom: 15px;
        }
        .info-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        .info-table th, .info-table td {
            padding: 10px 8px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .info-table th {
            color: var(--text-secondary);
            font-weight: 500;
        }
        .info-table tr:last-child td { border-bottom: none; }

        .token-visualization {
            margin-top: 15px;
            padding: 15px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
        }
        .token-visualization .token {
            display: inline-block;
            padding: 2px 6px;
            margin: 2px;
            border-radius: 4px;
            font-size: 12px;
            font-family: monospace;
        }
        .token-visualization .token:nth-child(4n+1) { background: rgba(79, 70, 229, 0.3); }
        .token-visualization .token:nth-child(4n+2) { background: rgba(34, 197, 94, 0.3); }
        .token-visualization .token:nth-child(4n+3) { background: rgba(245, 158, 11, 0.3); }
        .token-visualization .token:nth-child(4n+4) { background: rgba(239, 68, 68, 0.3); }

        .note {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 10px;
            padding: 10px;
            background: var(--bg-tertiary);
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî¢ Token ËÆ°Êï∞Âô®</h1>
            <div class="header-actions">
                <a href="../../index.html" class="back-link">‚Üê ËøîÂõûÈ¶ñÈ°µ</a>
                <button class="theme-toggle" onclick="toggleTheme()">üåì ‰∏ªÈ¢ò</button>
            </div>
        </header>

        <div class="main-grid">
            <div class="input-section card">
                <div class="card-title">ËæìÂÖ•ÊñáÊú¨</div>
                <textarea id="inputText" placeholder="Âú®ËøôÈáåËæìÂÖ•ÊàñÁ≤òË¥¥‰Ω†Ë¶ÅËÆ°ÁÆó Token ÁöÑÊñáÊú¨...

ÊîØÊåÅ:
- ÊôÆÈÄöÊñáÊú¨
- ‰ª£Á†ÅÁâáÊÆµ
- JSON/Markdown Á≠âÊ†ºÂºè
- ‰∏≠Ëã±ÊñáÊ∑∑ÂêàÂÜÖÂÆπ

Token ‰ºöÂÆûÊó∂ËÆ°ÁÆóÂπ∂ÊòæÁ§∫Âú®Âè≥‰æß„ÄÇ"></textarea>
                <div class="input-actions">
                    <button class="btn btn-primary" onclick="countTokens()">üìä ËÆ°ÁÆó Token</button>
                    <button class="btn btn-secondary" onclick="clearInput()">üóëÔ∏è Ê∏ÖÁ©∫</button>
                    <button class="btn btn-secondary" onclick="loadSample()">üìù Âä†ËΩΩÁ§∫‰æã</button>
                    <button class="btn btn-secondary" onclick="pasteFromClipboard()">üìã Á≤òË¥¥</button>
                </div>

                <div class="token-visualization" id="tokenVisualization" style="display: none;">
                    <div class="card-title">Token ÂèØËßÜÂåñ</div>
                    <div id="tokenDisplay"></div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card model-selector">
                    <div class="card-title">ÈÄâÊã©Ê®°Âûã</div>
                    <select id="modelSelect" onchange="countTokens()">
                        <optgroup label="OpenAI">
                            <option value="gpt-4o">GPT-4o / GPT-4o mini</option>
                            <option value="gpt-4-turbo">GPT-4 Turbo</option>
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                        </optgroup>
                        <optgroup label="Anthropic">
                            <option value="claude-3.5-sonnet">Claude 3.5 Sonnet</option>
                            <option value="claude-3-opus">Claude 3 Opus</option>
                            <option value="claude-3-haiku">Claude 3 Haiku</option>
                        </optgroup>
                        <optgroup label="DeepSeek">
                            <option value="deepseek-v3">DeepSeek V3</option>
                            <option value="deepseek-r1">DeepSeek R1</option>
                        </optgroup>
                        <optgroup label="Google">
                            <option value="gemini-2.0">Gemini 2.0 Flash</option>
                            <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                        </optgroup>
                    </select>
                </div>

                <div class="card">
                    <div class="card-title">ÁªüËÆ°ÁªìÊûú</div>
                    <div class="stats-grid">
                        <div class="stat-item full-width">
                            <div class="stat-value" id="tokenCount">0</div>
                            <div class="stat-label">Token Êï∞Èáè</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="charCount">0</div>
                            <div class="stat-label">Â≠óÁ¨¶Êï∞</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="wordCount">0</div>
                            <div class="stat-label">ÂçïËØç/ËØçÊï∞</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="lineCount">0</div>
                            <div class="stat-label">Ë°åÊï∞</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="ratio">0</div>
                            <div class="stat-label">Â≠óÁ¨¶/Token ÊØî</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">üí∞ Ë¥πÁî®‰º∞ÁÆó</div>
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <span class="cost-label">ËæìÂÖ•Ë¥πÁî®</span>
                            <span class="cost-value" id="inputCost">$0.0000</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">ËæìÂá∫Ë¥πÁî® (‰º∞ÁÆó)</span>
                            <span class="cost-value" id="outputCost">$0.0000</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">ÊÄªËÆ°</span>
                            <span class="cost-value" id="totalCost">$0.0000</span>
                        </div>
                    </div>
                    <div class="note">
                        * ËæìÂá∫Ë¥πÁî®ÊåâËæìÂÖ• Token ÁöÑ 50% ‰º∞ÁÆó
                    </div>
                </div>
            </div>
        </div>

        <div class="info-section">
            <div class="info-card">
                <h3>üìö Ê®°ÂûãÂÆö‰ª∑ÂèÇËÄÉ (ÊØèÁôæ‰∏á Token)</h3>
                <table class="info-table">
                    <thead>
                        <tr>
                            <th>Ê®°Âûã</th>
                            <th>ËæìÂÖ•‰ª∑Ê†º</th>
                            <th>ËæìÂá∫‰ª∑Ê†º</th>
                            <th>‰∏ä‰∏ãÊñáÁ™óÂè£</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GPT-4o</td>
                            <td>$2.50</td>
                            <td>$10.00</td>
                            <td>128K</td>
                        </tr>
                        <tr>
                            <td>GPT-4o mini</td>
                            <td>$0.15</td>
                            <td>$0.60</td>
                            <td>128K</td>
                        </tr>
                        <tr>
                            <td>Claude 3.5 Sonnet</td>
                            <td>$3.00</td>
                            <td>$15.00</td>
                            <td>200K</td>
                        </tr>
                        <tr>
                            <td>Claude 3 Opus</td>
                            <td>$15.00</td>
                            <td>$75.00</td>
                            <td>200K</td>
                        </tr>
                        <tr>
                            <td>DeepSeek V3</td>
                            <td>$0.27</td>
                            <td>$1.10</td>
                            <td>64K</td>
                        </tr>
                        <tr>
                            <td>DeepSeek R1</td>
                            <td>$0.55</td>
                            <td>$2.19</td>
                            <td>64K</td>
                        </tr>
                        <tr>
                            <td>Gemini 2.0 Flash</td>
                            <td>$0.10</td>
                            <td>$0.40</td>
                            <td>1M</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Model pricing per million tokens
        const MODEL_PRICING = {
            'gpt-4o': { input: 2.50, output: 10.00 },
            'gpt-4-turbo': { input: 10.00, output: 30.00 },
            'gpt-4': { input: 30.00, output: 60.00 },
            'gpt-3.5-turbo': { input: 0.50, output: 1.50 },
            'claude-3.5-sonnet': { input: 3.00, output: 15.00 },
            'claude-3-opus': { input: 15.00, output: 75.00 },
            'claude-3-haiku': { input: 0.25, output: 1.25 },
            'deepseek-v3': { input: 0.27, output: 1.10 },
            'deepseek-r1': { input: 0.55, output: 2.19 },
            'gemini-2.0': { input: 0.10, output: 0.40 },
            'gemini-1.5-pro': { input: 1.25, output: 5.00 }
        };

        // Token estimation ratios (characters per token)
        const TOKEN_RATIOS = {
            'gpt-4o': { en: 4.0, zh: 1.5 },
            'gpt-4-turbo': { en: 4.0, zh: 1.5 },
            'gpt-4': { en: 4.0, zh: 1.5 },
            'gpt-3.5-turbo': { en: 4.0, zh: 1.5 },
            'claude-3.5-sonnet': { en: 4.0, zh: 1.8 },
            'claude-3-opus': { en: 4.0, zh: 1.8 },
            'claude-3-haiku': { en: 4.0, zh: 1.8 },
            'deepseek-v3': { en: 4.0, zh: 2.0 },
            'deepseek-r1': { en: 4.0, zh: 2.0 },
            'gemini-2.0': { en: 4.0, zh: 1.8 },
            'gemini-1.5-pro': { en: 4.0, zh: 1.8 }
        };

        // Theme handling
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const newTheme = current === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Estimate tokens based on character analysis
        function estimateTokens(text, model) {
            if (!text) return 0;
            
            const ratios = TOKEN_RATIOS[model] || TOKEN_RATIOS['gpt-4o'];
            
            // Count Chinese and non-Chinese characters
            const chineseChars = (text.match(/[\u4e00-\u9fff\u3400-\u4dbf]/g) || []).length;
            const otherChars = text.length - chineseChars;
            
            // Estimate tokens
            const chineseTokens = chineseChars / ratios.zh;
            const otherTokens = otherChars / ratios.en;
            
            return Math.ceil(chineseTokens + otherTokens);
        }

        // Tokenize text for visualization (simplified)
        function tokenizeForVisualization(text) {
            const tokens = [];
            let current = '';
            
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                
                // Chinese character - each is roughly a token
                if (/[\u4e00-\u9fff\u3400-\u4dbf]/.test(char)) {
                    if (current) {
                        tokens.push(current);
                        current = '';
                    }
                    tokens.push(char);
                }
                // Whitespace
                else if (/\s/.test(char)) {
                    if (current) {
                        tokens.push(current);
                        current = '';
                    }
                    if (char === '\n') {
                        tokens.push('‚èé');
                    }
                }
                // Punctuation
                else if (/[^\w]/.test(char)) {
                    if (current) {
                        tokens.push(current);
                        current = '';
                    }
                    tokens.push(char);
                }
                // Regular characters
                else {
                    current += char;
                    // Split long words
                    if (current.length >= 4) {
                        tokens.push(current);
                        current = '';
                    }
                }
            }
            
            if (current) {
                tokens.push(current);
            }
            
            return tokens;
        }

        // Count tokens and update UI
        function countTokens() {
            const text = document.getElementById('inputText').value;
            const model = document.getElementById('modelSelect').value;
            
            // Basic stats
            const charCount = text.length;
            const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
            const lineCount = text ? text.split('\n').length : 0;
            
            // Token estimation
            const tokenCount = estimateTokens(text, model);
            const ratio = tokenCount > 0 ? (charCount / tokenCount).toFixed(1) : 0;
            
            // Update stats display
            document.getElementById('tokenCount').textContent = tokenCount.toLocaleString();
            document.getElementById('charCount').textContent = charCount.toLocaleString();
            document.getElementById('wordCount').textContent = wordCount.toLocaleString();
            document.getElementById('lineCount').textContent = lineCount.toLocaleString();
            document.getElementById('ratio').textContent = ratio;
            
            // Calculate costs
            const pricing = MODEL_PRICING[model];
            const inputCost = (tokenCount / 1000000) * pricing.input;
            const outputCost = (tokenCount * 0.5 / 1000000) * pricing.output;
            const totalCost = inputCost + outputCost;
            
            document.getElementById('inputCost').textContent = '$' + inputCost.toFixed(6);
            document.getElementById('outputCost').textContent = '$' + outputCost.toFixed(6);
            document.getElementById('totalCost').textContent = '$' + totalCost.toFixed(6);
            
            // Token visualization
            if (text && text.length < 2000) {
                const tokens = tokenizeForVisualization(text);
                const display = document.getElementById('tokenDisplay');
                display.innerHTML = tokens.map(t => 
                    `<span class="token">${t.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</span>`
                ).join('');
                document.getElementById('tokenVisualization').style.display = 'block';
            } else {
                document.getElementById('tokenVisualization').style.display = 'none';
            }
        }

        function clearInput() {
            document.getElementById('inputText').value = '';
            countTokens();
        }

        function loadSample() {
            const samples = [
                `‰Ω†Â•ΩÔºåÊàëÊòØ‰∏Ä‰∏™ AI Âä©Êâã„ÄÇ‰ªäÂ§©ÊàëÊù•Â∏Æ‰Ω†‰∫ÜËß£ Token ÊòØ‰ªÄ‰πà„ÄÇ

Token ÊòØÂ§ßËØ≠Ë®ÄÊ®°ÂûãÂ§ÑÁêÜÊñáÊú¨ÁöÑÂü∫Êú¨Âçï‰Ωç„ÄÇÂØπ‰∫éËã±ÊñáÔºå‰∏Ä‰∏™ Token Â§ßÁ∫¶ÊòØ 4 ‰∏™Â≠óÁ¨¶Êàñ 3/4 ‰∏™ÂçïËØç„ÄÇÂØπ‰∫é‰∏≠ÊñáÔºå‰∏Ä‰∏™Ê±âÂ≠óÈÄöÂ∏∏ÂØπÂ∫î 1-2 ‰∏™ Token„ÄÇ

Here's an example in English: "Hello, world!" might be tokenized as ["Hello", ",", " world", "!"].

Ë¥πÁî®ËÆ°ÁÆóÂÖ¨Âºè: ÊÄªË¥πÁî® = (ËæìÂÖ•Token √ó ËæìÂÖ•Âçï‰ª∑) + (ËæìÂá∫Token √ó ËæìÂá∫Âçï‰ª∑)`,

                `const calculateTokenCost = (tokens, model) => {
    const pricing = {
        'gpt-4o': { input: 2.50, output: 10.00 },
        'claude-3.5-sonnet': { input: 3.00, output: 15.00 },
        'deepseek-v3': { input: 0.27, output: 1.10 }
    };
    
    const price = pricing[model];
    return {
        inputCost: (tokens.input / 1000000) * price.input,
        outputCost: (tokens.output / 1000000) * price.output
    };
};`,

                `# API ËØ∑Ê±ÇÁ§∫‰æã

## Python
\`\`\`python
import openai

response = openai.ChatCompletion.create(
    model="gpt-4o",
    messages=[
        {"role": "system", "content": "‰Ω†ÊòØ‰∏Ä‰∏™ÊúâÂ∏ÆÂä©ÁöÑÂä©Êâã"},
        {"role": "user", "content": "Ëß£Èáä‰ªÄ‰πàÊòØ Token"}
    ]
)
\`\`\`

## Ë¥πÁî®‰º∞ÁÆó
- ËæìÂÖ•: ~50 tokens √ó $2.50/1M = $0.000125
- ËæìÂá∫: ~200 tokens √ó $10.00/1M = $0.002
- ÊÄªËÆ°: ~$0.002125`
            ];
            
            document.getElementById('inputText').value = samples[Math.floor(Math.random() * samples.length)];
            countTokens();
        }

        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('inputText').value = text;
                countTokens();
            } catch (err) {
                alert('Êó†Ê≥ïËÆøÈóÆÂâ™Ë¥¥ÊùøÔºåËØ∑ÊâãÂä®Á≤òË¥¥');
            }
        }

        // Auto-count on input
        document.getElementById('inputText').addEventListener('input', countTokens);

        // Initialize
        initTheme();
        countTokens();
    </script>
</body>
</html>
