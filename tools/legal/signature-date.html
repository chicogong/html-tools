<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç­¾ç½²æ—¥æœŸæ ¼å¼åŒ–å™¨ - WebUtils</title>
  <meta name="description" content="ç”Ÿæˆå„ç§æ ¼å¼çš„æ³•å¾‹æ–‡ä»¶ç­¾ç½²æ—¥æœŸ" />
  <meta name="keywords" content="ç­¾ç½²æ—¥æœŸ æ—¥æœŸæ ¼å¼ æ³•å¾‹æ–‡ä»¶ åˆåŒæ—¥æœŸ" />
  <meta name="author" content="WebUtils" />
  <meta name="robots" content="index, follow" />
  <meta property="og:title" content="ç­¾ç½²æ—¥æœŸæ ¼å¼åŒ–å™¨ - WebUtils" />
  <meta property="og:description" content="ç”Ÿæˆå„ç§æ ¼å¼çš„æ³•å¾‹æ–‡ä»¶ç­¾ç½²æ—¥æœŸ" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="WebUtils" />
  <meta property="og:locale" content="zh_CN" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="ç­¾ç½²æ—¥æœŸæ ¼å¼åŒ–å™¨ - WebUtils" />
  <meta name="twitter:description" content="ç”Ÿæˆå„ç§æ ¼å¼çš„æ³•å¾‹æ–‡ä»¶ç­¾ç½²æ—¥æœŸ" />

  <style>
    :root {
      --bg: #f8f9fa;
      --card-bg: #fff;
      --text: #212529;
      --text-muted: #6c757d;
      --border: #dee2e6;
      --primary: #6366f1;
      --primary-hover: #4f46e5;
      --success: #198754;
      --danger: #dc3545;
      --shadow: 0 2px 8px rgb(0,0,0,0.08);
      --radius: 8px;
    }

    [data-theme="dark"] {
      --bg: #0a0a0f;
      --card-bg: #1a1a24;
      --text: #e8e8ed;
      --text-muted: #9898a4;
      --border: #2a2a36;
      --primary: #818cf8;
      --primary-hover: #6366f1;
      --success: #10b981;
      --danger: #ef4444;
      --shadow: 0 2px 8px rgb(0,0,0,0.3);
    }

    * { box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 24px;
      min-height: 100vh;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 16px;
      color: var(--primary);
      text-decoration: none;
      font-size: 0.9rem;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid var(--border);
      background: var(--card-bg);
      cursor: pointer;
      font-size: 1.2rem;
      z-index: 100;
      transition: all .2s;
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    h1 {
      font-size: 1.75rem;
      margin: 0 0 8px;
    }

    .desc {
      color: var(--text-muted);
      margin: 0 0 24px;
      font-size: 0.95rem;
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 0.9rem;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 10px 12px;
      font-size: 0.95rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--card-bg);
      color: var(--text);
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgb(99,102,241,0.15);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    @media (max-width: 640px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    .btn-row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    button {
      padding: 10px 20px;
      font-size: 0.95rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--card-bg);
      color: var(--text);
      cursor: pointer;
      transition: all 0.2s;
    }

    button:hover {
      border-color: var(--primary);
      color: var(--primary);
    }

    button.primary {
      background: var(--primary);
      border-color: var(--primary);
      color: #fff;
    }

    button.primary:hover {
      background: var(--primary-hover);
      border-color: var(--primary-hover);
      color: #fff;
    }

    .formats-section {
      margin-top: 24px;
    }

    .formats-title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 16px;
    }

    .format-grid {
      display: grid;
      gap: 12px;
    }

    .format-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--bg);
      border-radius: var(--radius);
      padding: 12px 16px;
    }

    .format-item-left {
      flex: 1;
    }

    .format-label {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .format-value {
      font-size: 1rem;
      font-weight: 500;
      font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, monospace;
    }

    .format-copy {
      padding: 6px 12px;
      font-size: 0.8rem;
      margin-left: 12px;
    }

    .signature-block {
      margin-top: 24px;
    }

    .signature-title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 12px;
    }

    .signature-preview {
      background: var(--bg);
      border-radius: var(--radius);
      padding: 20px;
      font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, monospace;
      font-size: 0.9rem;
      line-height: 2;
      white-space: pre-wrap;
    }

    .signature-actions {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }

    .quick-dates {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .quick-date {
      padding: 6px 12px;
      font-size: 0.85rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s;
    }

    .quick-date:hover {
      border-color: var(--primary);
      color: var(--primary);
    }

    .status {
      font-size: 0.85rem;
      margin-top: 8px;
      min-height: 20px;
    }

    .status.success {
      color: var(--success);
    }

    .status.error {
      color: var(--danger);
    }

    footer {
      text-align: center;
      margin-top: 32px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    footer a {
      color: var(--primary);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="../../index.html" class="back-link">â† è¿”å›å·¥å…·åˆ—è¡¨</a>
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>

    <h1>ç­¾ç½²æ—¥æœŸæ ¼å¼åŒ–å™¨</h1>
    <p class="desc">ç”Ÿæˆæ³•å¾‹æ–‡ä»¶ä¸­å¸¸ç”¨çš„å„ç§æ—¥æœŸæ ¼å¼ï¼Œæ”¯æŒä¸­è‹±æ–‡åŠå¤šç§æ ·å¼</p>

    <div class="card">
      <div class="form-row">
        <div class="form-group">
          <label for="selectedDate">é€‰æ‹©æ—¥æœŸ</label>
          <input type="date" id="selectedDate" onchange="generateFormats()" />
        </div>
        <div class="form-group">
          <label for="location">ç­¾ç½²åœ°ç‚¹</label>
          <input type="text" id="location" placeholder="ä¾‹å¦‚ï¼šåŒ—äº¬" oninput="generateFormats()" />
        </div>
      </div>

      <div class="form-group">
        <label>å¿«é€Ÿé€‰æ‹©</label>
        <div class="quick-dates">
          <button class="quick-date" onclick="setDate('today')">ä»Šå¤©</button>
          <button class="quick-date" onclick="setDate('tomorrow')">æ˜å¤©</button>
          <button class="quick-date" onclick="setDate('nextWeek')">ä¸‹å‘¨ä¸€</button>
          <button class="quick-date" onclick="setDate('nextMonth')">ä¸‹æœˆåˆ</button>
          <button class="quick-date" onclick="setDate('endOfMonth')">æœ¬æœˆæœ«</button>
          <button class="quick-date" onclick="setDate('endOfYear')">å¹´æœ«</button>
        </div>
      </div>

      <div id="status" class="status"></div>

      <div class="formats-section">
        <div class="formats-title">æ—¥æœŸæ ¼å¼</div>
        <div id="formatGrid" class="format-grid"></div>
      </div>

      <div class="signature-block">
        <div class="signature-title">ç­¾ç½²æ æ¨¡æ¿</div>
        <div id="signaturePreview" class="signature-preview"></div>
        <div class="signature-actions">
          <button onclick="copySignatureBlock()">å¤åˆ¶ç­¾ç½²æ </button>
          <button onclick="copyAllFormats()">å¤åˆ¶æ‰€æœ‰æ ¼å¼</button>
        </div>
      </div>
    </div>

    <footer>
      çº¯å‰ç«¯å·¥å…· Â· æ— æœåŠ¡å™¨ Â· 
      <a href="../../index.html">WebUtils</a>
    </footer>
  </div>

  <script>
    var LS_KEY = 'signature_date_v1';

    var chineseNumbers = ['é›¶', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'åä¸€', 'åäºŒ'];
    var chineseDigits = ['ã€‡', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹'];

    function init() {
      loadFromStorage();
      if (!document.getElementById('selectedDate').value) {
        document.getElementById('selectedDate').value = new Date().toISOString().split('T')[0];
      }
      generateFormats();
    }

    function setDate(type) {
      var date = new Date();
      
      switch (type) {
        case 'today':
          break;
        case 'tomorrow':
          date.setDate(date.getDate() + 1);
          break;
        case 'nextWeek':
          var daysUntilMonday = (8 - date.getDay()) % 7 || 7;
          date.setDate(date.getDate() + daysUntilMonday);
          break;
        case 'nextMonth':
          date.setMonth(date.getMonth() + 1);
          date.setDate(1);
          break;
        case 'endOfMonth':
          date.setMonth(date.getMonth() + 1);
          date.setDate(0);
          break;
        case 'endOfYear':
          date.setMonth(11);
          date.setDate(31);
          break;
      }

      document.getElementById('selectedDate').value = date.toISOString().split('T')[0];
      generateFormats();
    }

    function generateFormats() {
      var dateStr = document.getElementById('selectedDate').value;
      var location = document.getElementById('location').value.trim();

      if (!dateStr) {
        return;
      }

      var date = new Date(dateStr);
      var year = date.getFullYear();
      var month = date.getMonth() + 1;
      var day = date.getDate();

      var formats = [
        {
          label: 'ä¸­æ–‡æ ‡å‡†æ ¼å¼',
          value: year + 'å¹´' + month + 'æœˆ' + day + 'æ—¥'
        },
        {
          label: 'ä¸­æ–‡å¤§å†™æ ¼å¼',
          value: toChineseYear(year) + 'å¹´' + toChineseMonth(month) + 'æœˆ' + toChineseDay(day) + 'æ—¥'
        },
        {
          label: 'ä¸­æ–‡æ³•å¾‹æ ¼å¼',
          value: 'äºŒã€‡' + toChineseDigit(Math.floor(year / 10) % 10) + toChineseDigit(year % 10) + 'å¹´' + toChineseMonth(month) + 'æœˆ' + toChineseDay(day) + 'æ—¥'
        },
        {
          label: 'ISO æ ¼å¼',
          value: dateStr
        },
        {
          label: 'æ–œæ æ ¼å¼ (å¹´/æœˆ/æ—¥)',
          value: year + '/' + padZero(month) + '/' + padZero(day)
        },
        {
          label: 'æ–œæ æ ¼å¼ (æœˆ/æ—¥/å¹´)',
          value: padZero(month) + '/' + padZero(day) + '/' + year
        },
        {
          label: 'ç‚¹åˆ†éš”æ ¼å¼',
          value: year + '.' + padZero(month) + '.' + padZero(day)
        },
        {
          label: 'è‹±æ–‡å®Œæ•´æ ¼å¼',
          value: getEnglishMonth(month) + ' ' + day + ', ' + year
        },
        {
          label: 'è‹±æ–‡ç¼©å†™æ ¼å¼',
          value: getEnglishMonthShort(month) + ' ' + day + ', ' + year
        },
        {
          label: 'è‹±æ–‡æ—¥åºæ•°æ ¼å¼',
          value: 'the ' + getOrdinal(day) + ' day of ' + getEnglishMonth(month) + ', ' + year
        },
        {
          label: 'è‹±æ–‡æ³•å¾‹æ ¼å¼',
          value: 'this ' + getOrdinal(day) + ' day of ' + getEnglishMonth(month) + ', ' + year
        },
        {
          label: 'æ—¥æœŸ + æ˜ŸæœŸ',
          value: year + 'å¹´' + month + 'æœˆ' + day + 'æ—¥ ' + getChineseWeekday(date.getDay())
        }
      ];

      renderFormats(formats);
      renderSignatureBlock(date, location);
      saveToStorage();
    }

    function renderFormats(formats) {
      var container = document.getElementById('formatGrid');
      container.textContent = '';

      formats.forEach(function(format) {
        var item = document.createElement('div');
        item.className = 'format-item';

        var left = document.createElement('div');
        left.className = 'format-item-left';

        var label = document.createElement('div');
        label.className = 'format-label';
        label.textContent = format.label;

        var value = document.createElement('div');
        value.className = 'format-value';
        value.textContent = format.value;

        left.appendChild(label);
        left.appendChild(value);

        var copyBtn = document.createElement('button');
        copyBtn.className = 'format-copy';
        copyBtn.textContent = 'å¤åˆ¶';
        copyBtn.onclick = function() {
          copyText(format.value);
        };

        item.appendChild(left);
        item.appendChild(copyBtn);
        container.appendChild(item);
      });
    }

    function renderSignatureBlock(date, location) {
      var year = date.getFullYear();
      var month = date.getMonth() + 1;
      var day = date.getDate();

      var chineseDate = year + 'å¹´' + month + 'æœˆ' + day + 'æ—¥';
      var locationText = location ? 'ç­¾ç½²åœ°ç‚¹ï¼š' + location + '\n' : '';

      var block = 'ç”²æ–¹ï¼ˆç­¾ç« ï¼‰ï¼š_________________________\n\n' +
                  'æ³•å®šä»£è¡¨äºº/æˆæƒä»£è¡¨ï¼š_________________________\n\n' +
                  'ç­¾ç½²æ—¥æœŸï¼š' + chineseDate + '\n' +
                  locationText +
                  '\n\n' +
                  'ä¹™æ–¹ï¼ˆç­¾ç« ï¼‰ï¼š_________________________\n\n' +
                  'æ³•å®šä»£è¡¨äºº/æˆæƒä»£è¡¨ï¼š_________________________\n\n' +
                  'ç­¾ç½²æ—¥æœŸï¼š' + chineseDate + '\n' +
                  locationText;

      document.getElementById('signaturePreview').textContent = block;
    }

    function toChineseYear(year) {
      return String(year).split('').map(function(d) {
        return chineseDigits[parseInt(d, 10)];
      }).join('');
    }

    function toChineseMonth(month) {
      if (month <= 10) {
        return chineseNumbers[month];
      } else {
        return 'å' + (month === 10 ? '' : chineseNumbers[month - 10]);
      }
    }

    function toChineseDay(day) {
      if (day <= 10) {
        return day === 10 ? 'å' : chineseNumbers[day];
      } else if (day < 20) {
        return 'å' + chineseNumbers[day - 10];
      } else if (day === 20) {
        return 'äºŒå';
      } else if (day < 30) {
        return 'äºŒå' + chineseNumbers[day - 20];
      } else if (day === 30) {
        return 'ä¸‰å';
      } else {
        return 'ä¸‰å' + chineseNumbers[day - 30];
      }
    }

    function toChineseDigit(num) {
      return chineseDigits[num];
    }

    function padZero(num) {
      return num < 10 ? '0' + num : String(num);
    }

    function getEnglishMonth(month) {
      var months = ['January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'];
      return months[month - 1];
    }

    function getEnglishMonthShort(month) {
      var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      return months[month - 1];
    }

    function getOrdinal(num) {
      var suffixes = ['th', 'st', 'nd', 'rd'];
      var v = num % 100;
      return num + (suffixes[(v - 20) % 10] || suffixes[v] || suffixes[0]);
    }

    function getChineseWeekday(day) {
      var weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
      return weekdays[day];
    }

    function copyText(text) {
      navigator.clipboard.writeText(text).then(function() {
        showStatus('å·²å¤åˆ¶: ' + text, 'success');
      }).catch(function() {
        showStatus('å¤åˆ¶å¤±è´¥', 'error');
      });
    }

    function copySignatureBlock() {
      var block = document.getElementById('signaturePreview').textContent;
      navigator.clipboard.writeText(block).then(function() {
        showStatus('ç­¾ç½²æ å·²å¤åˆ¶', 'success');
      }).catch(function() {
        showStatus('å¤åˆ¶å¤±è´¥', 'error');
      });
    }

    function copyAllFormats() {
      var formats = [];
      var items = document.querySelectorAll('.format-item');
      items.forEach(function(item) {
        var label = item.querySelector('.format-label').textContent;
        var value = item.querySelector('.format-value').textContent;
        formats.push(label + ': ' + value);
      });

      var text = formats.join('\n');
      navigator.clipboard.writeText(text).then(function() {
        showStatus('æ‰€æœ‰æ ¼å¼å·²å¤åˆ¶', 'success');
      }).catch(function() {
        showStatus('å¤åˆ¶å¤±è´¥', 'error');
      });
    }

    function saveToStorage() {
      try {
        var data = {
          date: document.getElementById('selectedDate').value,
          location: document.getElementById('location').value
        };
        localStorage.setItem(LS_KEY, JSON.stringify(data));
      } catch (e) {}
    }

    function loadFromStorage() {
      try {
        var saved = localStorage.getItem(LS_KEY);
        if (saved) {
          var data = JSON.parse(saved);
          if (data.date) document.getElementById('selectedDate').value = data.date;
          if (data.location) document.getElementById('location').value = data.location;
        }
      } catch (e) {}
    }

    function showStatus(msg, type) {
      var el = document.getElementById('status');
      el.textContent = msg;
      el.className = 'status ' + (type || '');
    }

    function toggleTheme() {
      var html = document.documentElement;
      var btn = document.querySelector('.theme-toggle');
      var next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      btn.textContent = next === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
      localStorage.setItem('theme', next);
    }

    (function() {
      var savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        document.documentElement.setAttribute('data-theme', savedTheme);
        var btn = document.querySelector('.theme-toggle');
        if (btn) btn.textContent = savedTheme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
      }
      init();
    })();
  </script>
</body>
</html>
