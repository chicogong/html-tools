<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>统一社会信用代码验证器 - HTML Tools</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #8b5cf6; --accent2: #a855f7; --error: #f43f5e; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .card-title { font-size: 1rem; color: var(--text2); margin-bottom: 16px; font-weight: 500; }
        .input-group { display: flex; gap: 12px; margin-bottom: 16px; }
        @media (max-width: 500px) { .input-group { flex-direction: column; } }
        .input-group input { flex: 1; padding: 14px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1rem; font-family: 'Courier New', monospace; letter-spacing: 1px; text-transform: uppercase; }
        .input-group input:focus { outline: none; border-color: var(--accent); }
        .btn { padding: 14px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.2s; white-space: nowrap; }
        .btn-primary { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; }
        .btn-primary:hover { opacity: 0.9; }
        .btn-secondary { background: var(--bg); border: 1px solid var(--border); color: var(--text); }
        .btn-secondary:hover { border-color: var(--accent); }
        .result-hero { padding: 24px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
        .result-hero.valid { background: linear-gradient(135deg, #10b981, #06b6d4); color: white; }
        .result-hero.invalid { background: linear-gradient(135deg, var(--error), #f97316); color: white; }
        .result-hero .icon { font-size: 2.5rem; margin-bottom: 8px; }
        .result-hero .status { font-size: 1.3rem; font-weight: 600; }
        .info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        @media (max-width: 500px) { .info-grid { grid-template-columns: 1fr; } }
        .info-item { background: var(--bg); border-radius: 8px; padding: 16px; }
        .info-item .label { font-size: 0.85rem; color: var(--text2); margin-bottom: 6px; }
        .info-item .value { font-size: 1rem; font-weight: 500; }
        .info-item .value.highlight { color: var(--accent); }
        .code-breakdown { background: var(--bg); border-radius: 8px; padding: 16px; margin-top: 16px; }
        .code-breakdown .title { font-size: 0.9rem; color: var(--text2); margin-bottom: 12px; }
        .code-parts { display: flex; flex-wrap: wrap; gap: 4px; font-family: 'Courier New', monospace; font-size: 1rem; }
        .code-part { padding: 8px 10px; border-radius: 6px; }
        .code-part.reg { background: rgba(99, 102, 241, 0.2); color: #818cf8; }
        .code-part.type { background: rgba(16, 185, 129, 0.2); color: #34d399; }
        .code-part.area { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
        .code-part.org { background: rgba(236, 72, 153, 0.2); color: #f472b6; }
        .code-part.check { background: rgba(139, 92, 246, 0.2); color: #a78bfa; }
        .legend { display: flex; gap: 12px; margin-top: 12px; flex-wrap: wrap; font-size: 0.8rem; color: var(--text2); }
        .legend-item { display: flex; align-items: center; gap: 6px; }
        .legend-dot { width: 12px; height: 12px; border-radius: 3px; }
        .hidden { display: none; }
        .info-section { margin-top: 20px; padding: 16px; background: var(--bg); border-radius: 8px; font-size: 0.9rem; }
        .info-section h3 { font-size: 0.95rem; margin-bottom: 12px; color: var(--text); }
        .info-section p { color: var(--text2); line-height: 1.6; margin-bottom: 8px; }
            .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">← 返回</a>
        <h1>统一社会信用代码验证器</h1>
        <p class="subtitle">验证企业统一社会信用代码的有效性</p>
        
        <div class="card">
            <div class="card-title">输入统一社会信用代码</div>
            <div class="input-group">
                <input type="text" id="codeInput" placeholder="请输入18位统一社会信用代码" maxlength="18" oninput="formatInput()">
                <button class="btn btn-secondary" onclick="pasteFromClipboard()">粘贴</button>
                <button class="btn btn-primary" onclick="validate()">验证</button>
            </div>
        </div>
        
        <div id="resultSection" class="hidden">
            <div class="result-hero" id="resultHero">
                <div class="icon" id="resultIcon"></div>
                <div class="status" id="resultStatus"></div>
            </div>
            
            <div class="card" id="infoCard">
                <div class="card-title">代码解析</div>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="label">登记管理部门</div>
                        <div class="value" id="regDept">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">机构类别</div>
                        <div class="value" id="orgType">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">登记管理机关行政区划</div>
                        <div class="value" id="areaCode">-</div>
                    </div>
                    <div class="info-item">
                        <div class="label">校验码</div>
                        <div class="value highlight" id="checkCode">-</div>
                    </div>
                </div>
                
                <div class="code-breakdown">
                    <div class="title">代码结构解析</div>
                    <div class="code-parts" id="codeParts"></div>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(99, 102, 241, 0.5);"></div>登记管理部门</div>
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(16, 185, 129, 0.5);"></div>机构类别</div>
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(245, 158, 11, 0.5);"></div>行政区划</div>
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(236, 72, 153, 0.5);"></div>组织机构代码</div>
                        <div class="legend-item"><div class="legend-dot" style="background: rgba(139, 92, 246, 0.5);"></div>校验码</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="info-section">
                <h3>什么是统一社会信用代码？</h3>
                <p>统一社会信用代码是一组长度为18位的用于法人和其他组织身份识别的代码，由登记管理部门代码（1位）、机构类别代码（1位）、登记管理机关行政区划码（6位）、主体标识码（组织机构代码）（9位）和校验码（1位）组成。</p>
                <p>该代码于2015年开始实施，是"三证合一"改革的重要成果，整合了工商营业执照、组织机构代码证和税务登记证。</p>
            </div>
        </div>
    </div>
    
    <script>
        // 登记管理部门代码
        const regDepts = {
            '1': '机构编制',
            '2': '外交',
            '3': '司法行政',
            '4': '文化',
            '5': '民政',
            '6': '旅游',
            '7': '宗教',
            '8': '工会',
            '9': '工商',
            'A': '中央军委改革和编制办公室',
            'N': '农业',
            'Y': '其他'
        };
        
        // 机构类别代码
        const orgTypes = {
            '1': { dept: '1', name: '机关' },
            '2': { dept: '1', name: '事业单位' },
            '3': { dept: '1', name: '中央编办直接管理机构编制的群众团体' },
            '9': { dept: '1', name: '其他' },
            '1': { dept: '2', name: '外国常驻新闻机构' },
            '1': { dept: '3', name: '律师执业机构' },
            '2': { dept: '3', name: '公证处' },
            '3': { dept: '3', name: '基层法律服务所' },
            '4': { dept: '3', name: '司法鉴定机构' },
            '5': { dept: '3', name: '仲裁委员会' },
            '9': { dept: '3', name: '其他' },
            '1': { dept: '5', name: '社会团体' },
            '2': { dept: '5', name: '民办非企业单位' },
            '3': { dept: '5', name: '基金会' },
            '9': { dept: '5', name: '其他' },
            '1': { dept: '9', name: '企业' },
            '2': { dept: '9', name: '个体工商户' },
            '3': { dept: '9', name: '农民专业合作社' }
        };
        
        // 省份代码
        const provinces = {
            '11': '北京市', '12': '天津市', '13': '河北省', '14': '山西省', '15': '内蒙古自治区',
            '21': '辽宁省', '22': '吉林省', '23': '黑龙江省',
            '31': '上海市', '32': '江苏省', '33': '浙江省', '34': '安徽省', '35': '福建省', '36': '江西省', '37': '山东省',
            '41': '河南省', '42': '湖北省', '43': '湖南省', '44': '广东省', '45': '广西壮族自治区', '46': '海南省',
            '50': '重庆市', '51': '四川省', '52': '贵州省', '53': '云南省', '54': '西藏自治区',
            '61': '陕西省', '62': '甘肃省', '63': '青海省', '64': '宁夏回族自治区', '65': '新疆维吾尔自治区'
        };
        
        // 校验码字符集
        const CHARS = '0123456789ABCDEFGHJKLMNPQRTUWXY';
        const WEIGHTS = [1, 3, 9, 27, 19, 26, 16, 17, 20, 29, 25, 13, 8, 24, 10, 30, 28];
        
        function formatInput() {
            const input = document.getElementById('codeInput');
            input.value = input.value.toUpperCase().replace(/[^0-9A-Z]/g, '');
        }
        
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('codeInput').value = text.trim().toUpperCase();
                formatInput();
            } catch (e) {
                console.error('无法访问剪贴板');
            }
        }
        
        // 计算校验码
        function calcCheckCode(code17) {
            let sum = 0;
            for (let i = 0; i < 17; i++) {
                const charIndex = CHARS.indexOf(code17[i]);
                if (charIndex === -1) return null;
                sum += charIndex * WEIGHTS[i];
            }
            const remainder = sum % 31;
            const checkIndex = (31 - remainder) % 31;
            return CHARS[checkIndex];
        }
        
        function validate() {
            const code = document.getElementById('codeInput').value.trim().toUpperCase();
            const resultSection = document.getElementById('resultSection');
            const resultHero = document.getElementById('resultHero');
            const infoCard = document.getElementById('infoCard');
            
            // 基本格式验证
            if (code.length !== 18) {
                showResult(false, '请输入18位统一社会信用代码');
                return;
            }
            
            // 字符验证
            const validChars = /^[0-9A-HJ-NP-RTUW-Y]{18}$/;
            if (!validChars.test(code)) {
                showResult(false, '代码包含无效字符');
                return;
            }
            
            // 登记管理部门验证
            const regCode = code[0];
            if (!regDepts[regCode]) {
                showResult(false, '登记管理部门代码无效');
                return;
            }
            
            // 行政区划验证
            const provinceCode = code.substring(2, 4);
            if (!provinces[provinceCode]) {
                showResult(false, '行政区划代码无效');
                return;
            }
            
            // 校验码验证
            const expectedCheck = calcCheckCode(code.substring(0, 17));
            if (code[17] !== expectedCheck) {
                showResult(false, '校验码错误');
                return;
            }
            
            // 验证通过
            showResult(true, '统一社会信用代码有效');
            showParsedInfo(code);
        }
        
        function showResult(valid, message) {
            const resultSection = document.getElementById('resultSection');
            const resultHero = document.getElementById('resultHero');
            const infoCard = document.getElementById('infoCard');
            
            resultSection.classList.remove('hidden');
            resultHero.className = 'result-hero ' + (valid ? 'valid' : 'invalid');
            document.getElementById('resultIcon').textContent = valid ? '✓' : '✗';
            document.getElementById('resultStatus').textContent = message;
            
            if (!valid) {
                infoCard.classList.add('hidden');
            } else {
                infoCard.classList.remove('hidden');
            }
        }
        
        function showParsedInfo(code) {
            // 登记管理部门
            const regCode = code[0];
            document.getElementById('regDept').textContent = regDepts[regCode] || '未知';
            
            // 机构类别
            const typeCode = code[1];
            let orgTypeName = '未知';
            if (regCode === '9') {
                if (typeCode === '1') orgTypeName = '企业';
                else if (typeCode === '2') orgTypeName = '个体工商户';
                else if (typeCode === '3') orgTypeName = '农民专业合作社';
            } else if (regCode === '5') {
                if (typeCode === '1') orgTypeName = '社会团体';
                else if (typeCode === '2') orgTypeName = '民办非企业单位';
                else if (typeCode === '3') orgTypeName = '基金会';
            } else if (regCode === '1') {
                if (typeCode === '1') orgTypeName = '机关';
                else if (typeCode === '2') orgTypeName = '事业单位';
                else if (typeCode === '3') orgTypeName = '群众团体';
            }
            document.getElementById('orgType').textContent = orgTypeName;
            
            // 行政区划
            const provinceCode = code.substring(2, 4);
            document.getElementById('areaCode').textContent = provinces[provinceCode] + ' (' + code.substring(2, 8) + ')';
            
            // 校验码
            document.getElementById('checkCode').textContent = code[17];
            
            // 代码结构解析
            const partsContainer = document.getElementById('codeParts');
            partsContainer.textContent = '';
            
            const parts = [
                { text: code[0], class: 'reg', title: '登记管理部门' },
                { text: code[1], class: 'type', title: '机构类别' },
                { text: code.substring(2, 8), class: 'area', title: '行政区划' },
                { text: code.substring(8, 17), class: 'org', title: '组织机构代码' },
                { text: code[17], class: 'check', title: '校验码' }
            ];
            
            parts.forEach(part => {
                const span = document.createElement('span');
                span.className = 'code-part ' + part.class;
                span.textContent = part.text;
                span.title = part.title;
                partsContainer.appendChild(span);
            });
        }
        
        // 回车键触发验证
        document.getElementById('codeInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') validate();
        });
    </script>
</body>
</html>
