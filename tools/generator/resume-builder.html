<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç®€å†ç”Ÿæˆå™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="ç®€å†ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="keywords" content="resume-builder,generator,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/generator/resume-builder.html"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="ç®€å†ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:description" content="ç®€å†ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/generator/resume-builder.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="ç®€å†ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:description" content="ç®€å†ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme="light"] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      :root {
        --preview-bg: #f8f9fa;
      }
      [data-theme="dark"] {
        --preview-bg: #1a1a2e;
      }
      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
      }
      .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
      }
      @media (max-width: 992px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }
      .form-section {
        background: var(--pico-card-background-color);
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 1rem;
      }
      .form-section h3 {
        margin-top: 0;
        margin-bottom: 1rem;
        border-bottom: 2px solid var(--pico-primary);
        padding-bottom: 0.5rem;
      }
      .preview-section {
        position: sticky;
        top: 20px;
        max-height: calc(100vh - 40px);
        overflow: auto;
      }
      .resume-preview {
        background: var(--preview-bg);
        padding: 2rem;
        border-radius: 8px;
        min-height: 600px;
      }
      .resume-preview h1 {
        font-size: 1.8rem;
        margin-bottom: 0.5rem;
      }
      .resume-preview .contact-info {
        color: var(--pico-muted-color);
        margin-bottom: 1.5rem;
        font-size: 0.9rem;
      }
      .resume-preview .section {
        margin-bottom: 1.5rem;
      }
      .resume-preview .section-title {
        font-size: 1.1rem;
        font-weight: bold;
        border-bottom: 1px solid var(--pico-muted-border-color);
        padding-bottom: 0.3rem;
        margin-bottom: 0.8rem;
        color: var(--pico-primary);
      }
      .experience-item,
      .education-item {
        margin-bottom: 1rem;
      }
      .experience-item h4,
      .education-item h4 {
        margin: 0;
        font-size: 1rem;
      }
      .experience-item .meta,
      .education-item .meta {
        color: var(--pico-muted-color);
        font-size: 0.85rem;
        margin-bottom: 0.3rem;
      }
      .skill-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }
      .skill-tag {
        background: var(--pico-primary);
        color: white;
        padding: 0.2rem 0.6rem;
        border-radius: 20px;
        font-size: 0.8rem;
      }
      .entry-list {
        margin-bottom: 1rem;
      }
      .entry-item {
        background: var(--pico-card-background-color);
        border: 1px solid var(--pico-muted-border-color);
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 0.5rem;
      }
      .entry-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .entry-item-title {
        font-weight: bold;
      }
      .btn-group {
        display: flex;
        gap: 0.5rem;
      }
      .btn-small {
        padding: 0.25rem 0.5rem;
        font-size: 0.8rem;
      }
      .action-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }
      .template-select {
        margin-bottom: 1rem;
      }

      /* Template styles */
      .template-modern .section-title {
        color: #2563eb;
      }
      .template-modern .skill-tag {
        background: #2563eb;
      }
      .template-classic .section-title {
        color: #374151;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
      .template-classic .skill-tag {
        background: #374151;
      }
      .template-creative .section-title {
        color: #7c3aed;
        font-style: italic;
      }
      .template-creative .skill-tag {
        background: linear-gradient(45deg, #7c3aed, #ec4899);
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      ç®€å†ç”Ÿæˆå™¨
    </nav>
    <div class="container">
      <header>
        <h1>ç®€å†ç”Ÿæˆå™¨</h1>
        <button id="themeToggle" class="outline">åˆ‡æ¢ä¸»é¢˜</button>
      </header>

      <div class="main-content">
        <div class="form-panel">
          <!-- æ¨¡æ¿é€‰æ‹© -->
          <div class="form-section template-select">
            <label for="template">é€‰æ‹©æ¨¡æ¿</label>
            <select id="template">
              <option value="modern">ç°ä»£ç®€çº¦</option>
              <option value="classic">ç»å…¸ä¼ ç»Ÿ</option>
              <option value="creative">åˆ›æ„é£æ ¼</option>
            </select>
          </div>

          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <div class="form-section">
            <h3>åŸºæœ¬ä¿¡æ¯</h3>
            <div class="grid">
              <label>
                å§“å
                <input type="text" id="name" placeholder="æ‚¨çš„å§“å" />
              </label>
              <label>
                èŒä½
                <input type="text" id="title" placeholder="ç›®æ ‡èŒä½" />
              </label>
            </div>
            <div class="grid">
              <label>
                é‚®ç®±
                <input type="email" id="email" placeholder="your@email.com" />
              </label>
              <label>
                ç”µè¯
                <input type="tel" id="phone" placeholder="æ‰‹æœºå·ç " />
              </label>
            </div>
            <label>
              åœ°å€
              <input type="text" id="location" placeholder="æ‰€åœ¨åŸå¸‚" />
            </label>
          </div>

          <!-- ä¸ªäººç®€ä»‹ -->
          <div class="form-section">
            <h3>ä¸ªäººç®€ä»‹</h3>
            <textarea
              id="summary"
              rows="4"
              placeholder="ç®€è¦ä»‹ç»æ‚¨çš„ä¸“ä¸šèƒŒæ™¯ã€æ ¸å¿ƒæŠ€èƒ½å’ŒèŒä¸šç›®æ ‡..."
            ></textarea>
          </div>

          <!-- å·¥ä½œç»å† -->
          <div class="form-section">
            <h3>å·¥ä½œç»å†</h3>
            <div id="experienceList" class="entry-list"></div>
            <details>
              <summary>æ·»åŠ å·¥ä½œç»å†</summary>
              <div class="grid">
                <label>
                  å…¬å¸åç§°
                  <input type="text" id="expCompany" placeholder="å…¬å¸åç§°" />
                </label>
                <label>
                  èŒä½
                  <input type="text" id="expPosition" placeholder="èŒä½åç§°" />
                </label>
              </div>
              <div class="grid">
                <label>
                  å¼€å§‹æ—¶é—´
                  <input type="month" id="expStart" />
                </label>
                <label>
                  ç»“æŸæ—¶é—´
                  <input type="month" id="expEnd" />
                </label>
              </div>
              <label>
                <input type="checkbox" id="expCurrent" />
                è‡³ä»Š
              </label>
              <label>
                å·¥ä½œæè¿°
                <textarea
                  id="expDescription"
                  rows="3"
                  placeholder="æè¿°æ‚¨çš„ä¸»è¦èŒè´£å’Œæˆå°±..."
                ></textarea>
              </label>
              <button type="button" id="addExpBtn">æ·»åŠ </button>
            </details>
          </div>

          <!-- æ•™è‚²èƒŒæ™¯ -->
          <div class="form-section">
            <h3>æ•™è‚²èƒŒæ™¯</h3>
            <div id="educationList" class="entry-list"></div>
            <details>
              <summary>æ·»åŠ æ•™è‚²ç»å†</summary>
              <div class="grid">
                <label>
                  å­¦æ ¡åç§°
                  <input type="text" id="eduSchool" placeholder="å­¦æ ¡åç§°" />
                </label>
                <label>
                  å­¦å†/å­¦ä½
                  <input type="text" id="eduDegree" placeholder="å¦‚ï¼šæœ¬ç§‘/å­¦å£«" />
                </label>
              </div>
              <div class="grid">
                <label>
                  ä¸“ä¸š
                  <input type="text" id="eduMajor" placeholder="ä¸“ä¸šåç§°" />
                </label>
                <label>
                  æ¯•ä¸šæ—¶é—´
                  <input type="month" id="eduDate" />
                </label>
              </div>
              <button type="button" id="addEduBtn">æ·»åŠ </button>
            </details>
          </div>

          <!-- æŠ€èƒ½ -->
          <div class="form-section">
            <h3>ä¸“ä¸šæŠ€èƒ½</h3>
            <label>
              æŠ€èƒ½ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰
              <input type="text" id="skills" placeholder="å¦‚ï¼šJavaScript, Python, é¡¹ç›®ç®¡ç†" />
            </label>
          </div>

          <!-- æ“ä½œæŒ‰é’® -->
          <div class="action-buttons">
            <button id="exportPdfBtn">å¯¼å‡ºPDF</button>
            <button id="exportHtmlBtn" class="secondary">å¯¼å‡ºHTML</button>
            <button id="saveDataBtn" class="outline">ä¿å­˜æ•°æ®</button>
            <button id="loadDataBtn" class="outline">åŠ è½½æ•°æ®</button>
          </div>
        </div>

        <div class="preview-section">
          <h2>é¢„è§ˆ</h2>
          <div id="resumePreview" class="resume-preview template-modern">
            <p style="color: var(--pico-muted-color); text-align: center; margin-top: 200px">
              åœ¨å·¦ä¾§å¡«å†™ä¿¡æ¯ï¼Œé¢„è§ˆå°†å®æ—¶æ›´æ–°
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // æ•°æ®å­˜å‚¨
      let resumeData = {
        name: "",
        title: "",
        email: "",
        phone: "",
        location: "",
        summary: "",
        experiences: [],
        education: [],
        skills: []
      };

      // è¾…åŠ©å‡½æ•°ï¼šè½¬ä¹‰HTML
      window.escapeHtml = function (text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      };

      // ä¸»é¢˜åˆ‡æ¢
      const themeToggle = document.getElementById("themeToggle");
      themeToggle.addEventListener("click", () => {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
      });

      // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme) {
        document.documentElement.setAttribute("data-theme", savedTheme);
      }

      // æ¨¡æ¿åˆ‡æ¢
      document.getElementById("template").addEventListener("change", (e) => {
        const preview = document.getElementById("resumePreview");
        preview.className = "resume-preview template-" + e.target.value;
      });

      // è¾“å…¥ç›‘å¬
      const inputs = ["name", "title", "email", "phone", "location", "summary", "skills"];
      inputs.forEach((id) => {
        document.getElementById(id).addEventListener("input", updatePreview);
      });

      // æ·»åŠ å·¥ä½œç»å†
      document.getElementById("addExpBtn").addEventListener("click", function () {
        const company = document.getElementById("expCompany").value;
        const position = document.getElementById("expPosition").value;
        const start = document.getElementById("expStart").value;
        const end = document.getElementById("expCurrent").checked
          ? "è‡³ä»Š"
          : document.getElementById("expEnd").value;
        const description = document.getElementById("expDescription").value;

        if (!company || !position) {
          alert("è¯·å¡«å†™å…¬å¸åç§°å’ŒèŒä½");
          return;
        }

        resumeData.experiences.push({ company, position, start, end, description });
        renderExperienceList();
        updatePreview();

        // æ¸…ç©ºè¾“å…¥
        document.getElementById("expCompany").value = "";
        document.getElementById("expPosition").value = "";
        document.getElementById("expStart").value = "";
        document.getElementById("expEnd").value = "";
        document.getElementById("expCurrent").checked = false;
        document.getElementById("expDescription").value = "";
      });

      // æ¸²æŸ“å·¥ä½œç»å†åˆ—è¡¨
      function renderExperienceList() {
        const list = document.getElementById("experienceList");
        list.replaceChildren();

        resumeData.experiences.forEach((exp, index) => {
          const item = document.createElement("div");
          item.className = "entry-item";

          const header = document.createElement("div");
          header.className = "entry-item-header";

          const titleSpan = document.createElement("span");
          titleSpan.className = "entry-item-title";
          titleSpan.textContent = exp.company + " - " + exp.position;

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "btn-small outline";
          deleteBtn.textContent = "åˆ é™¤";
          deleteBtn.addEventListener("click", () => removeExperience(index));

          header.appendChild(titleSpan);
          header.appendChild(deleteBtn);

          const dateInfo = document.createElement("small");
          dateInfo.textContent =
            formatDate(exp.start) + " - " + (exp.end === "è‡³ä»Š" ? "è‡³ä»Š" : formatDate(exp.end));

          item.appendChild(header);
          item.appendChild(dateInfo);
          list.appendChild(item);
        });
      }

      // åˆ é™¤å·¥ä½œç»å†
      function removeExperience(index) {
        resumeData.experiences.splice(index, 1);
        renderExperienceList();
        updatePreview();
      }

      // æ·»åŠ æ•™è‚²ç»å†
      document.getElementById("addEduBtn").addEventListener("click", function () {
        const school = document.getElementById("eduSchool").value;
        const degree = document.getElementById("eduDegree").value;
        const major = document.getElementById("eduMajor").value;
        const date = document.getElementById("eduDate").value;

        if (!school || !degree) {
          alert("è¯·å¡«å†™å­¦æ ¡åç§°å’Œå­¦å†");
          return;
        }

        resumeData.education.push({ school, degree, major, date });
        renderEducationList();
        updatePreview();

        // æ¸…ç©ºè¾“å…¥
        document.getElementById("eduSchool").value = "";
        document.getElementById("eduDegree").value = "";
        document.getElementById("eduMajor").value = "";
        document.getElementById("eduDate").value = "";
      });

      // æ¸²æŸ“æ•™è‚²ç»å†åˆ—è¡¨
      function renderEducationList() {
        const list = document.getElementById("educationList");
        list.replaceChildren();

        resumeData.education.forEach((edu, index) => {
          const item = document.createElement("div");
          item.className = "entry-item";

          const header = document.createElement("div");
          header.className = "entry-item-header";

          const titleSpan = document.createElement("span");
          titleSpan.className = "entry-item-title";
          titleSpan.textContent = edu.school + " - " + edu.degree;

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "btn-small outline";
          deleteBtn.textContent = "åˆ é™¤";
          deleteBtn.addEventListener("click", () => removeEducation(index));

          header.appendChild(titleSpan);
          header.appendChild(deleteBtn);

          const dateInfo = document.createElement("small");
          dateInfo.textContent = edu.major + " | " + formatDate(edu.date);

          item.appendChild(header);
          item.appendChild(dateInfo);
          list.appendChild(item);
        });
      }

      // åˆ é™¤æ•™è‚²ç»å†
      function removeEducation(index) {
        resumeData.education.splice(index, 1);
        renderEducationList();
        updatePreview();
      }

      // æ ¼å¼åŒ–æ—¥æœŸ
      function formatDate(dateStr) {
        if (!dateStr) return "";
        const [year, month] = dateStr.split("-");
        return year + "å¹´" + month + "æœˆ";
      }

      // æ›´æ–°é¢„è§ˆ
      window.updatePreview = function () {
        const name = document.getElementById("name").value;
        const title = document.getElementById("title").value;
        const email = document.getElementById("email").value;
        const phone = document.getElementById("phone").value;
        const location = document.getElementById("location").value;
        const summary = document.getElementById("summary").value;
        const skillsStr = document.getElementById("skills").value;
        const skills = skillsStr
          ? skillsStr
              .split(",")
              .map((s) => s.trim())
              .filter((s) => s)
          : [];

        resumeData = { ...resumeData, name, title, email, phone, location, summary, skills };

        const preview = document.getElementById("resumePreview");
        preview.replaceChildren();

        if (!name && !title && !email && resumeData.experiences.length === 0) {
          const placeholder = document.createElement("p");
          placeholder.style.cssText =
            "color: var(--pico-muted-color); text-align: center; margin-top: 200px;";
          placeholder.textContent = "åœ¨å·¦ä¾§å¡«å†™ä¿¡æ¯ï¼Œé¢„è§ˆå°†å®æ—¶æ›´æ–°";
          preview.appendChild(placeholder);
          return;
        }

        // å¤´éƒ¨ä¿¡æ¯
        if (name) {
          const h1 = document.createElement("h1");
          h1.textContent = name;
          preview.appendChild(h1);
        }

        if (title) {
          const titleP = document.createElement("p");
          titleP.style.cssText = "font-size: 1.2rem; margin-bottom: 0.5rem;";
          titleP.textContent = title;
          preview.appendChild(titleP);
        }

        const contactParts = [];
        if (email) contactParts.push(email);
        if (phone) contactParts.push(phone);
        if (location) contactParts.push(location);
        if (contactParts.length > 0) {
          const contactP = document.createElement("p");
          contactP.className = "contact-info";
          contactP.textContent = contactParts.join(" | ");
          preview.appendChild(contactP);
        }

        // ä¸ªäººç®€ä»‹
        if (summary) {
          const section = document.createElement("div");
          section.className = "section";

          const sectionTitle = document.createElement("div");
          sectionTitle.className = "section-title";
          sectionTitle.textContent = "ä¸ªäººç®€ä»‹";

          const summaryP = document.createElement("p");
          summaryP.textContent = summary;

          section.appendChild(sectionTitle);
          section.appendChild(summaryP);
          preview.appendChild(section);
        }

        // å·¥ä½œç»å†
        if (resumeData.experiences.length > 0) {
          const section = document.createElement("div");
          section.className = "section";

          const sectionTitle = document.createElement("div");
          sectionTitle.className = "section-title";
          sectionTitle.textContent = "å·¥ä½œç»å†";
          section.appendChild(sectionTitle);

          resumeData.experiences.forEach((exp) => {
            const item = document.createElement("div");
            item.className = "experience-item";

            const h4 = document.createElement("h4");
            h4.textContent = exp.position;

            const meta = document.createElement("div");
            meta.className = "meta";
            meta.textContent =
              exp.company +
              " | " +
              formatDate(exp.start) +
              " - " +
              (exp.end === "è‡³ä»Š" ? "è‡³ä»Š" : formatDate(exp.end));

            const desc = document.createElement("p");
            desc.textContent = exp.description;

            item.appendChild(h4);
            item.appendChild(meta);
            item.appendChild(desc);
            section.appendChild(item);
          });

          preview.appendChild(section);
        }

        // æ•™è‚²èƒŒæ™¯
        if (resumeData.education.length > 0) {
          const section = document.createElement("div");
          section.className = "section";

          const sectionTitle = document.createElement("div");
          sectionTitle.className = "section-title";
          sectionTitle.textContent = "æ•™è‚²èƒŒæ™¯";
          section.appendChild(sectionTitle);

          resumeData.education.forEach((edu) => {
            const item = document.createElement("div");
            item.className = "education-item";

            const h4 = document.createElement("h4");
            h4.textContent = edu.school;

            const meta = document.createElement("div");
            meta.className = "meta";
            meta.textContent = edu.degree + " - " + edu.major + " | " + formatDate(edu.date);

            item.appendChild(h4);
            item.appendChild(meta);
            section.appendChild(item);
          });

          preview.appendChild(section);
        }

        // æŠ€èƒ½
        if (skills.length > 0) {
          const section = document.createElement("div");
          section.className = "section";

          const sectionTitle = document.createElement("div");
          sectionTitle.className = "section-title";
          sectionTitle.textContent = "ä¸“ä¸šæŠ€èƒ½";
          section.appendChild(sectionTitle);

          const skillTags = document.createElement("div");
          skillTags.className = "skill-tags";

          skills.forEach((skill) => {
            const tag = document.createElement("span");
            tag.className = "skill-tag";
            tag.textContent = skill;
            skillTags.appendChild(tag);
          });

          section.appendChild(skillTags);
          preview.appendChild(section);
        }
      };

      // å¯¼å‡ºPDF
      document.getElementById("exportPdfBtn").addEventListener("click", function () {
        window.print();
      });

      // å¯¼å‡ºHTML
      document.getElementById("exportHtmlBtn").addEventListener("click", function () {
        const template = document.getElementById("template").value;
        const templateColor =
          template === "modern" ? "#2563eb" : template === "creative" ? "#7c3aed" : "#374151";

        let htmlContent =
          '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>' +
          escapeHtml(resumeData.name) +
          "çš„ç®€å† - WebUtils</title>";
        htmlContent += "<style>";
        htmlContent +=
          'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; max-width: 800px; margin: 0 auto; padding: 2rem; }';
        htmlContent += "h1 { margin-bottom: 0.5rem; }";
        htmlContent += ".contact-info { color: #666; margin-bottom: 1.5rem; }";
        htmlContent += ".section { margin-bottom: 1.5rem; }";
        htmlContent +=
          ".section-title { font-weight: bold; border-bottom: 1px solid #ddd; padding-bottom: 0.3rem; margin-bottom: 0.8rem; color: " +
          templateColor +
          "; }";
        htmlContent += ".experience-item, .education-item { margin-bottom: 1rem; }";
        htmlContent += ".experience-item h4, .education-item h4 { margin: 0; }";
        htmlContent += ".meta { color: #666; font-size: 0.85rem; }";
        htmlContent += ".skill-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; }";
        htmlContent +=
          ".skill-tag { background: " +
          templateColor +
          "; color: white; padding: 0.2rem 0.6rem; border-radius: 20px; font-size: 0.8rem; }";
        htmlContent += "</style></head><body>";

        if (resumeData.name) htmlContent += "<h1>" + escapeHtml(resumeData.name) + "</h1>";
        if (resumeData.title)
          htmlContent +=
            '<p style="font-size: 1.2rem; margin-bottom: 0.5rem;">' +
            escapeHtml(resumeData.title) +
            "</p>";

        const contactParts = [];
        if (resumeData.email) contactParts.push(escapeHtml(resumeData.email));
        if (resumeData.phone) contactParts.push(escapeHtml(resumeData.phone));
        if (resumeData.location) contactParts.push(escapeHtml(resumeData.location));
        if (contactParts.length > 0) {
          htmlContent += '<p class="contact-info">' + contactParts.join(" | ") + "</p>";
        }

        if (resumeData.summary) {
          htmlContent +=
            '<div class="section"><div class="section-title">ä¸ªäººç®€ä»‹</div><p>' +
            escapeHtml(resumeData.summary) +
            "</p></div>";
        }

        if (resumeData.experiences.length > 0) {
          htmlContent += '<div class="section"><div class="section-title">å·¥ä½œç»å†</div>';
          resumeData.experiences.forEach((exp) => {
            htmlContent += '<div class="experience-item">';
            htmlContent += "<h4>" + escapeHtml(exp.position) + "</h4>";
            htmlContent +=
              '<div class="meta">' +
              escapeHtml(exp.company) +
              " | " +
              formatDate(exp.start) +
              " - " +
              (exp.end === "è‡³ä»Š" ? "è‡³ä»Š" : formatDate(exp.end)) +
              "</div>";
            htmlContent += "<p>" + escapeHtml(exp.description) + "</p>";
            htmlContent += "</div>";
          });
          htmlContent += "</div>";
        }

        if (resumeData.education.length > 0) {
          htmlContent += '<div class="section"><div class="section-title">æ•™è‚²èƒŒæ™¯</div>';
          resumeData.education.forEach((edu) => {
            htmlContent += '<div class="education-item">';
            htmlContent += "<h4>" + escapeHtml(edu.school) + "</h4>";
            htmlContent +=
              '<div class="meta">' +
              escapeHtml(edu.degree) +
              " - " +
              escapeHtml(edu.major) +
              " | " +
              formatDate(edu.date) +
              "</div>";
            htmlContent += "</div>";
          });
          htmlContent += "</div>";
        }

        if (resumeData.skills.length > 0) {
          htmlContent +=
            '<div class="section"><div class="section-title">ä¸“ä¸šæŠ€èƒ½</div><div class="skill-tags">';
          resumeData.skills.forEach((skill) => {
            htmlContent += '<span class="skill-tag">' + escapeHtml(skill) + "</span>";
          });
          htmlContent += "</div></div>";
        }

        htmlContent += "</body></html>";

        const blob = new Blob([htmlContent], { type: "text/html" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = (resumeData.name || "ç®€å†") + ".html";
        a.click();
        URL.revokeObjectURL(url);
      });

      // ä¿å­˜æ•°æ®
      document.getElementById("saveDataBtn").addEventListener("click", function () {
        localStorage.setItem("resumeData", JSON.stringify(resumeData));
        alert("æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°");
      });

      // åŠ è½½æ•°æ®
      document.getElementById("loadDataBtn").addEventListener("click", function () {
        const saved = localStorage.getItem("resumeData");
        if (saved) {
          resumeData = JSON.parse(saved);
          document.getElementById("name").value = resumeData.name || "";
          document.getElementById("title").value = resumeData.title || "";
          document.getElementById("email").value = resumeData.email || "";
          document.getElementById("phone").value = resumeData.phone || "";
          document.getElementById("location").value = resumeData.location || "";
          document.getElementById("summary").value = resumeData.summary || "";
          document.getElementById("skills").value = resumeData.skills
            ? resumeData.skills.join(", ")
            : "";
          renderExperienceList();
          renderEducationList();
          updatePreview();
          alert("æ•°æ®å·²åŠ è½½");
        } else {
          alert("æ²¡æœ‰æ‰¾åˆ°ä¿å­˜çš„æ•°æ®");
        }
      });

      // é¡µé¢åŠ è½½æ—¶å°è¯•åŠ è½½æ•°æ®
      window.addEventListener("load", () => {
        const saved = localStorage.getItem("resumeData");
        if (saved) {
          resumeData = JSON.parse(saved);
          document.getElementById("name").value = resumeData.name || "";
          document.getElementById("title").value = resumeData.title || "";
          document.getElementById("email").value = resumeData.email || "";
          document.getElementById("phone").value = resumeData.phone || "";
          document.getElementById("location").value = resumeData.location || "";
          document.getElementById("summary").value = resumeData.summary || "";
          document.getElementById("skills").value = resumeData.skills
            ? resumeData.skills.join(", ")
            : "";
          renderExperienceList();
          renderEducationList();
          updatePreview();
        }
      });

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        document.getElementById("theme-icon").textContent = newTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", newTheme);
      }
    </script>
  </body>
</html>
