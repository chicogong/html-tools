<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>package.jsonç¼–è¾‘å™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="package.jsonç¼–è¾‘å™¨ - WebUtils" />
    <meta name="keywords" content="package-json-editor,dev,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/dev/package-json-editor.html"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="package.jsonç¼–è¾‘å™¨ - WebUtils" />
    <meta property="og:description" content="package.jsonç¼–è¾‘å™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/dev/package-json-editor.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="package.jsonç¼–è¾‘å™¨ - WebUtils" />
    <meta name="twitter:description" content="package.jsonç¼–è¾‘å™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, blinkmacsystemfont, 'Segoe UI', roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      :root {
        --bg-primary: #0a0a0f;
        --bg-secondary: #12121a;
        --bg-tertiary: #1a1a25;
        --color-text-primary: #fff;
        --color-text-secondary: #88a;
        --accent: #6366f1;
        --border: #2a2a3a;
        --success: #22c55e;
        --danger: #ef4444;
      }
      [data-theme="light"] {
        --bg-primary: #f8fafc;
        --bg-secondary: #fff;
        --bg-tertiary: #f1f5f9;
        --color-text-primary: #1e293b;
        --color-text-secondary: #64748b;
        --border: #e2e8f0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--bg-primary);
        color: var(--color-text-primary);
        min-height: 100vh;
      }
      .header {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        padding: 2rem;
        text-align: center;
      }
      .header h1 {
        font-size: 1.8rem;
        margin-bottom: 0.5rem;
      }
      .nav {
        display: flex;
        justify-content: space-between;
        max-width: 1200px;
        margin: 0 auto 1rem;
      }
      .back-link {
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
      }
      .theme-toggle {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        color: white;
        cursor: pointer;
      }
      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
      }
      .card {
        background: var(--bg-secondary);
        border: 1px solid var(--border);
        border-radius: 1rem;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }
      .tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        border-bottom: 1px solid var(--border);
        padding-bottom: 0.5rem;
      }
      .tab {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 0.5rem 0.5rem 0 0;
        background: transparent;
        color: var(--color-text-secondary);
        cursor: pointer;
      }
      .tab.active {
        background: var(--accent);
        color: white;
      }
      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1rem;
      }
      .form-group {
        margin-bottom: 1rem;
      }
      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--color-text-secondary);
        font-size: 0.9rem;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        background: var(--bg-tertiary);
        color: var(--color-text-primary);
        font-family: inherit;
      }
      textarea {
        min-height: 100px;
        font-family: Monaco, Menlo, monospace;
        font-size: 0.9rem;
      }
      .btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 0.5rem;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.2s;
      }
      .btn-primary {
        background: var(--accent);
        color: white;
      }
      .btn-success {
        background: var(--success);
        color: white;
      }
      .btn-danger {
        background: var(--danger);
        color: white;
      }
      .btn-secondary {
        background: var(--bg-tertiary);
        color: var(--color-text-primary);
        border: 1px solid var(--border);
      }
      .btn-sm {
        padding: 0.4rem 0.75rem;
        font-size: 0.85rem;
      }
      .dep-list {
        margin-top: 1rem;
      }
      .dep-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem;
        background: var(--bg-tertiary);
        border-radius: 0.5rem;
        margin-bottom: 0.5rem;
      }
      .dep-item input {
        flex: 1;
      }
      .dep-item .version-input {
        width: 120px;
        flex: none;
      }
      .add-row {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }
      .add-row input {
        flex: 1;
      }
      .editor-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
      }
      @media (max-width: 900px) {
        .editor-grid {
          grid-template-columns: 1fr;
        }
      }
      .json-editor {
        min-height: 500px;
        font-family: Monaco, Menlo, monospace;
        font-size: 0.85rem;
      }
      .toast {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        background: var(--success);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .toast.show {
        opacity: 1;
      }
      .script-item {
        display: grid;
        grid-template-columns: 150px 1fr auto;
        gap: 0.5rem;
        align-items: center;
        padding: 0.5rem;
        background: var(--bg-tertiary);
        border-radius: 0.5rem;
        margin-bottom: 0.5rem;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      package.jsonç¼–è¾‘å™¨
    </nav>
    <div class="header">
      <div class="nav">
        <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“ ä¸»é¢˜</button>
      </div>
      <h1>ğŸ“¦ package.jsonç¼–è¾‘å™¨</h1>
      <p>å¯è§†åŒ–ç¼–è¾‘Node.jsé¡¹ç›®é…ç½®</p>
    </div>
    <div class="container">
      <div class="editor-grid">
        <div class="card">
          <div class="tabs">
            <button class="tab active" data-tab="basic" onclick="switchTab('basic')">
              åŸºæœ¬ä¿¡æ¯
            </button>
            <button class="tab" data-tab="deps" onclick="switchTab('deps')">ä¾èµ–</button>
            <button class="tab" data-tab="scripts" onclick="switchTab('scripts')">è„šæœ¬</button>
            <button class="tab" data-tab="other" onclick="switchTab('other')">å…¶ä»–</button>
          </div>

          <div id="basicTab">
            <div class="form-grid">
              <div class="form-group">
                <label>åŒ…å (name)</label>
                <input type="text" id="name" placeholder="my-package" oninput="updateJson()" />
              </div>
              <div class="form-group">
                <label>ç‰ˆæœ¬ (version)</label>
                <input
                  type="text"
                  id="version"
                  value="1.0.0"
                  placeholder="1.0.0"
                  oninput="updateJson()"
                />
              </div>
              <div class="form-group">
                <label>æè¿° (description)</label>
                <input type="text" id="description" placeholder="é¡¹ç›®æè¿°" oninput="updateJson()" />
              </div>
              <div class="form-group">
                <label>å…¥å£æ–‡ä»¶ (main)</label>
                <input
                  type="text"
                  id="main"
                  value="index.js"
                  placeholder="index.js"
                  oninput="updateJson()"
                />
              </div>
              <div class="form-group">
                <label>ä½œè€… (author)</label>
                <input type="text" id="author" placeholder="Your Name" oninput="updateJson()" />
              </div>
              <div class="form-group">
                <label>è®¸å¯è¯ (license)</label>
                <select id="license" onchange="updateJson()">
                  <option value="MIT">MIT</option>
                  <option value="ISC">ISC</option>
                  <option value="Apache-2.0">Apache-2.0</option>
                  <option value="GPL-3.0">GPL-3.0</option>
                  <option value="BSD-3-Clause">BSD-3-Clause</option>
                  <option value="UNLICENSED">UNLICENSED</option>
                </select>
              </div>
              <div class="form-group">
                <label>å…³é”®è¯ (keywords, é€—å·åˆ†éš”)</label>
                <input
                  type="text"
                  id="keywords"
                  placeholder="node, javascript"
                  oninput="updateJson()"
                />
              </div>
              <div class="form-group">
                <label>ä»“åº“URL (repository)</label>
                <input
                  type="text"
                  id="repository"
                  placeholder="https://github.com/user/repo"
                  oninput="updateJson()"
                />
              </div>
            </div>
          </div>

          <div id="depsTab" style="display: none">
            <h4 style="margin-bottom: 0.75rem">dependencies</h4>
            <div class="dep-list" id="depsList"></div>
            <div class="add-row">
              <input type="text" id="newDep" placeholder="åŒ…å" />
              <input
                type="text"
                id="newDepVer"
                placeholder="ç‰ˆæœ¬"
                class="version-input"
                value="^1.0.0"
              />
              <button class="btn btn-success btn-sm" onclick="addDep('deps')">+</button>
            </div>

            <h4 style="margin: 1.5rem 0 0.75rem">devDependencies</h4>
            <div class="dep-list" id="devDepsList"></div>
            <div class="add-row">
              <input type="text" id="newDevDep" placeholder="åŒ…å" />
              <input
                type="text"
                id="newDevDepVer"
                placeholder="ç‰ˆæœ¬"
                class="version-input"
                value="^1.0.0"
              />
              <button class="btn btn-success btn-sm" onclick="addDep('devDeps')">+</button>
            </div>
          </div>

          <div id="scriptsTab" style="display: none">
            <div id="scriptsList"></div>
            <div class="add-row">
              <input
                type="text"
                id="newScriptName"
                placeholder="è„šæœ¬å"
                style="width: 150px; flex: none"
              />
              <input type="text" id="newScriptCmd" placeholder="å‘½ä»¤" />
              <button class="btn btn-success btn-sm" onclick="addScript()">+</button>
            </div>
          </div>

          <div id="otherTab" style="display: none">
            <div class="form-group">
              <label>Nodeå¼•æ“ç‰ˆæœ¬ (engines.node)</label>
              <input type="text" id="engineNode" placeholder=">=14.0.0" oninput="updateJson()" />
            </div>
            <div class="form-group">
              <label>ç§æœ‰åŒ… (private)</label>
              <select id="private" onchange="updateJson()">
                <option value="false">å¦</option>
                <option value="true">æ˜¯</option>
              </select>
            </div>
            <div class="form-group">
              <label>ç±»å‹ (type)</label>
              <select id="type" onchange="updateJson()">
                <option value="">é»˜è®¤ (CommonJS)</option>
                <option value="module">module (ESM)</option>
                <option value="commonjs">commonjs</option>
              </select>
            </div>
          </div>
        </div>

        <div class="card">
          <h3
            style="
              margin-bottom: 1rem;
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            JSONé¢„è§ˆ
            <div>
              <button class="btn btn-secondary btn-sm" onclick="formatJson()">æ ¼å¼åŒ–</button>
              <button class="btn btn-success btn-sm" onclick="copyJson()">å¤åˆ¶</button>
            </div>
          </h3>
          <textarea id="jsonOutput" class="json-editor" oninput="parseJson()"></textarea>
          <div style="margin-top: 1rem; display: flex; gap: 0.5rem">
            <button class="btn btn-primary" onclick="downloadJson()">ğŸ’¾ ä¸‹è½½package.json</button>
          </div>
        </div>
      </div>
    </div>

    <div class="toast" id="toast">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>

    <script>
      let packageData = {
        name: "",
        version: "1.0.0",
        description: "",
        main: "index.js",
        scripts: { test: 'echo "Error: no test specified" && exit 1' },
        keywords: [],
        author: "",
        license: "MIT",
        dependencies: {},
        devDependencies: {}
      };

      window.switchTab = function (tab) {
        document.querySelectorAll(".tab").forEach((t) => t.classList.remove("active"));
        document.querySelector(`[data-tab="${tab}"]`).classList.add("active");

        ["basic", "deps", "scripts", "other"].forEach((t) => {
          document.getElementById(t + "Tab").style.display = t === tab ? "block" : "none";
        });
      };

      window.updateJson = function () {
        packageData.name = document.getElementById("name").value || undefined;
        packageData.version = document.getElementById("version").value || "1.0.0";
        packageData.description = document.getElementById("description").value || undefined;
        packageData.main = document.getElementById("main").value || undefined;
        packageData.author = document.getElementById("author").value || undefined;
        packageData.license = document.getElementById("license").value;

        const keywords = document.getElementById("keywords").value;
        packageData.keywords = keywords
          ? keywords
              .split(",")
              .map((k) => k.trim())
              .filter((k) => k)
          : undefined;

        const repo = document.getElementById("repository").value;
        packageData.repository = repo ? { type: "git", url: repo } : undefined;

        const engineNode = document.getElementById("engineNode").value;
        packageData.engines = engineNode ? { node: engineNode } : undefined;

        const isPrivate = document.getElementById("private").value === "true";
        packageData.private = isPrivate || undefined;

        const type = document.getElementById("type").value;
        packageData.type = type || undefined;

        renderJson();
      };

      function renderJson() {
        const clean = Object.fromEntries(
          Object.entries(packageData).filter(
            ([k, v]) =>
              v !== undefined &&
              v !== "" &&
              !(Array.isArray(v) && v.length === 0) &&
              !(typeof v === "object" && !Array.isArray(v) && Object.keys(v).length === 0)
          )
        );
        document.getElementById("jsonOutput").value = JSON.stringify(clean, null, 2);
      }

      window.parseJson = function () {
        try {
          const json = JSON.parse(document.getElementById("jsonOutput").value);
          packageData = { ...packageData, ...json };

          document.getElementById("name").value = json.name || "";
          document.getElementById("version").value = json.version || "1.0.0";
          document.getElementById("description").value = json.description || "";
          document.getElementById("main").value = json.main || "";
          document.getElementById("author").value = json.author || "";
          document.getElementById("license").value = json.license || "MIT";
          document.getElementById("keywords").value = (json.keywords || []).join(", ");
          document.getElementById("repository").value = json.repository?.url || "";
          document.getElementById("engineNode").value = json.engines?.node || "";
          document.getElementById("private").value = json.private ? "true" : "false";
          document.getElementById("type").value = json.type || "";

          renderDeps();
          renderScripts();
        } catch (e) {
          // Invalid JSON, ignore
        }
      };

      function renderDeps() {
        const depsList = document.getElementById("depsList");
        const devDepsList = document.getElementById("devDepsList");

        depsList.innerHTML =
          Object.entries(packageData.dependencies || {})
            .map(
              ([name, ver]) => `
                <div class="dep-item">
                    <input type="text" value="${name}" onchange="updateDepName('deps', '${name}', this.value)">
                    <input type="text" class="version-input" value="${ver}" onchange="updateDepVer('deps', '${name}', this.value)">
                    <button class="btn btn-danger btn-sm" onclick="removeDep('deps', '${name}')">Ã—</button>
                </div>
            `
            )
            .join("") || '<p style="color: var(--color-text-secondary); padding: 0.5rem;">æš‚æ— ä¾èµ–</p>';

        devDepsList.innerHTML =
          Object.entries(packageData.devDependencies || {})
            .map(
              ([name, ver]) => `
                <div class="dep-item">
                    <input type="text" value="${name}" onchange="updateDepName('devDeps', '${name}', this.value)">
                    <input type="text" class="version-input" value="${ver}" onchange="updateDepVer('devDeps', '${name}', this.value)">
                    <button class="btn btn-danger btn-sm" onclick="removeDep('devDeps', '${name}')">Ã—</button>
                </div>
            `
            )
            .join("") ||
          '<p style="color: var(--color-text-secondary); padding: 0.5rem;">æš‚æ— å¼€å‘ä¾èµ–</p>';
      }

      window.addDep = function (type) {
        const nameInput = document.getElementById(type === "deps" ? "newDep" : "newDevDep");
        const verInput = document.getElementById(type === "deps" ? "newDepVer" : "newDevDepVer");

        const name = nameInput.value.trim();
        const ver = verInput.value.trim() || "^1.0.0";

        if (!name) return;

        const target = type === "deps" ? "dependencies" : "devDependencies";
        packageData[target] = packageData[target] || {};
        packageData[target][name] = ver;

        nameInput.value = "";
        renderDeps();
        renderJson();
      };

      window.updateDepName = function (type, oldName, newName) {
        const target = type === "deps" ? "dependencies" : "devDependencies";
        const ver = packageData[target][oldName];
        delete packageData[target][oldName];
        packageData[target][newName] = ver;
        renderJson();
      };

      window.updateDepVer = function (type, name, ver) {
        const target = type === "deps" ? "dependencies" : "devDependencies";
        packageData[target][name] = ver;
        renderJson();
      };

      window.removeDep = function (type, name) {
        const target = type === "deps" ? "dependencies" : "devDependencies";
        delete packageData[target][name];
        renderDeps();
        renderJson();
      };

      function renderScripts() {
        const list = document.getElementById("scriptsList");
        list.innerHTML =
          Object.entries(packageData.scripts || {})
            .map(
              ([name, cmd]) => `
                <div class="script-item">
                    <input type="text" value="${name}" onchange="updateScriptName('${name}', this.value)">
                    <input type="text" value="${cmd}" onchange="updateScriptCmd('${name}', this.value)">
                    <button class="btn btn-danger btn-sm" onclick="removeScript('${name}')">Ã—</button>
                </div>
            `
            )
            .join("") || '<p style="color: var(--color-text-secondary); padding: 0.5rem;">æš‚æ— è„šæœ¬</p>';
      }

      window.addScript = function () {
        const name = document.getElementById("newScriptName").value.trim();
        const cmd = document.getElementById("newScriptCmd").value.trim();

        if (!name || !cmd) return;

        packageData.scripts = packageData.scripts || {};
        packageData.scripts[name] = cmd;

        document.getElementById("newScriptName").value = "";
        document.getElementById("newScriptCmd").value = "";
        renderScripts();
        renderJson();
      };

      window.updateScriptName = function (oldName, newName) {
        const cmd = packageData.scripts[oldName];
        delete packageData.scripts[oldName];
        packageData.scripts[newName] = cmd;
        renderJson();
      };

      window.updateScriptCmd = function (name, cmd) {
        packageData.scripts[name] = cmd;
        renderJson();
      };

      window.removeScript = function (name) {
        delete packageData.scripts[name];
        renderScripts();
        renderJson();
      };

      window.formatJson = function () {
        try {
          const json = JSON.parse(document.getElementById("jsonOutput").value);
          document.getElementById("jsonOutput").value = JSON.stringify(json, null, 2);
        } catch (e) {
          alert("JSONæ ¼å¼é”™è¯¯");
        }
      };

      window.copyJson = function () {
        navigator.clipboard.writeText(document.getElementById("jsonOutput").value);
        showToast();
      };

      window.downloadJson = function () {
        const blob = new Blob([document.getElementById("jsonOutput").value], {
          type: "application/json"
        });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "package.json";
        link.click();
      };

      function showToast() {
        const toast = document.getElementById("toast");
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 2000);
      }

      // Initialize
      renderJson();
      renderDeps();
      renderScripts();

      window.toggleTheme = function () {
        const t = document.body.getAttribute("data-theme") === "light" ? "dark" : "light";
        document.body.setAttribute("data-theme", t);
        localStorage.setItem("theme", t);
      };
      document.body.setAttribute("data-theme", localStorage.getItem("theme") || "dark");
    </script>
  </body>
</html>
