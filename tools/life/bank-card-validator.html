<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é“¶è¡Œå¡å·æ ¡éªŒå™¨ - WebUtils</title>
  <!-- SEO Meta Tags -->
  <meta name="description" content="é“¶è¡Œå¡å·æ ¡éªŒå™¨ - WebUtils" />
  <meta name="keywords" content="bank-card-validator,life,tools,webutils" />
  <meta name="author" content="WebUtils" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://tools.realtime-ai.chat/tools/life/bank-card-validator.html" />

  <!-- Open Graph -->
  <meta property="og:title" content="é“¶è¡Œå¡å·æ ¡éªŒå™¨ - WebUtils" />
  <meta property="og:description" content="é“¶è¡Œå¡å·æ ¡éªŒå™¨ - WebUtils" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://tools.realtime-ai.chat/tools/life/bank-card-validator.html" />
  <meta property="og:site_name" content="WebUtils" />
  <meta property="og:locale" content="zh_CN" />
  <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
  <meta property="og:image:width" content="1280" />
  <meta property="og:image:height" content="640" />
  <meta property="og:image:type" content="image/png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="é“¶è¡Œå¡å·æ ¡éªŒå™¨ - WebUtils" />
  <meta name="twitter:description" content="é“¶è¡Œå¡å·æ ¡éªŒå™¨ - WebUtils" />
  <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <meta name="description" content="åœ¨çº¿é“¶è¡Œå¡å·æ ¡éªŒå·¥å…·ï¼Œä½¿ç”¨Luhnç®—æ³•éªŒè¯é“¶è¡Œå¡å·ï¼Œè¯†åˆ«å‘å¡é“¶è¡Œå’Œå¡ç±»å‹">
    <meta name="keywords" content="é“¶è¡Œå¡æ ¡éªŒ,Luhnç®—æ³•,é“¶è¡Œå¡éªŒè¯,å‘å¡è¡ŒæŸ¥è¯¢,ä¿¡ç”¨å¡æ ¡éªŒ">
    <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --bg-card: #1a1a24;
      --bg-input: #0e0e14;
      --text-primary: #e8e8ed;
      --text-secondary: #8888a0;
      --text-muted: #55556a;
      --border-subtle: #2a2a3a;
      --border-strong: #3a3a4a;
      --accent-cyan: #00f5d4;
      --accent-green: #10b981;
      --accent-red: #f43f5e;
      --accent-yellow: #fbbf24;
      --accent-purple: #a855f7;
      --glow-cyan: rgb(0, 245, 212, 0.15);
      --glow-green: rgb(16, 185, 129, 0.15);
      --glow-red: rgb(244, 63, 94, 0.15);
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
    }

    [data-theme="light"] {
      --bg-deep: #fafafa;
      --bg-surface: #fff;
      --bg-card: #fff;
      --bg-input: #f5f5f5;
      --bg-hover: #f5f5f5;
      --text-primary: #1a1a1a;
      --text-secondary: #666;
      --text-muted: #999;
      --border-subtle: #e5e5e5;
      --border-strong: #d5d5d5;
    }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --bg-primary: #0a0a0f; 
            --bg-secondary: #12121a; 
            --bg-tertiary: #1a1a25; 
            --text-primary: #fff; 
            --text-secondary: #88a; 
            --accent: #10b981; 
            --accent-light: #34d399;
            --border: #2a2a3a; 
            --success: #22c55e;
            --error: #ef4444;
        }
        [data-theme="light"] { 
            --bg-primary: #f8fafc; 
            --bg-secondary: #fff; 
            --bg-tertiary: #f1f5f9; 
            --text-primary: #1e293b; 
            --text-secondary: #64748b; 
            --border: #e2e8f0; 
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: var(--bg-primary); 
            color: var(--text-primary); 
            min-height: 100vh; 
        }
        .header { 
            background: linear-gradient(135deg, #10b981, #059669); 
            padding: 2rem; 
            text-align: center; 
        }
        .header h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
        .nav { display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto 1rem; }
        .back-link { color: rgba(255,255,255,0.9); text-decoration: none; }
        .theme-toggle { background: rgba(255,255,255,0.2); border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; color: white; cursor: pointer; }
        .container { max-width: 800px; margin: 0 auto; padding: 2rem; }
        .card { 
            background: var(--bg-secondary); 
            border: 1px solid var(--border); 
            border-radius: 1rem; 
            padding: 1.5rem; 
            margin-bottom: 1.5rem; 
        }
        .input-group { margin-bottom: 1rem; }
        .input-group label { 
            display: block; 
            margin-bottom: 0.5rem; 
            color: var(--text-secondary); 
            font-size: 0.9rem; 
        }
        .input-row {
            display: flex;
            gap: 0.75rem;
        }
        input[type="text"] { 
            flex: 1;
            padding: 1rem; 
            border: 2px solid var(--border); 
            border-radius: 0.75rem; 
            background: var(--bg-tertiary); 
            color: var(--text-primary); 
            font-size: 1.25rem; 
            font-family: 'Courier New', monospace;
            letter-spacing: 3px;
            transition: border-color 0.2s;
        }
        input[type="text"]:focus {
            outline: none;
            border-color: var(--accent);
        }
        input[type="text"]::placeholder {
            color: var(--text-secondary);
            opacity: 0.5;
            letter-spacing: 0;
        }
        .btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        .btn-primary:hover {
            background: var(--accent-light);
        }
        
        .card-preview {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            border-radius: 1rem;
            color: white;
            position: relative;
            overflow: hidden;
            min-height: 180px;
        }
        .card-preview::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }
        .card-chip {
            width: 50px;
            height: 40px;
            background: linear-gradient(135deg, #ffd700, #ffb347);
            border-radius: 6px;
            margin-bottom: 1rem;
        }
        .card-number {
            font-family: 'Courier New', monospace;
            font-size: 1.4rem;
            letter-spacing: 3px;
            margin-bottom: 1rem;
            word-spacing: 10px;
        }
        .card-info-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }
        .card-bank {
            font-size: 1.1rem;
            font-weight: 600;
        }
        .card-type {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .card-logo {
            font-size: 2rem;
        }
        
        .status-box {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            margin-top: 1rem;
        }
        .status-box.valid {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--success);
        }
        .status-box.invalid {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--error);
        }
        .status-box.pending {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
        }
        .status-icon { font-size: 1.5rem; }
        .status-content { flex: 1; }
        .status-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .status-title.valid { color: var(--success); }
        .status-title.invalid { color: var(--error); }
        .status-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .info-item {
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 0.75rem;
        }
        .info-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        .info-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .algorithm-box {
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 0.75rem;
        }
        .algorithm-title {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .digit-row {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-bottom: 0.5rem;
        }
        .digit-cell {
            width: 32px;
            height: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        .digit-cell .num {
            font-size: 1rem;
            font-weight: bold;
        }
        .digit-cell .calc {
            font-size: 0.7rem;
            color: var(--accent);
        }
        .digit-cell.double {
            background: rgba(16, 185, 129, 0.2);
        }
        .luhn-result {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }
        .luhn-result span {
            color: var(--accent);
            font-weight: 600;
        }
        
        .examples {
            margin-top: 1.5rem;
        }
        .examples h3 {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        .example-btns {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .example-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .example-btn:hover {
            border-color: var(--accent);
            color: var(--text-primary);
        }
        
        .privacy-note {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .privacy-note strong {
            color: var(--accent);
        }
        
        @media (max-width: 640px) {
            .header { padding: 1.5rem 1rem; }
            .header h1 { font-size: 1.5rem; }
            .container { padding: 1rem; }
            .input-row { flex-direction: column; }
            input[type="text"] { font-size: 1rem; letter-spacing: 2px; }
            .card-number { font-size: 1.1rem; letter-spacing: 2px; }
            .digit-cell { width: 24px; height: 32px; }
            .digit-cell .num { font-size: 0.85rem; }
            .digit-cell .calc { font-size: 0.6rem; }
        }
    
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
    <nav class="breadcrumb"><a href="../../index.html">é¦–é¡µ</a><span>â€º</span><a href="../../index.html#life">ç”Ÿæ´»å·¥å…·</a><span>â€º</span>é“¶è¡Œå¡å·æ ¡éªŒ</nav>
    <div class="header">
        <div class="nav">
            <a href="../../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“ ä¸»é¢˜</button>
        </div>
        <h1>ğŸ’³ é“¶è¡Œå¡å·æ ¡éªŒå™¨</h1>
        <p>Luhnç®—æ³•éªŒè¯ï¼Œè¯†åˆ«å‘å¡é“¶è¡Œ</p>
    </div>
    
    <div class="container">
        <div class="card">
            <div class="input-group">
                <label>è¾“å…¥é“¶è¡Œå¡å·ï¼ˆ16-19ä½ï¼‰</label>
                <div class="input-row">
                    <input type="text" id="cardInput" placeholder="è¯·è¾“å…¥é“¶è¡Œå¡å·" maxlength="23" oninput="validate()">
                    <button class="btn btn-primary" onclick="validate()">ğŸ” æ ¡éªŒ</button>
                </div>
            </div>
            
            <div class="card-preview" id="cardPreview">
                <div class="card-chip"></div>
                <div class="card-number" id="previewNumber">**** **** **** ****</div>
                <div class="card-info-row">
                    <div>
                        <div class="card-bank" id="previewBank">è¯·è¾“å…¥å¡å·</div>
                        <div class="card-type" id="previewType">-</div>
                    </div>
                    <div class="card-logo" id="previewLogo">ğŸ’³</div>
                </div>
            </div>
            
            <div class="status-box pending" id="statusBox">
                <span class="status-icon" id="statusIcon">ğŸ”</span>
                <div class="status-content">
                    <div class="status-title" id="statusTitle">è¯·è¾“å…¥é“¶è¡Œå¡å·è¿›è¡Œæ ¡éªŒ</div>
                    <div class="status-desc" id="statusDesc">æ”¯æŒå„å¤§é“¶è¡Œçš„å€Ÿè®°å¡å’Œä¿¡ç”¨å¡</div>
                </div>
            </div>
            
            <div class="info-grid" id="infoGrid" style="display: none;">
                <div class="info-item">
                    <div class="info-label">ğŸ¦ å‘å¡é“¶è¡Œ</div>
                    <div class="info-value" id="infoBank">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ’° å¡ç±»å‹</div>
                    <div class="info-value" id="infoType">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ”¢ å¡å·é•¿åº¦</div>
                    <div class="info-value" id="infoLength">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ğŸ·ï¸ BINç </div>
                    <div class="info-value" id="infoBin">-</div>
                </div>
            </div>
            
            <div class="algorithm-box" id="algorithmBox" style="display: none;">
                <div class="algorithm-title">
                    <span>ğŸ§®</span>
                    <span>Luhnç®—æ³•éªŒè¯è¿‡ç¨‹</span>
                </div>
                <div class="digit-row" id="digitRow"></div>
                <div class="luhn-result" id="luhnResult"></div>
            </div>
            
            <div class="privacy-note">
                <strong>ğŸ”’ éšç§è¯´æ˜ï¼š</strong>æ‰€æœ‰æ ¡éªŒå‡åœ¨æœ¬åœ°æµè§ˆå™¨å®Œæˆï¼Œé“¶è¡Œå¡å·ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚
            </div>
        </div>
        
        <div class="card">
            <div class="examples">
                <h3>ğŸ’¡ æµ‹è¯•ç¤ºä¾‹ï¼ˆè™šæ‹Ÿå¡å·ï¼‰</h3>
                <div class="example-btns">
                    <button class="example-btn" onclick="setExample('6222021234567890123')">å·¥å•†é“¶è¡Œ</button>
                    <button class="example-btn" onclick="setExample('6217001234567890123')">å»ºè®¾é“¶è¡Œ</button>
                    <button class="example-btn" onclick="setExample('6225881234567890')">æ‹›å•†é“¶è¡Œ</button>
                    <button class="example-btn" onclick="setExample('4532015112830366')">Visa</button>
                    <button class="example-btn" onclick="setExample('5425233430109903')">MasterCard</button>
                    <button class="example-btn" onclick="setExample('6212261234567890123')">æ— æ•ˆå¡å·</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // é“¶è¡ŒBINç æ˜ å°„ï¼ˆå‰6ä½ï¼‰
        const BANK_BINS = {
            // å·¥å•†é“¶è¡Œ
            '622202': { bank: 'ä¸­å›½å·¥å•†é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '622200': { bank: 'ä¸­å›½å·¥å•†é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '621226': { bank: 'ä¸­å›½å·¥å•†é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '621225': { bank: 'ä¸­å›½å·¥å•†é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '621700': { bank: 'ä¸­å›½å»ºè®¾é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '621284': { bank: 'ä¸­å›½å»ºè®¾é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            // å»ºè®¾é“¶è¡Œ
            '436742': { bank: 'ä¸­å›½å»ºè®¾é“¶è¡Œ', type: 'ä¿¡ç”¨å¡', logo: 'ğŸ›ï¸' },
            '552245': { bank: 'ä¸­å›½å»ºè®¾é“¶è¡Œ', type: 'ä¿¡ç”¨å¡', logo: 'ğŸ›ï¸' },
            // å†œä¸šé“¶è¡Œ
            '622848': { bank: 'ä¸­å›½å†œä¸šé“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '621282': { bank: 'ä¸­å›½å†œä¸šé“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '622836': { bank: 'ä¸­å›½å†œä¸šé“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            // ä¸­å›½é“¶è¡Œ
            '621660': { bank: 'ä¸­å›½é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '622760': { bank: 'ä¸­å›½é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '621661': { bank: 'ä¸­å›½é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            // æ‹›å•†é“¶è¡Œ
            '622588': { bank: 'æ‹›å•†é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            '621485': { bank: 'æ‹›å•†é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            '622575': { bank: 'æ‹›å•†é“¶è¡Œ', type: 'ä¿¡ç”¨å¡', logo: 'ğŸ’¼' },
            // äº¤é€šé“¶è¡Œ
            '622258': { bank: 'äº¤é€šé“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            '621436': { bank: 'äº¤é€šé“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ›ï¸' },
            // é‚®å‚¨é“¶è¡Œ
            '621096': { bank: 'ä¸­å›½é‚®æ”¿å‚¨è“„é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ“®' },
            '622150': { bank: 'ä¸­å›½é‚®æ”¿å‚¨è“„é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ“®' },
            // å…´ä¸šé“¶è¡Œ
            '622909': { bank: 'å…´ä¸šé“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            // æ°‘ç”Ÿé“¶è¡Œ
            '622615': { bank: 'ä¸­å›½æ°‘ç”Ÿé“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            // æµ¦å‘é“¶è¡Œ
            '622516': { bank: 'ä¸Šæµ·æµ¦ä¸œå‘å±•é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            // ä¸­ä¿¡é“¶è¡Œ
            '622680': { bank: 'ä¸­ä¿¡é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            // å…‰å¤§é“¶è¡Œ
            '622660': { bank: 'ä¸­å›½å…‰å¤§é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            // åå¤é“¶è¡Œ
            '622630': { bank: 'åå¤é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            // å¹³å®‰é“¶è¡Œ
            '622155': { bank: 'å¹³å®‰é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' },
            // å¹¿å‘é“¶è¡Œ
            '622568': { bank: 'å¹¿å‘é“¶è¡Œ', type: 'å€Ÿè®°å¡', logo: 'ğŸ’¼' }
        };
        
        // å›½é™…å¡ç»„ç»‡
        const CARD_BRANDS = {
            '4': { brand: 'Visa', logo: 'ğŸ’³' },
            '5': { brand: 'MasterCard', logo: 'ğŸ’³' },
            '34': { brand: 'American Express', logo: 'ğŸ’³' },
            '37': { brand: 'American Express', logo: 'ğŸ’³' },
            '62': { brand: 'é“¶è”', logo: 'ğŸ‡¨ğŸ‡³' },
            '60': { brand: 'Discover', logo: 'ğŸ’³' },
            '35': { brand: 'JCB', logo: 'ğŸ’³' }
        };
        
        /**
         * Luhnç®—æ³•æ ¡éªŒ
         */
        function luhnCheck(cardNumber) {
            const digits = cardNumber.split('').map(Number);
            const steps = [];
            let sum = 0;
            
            for (let i = digits.length - 1; i >= 0; i--) {
                let digit = digits[i];
                const isDouble = (digits.length - 1 - i) % 2 === 1;
                
                if (isDouble) {
                    digit *= 2;
                    if (digit > 9) digit -= 9;
                }
                
                steps.unshift({
                    original: digits[i],
                    calculated: digit,
                    isDouble: isDouble
                });
                
                sum += digit;
            }
            
            return {
                valid: sum % 10 === 0,
                sum: sum,
                steps: steps
            };
        }
        
        /**
         * è¯†åˆ«å‘å¡é“¶è¡Œ
         */
        function identifyBank(cardNumber) {
            const bin6 = cardNumber.substring(0, 6);
            
            // å…ˆæŸ¥ç²¾ç¡®BINç 
            if (BANK_BINS[bin6]) {
                return BANK_BINS[bin6];
            }
            
            // æŸ¥å‰ç¼€è¯†åˆ«å¡ç»„ç»‡
            const prefix2 = cardNumber.substring(0, 2);
            const prefix1 = cardNumber.substring(0, 1);
            
            if (CARD_BRANDS[prefix2]) {
                const brand = CARD_BRANDS[prefix2];
                return {
                    bank: brand.brand,
                    type: prefix2 === '62' ? 'é“¶è”å¡' : 'å›½é™…å¡',
                    logo: brand.logo
                };
            }
            
            if (CARD_BRANDS[prefix1]) {
                const brand = CARD_BRANDS[prefix1];
                return {
                    bank: brand.brand,
                    type: 'å›½é™…å¡',
                    logo: brand.logo
                };
            }
            
            return {
                bank: 'æœªçŸ¥é“¶è¡Œ',
                type: 'æœªçŸ¥ç±»å‹',
                logo: 'ğŸ’³'
            };
        }
        
        /**
         * æ ¼å¼åŒ–å¡å·æ˜¾ç¤º
         */
        function formatCardNumber(num) {
            const clean = num.replace(/\s/g, '');
            return clean.replace(/(.{4})/g, '$1 ').trim();
        }
        
        /**
         * éªŒè¯å¹¶æ˜¾ç¤ºç»“æœ
         */
        window.validate = function() {
            const input = document.getElementById('cardInput');
            const cardNumber = input.value.replace(/[\s-]/g, '');
            
            // æ›´æ–°å¡ç‰‡é¢„è§ˆ
            updateCardPreview(cardNumber);
            
            const statusBox = document.getElementById('statusBox');
            const statusIcon = document.getElementById('statusIcon');
            const statusTitle = document.getElementById('statusTitle');
            const statusDesc = document.getElementById('statusDesc');
            const infoGrid = document.getElementById('infoGrid');
            const algorithmBox = document.getElementById('algorithmBox');
            
            if (!cardNumber) {
                statusBox.className = 'status-box pending';
                statusIcon.textContent = 'ğŸ”';
                statusTitle.className = 'status-title';
                statusTitle.textContent = 'è¯·è¾“å…¥é“¶è¡Œå¡å·è¿›è¡Œæ ¡éªŒ';
                statusDesc.textContent = 'æ”¯æŒå„å¤§é“¶è¡Œçš„å€Ÿè®°å¡å’Œä¿¡ç”¨å¡';
                infoGrid.style.display = 'none';
                algorithmBox.style.display = 'none';
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦å…¨ä¸ºæ•°å­—
            if (!/^\d+$/.test(cardNumber)) {
                statusBox.className = 'status-box invalid';
                statusIcon.textContent = 'âŒ';
                statusTitle.className = 'status-title invalid';
                statusTitle.textContent = 'æ ¼å¼é”™è¯¯';
                statusDesc.textContent = 'é“¶è¡Œå¡å·åªèƒ½åŒ…å«æ•°å­—';
                infoGrid.style.display = 'none';
                algorithmBox.style.display = 'none';
                return;
            }
            
            // æ£€æŸ¥é•¿åº¦
            if (cardNumber.length < 16 || cardNumber.length > 19) {
                statusBox.className = 'status-box pending';
                statusIcon.textContent = 'â³';
                statusTitle.className = 'status-title';
                statusTitle.textContent = `å·²è¾“å…¥ ${cardNumber.length} ä½`;
                statusDesc.textContent = 'é“¶è¡Œå¡å·é€šå¸¸ä¸º16-19ä½';
                infoGrid.style.display = 'none';
                algorithmBox.style.display = 'none';
                return;
            }
            
            // Luhnæ ¡éªŒ
            const luhnResult = luhnCheck(cardNumber);
            const bankInfo = identifyBank(cardNumber);
            
            // æ˜¾ç¤ºç®—æ³•éªŒè¯è¿‡ç¨‹
            displayAlgorithm(luhnResult);
            
            if (luhnResult.valid) {
                statusBox.className = 'status-box valid';
                statusIcon.textContent = 'âœ…';
                statusTitle.className = 'status-title valid';
                statusTitle.textContent = 'Luhnæ ¡éªŒé€šè¿‡';
                statusDesc.textContent = 'é“¶è¡Œå¡å·æ ¼å¼æœ‰æ•ˆï¼ˆä¸ä»£è¡¨å¡å·çœŸå®å­˜åœ¨ï¼‰';
                
                // æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
                document.getElementById('infoBank').textContent = bankInfo.bank;
                document.getElementById('infoType').textContent = bankInfo.type;
                document.getElementById('infoLength').textContent = cardNumber.length + 'ä½';
                document.getElementById('infoBin').textContent = cardNumber.substring(0, 6);
                infoGrid.style.display = 'grid';
            } else {
                statusBox.className = 'status-box invalid';
                statusIcon.textContent = 'âŒ';
                statusTitle.className = 'status-title invalid';
                statusTitle.textContent = 'Luhnæ ¡éªŒå¤±è´¥';
                statusDesc.textContent = 'é“¶è¡Œå¡å·æ ¡éªŒä½é”™è¯¯ï¼Œå¯èƒ½æ˜¯æ— æ•ˆå¡å·';
                infoGrid.style.display = 'none';
            }
        };
        
        /**
         * æ›´æ–°å¡ç‰‡é¢„è§ˆ
         */
        function updateCardPreview(cardNumber) {
            const previewNumber = document.getElementById('previewNumber');
            const previewBank = document.getElementById('previewBank');
            const previewType = document.getElementById('previewType');
            const previewLogo = document.getElementById('previewLogo');
            
            if (!cardNumber) {
                previewNumber.textContent = '**** **** **** ****';
                previewBank.textContent = 'è¯·è¾“å…¥å¡å·';
                previewType.textContent = '-';
                previewLogo.textContent = 'ğŸ’³';
                return;
            }
            
            // æ˜¾ç¤ºæ ¼å¼åŒ–çš„å¡å·
            const masked = cardNumber.padEnd(16, '*');
            previewNumber.textContent = formatCardNumber(masked);
            
            // è¯†åˆ«é“¶è¡Œ
            if (cardNumber.length >= 6) {
                const bankInfo = identifyBank(cardNumber);
                previewBank.textContent = bankInfo.bank;
                previewType.textContent = bankInfo.type;
                previewLogo.textContent = bankInfo.logo;
            } else {
                previewBank.textContent = 'è¯†åˆ«ä¸­...';
                previewType.textContent = '-';
                previewLogo.textContent = 'ğŸ’³';
            }
        }
        
        /**
         * æ˜¾ç¤ºLuhnç®—æ³•éªŒè¯è¿‡ç¨‹
         */
        function displayAlgorithm(result) {
            const digitRow = document.getElementById('digitRow');
            const luhnResult = document.getElementById('luhnResult');
            const algorithmBox = document.getElementById('algorithmBox');
            
            digitRow.innerHTML = '';
            
            result.steps.forEach(step => {
                const cell = document.createElement('div');
                cell.className = 'digit-cell' + (step.isDouble ? ' double' : '');
                cell.innerHTML = `
                    <span class="num">${step.original}</span>
                    <span class="calc">${step.isDouble ? 'Ã—2=' + step.calculated : ''}</span>
                `;
                digitRow.appendChild(cell);
            });
            
            luhnResult.innerHTML = `å„ä½æ•°å­—å¤„ç†åæ±‚å’Œ: <span>${result.sum}</span>ï¼Œ${result.sum} mod 10 = <span>${result.sum % 10}</span>ï¼Œ${result.valid ? 'âœ“ æ ¡éªŒé€šè¿‡' : 'âœ— æ ¡éªŒå¤±è´¥'}`;
            
            algorithmBox.style.display = 'block';
        }
        
        /**
         * è®¾ç½®ç¤ºä¾‹
         */
        window.setExample = function(num) {
            document.getElementById('cardInput').value = formatCardNumber(num);
            validate();
        };
        
        /**
         * ä¸»é¢˜åˆ‡æ¢
         */
        window.toggleTheme = function() {
            const t = document.body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', t);
            localStorage.setItem('theme', t);
        };
        
        // åˆå§‹åŒ–ä¸»é¢˜
        document.body.setAttribute('data-theme', localStorage.getItem('theme') || 'dark');
        
        // è¾“å…¥æ ¼å¼åŒ–
        document.getElementById('cardInput').addEventListener('input', function(e) {
            let value = this.value.replace(/[^\d\s]/g, '');
            // è‡ªåŠ¨æ·»åŠ ç©ºæ ¼åˆ†éš”
            const clean = value.replace(/\s/g, '');
            if (clean.length > 0) {
                this.value = formatCardNumber(clean);
            }
        });
    </script>
</body>
</html>
