<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÊâìÁ†ñÂùó - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="ÊâìÁ†ñÂùó - HTML Tools" />
    <meta name="keywords" content="breakout-game,game,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/game/breakout-game.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="ÊâìÁ†ñÂùó - HTML Tools" />
    <meta property="og:description" content="ÊâìÁ†ñÂùó - HTML Tools" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/game/breakout-game.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="ÊâìÁ†ñÂùó - HTML Tools" />
    <meta name="twitter:description" content="ÊâìÁ†ñÂùó - HTML Tools" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme="light"] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      :root {
        --bg-primary: #0a0a0f;
        --bg-secondary: #12121a;
        --text-primary: #fff;
        --text-secondary: #a0a0a0;
        --accent: #f59e0b;
        --border: #2a2a3a;
      }
      [data-theme="light"] {
        --bg-primary: #f5f5f5;
        --bg-secondary: #fff;
        --text-primary: #1a1a2e;
        --text-secondary: #666;
        --border: #ddd;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        overflow: hidden;
      }
      .header {
        background: linear-gradient(135deg, #f59e0b, #fbbf24);
        padding: 15px 20px;
        text-align: center;
        position: relative;
      }
      .header h1 {
        font-size: 24px;
        color: #1a1a2e;
        margin-bottom: 3px;
      }
      .header p {
        font-size: 12px;
        opacity: 0.8;
        color: #1a1a2e;
      }
      .back-link {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #1a1a2e;
        text-decoration: none;
        font-size: 14px;
      }
      .theme-toggle {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.3);
        border: none;
        padding: 6px 10px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 15px;
      }
      .stats {
        display: flex;
        justify-content: space-around;
        margin-bottom: 15px;
        background: var(--bg-secondary);
        border-radius: 10px;
        padding: 12px;
        border: 1px solid var(--border);
      }
      .stat-item {
        text-align: center;
      }
      .stat-value {
        font-size: 24px;
        font-weight: bold;
        color: var(--accent);
      }
      .stat-label {
        font-size: 11px;
        color: var(--text-secondary);
      }
      .game-wrapper {
        position: relative;
        background: var(--bg-secondary);
        border-radius: 12px;
        padding: 10px;
        border: 1px solid var(--border);
      }
      canvas {
        display: block;
        background: #1a1a2e;
        border-radius: 8px;
        width: 100%;
        touch-action: none;
      }
      .overlay {
        position: absolute;
        inset: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.8);
        border-radius: 8px;
        z-index: 10;
      }
      .overlay.hidden {
        display: none;
      }
      .overlay h2 {
        font-size: 28px;
        margin-bottom: 15px;
        color: var(--accent);
      }
      .overlay p {
        color: var(--text-secondary);
        margin-bottom: 20px;
      }
      .btn {
        padding: 12px 30px;
        border-radius: 8px;
        border: none;
        font-size: 16px;
        cursor: pointer;
        background: var(--accent);
        color: #1a1a2e;
        font-weight: 600;
        transition: transform 0.2s;
      }
      .btn:hover {
        transform: scale(1.05);
      }
      .controls-hint {
        text-align: center;
        margin-top: 15px;
        font-size: 12px;
        color: var(--text-secondary);
      }
      .controls-hint kbd {
        background: var(--bg-secondary);
        padding: 3px 8px;
        border-radius: 4px;
        border: 1px solid var(--border);
        margin: 0 3px;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <a href="../../index.html" class="back-link">‚Üê ËøîÂõû</a>
      <h1>üß± ÊâìÁ†ñÂùó</h1>
      <p>ÁªèÂÖ∏ÊâìÁ†ñÂùóÊ∏∏Êàè</p>
      <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
    </div>

    <div class="container">
      <div class="stats">
        <div class="stat-item">
          <div class="stat-value" id="score">0</div>
          <div class="stat-label">ÂàÜÊï∞</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="level">1</div>
          <div class="stat-label">ÂÖ≥Âç°</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="lives">3</div>
          <div class="stat-label">ÁîüÂëΩ</div>
        </div>
      </div>

      <div class="game-wrapper">
        <canvas id="gameCanvas"></canvas>
        <div class="overlay" id="overlay">
          <h2 id="overlayTitle">ÊâìÁ†ñÂùó</h2>
          <p id="overlayText">ÁÇπÂáªÂºÄÂßãÊ∏∏Êàè</p>
          <button class="btn" onclick="startGame()">ÂºÄÂßãÊ∏∏Êàè</button>
        </div>
      </div>

      <div class="controls-hint">
        <kbd>‚Üê</kbd>
        <kbd>‚Üí</kbd>
        ÊàñÈº†Ê†á/Ëß¶Êë∏ÁßªÂä®Êå°Êùø
      </div>
    </div>

    <script>
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");
      const overlay = document.getElementById("overlay");

      // ËÆæÁΩÆÁîªÂ∏ÉÂ§ßÂ∞è
      function resizeCanvas() {
        const container = canvas.parentElement;
        const width = container.clientWidth - 20;
        canvas.width = width;
        canvas.height = width * 1.2;
      }
      resizeCanvas();
      window.addEventListener("resize", resizeCanvas);

      // Ê∏∏ÊàèÂèòÈáè
      let score = 0;
      let lives = 3;
      let level = 1;
      let gameRunning = false;

      // Êå°Êùø
      const paddle = {
        width: 80,
        height: 12,
        x: 0,
        speed: 8
      };
      paddle.x = (canvas.width - paddle.width) / 2;

      // ÁêÉ
      const ball = {
        radius: 8,
        x: canvas.width / 2,
        y: canvas.height - 50,
        dx: 4,
        dy: -4
      };

      // Á†ñÂùó
      const brickConfig = {
        rows: 5,
        cols: 8,
        width: 0,
        height: 20,
        padding: 5,
        offsetTop: 40,
        offsetLeft: 10
      };

      let bricks = [];

      const colors = ["#f72585", "#7209b7", "#3a0ca3", "#4361ee", "#4cc9f0", "#f59e0b"];

      function initBricks() {
        bricks = [];
        brickConfig.width =
          (canvas.width -
            brickConfig.offsetLeft * 2 -
            brickConfig.padding * (brickConfig.cols - 1)) /
          brickConfig.cols;

        for (let row = 0; row < brickConfig.rows; row++) {
          bricks[row] = [];
          for (let col = 0; col < brickConfig.cols; col++) {
            bricks[row][col] = {
              x: brickConfig.offsetLeft + col * (brickConfig.width + brickConfig.padding),
              y: brickConfig.offsetTop + row * (brickConfig.height + brickConfig.padding),
              status: 1,
              color: colors[row % colors.length]
            };
          }
        }
      }

      function resetBall() {
        ball.x = canvas.width / 2;
        ball.y = canvas.height - 50;
        ball.dx = (Math.random() > 0.5 ? 1 : -1) * (3 + level);
        ball.dy = -(3 + level);
        paddle.x = (canvas.width - paddle.width) / 2;
      }

      function drawBall() {
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
        ctx.fillStyle = "#fff";
        ctx.fill();
        ctx.closePath();
      }

      function drawPaddle() {
        ctx.beginPath();
        ctx.roundRect(paddle.x, canvas.height - paddle.height - 10, paddle.width, paddle.height, 6);
        ctx.fillStyle = "#00f5d4";
        ctx.fill();
        ctx.closePath();
      }

      function drawBricks() {
        for (let row = 0; row < brickConfig.rows; row++) {
          for (let col = 0; col < brickConfig.cols; col++) {
            const brick = bricks[row][col];
            if (brick.status === 1) {
              ctx.beginPath();
              ctx.roundRect(brick.x, brick.y, brickConfig.width, brickConfig.height, 4);
              ctx.fillStyle = brick.color;
              ctx.fill();
              ctx.closePath();
            }
          }
        }
      }

      function collisionDetection() {
        for (let row = 0; row < brickConfig.rows; row++) {
          for (let col = 0; col < brickConfig.cols; col++) {
            const brick = bricks[row][col];
            if (brick.status === 1) {
              if (
                ball.x > brick.x &&
                ball.x < brick.x + brickConfig.width &&
                ball.y > brick.y &&
                ball.y < brick.y + brickConfig.height
              ) {
                ball.dy = -ball.dy;
                brick.status = 0;
                score += 10 * level;
                updateStats();

                // Ê£ÄÊü•ÊòØÂê¶ËøáÂÖ≥
                if (bricks.flat().every((b) => b.status === 0)) {
                  level++;
                  initBricks();
                  resetBall();
                  updateStats();
                }
              }
            }
          }
        }
      }

      function draw() {
        if (!gameRunning) return;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawBricks();
        drawBall();
        drawPaddle();
        collisionDetection();

        // Â¢ôÂ£ÅÁ¢∞Êíû
        if (ball.x + ball.dx > canvas.width - ball.radius || ball.x + ball.dx < ball.radius) {
          ball.dx = -ball.dx;
        }
        if (ball.y + ball.dy < ball.radius) {
          ball.dy = -ball.dy;
        }

        // Êå°ÊùøÁ¢∞Êíû
        if (ball.y + ball.dy > canvas.height - paddle.height - 10 - ball.radius) {
          if (ball.x > paddle.x && ball.x < paddle.x + paddle.width) {
            // Ê†πÊçÆÂáª‰∏≠‰ΩçÁΩÆÊîπÂèòÂèçÂºπËßíÂ∫¶
            const hitPoint = (ball.x - paddle.x) / paddle.width;
            ball.dx = 8 * (hitPoint - 0.5);
            ball.dy = -Math.abs(ball.dy);
          } else if (ball.y + ball.dy > canvas.height - ball.radius) {
            lives--;
            updateStats();
            if (lives <= 0) {
              gameOver();
              return;
            }
            resetBall();
          }
        }

        ball.x += ball.dx;
        ball.y += ball.dy;

        requestAnimationFrame(draw);
      }

      function updateStats() {
        document.getElementById("score").textContent = score;
        document.getElementById("level").textContent = level;
        document.getElementById("lives").textContent = lives;
      }

      function startGame() {
        score = 0;
        lives = 3;
        level = 1;
        gameRunning = true;
        overlay.classList.add("hidden");
        initBricks();
        resetBall();
        updateStats();
        draw();
      }

      function gameOver() {
        gameRunning = false;
        document.getElementById("overlayTitle").textContent = "Ê∏∏ÊàèÁªìÊùü";
        document.getElementById("overlayText").textContent = `ÊúÄÁªàÂæóÂàÜ: ${score}`;
        overlay.classList.remove("hidden");
      }

      // ÈîÆÁõòÊéßÂà∂
      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowLeft" && paddle.x > 0) {
          paddle.x -= paddle.speed * 3;
        } else if (e.key === "ArrowRight" && paddle.x < canvas.width - paddle.width) {
          paddle.x += paddle.speed * 3;
        }
      });

      // Èº†Ê†áÊéßÂà∂
      canvas.addEventListener("mousemove", (e) => {
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const relativeX = (e.clientX - rect.left) * scaleX;

        if (relativeX > paddle.width / 2 && relativeX < canvas.width - paddle.width / 2) {
          paddle.x = relativeX - paddle.width / 2;
        }
      });

      // Ëß¶Êë∏ÊéßÂà∂
      canvas.addEventListener("touchmove", (e) => {
        e.preventDefault();
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const relativeX = (e.touches[0].clientX - rect.left) * scaleX;

        if (relativeX > paddle.width / 2 && relativeX < canvas.width - paddle.width / 2) {
          paddle.x = relativeX - paddle.width / 2;
        }
      });

      function toggleTheme() {
        const current = document.body.getAttribute("data-theme");
        const next = current === "light" ? "dark" : "light";
        document.body.setAttribute("data-theme", next);
        localStorage.setItem("theme", next);
      }

      document.body.setAttribute("data-theme", localStorage.getItem("theme") || "dark");
      initBricks();
    </script>
  </body>
</html>
