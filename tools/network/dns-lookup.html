<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNS è®°å½•æŸ¥è¯¢å·¥å…·</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        :root {
            --primary-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }
        
        body {
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        header h1 {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--pico-primary);
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        .input-section {
            margin-bottom: 2rem;
        }
        
        .input-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .input-group input {
            flex: 1;
            min-width: 200px;
        }
        
        .record-types {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .record-type-btn {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            border: 2px solid var(--pico-primary);
            background: transparent;
            color: var(--pico-primary);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .record-type-btn:hover,
        .record-type-btn.active {
            background: var(--pico-primary);
            color: white;
        }
        
        .results-section {
            margin-top: 2rem;
        }
        
        .result-card {
            background: var(--pico-card-background-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .result-card h4 {
            margin: 0 0 1rem 0;
            color: var(--pico-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .record-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .record-table th,
        .record-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--pico-muted-border-color);
        }
        
        .record-table th {
            font-weight: 600;
            background: var(--pico-secondary-background);
        }
        
        .ttl-badge {
            background: var(--success-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.85rem;
        }
        
        .priority-badge {
            background: var(--warning-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.85rem;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
        }
        
        .loading::after {
            content: '';
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid var(--pico-primary);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .info-box {
            background: var(--pico-secondary-background);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 2rem;
        }
        
        .info-box h4 {
            margin-top: 0;
        }
        
        .info-box ul {
            margin-bottom: 0;
        }
        
        .copy-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
            opacity: 0.6;
            transition: opacity 0.3s;
        }
        
        .copy-btn:hover {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
            }
            
            .record-table {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
    
    <main class="container">
        <header>
            <h1>ğŸ” DNS è®°å½•æŸ¥è¯¢å·¥å…·</h1>
            <p>æ¨¡æ‹ŸæŸ¥è¯¢åŸŸåçš„å„ç±» DNS è®°å½•ï¼Œäº†è§£ DNS è§£æåŸç†</p>
        </header>
        
        <section class="input-section">
            <div class="input-group">
                <input type="text" id="domainInput" placeholder="è¾“å…¥åŸŸåï¼Œå¦‚ï¼šexample.com" value="example.com">
                <button onclick="lookupDNS()">æŸ¥è¯¢ DNS</button>
            </div>
            
            <div class="record-types">
                <button class="record-type-btn active" data-type="A">A</button>
                <button class="record-type-btn active" data-type="AAAA">AAAA</button>
                <button class="record-type-btn active" data-type="CNAME">CNAME</button>
                <button class="record-type-btn active" data-type="MX">MX</button>
                <button class="record-type-btn active" data-type="NS">NS</button>
                <button class="record-type-btn active" data-type="TXT">TXT</button>
                <button class="record-type-btn active" data-type="SOA">SOA</button>
                <button class="record-type-btn" data-type="SRV">SRV</button>
                <button class="record-type-btn" data-type="CAA">CAA</button>
            </div>
            <small>ç‚¹å‡»é€‰æ‹©è¦æŸ¥è¯¢çš„è®°å½•ç±»å‹</small>
        </section>
        
        <section class="results-section" id="resultsSection">
            <!-- æŸ¥è¯¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
        </section>
        
        <div class="info-box">
            <h4>ğŸ“š DNS è®°å½•ç±»å‹è¯´æ˜</h4>
            <ul>
                <li><strong>A è®°å½•</strong> - å°†åŸŸåæ˜ å°„åˆ° IPv4 åœ°å€</li>
                <li><strong>AAAA è®°å½•</strong> - å°†åŸŸåæ˜ å°„åˆ° IPv6 åœ°å€</li>
                <li><strong>CNAME è®°å½•</strong> - åˆ«åè®°å½•ï¼Œå°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸå</li>
                <li><strong>MX è®°å½•</strong> - é‚®ä»¶äº¤æ¢è®°å½•ï¼ŒæŒ‡å®šé‚®ä»¶æœåŠ¡å™¨</li>
                <li><strong>NS è®°å½•</strong> - åŸŸåæœåŠ¡å™¨è®°å½•ï¼ŒæŒ‡å®š DNS æœåŠ¡å™¨</li>
                <li><strong>TXT è®°å½•</strong> - æ–‡æœ¬è®°å½•ï¼Œå¸¸ç”¨äºéªŒè¯å’Œ SPF/DKIM</li>
                <li><strong>SOA è®°å½•</strong> - æˆæƒèµ·å§‹è®°å½•ï¼ŒåŒ…å«åŸŸåç®¡ç†ä¿¡æ¯</li>
                <li><strong>SRV è®°å½•</strong> - æœåŠ¡è®°å½•ï¼ŒæŒ‡å®šæœåŠ¡çš„ä½ç½®</li>
                <li><strong>CAA è®°å½•</strong> - è¯ä¹¦é¢å‘æœºæ„æˆæƒè®°å½•</li>
            </ul>
        </div>
    </main>
    
    <script>
        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            document.querySelector('.theme-toggle').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
            localStorage.setItem('theme', newTheme);
        }
        
        // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        document.querySelector('.theme-toggle').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        
        // è®°å½•ç±»å‹æŒ‰é’®åˆ‡æ¢
        document.querySelectorAll('.record-type-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('active');
            });
        });
        
        // æ¨¡æ‹Ÿ DNS æ•°æ®ç”Ÿæˆ
        function generateMockDNSData(domain) {
            const hash = domain.split('').reduce((a, b) => ((a << 5) - a + b.charCodeAt(0)) | 0, 0);
            const ip1 = Math.abs(hash % 256);
            const ip2 = Math.abs((hash >> 8) % 256);
            const ip3 = Math.abs((hash >> 16) % 256);
            const ip4 = Math.abs((hash >> 24) % 256);
            
            return {
                A: [
                    { name: domain, ttl: 300, value: ip1 + '.' + ip2 + '.' + ip3 + '.' + ip4 },
                    { name: domain, ttl: 300, value: ip1 + '.' + ip2 + '.' + ip3 + '.' + ((ip4 + 1) % 256) }
                ],
                AAAA: [
                    { name: domain, ttl: 300, value: '2606:4700:' + ip1.toString(16) + '::' + ip2.toString(16) + ':' + ip3.toString(16) }
                ],
                CNAME: domain.startsWith('www.') ? [
                    { name: domain, ttl: 3600, value: domain.replace('www.', '') }
                ] : [],
                MX: [
                    { name: domain, ttl: 3600, priority: 10, value: 'mail1.' + domain },
                    { name: domain, ttl: 3600, priority: 20, value: 'mail2.' + domain },
                    { name: domain, ttl: 3600, priority: 30, value: 'mail-backup.' + domain }
                ],
                NS: [
                    { name: domain, ttl: 86400, value: 'ns1.' + domain },
                    { name: domain, ttl: 86400, value: 'ns2.' + domain }
                ],
                TXT: [
                    { name: domain, ttl: 3600, value: 'v=spf1 include:_spf.' + domain + ' ~all' },
                    { name: domain, ttl: 3600, value: 'google-site-verification=' + btoa(domain).substring(0, 20) }
                ],
                SOA: [
                    { 
                        name: domain, 
                        ttl: 3600, 
                        mname: 'ns1.' + domain,
                        rname: 'admin.' + domain,
                        serial: 2024010101,
                        refresh: 7200,
                        retry: 3600,
                        expire: 1209600,
                        minimum: 3600
                    }
                ],
                SRV: [
                    { name: '_sip._tcp.' + domain, ttl: 3600, priority: 10, weight: 5, port: 5060, value: 'sip.' + domain }
                ],
                CAA: [
                    { name: domain, ttl: 3600, flags: 0, tag: 'issue', value: 'letsencrypt.org' },
                    { name: domain, ttl: 3600, flags: 0, tag: 'issuewild', value: 'letsencrypt.org' }
                ]
            };
        }
        
        // DNS æŸ¥è¯¢
        async function lookupDNS() {
            const domain = document.getElementById('domainInput').value.trim();
            if (!domain) {
                alert('è¯·è¾“å…¥åŸŸå');
                return;
            }
            
            const selectedTypes = Array.from(document.querySelectorAll('.record-type-btn.active'))
                .map(btn => btn.dataset.type);
            
            if (selectedTypes.length === 0) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ç§è®°å½•ç±»å‹');
                return;
            }
            
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.textContent = '';
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'loading';
            loadingDiv.textContent = 'æŸ¥è¯¢ä¸­...';
            resultsSection.appendChild(loadingDiv);
            
            // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
            await new Promise(resolve => setTimeout(resolve, 800));
            
            const dnsData = generateMockDNSData(domain);
            resultsSection.textContent = '';
            
            const titleEl = document.createElement('h3');
            titleEl.textContent = 'ğŸ“‹ ' + domain + ' çš„ DNS è®°å½•';
            resultsSection.appendChild(titleEl);
            
            selectedTypes.forEach(type => {
                const records = dnsData[type];
                const card = createRecordCard(type, records, domain);
                resultsSection.appendChild(card);
            });
        }
        
        function createRecordCard(type, records, domain) {
            const card = document.createElement('div');
            card.className = 'result-card';
            
            const title = document.createElement('h4');
            title.textContent = 'ğŸ“„ ' + type + ' è®°å½•' + (records && records.length > 0 ? ' (' + records.length + ' æ¡)' : '');
            card.appendChild(title);
            
            if (!records || records.length === 0) {
                const noData = document.createElement('p');
                noData.style.color = 'var(--pico-muted-color)';
                noData.textContent = 'æœªæ‰¾åˆ° ' + type + ' è®°å½•';
                card.appendChild(noData);
                return card;
            }
            
            const table = document.createElement('table');
            table.className = 'record-table';
            
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            
            let headers = [];
            switch(type) {
                case 'A':
                case 'AAAA':
                    headers = ['åç§°', 'TTL', 'IP åœ°å€', ''];
                    break;
                case 'CNAME':
                case 'NS':
                    headers = ['åç§°', 'TTL', 'ç›®æ ‡', ''];
                    break;
                case 'MX':
                    headers = ['åç§°', 'TTL', 'ä¼˜å…ˆçº§', 'é‚®ä»¶æœåŠ¡å™¨', ''];
                    break;
                case 'TXT':
                    headers = ['åç§°', 'TTL', 'æ–‡æœ¬å†…å®¹', ''];
                    break;
                case 'SRV':
                    headers = ['åç§°', 'TTL', 'ä¼˜å…ˆçº§', 'æƒé‡', 'ç«¯å£', 'ç›®æ ‡'];
                    break;
                case 'CAA':
                    headers = ['åç§°', 'TTL', 'æ ‡å¿—', 'æ ‡ç­¾', 'å€¼'];
                    break;
                case 'SOA':
                    break;
            }
            
            if (type !== 'SOA') {
                headers.forEach(h => {
                    const th = document.createElement('th');
                    th.textContent = h;
                    headerRow.appendChild(th);
                });
                thead.appendChild(headerRow);
                table.appendChild(thead);
            }
            
            const tbody = document.createElement('tbody');
            
            if (type === 'SOA') {
                const soa = records[0];
                const fields = [
                    ['ä¸»åç§°æœåŠ¡å™¨', soa.mname],
                    ['ç®¡ç†å‘˜é‚®ç®±', soa.rname],
                    ['åºåˆ—å·', soa.serial],
                    ['åˆ·æ–°é—´éš”', soa.refresh + 's'],
                    ['é‡è¯•é—´éš”', soa.retry + 's'],
                    ['è¿‡æœŸæ—¶é—´', soa.expire + 's'],
                    ['æœ€å° TTL', soa.minimum + 's']
                ];
                fields.forEach(([label, value]) => {
                    const tr = document.createElement('tr');
                    const th = document.createElement('th');
                    th.textContent = label;
                    const td = document.createElement('td');
                    td.textContent = value;
                    tr.appendChild(th);
                    tr.appendChild(td);
                    tbody.appendChild(tr);
                });
            } else {
                records.forEach(r => {
                    const tr = document.createElement('tr');
                    
                    switch(type) {
                        case 'A':
                        case 'AAAA':
                            addCell(tr, r.name);
                            addTtlCell(tr, r.ttl);
                            addCell(tr, r.value);
                            addCopyCell(tr, r.value);
                            break;
                        case 'CNAME':
                        case 'NS':
                            addCell(tr, r.name);
                            addTtlCell(tr, r.ttl);
                            addCell(tr, r.value);
                            addCopyCell(tr, r.value);
                            break;
                        case 'MX':
                            addCell(tr, r.name);
                            addTtlCell(tr, r.ttl);
                            addPriorityCell(tr, r.priority);
                            addCell(tr, r.value);
                            addCopyCell(tr, r.value);
                            break;
                        case 'TXT':
                            addCell(tr, r.name);
                            addTtlCell(tr, r.ttl);
                            const txtTd = document.createElement('td');
                            txtTd.style.wordBreak = 'break-all';
                            txtTd.style.maxWidth = '400px';
                            txtTd.textContent = r.value;
                            tr.appendChild(txtTd);
                            addCopyCell(tr, r.value);
                            break;
                        case 'SRV':
                            addCell(tr, r.name);
                            addTtlCell(tr, r.ttl);
                            addCell(tr, r.priority);
                            addCell(tr, r.weight);
                            addCell(tr, r.port);
                            addCell(tr, r.value);
                            break;
                        case 'CAA':
                            addCell(tr, r.name);
                            addTtlCell(tr, r.ttl);
                            addCell(tr, r.flags);
                            addCell(tr, r.tag);
                            addCell(tr, r.value);
                            break;
                    }
                    tbody.appendChild(tr);
                });
            }
            
            table.appendChild(tbody);
            card.appendChild(table);
            return card;
        }
        
        function addCell(tr, text) {
            const td = document.createElement('td');
            td.textContent = text;
            tr.appendChild(td);
        }
        
        function addTtlCell(tr, ttl) {
            const td = document.createElement('td');
            const span = document.createElement('span');
            span.className = 'ttl-badge';
            span.textContent = ttl + 's';
            td.appendChild(span);
            tr.appendChild(td);
        }
        
        function addPriorityCell(tr, priority) {
            const td = document.createElement('td');
            const span = document.createElement('span');
            span.className = 'priority-badge';
            span.textContent = priority;
            td.appendChild(span);
            tr.appendChild(td);
        }
        
        function addCopyCell(tr, text) {
            const td = document.createElement('td');
            const btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'ğŸ“‹';
            btn.onclick = function() { copyToClipboard(text); };
            td.appendChild(btn);
            tr.appendChild(td);
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const toast = document.createElement('div');
                toast.textContent = 'å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
                toast.style.cssText = 'position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#10b981;color:white;padding:0.75rem 1.5rem;border-radius:8px;z-index:1000;';
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 2000);
            });
        }
        
        // å›è½¦é”®æŸ¥è¯¢
        document.getElementById('domainInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') lookupDNS();
        });
    </script>
</body>
</html>