<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å†œå†é˜³å†è½¬æ¢ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="å†œå†é˜³å†è½¬æ¢ - WebUtils" />
    <meta name="keywords" content="lunar-calendar,chinese,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/chinese/lunar-calendar.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="å†œå†é˜³å†è½¬æ¢ - WebUtils" />
    <meta property="og:description" content="å†œå†é˜³å†è½¬æ¢ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/chinese/lunar-calendar.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="å†œå†é˜³å†è½¬æ¢ - WebUtils" />
    <meta name="twitter:description" content="å†œå†é˜³å†è½¬æ¢ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;

        /* å­—ä½“å˜é‡ */
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
      }

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      :root {
        --bg: #0a0a0f;
        --card: #12121a;
        --border: #2a2a3a;
        --text: #fff;
        --text2: #888;
        --accent: #f59e0b;
        --accent2: #ef4444;
      }
      @media (prefers-color-scheme: light) {
        :root {
          --bg: #f5f5f5;
          --card: #fff;
          --border: #e0e0e0;
          --text: #333;
          --text2: #666;
        }
      }
      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        font-size: 16px;
        line-height: 1.6;
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
      }
      h1 {
        text-align: center;
        margin-bottom: 8px;
        font-size: 1.8rem;
      }
      .subtitle {
        text-align: center;
        color: var(--text2);
        margin-bottom: 24px;
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 20px;
      }
      .card-title {
        font-size: 1rem;
        color: var(--text2);
        margin-bottom: 16px;
        font-weight: 500;
      }
      .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
      }
      .tab {
        flex: 1;
        padding: 12px;
        text-align: center;
        border: 1px solid var(--border);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        background: var(--bg);
      }
      .tab.active {
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        border-color: transparent;
        color: white;
      }
      .tab:hover:not(.active) {
        border-color: var(--accent);
      }
      .form-row {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin-bottom: 16px;
      }
      @media (max-width: 500px) {
        .form-row {
          grid-template-columns: 1fr;
        }
      }
      .form-group {
        margin-bottom: 0;
      }
      .form-group label {
        display: block;
        margin-bottom: 6px;
        font-size: 0.9rem;
        color: var(--text2);
      }
      select,
      input {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--border);
        border-radius: 8px;
        background: var(--bg);
        color: var(--text);
        font-size: 1rem;
      }
      select:focus,
      input:focus {
        outline: none;
        border-color: var(--accent);
      }
      .checkbox-group {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 0;
      }
      .checkbox-group input {
        width: auto;
      }
      .btn {
        width: 100%;
        padding: 14px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        color: white;
        transition: all 0.2s;
      }
      .btn:hover {
        opacity: 0.9;
      }
      .result-hero {
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        padding: 32px;
        border-radius: 12px;
        text-align: center;
        color: white;
        margin-bottom: 20px;
      }
      .result-hero .label {
        opacity: 0.9;
        font-size: 0.9rem;
        margin-bottom: 8px;
      }
      .result-hero .main {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 8px;
      }
      .result-hero .sub {
        font-size: 1.1rem;
        opacity: 0.9;
      }
      .info-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      @media (max-width: 500px) {
        .info-grid {
          grid-template-columns: 1fr;
        }
      }
      .info-item {
        background: var(--bg);
        border-radius: 8px;
        padding: 16px;
      }
      .info-item .label {
        font-size: 0.85rem;
        color: var(--text2);
        margin-bottom: 6px;
      }
      .info-item .value {
        font-size: 1.1rem;
        font-weight: 500;
      }
      .info-item .value.highlight {
        color: var(--accent);
      }
      .hidden {
        display: none;
      }
      .today-btn {
        padding: 10px 16px;
        background: var(--bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        cursor: pointer;
        color: var(--text);
        font-size: 0.9rem;
        margin-bottom: 16px;
      }
      .today-btn:hover {
        border-color: var(--accent);
      }
      .back-link {
        display: inline-block;
        margin-bottom: 16px;
        color: var(--accent);
        text-decoration: none;
        font-size: 0.9rem;
      }
      .back-link:hover {
        text-decoration: underline;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
      .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        margin: -1px;
        padding: 0;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      å†œå†é˜³å†è½¬æ¢
    </nav>
    <div class="container">
      <a href="../../index.html" class="back-link">â† è¿”å›</a>
      <h1>å†œå†é˜³å†è½¬æ¢</h1>
      <p class="subtitle">å…¬å†å†œå†ç›¸äº’è½¬æ¢ï¼ŒæŸ¥çœ‹ä¼ ç»Ÿå†æ³•ä¿¡æ¯</p>

      <div class="card">
        <div class="tabs">
          <div class="tab active" data-mode="solar" onclick="switchMode('solar')">å…¬å†è½¬å†œå†</div>
          <div class="tab" data-mode="lunar" onclick="switchMode('lunar')">å†œå†è½¬å…¬å†</div>
        </div>

        <button class="today-btn" onclick="setToday()" aria-label="ä»Šå¤©">ä»Šå¤©</button>

        <div id="solarForm">
          <div class="form-row">
            <div class="form-group">
              <label>å…¬å†å¹´</label>
              <select id="solarYear"></select>
            </div>
            <div class="form-group">
              <label>å…¬å†æœˆ</label>
              <select id="solarMonth"></select>
            </div>
            <div class="form-group">
              <label>å…¬å†æ—¥</label>
              <select id="solarDay"></select>
            </div>
          </div>
        </div>

        <div id="lunarForm" class="hidden">
          <div class="form-row">
            <div class="form-group">
              <label>å†œå†å¹´</label>
              <select id="lunarYear"></select>
            </div>
            <div class="form-group">
              <label>å†œå†æœˆ</label>
              <select id="lunarMonth"></select>
            </div>
            <div class="form-group">
              <label>å†œå†æ—¥</label>
              <select id="lunarDay"></select>
            </div>
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="isLeapMonth" />
            <label for="isLeapMonth">é—°æœˆ</label>
          </div>
        </div>

        <button class="btn" onclick="convert()" aria-label="è½¬æ¢">è½¬æ¢</button>
      </div>

      <div class="card hidden" id="resultCard">
        <div class="result-hero">
          <div class="label" id="resultLabel">å†œå†æ—¥æœŸ</div>
          <div class="main" id="resultMain">-</div>
          <div class="sub" id="resultSub">-</div>
        </div>

        <div class="info-grid">
          <div class="info-item">
            <div class="label">å¤©å¹²åœ°æ”¯</div>
            <div class="value highlight" id="ganzhi">-</div>
          </div>
          <div class="info-item">
            <div class="label">ç”Ÿè‚–</div>
            <div class="value" id="zodiac">-</div>
          </div>
          <div class="info-item">
            <div class="label">èŠ‚æ°”</div>
            <div class="value" id="solarTerm">-</div>
          </div>
          <div class="info-item">
            <div class="label">æ˜ŸæœŸ</div>
            <div class="value" id="weekday">-</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // å†œå†æ•°æ® 1900-2100
      const lunarInfo = [
        0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2,
        0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977,
        0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970,
        0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950,
        0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557,
        0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5d0, 0x14573, 0x052d0, 0x0a9a8, 0x0e950, 0x06aa0,
        0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0,
        0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b5a0, 0x195a6,
        0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570,
        0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x055c0, 0x0ab60, 0x096d5, 0x092e0,
        0x0c960, 0x0d954, 0x0d4a0, 0x0da50, 0x07552, 0x056a0, 0x0abb7, 0x025d0, 0x092d0, 0x0cab5,
        0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930,
        0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530,
        0x05aa0, 0x076a3, 0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45,
        0x0b5a0, 0x056d0, 0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0
      ];

      const tianGan = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"];
      const diZhi = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"];
      const zodiacs = ["é¼ ", "ç‰›", "è™", "å…”", "é¾™", "è›‡", "é©¬", "ç¾Š", "çŒ´", "é¸¡", "ç‹—", "çŒª"];
      const lunarMonths = ["æ­£", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹", "å", "å†¬", "è…Š"];
      const lunarDays = [
        "åˆä¸€",
        "åˆäºŒ",
        "åˆä¸‰",
        "åˆå››",
        "åˆäº”",
        "åˆå…­",
        "åˆä¸ƒ",
        "åˆå…«",
        "åˆä¹",
        "åˆå",
        "åä¸€",
        "åäºŒ",
        "åä¸‰",
        "åå››",
        "åäº”",
        "åå…­",
        "åä¸ƒ",
        "åå…«",
        "åä¹",
        "äºŒå",
        "å»¿ä¸€",
        "å»¿äºŒ",
        "å»¿ä¸‰",
        "å»¿å››",
        "å»¿äº”",
        "å»¿å…­",
        "å»¿ä¸ƒ",
        "å»¿å…«",
        "å»¿ä¹",
        "ä¸‰å"
      ];
      const weekdays = ["æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸå››", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå…­"];
      const solarTerms = [
        "å°å¯’",
        "å¤§å¯’",
        "ç«‹æ˜¥",
        "é›¨æ°´",
        "æƒŠè›°",
        "æ˜¥åˆ†",
        "æ¸…æ˜",
        "è°·é›¨",
        "ç«‹å¤",
        "å°æ»¡",
        "èŠ’ç§",
        "å¤è‡³",
        "å°æš‘",
        "å¤§æš‘",
        "ç«‹ç§‹",
        "å¤„æš‘",
        "ç™½éœ²",
        "ç§‹åˆ†",
        "å¯’éœ²",
        "éœœé™",
        "ç«‹å†¬",
        "å°é›ª",
        "å¤§é›ª",
        "å†¬è‡³"
      ];

      let mode = "solar";

      // è·å–å†œå†å¹´çš„æ€»å¤©æ•°
      function getLunarYearDays(year) {
        let sum = 348;
        for (let i = 0x8000; i > 0x8; i >>= 1) {
          sum += lunarInfo[year - 1900] & i ? 1 : 0;
        }
        return sum + getLeapMonthDays(year);
      }

      // è·å–é—°æœˆå¤©æ•°
      function getLeapMonthDays(year) {
        if (getLeapMonth(year)) {
          return lunarInfo[year - 1900] & 0x10000 ? 30 : 29;
        }
        return 0;
      }

      // è·å–é—°æœˆæœˆä»½
      function getLeapMonth(year) {
        return lunarInfo[year - 1900] & 0xf;
      }

      // è·å–å†œå†æœˆå¤©æ•°
      function getLunarMonthDays(year, month) {
        return lunarInfo[year - 1900] & (0x10000 >> month) ? 30 : 29;
      }

      // å…¬å†è½¬å†œå†
      function solarToLunar(year, month, day) {
        const baseDate = new Date(1900, 0, 31);
        const objDate = new Date(year, month - 1, day);
        let offset = Math.floor((objDate - baseDate) / 86400000);

        let lunarYear = 1900;
        let lunarMonth = 1;
        let lunarDay = 1;
        let isLeap = false;

        // è®¡ç®—å¹´
        let yearDays;
        for (lunarYear = 1900; lunarYear < 2100 && offset > 0; lunarYear++) {
          yearDays = getLunarYearDays(lunarYear);
          offset -= yearDays;
        }
        if (offset < 0) {
          offset += yearDays;
          lunarYear--;
        }

        // è®¡ç®—æœˆ
        const leapMonth = getLeapMonth(lunarYear);
        let monthDays;
        for (lunarMonth = 1; lunarMonth < 13 && offset > 0; lunarMonth++) {
          if (leapMonth > 0 && lunarMonth === leapMonth + 1 && !isLeap) {
            lunarMonth--;
            isLeap = true;
            monthDays = getLeapMonthDays(lunarYear);
          } else {
            monthDays = getLunarMonthDays(lunarYear, lunarMonth);
          }

          if (isLeap && lunarMonth === leapMonth + 1) {
            isLeap = false;
          }
          offset -= monthDays;
        }

        if (offset < 0) {
          offset += monthDays;
          lunarMonth--;
        }

        if (offset === 0 && leapMonth > 0 && lunarMonth === leapMonth + 1) {
          if (isLeap) {
            isLeap = false;
          } else {
            isLeap = true;
            lunarMonth--;
          }
        }

        lunarDay = offset + 1;

        return { year: lunarYear, month: lunarMonth, day: lunarDay, isLeap };
      }

      // å†œå†è½¬å…¬å†
      function lunarToSolar(year, month, day, isLeap) {
        const leapMonth = getLeapMonth(year);

        let offset = 0;
        for (let i = 1900; i < year; i++) {
          offset += getLunarYearDays(i);
        }

        for (let i = 1; i < month; i++) {
          offset += getLunarMonthDays(year, i);
          if (i === leapMonth) {
            offset += getLeapMonthDays(year);
          }
        }

        if (isLeap && month === leapMonth) {
          offset += getLunarMonthDays(year, month);
        }

        offset += day - 1;

        const baseDate = new Date(1900, 0, 31);
        const result = new Date(baseDate.getTime() + offset * 86400000);

        return {
          year: result.getFullYear(),
          month: result.getMonth() + 1,
          day: result.getDate()
        };
      }

      // è·å–å¹²æ”¯å¹´
      function getGanZhiYear(year) {
        const gan = tianGan[(year - 4) % 10];
        const zhi = diZhi[(year - 4) % 12];
        return gan + zhi + "å¹´";
      }

      // è·å–ç”Ÿè‚–
      function getZodiac(year) {
        return zodiacs[(year - 4) % 12];
      }

      // åˆå§‹åŒ–ä¸‹æ‹‰æ¡†
      function initSelects() {
        const solarYear = document.getElementById("solarYear");
        const solarMonth = document.getElementById("solarMonth");
        const solarDay = document.getElementById("solarDay");
        const lunarYear = document.getElementById("lunarYear");
        const lunarMonth = document.getElementById("lunarMonth");
        const lunarDay = document.getElementById("lunarDay");

        // å¹´ä»½
        for (let y = 1900; y <= 2099; y++) {
          const opt1 = document.createElement("option");
          opt1.value = y;
          opt1.textContent = y + "å¹´";
          solarYear.appendChild(opt1);

          const opt2 = document.createElement("option");
          opt2.value = y;
          opt2.textContent = y + "å¹´";
          lunarYear.appendChild(opt2);
        }

        // æœˆä»½
        for (let m = 1; m <= 12; m++) {
          const opt1 = document.createElement("option");
          opt1.value = m;
          opt1.textContent = m + "æœˆ";
          solarMonth.appendChild(opt1);

          const opt2 = document.createElement("option");
          opt2.value = m;
          opt2.textContent = lunarMonths[m - 1] + "æœˆ";
          lunarMonth.appendChild(opt2);
        }

        // æ—¥æœŸ
        for (let d = 1; d <= 31; d++) {
          const opt1 = document.createElement("option");
          opt1.value = d;
          opt1.textContent = d + "æ—¥";
          solarDay.appendChild(opt1);
        }

        for (let d = 1; d <= 30; d++) {
          const opt2 = document.createElement("option");
          opt2.value = d;
          opt2.textContent = lunarDays[d - 1];
          lunarDay.appendChild(opt2);
        }

        // è®¾ç½®ä»Šå¤©
        setToday();
      }

      function setToday() {
        const today = new Date();
        document.getElementById("solarYear").value = today.getFullYear();
        document.getElementById("solarMonth").value = today.getMonth() + 1;
        document.getElementById("solarDay").value = today.getDate();

        const lunar = solarToLunar(today.getFullYear(), today.getMonth() + 1, today.getDate());
        document.getElementById("lunarYear").value = lunar.year;
        document.getElementById("lunarMonth").value = lunar.month;
        document.getElementById("lunarDay").value = lunar.day;
        document.getElementById("isLeapMonth").checked = lunar.isLeap;
      }

      function switchMode(newMode) {
        mode = newMode;
        document.querySelectorAll(".tab").forEach((tab) => {
          tab.classList.toggle("active", tab.dataset.mode === mode);
        });
        document.getElementById("solarForm").classList.toggle("hidden", mode !== "solar");
        document.getElementById("lunarForm").classList.toggle("hidden", mode !== "lunar");
      }

      function convert() {
        const resultCard = document.getElementById("resultCard");
        resultCard.classList.remove("hidden");

        let solarDate, lunarDate;

        if (mode === "solar") {
          const year = parseInt(document.getElementById("solarYear").value);
          const month = parseInt(document.getElementById("solarMonth").value);
          const day = parseInt(document.getElementById("solarDay").value);

          solarDate = { year, month, day };
          lunarDate = solarToLunar(year, month, day);

          document.getElementById("resultLabel").textContent = "å†œå†æ—¥æœŸ";
          document.getElementById("resultMain").textContent =
            (lunarDate.isLeap ? "é—°" : "") +
            lunarMonths[lunarDate.month - 1] +
            "æœˆ" +
            lunarDays[lunarDate.day - 1];
          document.getElementById("resultSub").textContent =
            lunarDate.year + "å¹´ " + getGanZhiYear(lunarDate.year);
        } else {
          const year = parseInt(document.getElementById("lunarYear").value);
          const month = parseInt(document.getElementById("lunarMonth").value);
          const day = parseInt(document.getElementById("lunarDay").value);
          const isLeap = document.getElementById("isLeapMonth").checked;

          lunarDate = { year, month, day, isLeap };
          solarDate = lunarToSolar(year, month, day, isLeap);

          document.getElementById("resultLabel").textContent = "å…¬å†æ—¥æœŸ";
          document.getElementById("resultMain").textContent =
            solarDate.year + "å¹´" + solarDate.month + "æœˆ" + solarDate.day + "æ—¥";
          document.getElementById("resultSub").textContent =
            "å†œå† " +
            (lunarDate.isLeap ? "é—°" : "") +
            lunarMonths[lunarDate.month - 1] +
            "æœˆ" +
            lunarDays[lunarDate.day - 1];
        }

        // å¹²æ”¯
        document.getElementById("ganzhi").textContent = getGanZhiYear(lunarDate.year);

        // ç”Ÿè‚–
        document.getElementById("zodiac").textContent = getZodiac(lunarDate.year);

        // æ˜ŸæœŸ
        const dateObj = new Date(solarDate.year, solarDate.month - 1, solarDate.day);
        document.getElementById("weekday").textContent = weekdays[dateObj.getDay()];

        // èŠ‚æ°”ï¼ˆç®€åŒ–å¤„ç†ï¼‰
        document.getElementById("solarTerm").textContent = "-";
      }

      initSelects();

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        document.getElementById("theme-icon").textContent = newTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", newTheme);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem("theme") || "dark";
      if (savedTheme === "light") {
        document.documentElement.setAttribute("data-theme", "light");
        document.getElementById("theme-icon").textContent = "â˜€ï¸";
      }
    </script>
  </body>
</html>
