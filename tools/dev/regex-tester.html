<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨ - åœ¨çº¿ Regex è°ƒè¯•å·¥å…·</title>
    <meta name="description" content="åœ¨çº¿æµ‹è¯•å’Œè°ƒè¯•æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®æ—¶é«˜äº®åŒ¹é…ç»“æœï¼Œæ”¯æŒå¸¸ç”¨æ­£åˆ™æ¨¡æ¿å’Œè¯¦ç»†åŒ¹é…ä¿¡æ¯">
    <meta name="keywords" content="æ­£åˆ™è¡¨è¾¾å¼,regex,æ­£åˆ™æµ‹è¯•,regex tester,æ­£åˆ™è°ƒè¯•,pattern matching">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f0f23;
            --text-primary: #eee;
            --text-secondary: #aaa;
            --border-color: #333;
            --accent-color: #22c55e;
            --accent-hover: #16a34a;
            --match-bg: rgba(34, 197, 94, 0.3);
            --group-colors: #f59e0b, #8b5cf6, #06b6d4, #ec4899, #f97316;
        }
        [data-theme="light"] {
            --bg-primary: #fff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --match-bg: rgba(34, 197, 94, 0.2);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        h1 { font-size: 1.8rem; }
        .header-actions { display: flex; gap: 10px; align-items: center; }
        .theme-toggle, .btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .theme-toggle:hover, .btn:hover { border-color: var(--accent-color); }
        .btn-primary {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .btn-primary:hover { background: var(--accent-hover); }
        .back-link {
            color: var(--accent-color);
            text-decoration: none;
            font-size: 14px;
        }
        .back-link:hover { text-decoration: underline; }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }
        @media (max-width: 1000px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .card-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .regex-input-section {
            display: flex;
            gap: 10px;
            align-items: stretch;
        }
        .regex-wrapper {
            flex: 1;
            display: flex;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }
        .regex-wrapper:focus-within { border-color: var(--accent-color); }
        .regex-slash {
            padding: 12px 8px;
            color: var(--accent-color);
            font-family: monospace;
            font-size: 16px;
        }
        .regex-wrapper input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 12px 0;
            color: var(--text-primary);
            font-family: Monaco, Menlo, monospace;
            font-size: 14px;
        }
        .regex-wrapper input:focus { outline: none; }

        .flags-group {
            display: flex;
            gap: 5px;
        }
        .flag-btn {
            padding: 8px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-family: monospace;
            font-size: 14px;
            color: var(--text-secondary);
            transition: all 0.2s;
        }
        .flag-btn:hover { border-color: var(--accent-color); }
        .flag-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        .test-textarea {
            width: 100%;
            min-height: 200px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            color: var(--text-primary);
            font-family: Monaco, Menlo, monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
        }
        .test-textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .result-display {
            min-height: 200px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            font-family: Monaco, Menlo, monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .result-display .match {
            background: var(--match-bg);
            border-radius: 3px;
            padding: 1px 2px;
        }
        .result-display .group-1 { background: rgba(245, 158, 11, 0.3); }
        .result-display .group-2 { background: rgba(139, 92, 246, 0.3); }
        .result-display .group-3 { background: rgba(6, 182, 212, 0.3); }
        .result-display .group-4 { background: rgba(236, 72, 153, 0.3); }

        .stats-bar {
            display: flex;
            gap: 20px;
            padding: 15px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin-top: 15px;
        }
        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        .stat-value {
            font-weight: 600;
            color: var(--accent-color);
        }

        .error-message {
            padding: 12px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 8px;
            color: #ef4444;
            font-size: 13px;
            margin-top: 15px;
        }

        .sidebar { display: flex; flex-direction: column; gap: 20px; }

        .matches-list {
            max-height: 300px;
            overflow-y: auto;
        }
        .match-item {
            padding: 12px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 13px;
        }
        .match-item:last-child { margin-bottom: 0; }
        .match-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        .match-content {
            font-family: monospace;
            background: var(--match-bg);
            padding: 6px 10px;
            border-radius: 4px;
            word-break: break-all;
        }
        .match-groups {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--border-color);
        }
        .group-item {
            display: flex;
            gap: 10px;
            font-size: 12px;
            margin-top: 4px;
        }
        .group-label {
            color: var(--text-secondary);
            min-width: 60px;
        }

        .templates-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .template-item {
            padding: 10px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        .template-item:hover { border-color: var(--accent-color); }
        .template-name { font-weight: 500; margin-bottom: 4px; }
        .template-pattern {
            font-family: monospace;
            font-size: 11px;
            color: var(--text-secondary);
            word-break: break-all;
        }

        .cheatsheet {
            font-size: 12px;
        }
        .cheatsheet-section {
            margin-bottom: 15px;
        }
        .cheatsheet-section h4 {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .cheatsheet-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
        }
        .cheatsheet-item {
            display: flex;
            gap: 8px;
            padding: 6px 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
        }
        .cheatsheet-item code {
            font-family: monospace;
            color: var(--accent-color);
            min-width: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ” æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨</h1>
            <div class="header-actions">
                <a href="../../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
                <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“ ä¸»é¢˜</button>
            </div>
        </header>

        <div class="main-grid">
            <div class="main-section">
                <div class="card">
                    <div class="card-title">ğŸ“ æ­£åˆ™è¡¨è¾¾å¼</div>
                    <div class="regex-input-section">
                        <div class="regex-wrapper">
                            <span class="regex-slash">/</span>
                            <input type="text" id="regexInput" placeholder="è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼..." value="(\w+)@(\w+)\.(\w+)">
                            <span class="regex-slash">/</span>
                        </div>
                        <div class="flags-group">
                            <button class="flag-btn active" data-flag="g" title="å…¨å±€åŒ¹é…">g</button>
                            <button class="flag-btn" data-flag="i" title="å¿½ç•¥å¤§å°å†™">i</button>
                            <button class="flag-btn active" data-flag="m" title="å¤šè¡Œæ¨¡å¼">m</button>
                            <button class="flag-btn" data-flag="s" title="å•è¡Œæ¨¡å¼">s</button>
                        </div>
                    </div>
                    <div id="errorMessage" class="error-message" style="display: none;"></div>
                </div>

                <div class="card">
                    <div class="card-title">ğŸ“„ æµ‹è¯•æ–‡æœ¬</div>
                    <textarea class="test-textarea" id="testText" placeholder="è¾“å…¥è¦æµ‹è¯•çš„æ–‡æœ¬...">è”ç³»æˆ‘ä»¬ï¼š
support@example.com
sales@company.org
info@test.net

æ— æ•ˆé‚®ç®±ï¼š
@invalid.com
test@
notanemail</textarea>
                </div>

                <div class="card">
                    <div class="card-title">âœ¨ åŒ¹é…ç»“æœ</div>
                    <div class="result-display" id="resultDisplay"></div>
                    <div class="stats-bar">
                        <div class="stat-item">
                            <span>åŒ¹é…æ•°:</span>
                            <span class="stat-value" id="matchCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>æ•è·ç»„:</span>
                            <span class="stat-value" id="groupCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>æ‰§è¡Œæ—¶é—´:</span>
                            <span class="stat-value" id="execTime">0ms</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <div class="card-title">ğŸ“‹ åŒ¹é…è¯¦æƒ…</div>
                    <div class="matches-list" id="matchesList">
                        <div style="color: var(--text-secondary); text-align: center; padding: 20px;">
                            æš‚æ— åŒ¹é…ç»“æœ
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">âš¡ å¸¸ç”¨æ¨¡æ¿</div>
                    <div class="templates-list">
                        <div class="template-item" onclick="loadTemplate('email')">
                            <div class="template-name">ğŸ“§ é‚®ç®±åœ°å€</div>
                            <div class="template-pattern">[\w.-]+@[\w.-]+\.\w+</div>
                        </div>
                        <div class="template-item" onclick="loadTemplate('phone')">
                            <div class="template-name">ğŸ“± ä¸­å›½æ‰‹æœºå·</div>
                            <div class="template-pattern">1[3-9]\d{9}</div>
                        </div>
                        <div class="template-item" onclick="loadTemplate('url')">
                            <div class="template-name">ğŸ”— URL é“¾æ¥</div>
                            <div class="template-pattern">https?://[\w.-]+(?:/[\w./-]*)?</div>
                        </div>
                        <div class="template-item" onclick="loadTemplate('ip')">
                            <div class="template-name">ğŸŒ IP åœ°å€</div>
                            <div class="template-pattern">\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}</div>
                        </div>
                        <div class="template-item" onclick="loadTemplate('date')">
                            <div class="template-name">ğŸ“… æ—¥æœŸæ ¼å¼</div>
                            <div class="template-pattern">\d{4}[-/]\d{2}[-/]\d{2}</div>
                        </div>
                        <div class="template-item" onclick="loadTemplate('chinese')">
                            <div class="template-name">ğŸ€„ ä¸­æ–‡å­—ç¬¦</div>
                            <div class="template-pattern">[\u4e00-\u9fa5]+</div>
                        </div>
                        <div class="template-item" onclick="loadTemplate('idcard')">
                            <div class="template-name">ğŸªª èº«ä»½è¯å·</div>
                            <div class="template-pattern">\d{17}[\dXx]</div>
                        </div>
                        <div class="template-item" onclick="loadTemplate('html')">
                            <div class="template-name">ğŸ·ï¸ HTML æ ‡ç­¾</div>
                            <div class="template-pattern">&lt;(\w+)[^&gt;]*&gt;.*?&lt;/\1&gt;</div>
                        </div>
                    </div>
                </div>

                <div class="card cheatsheet">
                    <div class="card-title">ğŸ“– é€ŸæŸ¥è¡¨</div>
                    <div class="cheatsheet-section">
                        <h4>å­—ç¬¦ç±»</h4>
                        <div class="cheatsheet-grid">
                            <div class="cheatsheet-item"><code>.</code> ä»»æ„å­—ç¬¦</div>
                            <div class="cheatsheet-item"><code>\d</code> æ•°å­—</div>
                            <div class="cheatsheet-item"><code>\w</code> å•è¯å­—ç¬¦</div>
                            <div class="cheatsheet-item"><code>\s</code> ç©ºç™½ç¬¦</div>
                            <div class="cheatsheet-item"><code>[abc]</code> å­—ç¬¦é›†</div>
                            <div class="cheatsheet-item"><code>[^abc]</code> å¦å®šé›†</div>
                        </div>
                    </div>
                    <div class="cheatsheet-section">
                        <h4>é‡è¯</h4>
                        <div class="cheatsheet-grid">
                            <div class="cheatsheet-item"><code>*</code> 0 æˆ–å¤šæ¬¡</div>
                            <div class="cheatsheet-item"><code>+</code> 1 æˆ–å¤šæ¬¡</div>
                            <div class="cheatsheet-item"><code>?</code> 0 æˆ– 1 æ¬¡</div>
                            <div class="cheatsheet-item"><code>{n}</code> n æ¬¡</div>
                            <div class="cheatsheet-item"><code>{n,}</code> n+ æ¬¡</div>
                            <div class="cheatsheet-item"><code>{n,m}</code> n-m æ¬¡</div>
                        </div>
                    </div>
                    <div class="cheatsheet-section">
                        <h4>é”šç‚¹</h4>
                        <div class="cheatsheet-grid">
                            <div class="cheatsheet-item"><code>^</code> è¡Œé¦–</div>
                            <div class="cheatsheet-item"><code>$</code> è¡Œå°¾</div>
                            <div class="cheatsheet-item"><code>\b</code> è¯è¾¹ç•Œ</div>
                            <div class="cheatsheet-item"><code>\B</code> éè¯è¾¹ç•Œ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const templates = {
            email: { pattern: '[\\w.-]+@[\\w.-]+\\.\\w+', test: 'è”ç³»é‚®ç®±: test@example.com, support@company.org' },
            phone: { pattern: '1[3-9]\\d{9}', test: 'æ‰‹æœºå·: 13812345678, 15987654321, 12345678901(æ— æ•ˆ)' },
            url: { pattern: 'https?://[\\w.-]+(?:/[\\w./-]*)?', test: 'é“¾æ¥: https://example.com/path, http://test.org' },
            ip: { pattern: '\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}', test: 'IPåœ°å€: 192.168.1.1, 10.0.0.1, 255.255.255.0' },
            date: { pattern: '\\d{4}[-/]\\d{2}[-/]\\d{2}', test: 'æ—¥æœŸ: 2024-01-15, 2023/12/25, 2024-02-30' },
            chinese: { pattern: '[\\u4e00-\\u9fa5]+', test: 'è¿™æ˜¯ä¸­æ–‡æ–‡æœ¬ mixed with English è¿˜æœ‰æ›´å¤šä¸­æ–‡' },
            idcard: { pattern: '\\d{17}[\\dXx]', test: 'èº«ä»½è¯: 110101199001011234, 32010219850315123X' },
            html: { pattern: '<(\\w+)[^>]*>.*?</\\1>', test: '<div class="test">å†…å®¹</div> <span>æ–‡æœ¬</span>' }
        };

        // Theme handling
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const newTheme = current === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Flag buttons
        document.querySelectorAll('.flag-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                btn.classList.toggle('active');
                testRegex();
            });
        });

        // Get current flags
        function getFlags() {
            return Array.from(document.querySelectorAll('.flag-btn.active'))
                .map(btn => btn.dataset.flag)
                .join('');
        }

        // Load template
        function loadTemplate(name) {
            const template = templates[name];
            if (template) {
                document.getElementById('regexInput').value = template.pattern;
                document.getElementById('testText').value = template.test;
                testRegex();
            }
        }

        // Test regex
        function testRegex() {
            const pattern = document.getElementById('regexInput').value;
            const text = document.getElementById('testText').value;
            const flags = getFlags();
            const errorEl = document.getElementById('errorMessage');
            const resultEl = document.getElementById('resultDisplay');
            const matchesEl = document.getElementById('matchesList');

            if (!pattern) {
                resultEl.innerHTML = escapeHTML(text);
                matchesEl.innerHTML = '<div style="color: var(--text-secondary); text-align: center; padding: 20px;">è¯·è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼</div>';
                updateStats(0, 0, 0);
                return;
            }

            try {
                const startTime = performance.now();
                const regex = new RegExp(pattern, flags);
                const execTime = performance.now() - startTime;

                errorEl.style.display = 'none';

                // Find all matches
                const matches = [];
                let match;
                const globalRegex = new RegExp(pattern, flags.includes('g') ? flags : flags + 'g');
                
                while ((match = globalRegex.exec(text)) !== null) {
                    matches.push({
                        index: match.index,
                        match: match[0],
                        groups: match.slice(1)
                    });
                    if (!flags.includes('g')) break;
                }

                // Highlight matches in result
                if (matches.length > 0) {
                    let result = '';
                    let lastIndex = 0;
                    
                    matches.forEach(m => {
                        result += escapeHTML(text.slice(lastIndex, m.index));
                        result += `<span class="match">${escapeHTML(m.match)}</span>`;
                        lastIndex = m.index + m.match.length;
                    });
                    result += escapeHTML(text.slice(lastIndex));
                    resultEl.innerHTML = result;
                } else {
                    resultEl.innerHTML = escapeHTML(text);
                }

                // Update matches list
                if (matches.length > 0) {
                    matchesEl.innerHTML = matches.map((m, i) => `
                        <div class="match-item">
                            <div class="match-header">
                                <span>åŒ¹é… #${i + 1}</span>
                                <span>ä½ç½®: ${m.index}</span>
                            </div>
                            <div class="match-content">${escapeHTML(m.match)}</div>
                            ${m.groups.length > 0 ? `
                                <div class="match-groups">
                                    ${m.groups.map((g, gi) => `
                                        <div class="group-item">
                                            <span class="group-label">ç»„ ${gi + 1}:</span>
                                            <span>${g !== undefined ? escapeHTML(g) : '(æœªåŒ¹é…)'}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                    `).join('');
                } else {
                    matchesEl.innerHTML = '<div style="color: var(--text-secondary); text-align: center; padding: 20px;">æ— åŒ¹é…ç»“æœ</div>';
                }

                // Update stats
                const groupCount = (pattern.match(/\((?!\?)/g) || []).length;
                updateStats(matches.length, groupCount, execTime.toFixed(2));

            } catch (e) {
                errorEl.textContent = 'âŒ æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•é”™è¯¯: ' + e.message;
                errorEl.style.display = 'block';
                resultEl.innerHTML = escapeHTML(text);
                matchesEl.innerHTML = '<div style="color: var(--text-secondary); text-align: center; padding: 20px;">è¯·ä¿®æ­£æ­£åˆ™è¡¨è¾¾å¼</div>';
                updateStats(0, 0, 0);
            }
        }

        function updateStats(matches, groups, time) {
            document.getElementById('matchCount').textContent = matches;
            document.getElementById('groupCount').textContent = groups;
            document.getElementById('execTime').textContent = time + 'ms';
        }

        function escapeHTML(str) {
            return str.replace(/&/g, '&amp;')
                      .replace(/</g, '&lt;')
                      .replace(/>/g, '&gt;')
                      .replace(/"/g, '&quot;');
        }

        // Event listeners
        document.getElementById('regexInput').addEventListener('input', testRegex);
        document.getElementById('testText').addEventListener('input', testRegex);

        // Initialize
        initTheme();
        testRegex();
    </script>
</body>
</html>
