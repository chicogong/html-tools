<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æœˆç»å‘¨æœŸè¿½è¸ªå™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="æœˆç»å‘¨æœŸè¿½è¸ªå™¨ - WebUtils" />
    <meta name="keywords" content="menstrual-cycle,health,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/health/menstrual-cycle.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="æœˆç»å‘¨æœŸè¿½è¸ªå™¨ - WebUtils" />
    <meta property="og:description" content="æœˆç»å‘¨æœŸè¿½è¸ªå™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/health/menstrual-cycle.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="æœˆç»å‘¨æœŸè¿½è¸ªå™¨ - WebUtils" />
    <meta name="twitter:description" content="æœˆç»å‘¨æœŸè¿½è¸ªå™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme="light"] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      :root {
        --bg: #0a0a0f;
        --card: #12121a;
        --border: #2a2a3a;
        --text: #fff;
        --text2: #888;
        --accent: #f472b6;
        --accent2: #a78bfa;
        --danger: #ef4444;
      }
      @media (prefers-color-scheme: light) {
        :root {
          --bg: #f5f5f5;
          --card: #fff;
          --border: #e0e0e0;
          --text: #333;
          --text2: #666;
        }
      }
      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        font-size: 16px;
        line-height: 1.6;
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
      }
      h1 {
        text-align: center;
        margin-bottom: 8px;
        font-size: 1.8rem;
      }
      .subtitle {
        text-align: center;
        color: var(--text2);
        margin-bottom: 24px;
      }
      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      @media (max-width: 768px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 20px;
      }
      .card-title {
        font-size: 1rem;
        color: var(--text2);
        margin-bottom: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .form-group {
        margin-bottom: 16px;
      }
      .form-group label {
        display: block;
        margin-bottom: 6px;
        font-size: 0.9rem;
        color: var(--text2);
      }
      input {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--border);
        border-radius: 8px;
        background: var(--bg);
        color: var(--text);
        font-size: 1rem;
      }
      input:focus {
        outline: none;
        border-color: var(--accent);
      }
      button {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        background: var(--accent);
        color: white;
        font-size: 1rem;
        cursor: pointer;
        transition: opacity 0.2s;
      }
      button:hover {
        opacity: 0.9;
      }
      button.secondary {
        background: var(--border);
        color: var(--text);
      }
      .result-hero {
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        padding: 24px;
        border-radius: 12px;
        text-align: center;
        color: white;
        margin-bottom: 20px;
      }
      .result-hero .label {
        opacity: 0.9;
        margin-bottom: 4px;
        font-size: 0.9rem;
      }
      .result-hero .big {
        font-size: 2.2rem;
        font-weight: 700;
      }
      .result-hero .sub {
        margin-top: 8px;
        font-size: 0.9rem;
        opacity: 0.9;
      }
      .stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        margin-top: 16px;
      }
      .stat {
        background: rgba(255, 255, 255, 0.15);
        padding: 12px;
        border-radius: 8px;
        text-align: center;
      }
      .stat .value {
        font-size: 1.3rem;
        font-weight: 600;
      }
      .stat .label {
        font-size: 0.75rem;
        opacity: 0.8;
        margin-top: 4px;
      }
      .phase {
        padding: 16px;
        border-radius: 12px;
        margin-bottom: 12px;
      }
      .phase.menstrual {
        background: linear-gradient(135deg, #ef4444, #f87171);
        color: white;
      }
      .phase.follicular {
        background: linear-gradient(135deg, #f59e0b, #fbbf24);
        color: white;
      }
      .phase.ovulation {
        background: linear-gradient(135deg, #10b981, #34d399);
        color: white;
      }
      .phase.luteal {
        background: linear-gradient(135deg, #8b5cf6, #a78bfa);
        color: white;
      }
      .phase .name {
        font-weight: 600;
        margin-bottom: 4px;
      }
      .phase .dates {
        font-size: 0.85rem;
        opacity: 0.9;
      }
      .phase .desc {
        font-size: 0.8rem;
        opacity: 0.8;
        margin-top: 8px;
      }
      .calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 4px;
      }
      .calendar-header {
        text-align: center;
        font-size: 0.75rem;
        color: var(--text2);
        padding: 8px 0;
      }
      .calendar-day {
        aspect-ratio: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.2s;
        background: var(--bg);
      }
      .calendar-day:hover {
        border: 1px solid var(--accent);
      }
      .calendar-day.empty {
        background: transparent;
        cursor: default;
      }
      .calendar-day.empty:hover {
        border: none;
      }
      .calendar-day.today {
        border: 2px solid var(--accent);
        font-weight: 600;
      }
      .calendar-day.period {
        background: var(--danger);
        color: white;
      }
      .calendar-day.fertile {
        background: var(--accent2);
        color: white;
      }
      .calendar-day.ovulation {
        background: #10b981;
        color: white;
      }
      .month-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }
      .month-nav button {
        padding: 8px 16px;
        font-size: 0.9rem;
      }
      .legend {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
        margin-top: 16px;
        font-size: 0.8rem;
      }
      .legend-item {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .legend-dot {
        width: 12px;
        height: 12px;
        border-radius: 3px;
      }
      .history-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        background: var(--bg);
        border-radius: 8px;
        margin-bottom: 8px;
      }
      .history-item .date {
        font-weight: 500;
      }
      .history-item .cycle {
        color: var(--text2);
        font-size: 0.85rem;
      }
      .history-item .delete {
        color: var(--danger);
        cursor: pointer;
        padding: 4px 8px;
      }
      .note {
        margin-top: 16px;
        padding: 12px;
        background: var(--bg);
        border-radius: 8px;
        font-size: 0.85rem;
        color: var(--text2);
      }
      .back-link {
        display: inline-block;
        margin-bottom: 16px;
        color: var(--accent);
        text-decoration: none;
        font-size: 0.9rem;
      }
      .back-link:hover {
        text-decoration: underline;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      æœˆç»å‘¨æœŸè¿½è¸ªå™¨
    </nav>
    <div class="container">
      <a href="../../index.html" class="back-link">â† è¿”å›</a>
      <h1>æœˆç»å‘¨æœŸè¿½è¸ªå™¨</h1>
      <p class="subtitle">è¿½è¸ªæœˆç»å‘¨æœŸï¼Œé¢„æµ‹ä¸‹æ¬¡ç»æœŸå’Œæ’åµæ—¥</p>

      <div class="grid">
        <div>
          <div class="card">
            <div class="card-title">è®°å½•æœˆç»</div>
            <div class="form-group">
              <label for="input-------">æœˆç»å¼€å§‹æ—¥æœŸ</label>
              <input id="input-------" type="date" id="periodDate" aria-label="æ—¥æœŸé€‰æ‹©å™¨" />
            </div>
            <div class="form-group">
              <label for="input-----">ç»æœŸå¤©æ•°</label>
              <input
                id="input-----"
                type="number"
                id="periodLength"
                value="5"
                min="2"
                max="10"
                aria-label="æ•°å­—è¾“å…¥æ¡†"
                placeholder="è¯·è¾“å…¥æ•°å­—è¾“å…¥æ¡†"
              />
            </div>
            <div style="display: flex; gap: 8px">
              <button onclick="addPeriod()" aria-label="è®°å½•">è®°å½•</button>
              <button class="secondary" onclick="clearData()" aria-label="æ¸…é™¤æ•°æ®">
                æ¸…é™¤æ•°æ®
              </button>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <span>æœˆå†</span>
            </div>
            <div class="month-nav">
              <button class="secondary" onclick="changeMonth(-1)" aria-label="&lt; ä¸Šæœˆ">
                &lt; ä¸Šæœˆ
              </button>
              <span id="currentMonth"></span>
              <button class="secondary" onclick="changeMonth(1)" aria-label="ä¸‹æœˆ &gt;">
                ä¸‹æœˆ &gt;
              </button>
            </div>
            <div class="calendar">
              <div class="calendar-header">æ—¥</div>
              <div class="calendar-header">ä¸€</div>
              <div class="calendar-header">äºŒ</div>
              <div class="calendar-header">ä¸‰</div>
              <div class="calendar-header">å››</div>
              <div class="calendar-header">äº”</div>
              <div class="calendar-header">å…­</div>
            </div>
            <div class="calendar" id="calendarDays"></div>
            <div class="legend">
              <div class="legend-item">
                <div class="legend-dot" style="background: #ef4444"></div>
                ç»æœŸ
              </div>
              <div class="legend-item">
                <div class="legend-dot" style="background: #10b981"></div>
                æ’åµæ—¥
              </div>
              <div class="legend-item">
                <div class="legend-dot" style="background: #a78bfa"></div>
                æ˜“å­•æœŸ
              </div>
            </div>
          </div>
        </div>

        <div>
          <div class="result-hero">
            <div class="label">ä¸‹æ¬¡æœˆç»é¢„è®¡</div>
            <div class="big" id="nextPeriod">-</div>
            <div class="sub" id="countdown">è¯·è®°å½•æœˆç»å¼€å§‹æ—¥æœŸ</div>
            <div class="stats">
              <div class="stat">
                <div class="value" id="avgCycle">-</div>
                <div class="label">å¹³å‡å‘¨æœŸ</div>
              </div>
              <div class="stat">
                <div class="value" id="avgLength">-</div>
                <div class="label">å¹³å‡ç»æœŸ</div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">å‘¨æœŸé˜¶æ®µ</div>
            <div id="phases"></div>
          </div>

          <div class="card">
            <div class="card-title">å†å²è®°å½•</div>
            <div id="history"></div>
          </div>
        </div>
      </div>

      <div class="note">
        æœ¬å·¥å…·åŸºäºå¹³å‡å‘¨æœŸè®¡ç®—ï¼Œä»…ä¾›å‚è€ƒã€‚æ¯ä¸ªäººçš„å‘¨æœŸå¯èƒ½æœ‰æ‰€ä¸åŒï¼Œä¸”ä¼šå—åˆ°å‹åŠ›ã€å¥åº·çŠ¶å†µç­‰å› ç´ å½±å“ã€‚å¦‚æœ‰å¼‚å¸¸ï¼Œè¯·å’¨è¯¢åŒ»ç”Ÿã€‚
      </div>
    </div>

    <script>
      const LS_KEY = "menstrual_data";
      let data = { periods: [], cycleLength: 28, periodLength: 5 };
      let viewMonth = new Date();

      function loadData() {
        const saved = localStorage.getItem(LS_KEY);
        if (saved) {
          data = JSON.parse(saved);
        }
        document.getElementById("periodLength").value = data.periodLength || 5;
      }

      function saveData() {
        localStorage.setItem(LS_KEY, JSON.stringify(data));
      }

      function addPeriod() {
        const dateInput = document.getElementById("periodDate").value;
        const length = parseInt(document.getElementById("periodLength").value) || 5;

        if (!dateInput) {
          alert("è¯·é€‰æ‹©æ—¥æœŸ");
          return;
        }

        const exists = data.periods.find((p) => p.date === dateInput);
        if (exists) {
          alert("è¯¥æ—¥æœŸå·²è®°å½•");
          return;
        }

        data.periods.push({ date: dateInput, length: length });
        data.periods.sort((a, b) => new Date(b.date) - new Date(a.date));
        data.periodLength = length;

        if (data.periods.length >= 2) {
          const cycles = [];
          for (let i = 0; i < data.periods.length - 1; i++) {
            const diff =
              (new Date(data.periods[i].date) - new Date(data.periods[i + 1].date)) /
              (1000 * 60 * 60 * 24);
            if (diff > 0 && diff < 60) cycles.push(diff);
          }
          if (cycles.length > 0) {
            data.cycleLength = Math.round(cycles.reduce((a, b) => a + b, 0) / cycles.length);
          }
        }

        saveData();
        render();
      }

      function deletePeriod(date) {
        data.periods = data.periods.filter((p) => p.date !== date);
        saveData();
        render();
      }

      function clearData() {
        if (confirm("ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿ")) {
          data = { periods: [], cycleLength: 28, periodLength: 5 };
          saveData();
          render();
        }
      }

      function changeMonth(delta) {
        viewMonth.setMonth(viewMonth.getMonth() + delta);
        renderCalendar();
      }

      function formatDate(date) {
        return date.getFullYear() + "å¹´" + (date.getMonth() + 1) + "æœˆ" + date.getDate() + "æ—¥";
      }

      function render() {
        renderPredictions();
        renderCalendar();
        renderHistory();
        renderPhases();
      }

      function renderPredictions() {
        if (data.periods.length === 0) {
          document.getElementById("nextPeriod").textContent = "-";
          document.getElementById("countdown").textContent = "è¯·è®°å½•æœˆç»å¼€å§‹æ—¥æœŸ";
          document.getElementById("avgCycle").textContent = "-";
          document.getElementById("avgLength").textContent = "-";
          return;
        }

        const lastPeriod = new Date(data.periods[0].date);
        const nextPeriod = new Date(lastPeriod);
        nextPeriod.setDate(nextPeriod.getDate() + data.cycleLength);

        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const daysUntil = Math.ceil((nextPeriod - today) / (1000 * 60 * 60 * 24));

        document.getElementById("nextPeriod").textContent = formatDate(nextPeriod);
        document.getElementById("countdown").textContent =
          daysUntil > 0
            ? "è¿˜æœ‰ " + daysUntil + " å¤©"
            : daysUntil === 0
              ? "ä»Šå¤©"
              : "å·²å»¶è¿Ÿ " + Math.abs(daysUntil) + " å¤©";
        document.getElementById("avgCycle").textContent = data.cycleLength + "å¤©";

        const avgLength = data.periods.reduce((a, b) => a + b.length, 0) / data.periods.length;
        document.getElementById("avgLength").textContent = Math.round(avgLength) + "å¤©";
      }

      function renderCalendar() {
        const container = document.getElementById("calendarDays");
        container.textContent = "";

        const year = viewMonth.getFullYear();
        const month = viewMonth.getMonth();
        document.getElementById("currentMonth").textContent = year + "å¹´" + (month + 1) + "æœˆ";

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const today = new Date();

        // è®¡ç®—æ ‡è®°æ—¥æœŸ
        const periodDays = new Set();
        const fertileDays = new Set();
        const ovulationDays = new Set();

        if (data.periods.length > 0) {
          const lastPeriod = new Date(data.periods[0].date);

          // æ ‡è®°å®é™…ç»æœŸ
          data.periods.forEach((p) => {
            const start = new Date(p.date);
            for (let i = 0; i < p.length; i++) {
              const d = new Date(start);
              d.setDate(d.getDate() + i);
              periodDays.add(d.toISOString().split("T")[0]);
            }
          });

          // é¢„æµ‹ä¸‹æ¬¡ç»æœŸå’Œæ’åµ
          for (let cycle = 0; cycle < 3; cycle++) {
            const nextPeriodStart = new Date(lastPeriod);
            nextPeriodStart.setDate(nextPeriodStart.getDate() + data.cycleLength * (cycle + 1));

            for (let i = 0; i < data.periodLength; i++) {
              const d = new Date(nextPeriodStart);
              d.setDate(d.getDate() + i);
              periodDays.add(d.toISOString().split("T")[0]);
            }

            // æ’åµæ—¥ï¼ˆä¸‹æ¬¡æœˆç»å‰14å¤©ï¼‰
            const ovulation = new Date(nextPeriodStart);
            ovulation.setDate(ovulation.getDate() - 14);
            ovulationDays.add(ovulation.toISOString().split("T")[0]);

            // æ˜“å­•æœŸï¼ˆæ’åµå‰5å¤©åˆ°æ’åµå1å¤©ï¼‰
            for (let i = -5; i <= 1; i++) {
              const d = new Date(ovulation);
              d.setDate(d.getDate() + i);
              if (i !== 0) fertileDays.add(d.toISOString().split("T")[0]);
            }
          }
        }

        // ç©ºç™½å¤©
        for (let i = 0; i < firstDay; i++) {
          const div = document.createElement("div");
          div.className = "calendar-day empty";
          container.appendChild(div);
        }

        // æ—¥æœŸ
        for (let day = 1; day <= daysInMonth; day++) {
          const date = new Date(year, month, day);
          const dateStr = date.toISOString().split("T")[0];
          const div = document.createElement("div");
          div.className = "calendar-day";
          div.textContent = day;

          if (date.toDateString() === today.toDateString()) {
            div.classList.add("today");
          }
          if (periodDays.has(dateStr)) {
            div.classList.add("period");
          } else if (ovulationDays.has(dateStr)) {
            div.classList.add("ovulation");
          } else if (fertileDays.has(dateStr)) {
            div.classList.add("fertile");
          }

          container.appendChild(div);
        }
      }

      function renderHistory() {
        const container = document.getElementById("history");
        container.textContent = "";

        if (data.periods.length === 0) {
          const div = document.createElement("div");
          div.style.cssText = "text-align: center; color: var(--text2); padding: 20px;";
          div.textContent = "æš‚æ— è®°å½•";
          container.appendChild(div);
          return;
        }

        data.periods.slice(0, 6).forEach((p, i) => {
          const div = document.createElement("div");
          div.className = "history-item";

          const left = document.createElement("div");
          const dateDiv = document.createElement("div");
          dateDiv.className = "date";
          dateDiv.textContent = p.date + " (" + p.length + "å¤©)";

          const cycleDiv = document.createElement("div");
          cycleDiv.className = "cycle";
          if (i < data.periods.length - 1) {
            const diff = Math.round(
              (new Date(p.date) - new Date(data.periods[i + 1].date)) / (1000 * 60 * 60 * 24)
            );
            cycleDiv.textContent = "å‘¨æœŸ: " + diff + "å¤©";
          }
          left.appendChild(dateDiv);
          left.appendChild(cycleDiv);

          const deleteBtn = document.createElement("span");
          deleteBtn.className = "delete";
          deleteBtn.textContent = "åˆ é™¤";
          deleteBtn.onclick = () => deletePeriod(p.date);

          div.appendChild(left);
          div.appendChild(deleteBtn);
          container.appendChild(div);
        });
      }

      function renderPhases() {
        const container = document.getElementById("phases");
        container.textContent = "";

        if (data.periods.length === 0) return;

        const lastPeriod = new Date(data.periods[0].date);
        const today = new Date();
        const dayInCycle =
          Math.floor((today - lastPeriod) / (1000 * 60 * 60 * 24)) % data.cycleLength;

        const phases = [
          {
            name: "æœˆç»æœŸ",
            class: "menstrual",
            start: 0,
            end: data.periodLength - 1,
            desc: "å­å®«å†…è†œè„±è½ï¼Œæ³¨æ„ä¿æš–ä¼‘æ¯"
          },
          {
            name: "åµæ³¡æœŸ",
            class: "follicular",
            start: data.periodLength,
            end: data.cycleLength - 17,
            desc: "åµæ³¡å‘è‚²ï¼Œç²¾åŠ›é€æ¸å……æ²›"
          },
          {
            name: "æ’åµæœŸ",
            class: "ovulation",
            start: data.cycleLength - 16,
            end: data.cycleLength - 12,
            desc: "æ’åµå‘ç”Ÿï¼Œæ˜“å­•æœŸ"
          },
          {
            name: "é»„ä½“æœŸ",
            class: "luteal",
            start: data.cycleLength - 11,
            end: data.cycleLength - 1,
            desc: "é»„ä½“å½¢æˆï¼Œå¯èƒ½å‡ºç°ç»å‰ç»¼åˆå¾"
          }
        ];

        phases.forEach((phase) => {
          const div = document.createElement("div");
          div.className = "phase " + phase.class;
          if (dayInCycle >= phase.start && dayInCycle <= phase.end) {
            div.style.border = "2px solid white";
          } else {
            div.style.opacity = "0.6";
          }

          const nameDiv = document.createElement("div");
          nameDiv.className = "name";
          nameDiv.textContent =
            phase.name + (dayInCycle >= phase.start && dayInCycle <= phase.end ? " (å½“å‰)" : "");

          const datesDiv = document.createElement("div");
          datesDiv.className = "dates";
          datesDiv.textContent = "ç¬¬" + (phase.start + 1) + "-" + (phase.end + 1) + "å¤©";

          const descDiv = document.createElement("div");
          descDiv.className = "desc";
          descDiv.textContent = phase.desc;

          div.appendChild(nameDiv);
          div.appendChild(datesDiv);
          div.appendChild(descDiv);
          container.appendChild(div);
        });
      }

      // åˆå§‹åŒ–
      document.getElementById("periodDate").value = new Date().toISOString().split("T")[0];
      loadData();
      render();

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        document.getElementById("theme-icon").textContent = newTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", newTheme);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem("theme") || "dark";
      if (savedTheme === "light") {
        document.documentElement.setAttribute("data-theme", "light");
        document.getElementById("theme-icon").textContent = "â˜€ï¸";
      }
    </script>
  </body>
</html>
