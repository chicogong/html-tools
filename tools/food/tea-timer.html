<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¡èŒ¶è®¡æ—¶å™¨ - HTML Tools</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #166534; --accent2: #22c55e; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .tea-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 20px; }
        .tea-btn { padding: 16px 12px; border: 1px solid var(--border); border-radius: 12px; background: var(--bg); color: var(--text); cursor: pointer; text-align: center; transition: all 0.2s; }
        .tea-btn.active { background: linear-gradient(135deg, var(--accent), var(--accent2)); border-color: var(--accent); color: white; }
        .tea-btn:hover { border-color: var(--accent2); }
        .tea-btn .icon { font-size: 1.5rem; margin-bottom: 6px; }
        .tea-btn .name { font-size: 0.85rem; }
        .timer-display { text-align: center; padding: 40px 20px; background: var(--bg); border-radius: 16px; margin-bottom: 20px; }
        .timer-time { font-size: 4rem; font-weight: 700; font-variant-numeric: tabular-nums; }
        .timer-time.running { color: var(--accent2); }
        .timer-time.finished { color: #ef4444; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .timer-label { color: var(--text2); margin-top: 8px; font-size: 0.9rem; }
        .control-buttons { display: flex; gap: 12px; justify-content: center; }
        .control-btn { padding: 14px 32px; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: all 0.2s; }
        .control-btn.primary { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; }
        .control-btn.secondary { background: var(--border); color: var(--text); }
        .control-btn:hover { transform: scale(1.05); }
        .control-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .param-row { display: flex; justify-content: space-between; padding: 14px 0; border-bottom: 1px solid var(--border); }
        .param-row:last-child { border-bottom: none; }
        .param-row .label { color: var(--text2); }
        .param-row .value { font-weight: 600; }
        .steeping-info { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-top: 16px; }
        .steeping-item { text-align: center; padding: 16px; background: var(--bg); border-radius: 10px; }
        .steeping-item .value { font-size: 1.5rem; font-weight: 700; color: var(--accent2); }
        .steeping-item .label { font-size: 0.8rem; color: var(--text2); margin-top: 4px; }
        .steep-count { display: flex; align-items: center; justify-content: center; gap: 16px; margin-top: 16px; }
        .steep-btn { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--border); background: var(--bg); color: var(--text); font-size: 1.2rem; cursor: pointer; }
        .steep-btn:hover { border-color: var(--accent2); }
        .steep-num { font-size: 1.5rem; font-weight: 700; min-width: 80px; text-align: center; }
        .tips-box { padding: 16px; background: var(--bg); border-radius: 8px; font-size: 0.85rem; line-height: 1.8; color: var(--text2); }
        @media (max-width: 500px) { .tea-grid { grid-template-columns: repeat(2, 1fr); } .timer-time { font-size: 3rem; } }
            .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">â† è¿”å›</a>
        <h1>æ³¡èŒ¶è®¡æ—¶å™¨</h1>
        <p class="subtitle">ä¸åŒèŒ¶ç±»æ¨èæ¸©åº¦å’Œå†²æ³¡æ—¶é—´</p>
        
        <div class="card">
            <h3 style="margin-bottom: 16px;">é€‰æ‹©èŒ¶ç±»</h3>
            <div class="tea-grid">
                <button class="tea-btn active" data-tea="green" onclick="setTea('green')">
                    <div class="icon">ğŸµ</div>
                    <div class="name">ç»¿èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="white" onclick="setTea('white')">
                    <div class="icon">ğŸ¤</div>
                    <div class="name">ç™½èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="yellow" onclick="setTea('yellow')">
                    <div class="icon">ğŸ’›</div>
                    <div class="name">é»„èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="oolong" onclick="setTea('oolong')">
                    <div class="icon">ğŸ§¡</div>
                    <div class="name">ä¹Œé¾™èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="black" onclick="setTea('black')">
                    <div class="icon">ğŸ–¤</div>
                    <div class="name">çº¢èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="puerh" onclick="setTea('puerh')">
                    <div class="icon">ğŸ«–</div>
                    <div class="name">æ™®æ´±èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="herbal" onclick="setTea('herbal')">
                    <div class="icon">ğŸŒ¿</div>
                    <div class="name">èŠ±è‰èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="matcha" onclick="setTea('matcha')">
                    <div class="icon">ğŸƒ</div>
                    <div class="name">æŠ¹èŒ¶</div>
                </button>
                <button class="tea-btn" data-tea="custom" onclick="setTea('custom')">
                    <div class="icon">âš™ï¸</div>
                    <div class="name">è‡ªå®šä¹‰</div>
                </button>
            </div>
            
            <div class="steep-count">
                <span style="color: var(--text2);">ç¬¬</span>
                <button class="steep-btn" onclick="changeSteep(-1)">âˆ’</button>
                <span class="steep-num" id="steepNum">1</span>
                <button class="steep-btn" onclick="changeSteep(1)">+</button>
                <span style="color: var(--text2);">æ³¡</span>
            </div>
        </div>
        
        <div class="card">
            <div class="timer-display">
                <div class="timer-time" id="timerDisplay">03:00</div>
                <div class="timer-label" id="timerLabel">å‡†å¤‡å¼€å§‹</div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn primary" id="startBtn" onclick="toggleTimer()">å¼€å§‹</button>
                <button class="control-btn secondary" onclick="resetTimer()">é‡ç½®</button>
            </div>
        </div>
        
        <div class="card">
            <h3 style="margin-bottom: 16px;">å†²æ³¡å‚æ•°</h3>
            <div class="param-row">
                <span class="label">æ¨èæ°´æ¸©</span>
                <span class="value" id="tempValue">80Â°C</span>
            </div>
            <div class="param-row">
                <span class="label">é¦–æ³¡æ—¶é—´</span>
                <span class="value" id="firstSteep">3åˆ†é’Ÿ</span>
            </div>
            <div class="param-row">
                <span class="label">èŒ¶æ°´æ¯”ä¾‹</span>
                <span class="value" id="ratioValue">1:50</span>
            </div>
            <div class="param-row">
                <span class="label">å¯å†²æ³¡æ¬¡æ•°</span>
                <span class="value" id="steepCount">3-4æ¬¡</span>
            </div>
            
            <div class="steeping-info">
                <div class="steeping-item">
                    <div class="value" id="currentTemp">80Â°C</div>
                    <div class="label">å½“å‰æ³¡æ°´æ¸©</div>
                </div>
                <div class="steeping-item">
                    <div class="value" id="currentTime">3:00</div>
                    <div class="label">å½“å‰æ³¡æ—¶é—´</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h3 style="margin-bottom: 12px;">å†²æ³¡æŠ€å·§</h3>
            <div class="tips-box" id="tips"></div>
        </div>
    </div>
    
    <script>
        var teas = {
            green: {
                name: 'ç»¿èŒ¶',
                temp: 80,
                firstTime: 180,
                ratio: '1:50',
                steeps: '3-4æ¬¡',
                increment: 30,
                tips: ['1. æ°´æ¸©ä¸å®œè¿‡é«˜ï¼Œ80Â°Cå·¦å³æœ€ä½³', '2. ç¬¬ä¸€æ³¡å¯å¿«é€Ÿå‡ºæ±¤ï¼Œé¿å…è‹¦æ¶©', '3. ç»ç’ƒæ¯å†²æ³¡å¯æ¬£èµèŒ¶å¶èˆ’å±•', '4. å­˜æ”¾é¿å…‰é˜²æ½®ï¼Œä¿æŒèŒ¶å¶é²œçˆ½']
            },
            white: {
                name: 'ç™½èŒ¶',
                temp: 90,
                firstTime: 180,
                ratio: '1:40',
                steeps: '5-7æ¬¡',
                increment: 20,
                tips: ['1. ç™½æ¯«é“¶é’ˆæ°´æ¸©å¯ç•¥ä½85Â°C', '2. è€ç™½èŒ¶å¯ç”¨æ²¸æ°´å†²æ³¡', '3. ç™½èŒ¶è¶Šé™ˆè¶Šé¦™ï¼Œå¯é•¿æœŸå­˜æ”¾', '4. ç›–ç¢—æˆ–ç´«ç ‚å£¶å†²æ³¡çš†å¯']
            },
            yellow: {
                name: 'é»„èŒ¶',
                temp: 85,
                firstTime: 180,
                ratio: '1:50',
                steeps: '3-4æ¬¡',
                increment: 30,
                tips: ['1. é»„èŒ¶è¾ƒä¸ºçè´µï¼Œå†²æ³¡éœ€ç»†å¿ƒ', '2. æ°´æ¸©85Â°Cï¼Œä¿ç•™èŒ¶é¦™', '3. é—·é»„å·¥è‰ºä½¿èŒ¶æ€§æ›´æ¸©å’Œ', '4. ç»ç’ƒæ¯å†²æ³¡å¯è§‚èµèŒ¶æ±¤']
            },
            oolong: {
                name: 'ä¹Œé¾™èŒ¶',
                temp: 95,
                firstTime: 30,
                ratio: '1:20',
                steeps: '7-10æ¬¡',
                increment: 5,
                tips: ['1. åŠŸå¤«èŒ¶å†²æ³¡ï¼Œå¿«è¿›å¿«å‡º', '2. é¦–æ³¡æ¶¦èŒ¶ï¼Œå€’æ‰ä¸é¥®', '3. é“è§‚éŸ³ã€å¤§çº¢è¢å¯ç”¨æ²¸æ°´', '4. ç´«ç ‚å£¶æ›´èƒ½æ¿€å‘èŒ¶é¦™']
            },
            black: {
                name: 'çº¢èŒ¶',
                temp: 95,
                firstTime: 180,
                ratio: '1:50',
                steeps: '3-4æ¬¡',
                increment: 30,
                tips: ['1. çº¢èŒ¶å¯ç”¨æ²¸æ°´å†²æ³¡', '2. å·¥å¤«çº¢èŒ¶æ—¶é—´å¯é€‚å½“ç¼©çŸ­', '3. å¯åŠ å…¥ç‰›å¥¶åˆ¶ä½œå¥¶èŒ¶', '4. å†¬å­£é¥®ç”¨æš–èƒƒé©±å¯’']
            },
            puerh: {
                name: 'æ™®æ´±èŒ¶',
                temp: 100,
                firstTime: 15,
                ratio: '1:20',
                steeps: '10-15æ¬¡',
                increment: 5,
                tips: ['1. æ²¸æ°´å†²æ³¡ï¼Œé†’èŒ¶å¾ˆé‡è¦', '2. å‰ä¸¤æ³¡æ¶¦èŒ¶ï¼Œå¿«é€Ÿå‡ºæ±¤å€’æ‰', '3. ç”Ÿæ™®æ°´æ¸©å¯ç•¥ä½ï¼Œç†Ÿæ™®ç”¨æ²¸æ°´', '4. æ™®æ´±è¶Šé™ˆè¶Šé¦™ï¼Œæ³¨æ„å­˜æ”¾æ¡ä»¶']
            },
            herbal: {
                name: 'èŠ±è‰èŒ¶',
                temp: 100,
                firstTime: 300,
                ratio: '1:80',
                steeps: '2-3æ¬¡',
                increment: 60,
                tips: ['1. æ²¸æ°´å†²æ³¡ï¼Œé‡Šæ”¾èŠ±è‰ç²¾å', '2. åŠ ç›–ç„–æ³¡æ•ˆæœæ›´ä½³', '3. å¯æ ¹æ®å£å‘³è°ƒæ•´æµ“åº¦', '4. ç«ç‘°ã€èŠèŠ±ã€æ´›ç¥ç­‰å„æœ‰åŠŸæ•ˆ']
            },
            matcha: {
                name: 'æŠ¹èŒ¶',
                temp: 80,
                firstTime: 60,
                ratio: '1:60',
                steeps: '1æ¬¡',
                increment: 0,
                tips: ['1. å…ˆç­›ç²‰å»é™¤ç»“å—', '2. ç”¨èŒ¶ç­…å¿«é€Ÿæ…æ‰“è‡³èµ·æ³¡', '3. æ°´æ¸©ä¸å®œè¿‡é«˜ï¼Œ80Â°Cæœ€ä½³', '4. ç°å†²ç°é¥®ï¼Œä¸å®œä¹…æ”¾']
            },
            custom: {
                name: 'è‡ªå®šä¹‰',
                temp: 90,
                firstTime: 180,
                ratio: 'è‡ªå®šä¹‰',
                steeps: 'è‡ªå®šä¹‰',
                increment: 30,
                tips: ['1. æ ¹æ®èŒ¶å¶ç‰¹æ€§è°ƒæ•´å‚æ•°', '2. å«©å¶æ°´æ¸©ä½ï¼Œè€å¶æ°´æ¸©é«˜', '3. å¤šæ¬¡å†²æ³¡é€æ¸å»¶é•¿æ—¶é—´', '4. å“èŒ¶è®°å½•å¿ƒå¾—ï¼Œæ€»ç»“ç»éªŒ']
            }
        };
        
        var currentTea = 'green';
        var currentSteep = 1;
        var totalSeconds = 180;
        var remainingSeconds = 180;
        var timerInterval = null;
        var isRunning = false;
        
        function setTea(tea) {
            currentTea = tea;
            currentSteep = 1;
            var config = teas[tea];
            
            document.querySelectorAll('.tea-btn').forEach(function(btn) {
                btn.classList.toggle('active', btn.dataset.tea === tea);
            });
            
            document.getElementById('steepNum').textContent = currentSteep;
            document.getElementById('tempValue').textContent = config.temp + 'Â°C';
            document.getElementById('firstSteep').textContent = formatTime(config.firstTime);
            document.getElementById('ratioValue').textContent = config.ratio;
            document.getElementById('steepCount').textContent = config.steeps;
            
            updateSteepParams();
            resetTimer();
            
            var tipsEl = document.getElementById('tips');
            while (tipsEl.firstChild) tipsEl.removeChild(tipsEl.firstChild);
            config.tips.forEach(function(tip) {
                var div = document.createElement('div');
                div.textContent = tip;
                tipsEl.appendChild(div);
            });
        }
        
        function changeSteep(delta) {
            currentSteep = Math.max(1, currentSteep + delta);
            document.getElementById('steepNum').textContent = currentSteep;
            updateSteepParams();
            resetTimer();
        }
        
        function updateSteepParams() {
            var config = teas[currentTea];
            var steepTime = config.firstTime + (currentSteep - 1) * config.increment;
            var steepTemp = config.temp;
            
            if (currentTea === 'puerh' || currentTea === 'oolong') {
                steepTemp = Math.max(90, config.temp - (currentSteep - 1) * 2);
            }
            
            totalSeconds = steepTime;
            remainingSeconds = steepTime;
            
            document.getElementById('currentTemp').textContent = steepTemp + 'Â°C';
            document.getElementById('currentTime').textContent = formatTime(steepTime);
            document.getElementById('timerDisplay').textContent = formatTimerDisplay(steepTime);
        }
        
        function formatTime(seconds) {
            if (seconds < 60) {
                return seconds + 'ç§’';
            }
            var mins = Math.floor(seconds / 60);
            var secs = seconds % 60;
            if (secs === 0) {
                return mins + 'åˆ†é’Ÿ';
            }
            return mins + 'åˆ†' + secs + 'ç§’';
        }
        
        function formatTimerDisplay(seconds) {
            var mins = Math.floor(seconds / 60);
            var secs = seconds % 60;
            return String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
        }
        
        function toggleTimer() {
            if (isRunning) {
                pauseTimer();
            } else {
                startTimer();
            }
        }
        
        function startTimer() {
            if (remainingSeconds <= 0) {
                resetTimer();
            }
            isRunning = true;
            document.getElementById('startBtn').textContent = 'æš‚åœ';
            document.getElementById('timerDisplay').classList.add('running');
            document.getElementById('timerDisplay').classList.remove('finished');
            document.getElementById('timerLabel').textContent = 'æ­£åœ¨å†²æ³¡...';
            
            timerInterval = setInterval(function() {
                remainingSeconds--;
                document.getElementById('timerDisplay').textContent = formatTimerDisplay(remainingSeconds);
                
                if (remainingSeconds <= 0) {
                    finishTimer();
                }
            }, 1000);
        }
        
        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            document.getElementById('startBtn').textContent = 'ç»§ç»­';
            document.getElementById('timerDisplay').classList.remove('running');
            document.getElementById('timerLabel').textContent = 'å·²æš‚åœ';
        }
        
        function finishTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            document.getElementById('startBtn').textContent = 'å¼€å§‹';
            document.getElementById('timerDisplay').classList.remove('running');
            document.getElementById('timerDisplay').classList.add('finished');
            document.getElementById('timerLabel').textContent = 'å†²æ³¡å®Œæˆï¼';
            
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('æ³¡èŒ¶è®¡æ—¶å™¨', { body: teas[currentTea].name + 'ç¬¬' + currentSteep + 'æ³¡å®Œæˆï¼' });
            }
            
            try {
                var audio = new AudioContext();
                var oscillator = audio.createOscillator();
                var gain = audio.createGain();
                oscillator.connect(gain);
                gain.connect(audio.destination);
                oscillator.frequency.value = 800;
                gain.gain.value = 0.3;
                oscillator.start();
                setTimeout(function() { oscillator.stop(); }, 200);
            } catch (e) {}
        }
        
        function resetTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            remainingSeconds = totalSeconds;
            document.getElementById('startBtn').textContent = 'å¼€å§‹';
            document.getElementById('timerDisplay').textContent = formatTimerDisplay(totalSeconds);
            document.getElementById('timerDisplay').classList.remove('running', 'finished');
            document.getElementById('timerLabel').textContent = 'å‡†å¤‡å¼€å§‹';
        }
        
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }
        
        setTea('green');
    </script>
</body>
</html>
