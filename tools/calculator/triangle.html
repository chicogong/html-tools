<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏âËßíÂáΩÊï∞ËÆ°ÁÆóÂô®</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        body {
            min-height: 100vh;
            padding: 1rem;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
        .card {
            background: var(--pico-card-background-color);
            border-radius: var(--pico-border-radius);
            padding: 1rem;
            border: 1px solid var(--pico-muted-border-color);
        }
        .card h3 {
            margin: 0 0 1rem;
        }
        .input-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-bottom: 1rem;
        }
        .input-group input {
            flex: 1;
            margin: 0;
        }
        .input-group select {
            margin: 0;
            width: auto;
        }
        .unit-toggle {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .unit-toggle button {
            flex: 1;
            margin: 0;
        }
        .unit-toggle button.active {
            background: var(--pico-primary);
            color: var(--pico-primary-inverse);
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }
        .result-item {
            padding: 0.75rem;
            background: var(--pico-code-background-color);
            border-radius: var(--pico-border-radius);
        }
        .result-item .label {
            font-size: 0.85rem;
            color: var(--pico-muted-color);
        }
        .result-item .value {
            font-size: 1.1rem;
            font-weight: bold;
            font-family: monospace;
        }
        .unit-circle-container {
            position: relative;
            width: 100%;
            padding-bottom: 100%;
        }
        .unit-circle-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .inverse-section {
            margin-top: 1rem;
        }
        .inverse-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }
        .inverse-item {
            padding: 0.5rem;
            background: var(--pico-code-background-color);
            border-radius: var(--pico-border-radius);
            text-align: center;
        }
        .inverse-item .label {
            font-size: 0.75rem;
            color: var(--pico-muted-color);
        }
        .inverse-item input {
            width: 100%;
            margin: 0.25rem 0 0;
            padding: 0.25rem;
            text-align: center;
            font-size: 0.85rem;
        }
        .inverse-item .result {
            font-family: monospace;
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }
        .common-angles {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
            margin-bottom: 1rem;
        }
        .common-angles button {
            padding: 0.25rem 0.5rem;
            font-size: 0.85rem;
            margin: 0;
        }
        .formula-section {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--pico-code-background-color);
            border-radius: var(--pico-border-radius);
            font-family: monospace;
            font-size: 0.85rem;
        }
    </style>
</head>
<body>
    <main class="container">
        <a href="../../index.html" style="display:inline-block;margin-bottom:1rem;color:var(--pico-primary);text-decoration:none;">‚Üê ËøîÂõûÈ¶ñÈ°µ</a>
        <header>
            <h2>‰∏âËßíÂáΩÊï∞ËÆ°ÁÆóÂô®</h2>
            <button class="outline" onclick="toggleTheme()" id="themeBtn">üåô Ê∑±Ëâ≤</button>
        </header>

        <div class="main-grid">
            <div class="card">
                <h3>ËßíÂ∫¶ËæìÂÖ•</h3>
                
                <div class="unit-toggle">
                    <button id="degBtn" class="active" onclick="setUnit('deg')">ËßíÂ∫¶ (¬∞)</button>
                    <button id="radBtn" onclick="setUnit('rad')">ÂºßÂ∫¶ (rad)</button>
                </div>
                
                <div class="common-angles">
                    <span>Â∏∏Áî®Ëßí:</span>
                    <button class="outline secondary" onclick="setAngle(0)">0¬∞</button>
                    <button class="outline secondary" onclick="setAngle(30)">30¬∞</button>
                    <button class="outline secondary" onclick="setAngle(45)">45¬∞</button>
                    <button class="outline secondary" onclick="setAngle(60)">60¬∞</button>
                    <button class="outline secondary" onclick="setAngle(90)">90¬∞</button>
                    <button class="outline secondary" onclick="setAngle(120)">120¬∞</button>
                    <button class="outline secondary" onclick="setAngle(180)">180¬∞</button>
                    <button class="outline secondary" onclick="setAngle(270)">270¬∞</button>
                    <button class="outline secondary" onclick="setAngle(360)">360¬∞</button>
                </div>
                
                <div class="input-group">
                    <input type="number" id="angleInput" placeholder="ËæìÂÖ•ËßíÂ∫¶" value="45" step="any" oninput="calculate()">
                    <span id="unitLabel">¬∞</span>
                </div>
                
                <div class="results-grid">
                    <div class="result-item">
                        <div class="label">sin(Œ∏)</div>
                        <div class="value" id="sinVal">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">cos(Œ∏)</div>
                        <div class="value" id="cosVal">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">tan(Œ∏)</div>
                        <div class="value" id="tanVal">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">cot(Œ∏)</div>
                        <div class="value" id="cotVal">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">sec(Œ∏)</div>
                        <div class="value" id="secVal">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">csc(Œ∏)</div>
                        <div class="value" id="cscVal">-</div>
                    </div>
                </div>
                
                <div class="result-item" style="margin-top: 0.5rem;">
                    <div class="label">ËßíÂ∫¶/ÂºßÂ∫¶ËΩ¨Êç¢</div>
                    <div class="value" id="conversion">-</div>
                </div>
                
                <div class="inverse-section">
                    <h4>Âèç‰∏âËßíÂáΩÊï∞</h4>
                    <div class="inverse-grid">
                        <div class="inverse-item">
                            <div class="label">arcsin(x)</div>
                            <input type="number" id="asinInput" step="0.01" min="-1" max="1" placeholder="-1~1" oninput="calcInverse('asin')">
                            <div class="result" id="asinResult">-</div>
                        </div>
                        <div class="inverse-item">
                            <div class="label">arccos(x)</div>
                            <input type="number" id="acosInput" step="0.01" min="-1" max="1" placeholder="-1~1" oninput="calcInverse('acos')">
                            <div class="result" id="acosResult">-</div>
                        </div>
                        <div class="inverse-item">
                            <div class="label">arctan(x)</div>
                            <input type="number" id="atanInput" step="0.01" placeholder="‰ªªÊÑèÂÄº" oninput="calcInverse('atan')">
                            <div class="result" id="atanResult">-</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3>Âçï‰ΩçÂúÜ</h3>
                <div class="unit-circle-container">
                    <svg class="unit-circle-svg" viewBox="-150 -150 300 300" id="unitCircle">
                        <!-- Grid -->
                        <line x1="-130" y1="0" x2="130" y2="0" stroke="currentColor" stroke-opacity="0.2"/>
                        <line x1="0" y1="-130" x2="0" y2="130" stroke="currentColor" stroke-opacity="0.2"/>
                        
                        <!-- Unit circle -->
                        <circle cx="0" cy="0" r="100" fill="none" stroke="currentColor" stroke-opacity="0.3" stroke-width="1"/>
                        
                        <!-- Axis labels -->
                        <text x="135" y="5" font-size="12" fill="currentColor">x</text>
                        <text x="5" y="-125" font-size="12" fill="currentColor">y</text>
                        <text x="105" y="15" font-size="10" fill="currentColor" opacity="0.6">1</text>
                        <text x="-115" y="15" font-size="10" fill="currentColor" opacity="0.6">-1</text>
                        <text x="5" y="-105" font-size="10" fill="currentColor" opacity="0.6">1</text>
                        <text x="5" y="115" font-size="10" fill="currentColor" opacity="0.6">-1</text>
                        
                        <!-- Angle arc -->
                        <path id="angleArc" fill="none" stroke="var(--pico-primary)" stroke-width="2"/>
                        
                        <!-- Radius line -->
                        <line id="radiusLine" x1="0" y1="0" x2="100" y2="0" stroke="var(--pico-primary)" stroke-width="2"/>
                        
                        <!-- Point on circle -->
                        <circle id="pointOnCircle" cx="100" cy="0" r="5" fill="var(--pico-primary)"/>
                        
                        <!-- Sin line (vertical) -->
                        <line id="sinLine" x1="0" y1="0" x2="0" y2="0" stroke="#e74c3c" stroke-width="2" stroke-dasharray="4"/>
                        
                        <!-- Cos line (horizontal) -->
                        <line id="cosLine" x1="0" y1="0" x2="0" y2="0" stroke="#3498db" stroke-width="2" stroke-dasharray="4"/>
                        
                        <!-- Labels -->
                        <text id="sinLabel" x="0" y="0" font-size="10" fill="#e74c3c">sin</text>
                        <text id="cosLabel" x="0" y="0" font-size="10" fill="#3498db">cos</text>
                        <text id="angleLabel" x="0" y="0" font-size="10" fill="var(--pico-primary)">Œ∏</text>
                        <text id="coordLabel" x="0" y="0" font-size="9" fill="currentColor"></text>
                    </svg>
                </div>
                
                <div class="formula-section">
                    <strong>Âü∫Êú¨ÂÖ≥Á≥ª:</strong><br>
                    sin¬≤Œ∏ + cos¬≤Œ∏ = 1<br>
                    tan Œ∏ = sin Œ∏ / cos Œ∏<br>
                    cot Œ∏ = cos Œ∏ / sin Œ∏ = 1/tan Œ∏<br>
                    sec Œ∏ = 1 / cos Œ∏<br>
                    csc Œ∏ = 1 / sin Œ∏
                </div>
            </div>
        </div>
    </main>

    <script>
        let unit = 'deg';
        
        window.setUnit = function(u) {
            unit = u;
            document.getElementById('degBtn').classList.toggle('active', u === 'deg');
            document.getElementById('radBtn').classList.toggle('active', u === 'rad');
            document.getElementById('unitLabel').textContent = u === 'deg' ? '¬∞' : 'rad';
            calculate();
        };
        
        window.setAngle = function(degrees) {
            if (unit === 'deg') {
                document.getElementById('angleInput').value = degrees;
            } else {
                document.getElementById('angleInput').value = (degrees * Math.PI / 180).toFixed(6);
            }
            calculate();
        };
        
        window.calculate = function() {
            const input = parseFloat(document.getElementById('angleInput').value);
            if (isNaN(input)) {
                clearResults();
                return;
            }
            
            let radians, degrees;
            if (unit === 'deg') {
                degrees = input;
                radians = input * Math.PI / 180;
            } else {
                radians = input;
                degrees = input * 180 / Math.PI;
            }
            
            const sin = Math.sin(radians);
            const cos = Math.cos(radians);
            const tan = Math.tan(radians);
            const cot = 1 / tan;
            const sec = 1 / cos;
            const csc = 1 / sin;
            
            document.getElementById('sinVal').textContent = formatNum(sin);
            document.getElementById('cosVal').textContent = formatNum(cos);
            document.getElementById('tanVal').textContent = Math.abs(cos) < 1e-10 ? '‚àû' : formatNum(tan);
            document.getElementById('cotVal').textContent = Math.abs(sin) < 1e-10 ? '‚àû' : formatNum(cot);
            document.getElementById('secVal').textContent = Math.abs(cos) < 1e-10 ? '‚àû' : formatNum(sec);
            document.getElementById('cscVal').textContent = Math.abs(sin) < 1e-10 ? '‚àû' : formatNum(csc);
            
            if (unit === 'deg') {
                document.getElementById('conversion').textContent = degrees + '¬∞ = ' + formatNum(radians) + ' rad ‚âà ' + formatFraction(degrees) + 'œÄ';
            } else {
                document.getElementById('conversion').textContent = formatNum(radians) + ' rad = ' + formatNum(degrees) + '¬∞';
            }
            
            updateUnitCircle(radians, sin, cos);
        };
        
        function formatNum(num) {
            if (!isFinite(num)) return '‚àû';
            if (Math.abs(num) < 1e-10) return '0';
            if (Math.abs(num - 1) < 1e-10) return '1';
            if (Math.abs(num + 1) < 1e-10) return '-1';
            if (Math.abs(num - 0.5) < 1e-10) return '0.5';
            if (Math.abs(num + 0.5) < 1e-10) return '-0.5';
            return num.toFixed(6).replace(/\.?0+$/, '');
        }
        
        function formatFraction(degrees) {
            const normalized = ((degrees % 360) + 360) % 360;
            const fractions = {
                0: '0', 30: '1/6', 45: '1/4', 60: '1/3', 90: '1/2',
                120: '2/3', 135: '3/4', 150: '5/6', 180: '1',
                210: '7/6', 225: '5/4', 240: '4/3', 270: '3/2',
                300: '5/3', 315: '7/4', 330: '11/6', 360: '2'
            };
            return fractions[normalized] || (degrees / 180).toFixed(4);
        }
        
        function updateUnitCircle(radians, sin, cos) {
            const r = 100;
            const x = cos * r;
            const y = -sin * r; // SVG y is inverted
            
            // Update radius line
            document.getElementById('radiusLine').setAttribute('x2', x);
            document.getElementById('radiusLine').setAttribute('y2', y);
            
            // Update point
            document.getElementById('pointOnCircle').setAttribute('cx', x);
            document.getElementById('pointOnCircle').setAttribute('cy', y);
            
            // Update sin line (vertical)
            document.getElementById('sinLine').setAttribute('x1', x);
            document.getElementById('sinLine').setAttribute('y1', 0);
            document.getElementById('sinLine').setAttribute('x2', x);
            document.getElementById('sinLine').setAttribute('y2', y);
            
            // Update cos line (horizontal)
            document.getElementById('cosLine').setAttribute('x1', 0);
            document.getElementById('cosLine').setAttribute('y1', y);
            document.getElementById('cosLine').setAttribute('x2', x);
            document.getElementById('cosLine').setAttribute('y2', y);
            
            // Update arc
            const normalizedRadians = ((radians % (2 * Math.PI)) + 2 * Math.PI) % (2 * Math.PI);
            const largeArc = normalizedRadians > Math.PI ? 1 : 0;
            const arcX = Math.cos(normalizedRadians) * 30;
            const arcY = -Math.sin(normalizedRadians) * 30;
            document.getElementById('angleArc').setAttribute('d', 
                'M 30 0 A 30 30 0 ' + largeArc + ' 0 ' + arcX + ' ' + arcY);
            
            // Update labels
            document.getElementById('sinLabel').setAttribute('x', x + 5);
            document.getElementById('sinLabel').setAttribute('y', y / 2);
            document.getElementById('cosLabel').setAttribute('x', x / 2);
            document.getElementById('cosLabel').setAttribute('y', y - 5);
            document.getElementById('angleLabel').setAttribute('x', Math.cos(normalizedRadians / 2) * 45);
            document.getElementById('angleLabel').setAttribute('y', -Math.sin(normalizedRadians / 2) * 45);
            document.getElementById('coordLabel').setAttribute('x', x + 10);
            document.getElementById('coordLabel').setAttribute('y', y - 10);
            document.getElementById('coordLabel').textContent = '(' + cos.toFixed(2) + ', ' + sin.toFixed(2) + ')';
        }
        
        function clearResults() {
            ['sinVal', 'cosVal', 'tanVal', 'cotVal', 'secVal', 'cscVal', 'conversion'].forEach(function(id) {
                document.getElementById(id).textContent = '-';
            });
        }
        
        window.calcInverse = function(func) {
            const input = parseFloat(document.getElementById(func + 'Input').value);
            const resultEl = document.getElementById(func + 'Result');
            
            if (isNaN(input)) {
                resultEl.textContent = '-';
                return;
            }
            
            let result;
            switch (func) {
                case 'asin':
                    if (input < -1 || input > 1) {
                        resultEl.textContent = 'Êó†Êïà';
                        return;
                    }
                    result = Math.asin(input);
                    break;
                case 'acos':
                    if (input < -1 || input > 1) {
                        resultEl.textContent = 'Êó†Êïà';
                        return;
                    }
                    result = Math.acos(input);
                    break;
                case 'atan':
                    result = Math.atan(input);
                    break;
            }
            
            const degrees = result * 180 / Math.PI;
            resultEl.textContent = formatNum(degrees) + '¬∞ (' + formatNum(result) + ' rad)';
        };
        
        window.toggleTheme = function() {
            const html = document.documentElement;
            const btn = document.getElementById('themeBtn');
            if (html.getAttribute('data-theme') === 'light') {
                html.setAttribute('data-theme', 'dark');
                btn.textContent = '‚òÄÔ∏è ÊµÖËâ≤';
            } else {
                html.setAttribute('data-theme', 'light');
                btn.textContent = 'üåô Ê∑±Ëâ≤';
            }
        };
        
        // Initialize
        calculate();
    </script>
</body>
</html>
