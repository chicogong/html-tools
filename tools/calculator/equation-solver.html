<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–¹ç¨‹æ±‚è§£å™¨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        body { min-height: 100vh; padding: 2rem 1rem; }
        .container { max-width: 800px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        .tabs { display: flex; gap: 0.5rem; margin-bottom: 2rem; flex-wrap: wrap; }
        .tabs button { flex: 1; min-width: 100px; }
        .tabs button.active { background: var(--pico-primary); color: var(--pico-primary-inverse); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .calc-box { background: var(--pico-muted-border-color); border-radius: var(--pico-border-radius); padding: 1.5rem; margin-bottom: 1.5rem; }
        .result-highlight { font-size: 1.8rem; font-weight: bold; color: var(--pico-primary); text-align: center; margin: 1rem 0; }
        .result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .result-card { background: var(--pico-background-color); border-radius: var(--pico-border-radius); padding: 1rem; text-align: center; }
        .result-card h5 { margin: 0 0 0.5rem 0; font-size: 0.85rem; color: var(--pico-muted-color); }
        .result-card .value { font-size: 1.1rem; font-weight: bold; font-family: monospace; }
        .input-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 0.5rem; align-items: end; }
        .formula { background: var(--pico-background-color); padding: 1rem; border-radius: var(--pico-border-radius); margin-top: 1rem; font-family: monospace; text-align: center; font-size: 1.1rem; }
        .equation-display { font-size: 1.2rem; text-align: center; margin: 1rem 0; font-family: monospace; }
        .solution-steps { background: var(--pico-background-color); padding: 1rem; border-radius: var(--pico-border-radius); margin-top: 1rem; font-size: 0.9rem; }
        .solution-steps p { margin: 0.5rem 0; }
    </style>
</head>
<body>
    <main class="container">
        <a href="../../index.html" style="display:inline-block;margin-bottom:1rem;color:var(--pico-primary);text-decoration:none;">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>æ–¹ç¨‹æ±‚è§£å™¨</h1>
            <button id="themeToggle" class="outline" onclick="toggleTheme()">ğŸŒ™</button>
        </header>

        <div class="tabs">
            <button class="active" onclick="showTab('linear')">ä¸€å…ƒä¸€æ¬¡</button>
            <button onclick="showTab('quadratic')">ä¸€å…ƒäºŒæ¬¡</button>
            <button onclick="showTab('linear2')">äºŒå…ƒä¸€æ¬¡</button>
            <button onclick="showTab('linear3')">ä¸‰å…ƒä¸€æ¬¡</button>
            <button onclick="showTab('cubic')">ä¸€å…ƒä¸‰æ¬¡</button>
        </div>

        <div id="linear" class="tab-content active">
            <div class="calc-box">
                <h3>ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹</h3>
                <div class="equation-display">ax + b = 0</div>
                <div class="input-row">
                    <div>
                        <label>a (xçš„ç³»æ•°)</label>
                        <input type="number" id="lin1A" value="2" step="any">
                    </div>
                    <div>
                        <label>b (å¸¸æ•°é¡¹)</label>
                        <input type="number" id="lin1B" value="-6" step="any">
                    </div>
                </div>
                <button onclick="solveLinear1()" style="margin-top: 1rem;">æ±‚è§£</button>

                <div class="result-highlight" id="lin1Result">x = 3</div>

                <div class="solution-steps" id="lin1Steps">
                    <p><strong>è§£é¢˜æ­¥éª¤ï¼š</strong></p>
                    <p>2x - 6 = 0</p>
                    <p>2x = 6</p>
                    <p>x = 6 / 2 = 3</p>
                </div>
            </div>
        </div>

        <div id="quadratic" class="tab-content">
            <div class="calc-box">
                <h3>ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹</h3>
                <div class="equation-display">axÂ² + bx + c = 0</div>
                <div class="input-row">
                    <div>
                        <label>a (xÂ²ç³»æ•°)</label>
                        <input type="number" id="quad2A" value="1" step="any">
                    </div>
                    <div>
                        <label>b (xç³»æ•°)</label>
                        <input type="number" id="quad2B" value="-5" step="any">
                    </div>
                    <div>
                        <label>c (å¸¸æ•°é¡¹)</label>
                        <input type="number" id="quad2C" value="6" step="any">
                    </div>
                </div>
                <button onclick="solveQuadratic()" style="margin-top: 1rem;">æ±‚è§£</button>

                <div class="result-highlight" id="quadResult">xâ‚ = 3, xâ‚‚ = 2</div>

                <div class="result-grid">
                    <div class="result-card"><h5>åˆ¤åˆ«å¼ Î”</h5><div class="value" id="quadDelta">1</div></div>
                    <div class="result-card"><h5>è§£çš„æƒ…å†µ</h5><div class="value" id="quadType">ä¸¤ä¸ªå®æ ¹</div></div>
                    <div class="result-card"><h5>é¡¶ç‚¹ xåæ ‡</h5><div class="value" id="quadVertex">2.5</div></div>
                    <div class="result-card"><h5>é¡¶ç‚¹ yåæ ‡</h5><div class="value" id="quadVertexY">-0.25</div></div>
                </div>

                <div class="solution-steps" id="quadSteps">
                    <p><strong>æ±‚æ ¹å…¬å¼ï¼š</strong></p>
                    <p>x = (-b Â± âˆš(bÂ²-4ac)) / 2a</p>
                </div>

                <div class="formula">Î” = bÂ² - 4ac</div>
            </div>
        </div>

        <div id="linear2" class="tab-content">
            <div class="calc-box">
                <h3>äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„</h3>
                <div class="equation-display">
                    aâ‚x + bâ‚y = câ‚<br>
                    aâ‚‚x + bâ‚‚y = câ‚‚
                </div>
                <p style="text-align: center; color: var(--pico-muted-color);">æ–¹ç¨‹1</p>
                <div class="input-row">
                    <div><label>aâ‚</label><input type="number" id="sys2A1" value="2" step="any"></div>
                    <div><label>bâ‚</label><input type="number" id="sys2B1" value="3" step="any"></div>
                    <div><label>câ‚</label><input type="number" id="sys2C1" value="8" step="any"></div>
                </div>
                <p style="text-align: center; color: var(--pico-muted-color); margin-top: 1rem;">æ–¹ç¨‹2</p>
                <div class="input-row">
                    <div><label>aâ‚‚</label><input type="number" id="sys2A2" value="4" step="any"></div>
                    <div><label>bâ‚‚</label><input type="number" id="sys2B2" value="-1" step="any"></div>
                    <div><label>câ‚‚</label><input type="number" id="sys2C2" value="2" step="any"></div>
                </div>
                <button onclick="solveLinear2()" style="margin-top: 1rem;">æ±‚è§£</button>

                <div class="result-highlight" id="sys2Result">x = 1, y = 2</div>

                <div class="result-grid">
                    <div class="result-card"><h5>x</h5><div class="value" id="sys2X">1</div></div>
                    <div class="result-card"><h5>y</h5><div class="value" id="sys2Y">2</div></div>
                    <div class="result-card"><h5>è¡Œåˆ—å¼ D</h5><div class="value" id="sys2Det">-14</div></div>
                </div>

                <div class="solution-steps" id="sys2Steps">
                    <p><strong>å…‹è±å§†æ³•åˆ™ï¼š</strong></p>
                    <p>D = aâ‚bâ‚‚ - aâ‚‚bâ‚</p>
                    <p>x = (câ‚bâ‚‚ - câ‚‚bâ‚) / D</p>
                    <p>y = (aâ‚câ‚‚ - aâ‚‚câ‚) / D</p>
                </div>
            </div>
        </div>

        <div id="linear3" class="tab-content">
            <div class="calc-box">
                <h3>ä¸‰å…ƒä¸€æ¬¡æ–¹ç¨‹ç»„</h3>
                <div class="equation-display" style="font-size: 1rem;">
                    aâ‚x + bâ‚y + câ‚z = dâ‚<br>
                    aâ‚‚x + bâ‚‚y + câ‚‚z = dâ‚‚<br>
                    aâ‚ƒx + bâ‚ƒy + câ‚ƒz = dâ‚ƒ
                </div>
                <p style="text-align: center; color: var(--pico-muted-color);">æ–¹ç¨‹1</p>
                <div class="input-row">
                    <div><label>aâ‚</label><input type="number" id="sys3A1" value="1" step="any"></div>
                    <div><label>bâ‚</label><input type="number" id="sys3B1" value="2" step="any"></div>
                    <div><label>câ‚</label><input type="number" id="sys3C1" value="3" step="any"></div>
                    <div><label>dâ‚</label><input type="number" id="sys3D1" value="14" step="any"></div>
                </div>
                <p style="text-align: center; color: var(--pico-muted-color); margin-top: 0.5rem;">æ–¹ç¨‹2</p>
                <div class="input-row">
                    <div><label>aâ‚‚</label><input type="number" id="sys3A2" value="2" step="any"></div>
                    <div><label>bâ‚‚</label><input type="number" id="sys3B2" value="1" step="any"></div>
                    <div><label>câ‚‚</label><input type="number" id="sys3C2" value="1" step="any"></div>
                    <div><label>dâ‚‚</label><input type="number" id="sys3D2" value="7" step="any"></div>
                </div>
                <p style="text-align: center; color: var(--pico-muted-color); margin-top: 0.5rem;">æ–¹ç¨‹3</p>
                <div class="input-row">
                    <div><label>aâ‚ƒ</label><input type="number" id="sys3A3" value="3" step="any"></div>
                    <div><label>bâ‚ƒ</label><input type="number" id="sys3B3" value="1" step="any"></div>
                    <div><label>câ‚ƒ</label><input type="number" id="sys3C3" value="2" step="any"></div>
                    <div><label>dâ‚ƒ</label><input type="number" id="sys3D3" value="13" step="any"></div>
                </div>
                <button onclick="solveLinear3()" style="margin-top: 1rem;">æ±‚è§£</button>

                <div class="result-highlight" id="sys3Result">x = 1, y = 2, z = 3</div>

                <div class="result-grid">
                    <div class="result-card"><h5>x</h5><div class="value" id="sys3X">1</div></div>
                    <div class="result-card"><h5>y</h5><div class="value" id="sys3Y">2</div></div>
                    <div class="result-card"><h5>z</h5><div class="value" id="sys3Z">3</div></div>
                    <div class="result-card"><h5>è¡Œåˆ—å¼ D</h5><div class="value" id="sys3Det">-6</div></div>
                </div>
            </div>
        </div>

        <div id="cubic" class="tab-content">
            <div class="calc-box">
                <h3>ä¸€å…ƒä¸‰æ¬¡æ–¹ç¨‹</h3>
                <div class="equation-display">axÂ³ + bxÂ² + cx + d = 0</div>
                <div class="input-row">
                    <div><label>a (xÂ³ç³»æ•°)</label><input type="number" id="cub3A" value="1" step="any"></div>
                    <div><label>b (xÂ²ç³»æ•°)</label><input type="number" id="cub3B" value="-6" step="any"></div>
                    <div><label>c (xç³»æ•°)</label><input type="number" id="cub3C" value="11" step="any"></div>
                    <div><label>d (å¸¸æ•°)</label><input type="number" id="cub3D" value="-6" step="any"></div>
                </div>
                <button onclick="solveCubic()" style="margin-top: 1rem;">æ±‚è§£</button>

                <div class="result-highlight" id="cubicResult">xâ‚ = 1, xâ‚‚ = 2, xâ‚ƒ = 3</div>

                <div class="result-grid">
                    <div class="result-card"><h5>xâ‚</h5><div class="value" id="cubX1">1</div></div>
                    <div class="result-card"><h5>xâ‚‚</h5><div class="value" id="cubX2">2</div></div>
                    <div class="result-card"><h5>xâ‚ƒ</h5><div class="value" id="cubX3">3</div></div>
                    <div class="result-card"><h5>åˆ¤åˆ«å¼ Î”</h5><div class="value" id="cubDelta">0</div></div>
                </div>

                <div class="solution-steps">
                    <p><strong>è§£çš„æ€§è´¨ï¼š</strong></p>
                    <p>Î” > 0ï¼šä¸‰ä¸ªä¸ç­‰å®æ ¹</p>
                    <p>Î” = 0ï¼šæœ‰é‡æ ¹</p>
                    <p>Î” < 0ï¼šä¸€ä¸ªå®æ ¹ï¼Œä¸¤ä¸ªå…±è½­å¤æ ¹</p>
                </div>
            </div>
        </div>

        <article style="margin-top: 2rem;">
            <h4>å¸¸ç”¨æ±‚è§£æ–¹æ³•</h4>
            <table>
                <thead><tr><th>æ–¹ç¨‹ç±»å‹</th><th>æ–¹æ³•</th></tr></thead>
                <tbody>
                    <tr><td>ä¸€å…ƒä¸€æ¬¡</td><td>ç§»é¡¹ã€åˆå¹¶åŒç±»é¡¹</td></tr>
                    <tr><td>ä¸€å…ƒäºŒæ¬¡</td><td>å› å¼åˆ†è§£ã€é…æ–¹æ³•ã€æ±‚æ ¹å…¬å¼</td></tr>
                    <tr><td>äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„</td><td>ä»£å…¥æ³•ã€æ¶ˆå…ƒæ³•ã€å…‹è±å§†æ³•åˆ™</td></tr>
                    <tr><td>ä¸€å…ƒä¸‰æ¬¡</td><td>è¯•æ ¹æ³•ã€å¡å°”ä¸¹å…¬å¼</td></tr>
                </tbody>
            </table>
        </article>
    </main>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            document.getElementById('themeToggle').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
            localStorage.setItem('theme', newTheme);
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('themeToggle').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        function format(num) {
            if (!Number.isFinite(num)) return 'æ— è§£';
            return Math.abs(num) < 1e-10 ? '0' : num.toFixed(6).replace(/\.?0+$/, '');
        }

        function solveLinear1() {
            const a = parseFloat(document.getElementById('lin1A').value) || 0;
            const b = parseFloat(document.getElementById('lin1B').value) || 0;

            if (a === 0) {
                document.getElementById('lin1Result').textContent = b === 0 ? 'æ— ç©·å¤šè§£' : 'æ— è§£';
                document.getElementById('lin1Steps').innerHTML = '<p>å½“a=0æ—¶ï¼Œæ–¹ç¨‹å˜ä¸º ' + b + ' = 0</p>';
                return;
            }

            const x = -b / a;
            document.getElementById('lin1Result').textContent = 'x = ' + format(x);
            
            const sign = b >= 0 ? '+' : '';
            document.getElementById('lin1Steps').innerHTML = 
                '<p><strong>è§£é¢˜æ­¥éª¤ï¼š</strong></p>' +
                '<p>' + a + 'x ' + sign + ' ' + b + ' = 0</p>' +
                '<p>' + a + 'x = ' + (-b) + '</p>' +
                '<p>x = ' + (-b) + ' / ' + a + ' = ' + format(x) + '</p>';
        }

        function solveQuadratic() {
            const a = parseFloat(document.getElementById('quad2A').value) || 0;
            const b = parseFloat(document.getElementById('quad2B').value) || 0;
            const c = parseFloat(document.getElementById('quad2C').value) || 0;

            if (a === 0) {
                if (b === 0) {
                    document.getElementById('quadResult').textContent = c === 0 ? 'æ— ç©·å¤šè§£' : 'æ— è§£';
                } else {
                    document.getElementById('quadResult').textContent = 'x = ' + format(-c / b);
                }
                return;
            }

            const delta = b * b - 4 * a * c;
            const vertexX = -b / (2 * a);
            const vertexY = a * vertexX * vertexX + b * vertexX + c;

            document.getElementById('quadDelta').textContent = format(delta);
            document.getElementById('quadVertex').textContent = format(vertexX);
            document.getElementById('quadVertexY').textContent = format(vertexY);

            if (delta > 0) {
                const x1 = (-b + Math.sqrt(delta)) / (2 * a);
                const x2 = (-b - Math.sqrt(delta)) / (2 * a);
                document.getElementById('quadResult').textContent = 'xâ‚ = ' + format(x1) + ', xâ‚‚ = ' + format(x2);
                document.getElementById('quadType').textContent = 'ä¸¤ä¸ªä¸ç­‰å®æ ¹';
            } else if (Math.abs(delta) < 1e-10) {
                const x = -b / (2 * a);
                document.getElementById('quadResult').textContent = 'x = ' + format(x) + ' (é‡æ ¹)';
                document.getElementById('quadType').textContent = 'ä¸¤ä¸ªç›¸ç­‰å®æ ¹';
            } else {
                const realPart = -b / (2 * a);
                const imagPart = Math.sqrt(-delta) / (2 * a);
                document.getElementById('quadResult').textContent = 
                    'xâ‚ = ' + format(realPart) + ' + ' + format(imagPart) + 'i, xâ‚‚ = ' + format(realPart) + ' - ' + format(imagPart) + 'i';
                document.getElementById('quadType').textContent = 'ä¸¤ä¸ªå…±è½­å¤æ ¹';
            }

            document.getElementById('quadSteps').innerHTML = 
                '<p><strong>æ±‚æ ¹å…¬å¼ï¼š</strong></p>' +
                '<p>Î” = bÂ² - 4ac = ' + b + 'Â² - 4Ã—' + a + 'Ã—' + c + ' = ' + format(delta) + '</p>' +
                '<p>x = (-b Â± âˆšÎ”) / 2a = (' + (-b) + ' Â± âˆš' + format(delta) + ') / ' + (2 * a) + '</p>';
        }

        function solveLinear2() {
            const a1 = parseFloat(document.getElementById('sys2A1').value) || 0;
            const b1 = parseFloat(document.getElementById('sys2B1').value) || 0;
            const c1 = parseFloat(document.getElementById('sys2C1').value) || 0;
            const a2 = parseFloat(document.getElementById('sys2A2').value) || 0;
            const b2 = parseFloat(document.getElementById('sys2B2').value) || 0;
            const c2 = parseFloat(document.getElementById('sys2C2').value) || 0;

            const D = a1 * b2 - a2 * b1;
            document.getElementById('sys2Det').textContent = format(D);

            if (Math.abs(D) < 1e-10) {
                document.getElementById('sys2Result').textContent = 'æ— å”¯ä¸€è§£ (å¹³è¡Œæˆ–é‡åˆ)';
                document.getElementById('sys2X').textContent = '-';
                document.getElementById('sys2Y').textContent = '-';
                return;
            }

            const x = (c1 * b2 - c2 * b1) / D;
            const y = (a1 * c2 - a2 * c1) / D;

            document.getElementById('sys2Result').textContent = 'x = ' + format(x) + ', y = ' + format(y);
            document.getElementById('sys2X').textContent = format(x);
            document.getElementById('sys2Y').textContent = format(y);
        }

        function solveLinear3() {
            const a1 = parseFloat(document.getElementById('sys3A1').value) || 0;
            const b1 = parseFloat(document.getElementById('sys3B1').value) || 0;
            const c1 = parseFloat(document.getElementById('sys3C1').value) || 0;
            const d1 = parseFloat(document.getElementById('sys3D1').value) || 0;
            const a2 = parseFloat(document.getElementById('sys3A2').value) || 0;
            const b2 = parseFloat(document.getElementById('sys3B2').value) || 0;
            const c2 = parseFloat(document.getElementById('sys3C2').value) || 0;
            const d2 = parseFloat(document.getElementById('sys3D2').value) || 0;
            const a3 = parseFloat(document.getElementById('sys3A3').value) || 0;
            const b3 = parseFloat(document.getElementById('sys3B3').value) || 0;
            const c3 = parseFloat(document.getElementById('sys3C3').value) || 0;
            const d3 = parseFloat(document.getElementById('sys3D3').value) || 0;

            // Calculate 3x3 determinant
            function det3(m) {
                return m[0][0]*(m[1][1]*m[2][2]-m[1][2]*m[2][1]) -
                       m[0][1]*(m[1][0]*m[2][2]-m[1][2]*m[2][0]) +
                       m[0][2]*(m[1][0]*m[2][1]-m[1][1]*m[2][0]);
            }

            const D = det3([[a1,b1,c1],[a2,b2,c2],[a3,b3,c3]]);
            document.getElementById('sys3Det').textContent = format(D);

            if (Math.abs(D) < 1e-10) {
                document.getElementById('sys3Result').textContent = 'æ— å”¯ä¸€è§£';
                document.getElementById('sys3X').textContent = '-';
                document.getElementById('sys3Y').textContent = '-';
                document.getElementById('sys3Z').textContent = '-';
                return;
            }

            const Dx = det3([[d1,b1,c1],[d2,b2,c2],[d3,b3,c3]]);
            const Dy = det3([[a1,d1,c1],[a2,d2,c2],[a3,d3,c3]]);
            const Dz = det3([[a1,b1,d1],[a2,b2,d2],[a3,b3,d3]]);

            const x = Dx / D;
            const y = Dy / D;
            const z = Dz / D;

            document.getElementById('sys3Result').textContent = 'x = ' + format(x) + ', y = ' + format(y) + ', z = ' + format(z);
            document.getElementById('sys3X').textContent = format(x);
            document.getElementById('sys3Y').textContent = format(y);
            document.getElementById('sys3Z').textContent = format(z);
        }

        function solveCubic() {
            let a = parseFloat(document.getElementById('cub3A').value) || 0;
            let b = parseFloat(document.getElementById('cub3B').value) || 0;
            let c = parseFloat(document.getElementById('cub3C').value) || 0;
            let d = parseFloat(document.getElementById('cub3D').value) || 0;

            if (a === 0) {
                document.getElementById('cubicResult').textContent = 'ä¸æ˜¯ä¸‰æ¬¡æ–¹ç¨‹';
                return;
            }

            // Normalize
            b /= a; c /= a; d /= a; a = 1;

            const p = c - b*b/3;
            const q = 2*b*b*b/27 - b*c/3 + d;
            const delta = q*q/4 + p*p*p/27;

            document.getElementById('cubDelta').textContent = format(delta);

            const roots = [];

            if (delta > 1e-10) {
                // One real root
                const sqrtDelta = Math.sqrt(delta);
                const u = Math.cbrt(-q/2 + sqrtDelta);
                const v = Math.cbrt(-q/2 - sqrtDelta);
                roots.push(u + v - b/3);
                
                const realPart = -(u+v)/2 - b/3;
                const imagPart = Math.sqrt(3)*(u-v)/2;
                document.getElementById('cubicResult').textContent = 
                    'xâ‚ = ' + format(roots[0]) + ', xâ‚‚ = ' + format(realPart) + ' + ' + format(imagPart) + 'i, xâ‚ƒ = ' + format(realPart) + ' - ' + format(imagPart) + 'i';
                document.getElementById('cubX1').textContent = format(roots[0]);
                document.getElementById('cubX2').textContent = format(realPart) + ' + ' + format(imagPart) + 'i';
                document.getElementById('cubX3').textContent = format(realPart) + ' - ' + format(imagPart) + 'i';
            } else if (Math.abs(delta) < 1e-10) {
                // Multiple roots
                const u = Math.cbrt(-q/2);
                roots.push(2*u - b/3);
                roots.push(-u - b/3);
                document.getElementById('cubicResult').textContent = 
                    'xâ‚ = ' + format(roots[0]) + ', xâ‚‚ = xâ‚ƒ = ' + format(roots[1]);
                document.getElementById('cubX1').textContent = format(roots[0]);
                document.getElementById('cubX2').textContent = format(roots[1]);
                document.getElementById('cubX3').textContent = format(roots[1]);
            } else {
                // Three real roots
                const r = Math.sqrt(-p*p*p/27);
                const theta = Math.acos(-q/(2*r));
                const m = 2 * Math.cbrt(r);
                
                roots.push(m * Math.cos(theta/3) - b/3);
                roots.push(m * Math.cos((theta + 2*Math.PI)/3) - b/3);
                roots.push(m * Math.cos((theta + 4*Math.PI)/3) - b/3);
                
                roots.sort((a,b) => a-b);
                document.getElementById('cubicResult').textContent = 
                    'xâ‚ = ' + format(roots[0]) + ', xâ‚‚ = ' + format(roots[1]) + ', xâ‚ƒ = ' + format(roots[2]);
                document.getElementById('cubX1').textContent = format(roots[0]);
                document.getElementById('cubX2').textContent = format(roots[1]);
                document.getElementById('cubX3').textContent = format(roots[2]);
            }
        }

        loadTheme();
        solveLinear1();
        solveQuadratic();
        solveLinear2();
        solveLinear3();
        solveCubic();
    </script>
</body>
</html>
