<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤åˆ©è®¡ç®—å™¨ - HTML Tools</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #6366f1; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .card-title { font-size: 1rem; color: var(--text2); margin-bottom: 16px; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 6px; font-size: 0.9rem; color: var(--text2); }
        input, select { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1rem; }
        input:focus, select:focus { outline: none; border-color: var(--accent); }
        .result-hero { background: linear-gradient(135deg, var(--accent), #8b5cf6); padding: 32px; border-radius: 12px; text-align: center; color: white; margin-bottom: 20px; }
        .result-hero .big { font-size: 2.5rem; font-weight: 700; }
        .result-hero .label { opacity: 0.9; margin-bottom: 8px; }
        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 20px; }
        .stat { background: rgba(255,255,255,0.1); padding: 12px; border-radius: 8px; text-align: center; }
        .stat .value { font-size: 1.2rem; font-weight: 600; }
        .stat .label { font-size: 0.8rem; opacity: 0.8; }
        .result-row { display: flex; justify-content: space-between; padding: 12px; background: var(--bg); border-radius: 8px; margin-bottom: 8px; }
        .result-row .label { color: var(--text2); }
        .result-row .value { font-weight: 600; }
        .result-row .value.accent { color: var(--accent); }
        .table-container { max-height: 300px; overflow-y: auto; margin-top: 16px; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        th, td { padding: 10px; text-align: right; border-bottom: 1px solid var(--border); }
        th { background: var(--bg); position: sticky; top: 0; color: var(--text2); font-weight: 500; }
        td:first-child, th:first-child { text-align: left; }
        .note { margin-top: 16px; padding: 12px; background: var(--bg); border-radius: 8px; font-size: 0.85rem; color: var(--text2); }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’¹ å¤åˆ©è®¡ç®—å™¨</h1>
        <p class="subtitle">è®¡ç®—å¤åˆ©å¢é•¿ã€å®šæŠ•æ”¶ç›Šå’Œèµ„äº§ç§¯ç´¯</p>
        
        <div class="grid">
            <div class="card">
                <div class="card-title">æŠ•èµ„å‚æ•°</div>
                <div class="form-group">
                    <label>åˆå§‹æœ¬é‡‘ (å…ƒ)</label>
                    <input type="number" id="principal" value="100000" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>å¹´åŒ–æ”¶ç›Šç‡ (%)</label>
                    <input type="number" id="rate" value="8" step="0.1" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>æŠ•èµ„å¹´é™ (å¹´)</label>
                    <input type="number" id="years" value="10" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>å¤åˆ©é¢‘ç‡</label>
                    <select id="frequency" onchange="calculate()">
                        <option value="1">æ¯å¹´</option>
                        <option value="2">æ¯åŠå¹´</option>
                        <option value="4">æ¯å­£åº¦</option>
                        <option value="12" selected>æ¯æœˆ</option>
                        <option value="365">æ¯æ—¥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>æ¯æœˆå®šæŠ• (å…ƒï¼Œå¯é€‰)</label>
                    <input type="number" id="monthly" value="0" oninput="calculate()">
                </div>
            </div>
            
            <div>
                <div class="result-hero">
                    <div class="label">æœ€ç»ˆé‡‘é¢</div>
                    <div class="big" id="finalAmount">Â¥0</div>
                    <div class="stats">
                        <div class="stat">
                            <div class="value" id="totalPrincipal">Â¥0</div>
                            <div class="label">æ€»æŠ•å…¥</div>
                        </div>
                        <div class="stat">
                            <div class="value" id="totalInterest">Â¥0</div>
                            <div class="label">æ€»æ”¶ç›Š</div>
                        </div>
                        <div class="stat">
                            <div class="value" id="totalReturn">0%</div>
                            <div class="label">æ€»æ”¶ç›Šç‡</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">æ”¶ç›Šå¯¹æ¯”</div>
                    <div class="result-row">
                        <span class="label">å¤åˆ©æ”¶ç›Š</span>
                        <span class="value accent" id="compoundEarnings">Â¥0</span>
                    </div>
                    <div class="result-row">
                        <span class="label">å•åˆ©æ”¶ç›Šï¼ˆå¯¹æ¯”ï¼‰</span>
                        <span class="value" id="simpleEarnings">Â¥0</span>
                    </div>
                    <div class="note" id="comparison"></div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">å¹´åº¦æ˜ç»†</div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>å¹´ä»½</th>
                            <th>å¹´åˆé‡‘é¢</th>
                            <th>æœ¬å¹´æŠ•å…¥</th>
                            <th>æœ¬å¹´æ”¶ç›Š</th>
                            <th>å¹´æœ«é‡‘é¢</th>
                        </tr>
                    </thead>
                    <tbody id="detailBody"></tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        function calculate() {
            const P = parseFloat(document.getElementById('principal').value) || 0;
            const r = parseFloat(document.getElementById('rate').value) / 100 || 0;
            const t = parseInt(document.getElementById('years').value) || 0;
            const n = parseInt(document.getElementById('frequency').value) || 12;
            const monthly = parseFloat(document.getElementById('monthly').value) || 0;
            
            const ratePerPeriod = r / n;
            const totalPeriods = n * t;
            
            // åˆå§‹æœ¬é‡‘çš„å¤åˆ©å¢é•¿
            const principalGrowth = P * Math.pow(1 + ratePerPeriod, totalPeriods);
            
            // å®šæŠ•çš„å¤åˆ©å¢é•¿
            let regularGrowth = 0;
            if (monthly > 0 && r > 0) {
                const monthlyRate = r / 12;
                const totalMonths = t * 12;
                regularGrowth = monthly * ((Math.pow(1 + monthlyRate, totalMonths) - 1) / monthlyRate) * (1 + monthlyRate);
            } else if (monthly > 0) {
                regularGrowth = monthly * t * 12;
            }
            
            const finalAmount = principalGrowth + regularGrowth;
            const totalInvested = P + monthly * t * 12;
            const totalInterest = finalAmount - totalInvested;
            const totalReturn = totalInvested > 0 ? (totalInterest / totalInvested) * 100 : 0;
            
            const fmt = (n) => 'Â¥' + n.toLocaleString('zh-CN', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            
            document.getElementById('finalAmount').textContent = fmt(finalAmount);
            document.getElementById('totalPrincipal').textContent = fmt(totalInvested);
            document.getElementById('totalInterest').textContent = fmt(totalInterest);
            document.getElementById('totalReturn').textContent = totalReturn.toFixed(1) + '%';
            
            // å•åˆ©å¯¹æ¯”
            const simpleInterest = P * r * t + monthly * 12 * t * r * t / 2;
            document.getElementById('compoundEarnings').textContent = fmt(totalInterest);
            document.getElementById('simpleEarnings').textContent = fmt(simpleInterest);
            document.getElementById('comparison').textContent = 
                'å¤åˆ©æ¯”å•åˆ©å¤šèµš ' + fmt(totalInterest - simpleInterest);
            
            // è®¡ç®—å¹´åº¦æ•°æ®
            const tbody = document.getElementById('detailBody');
            tbody.textContent = '';
            
            let currentAmount = P;
            for (let year = 1; year <= t; year++) {
                const startAmount = currentAmount;
                const yearlyInvestment = monthly * 12;
                const monthlyRate = r / 12;
                
                let endAmount = startAmount;
                for (let month = 1; month <= 12; month++) {
                    endAmount = endAmount * (1 + monthlyRate) + monthly;
                }
                
                const yearlyInterest = endAmount - startAmount - yearlyInvestment;
                
                const tr = document.createElement('tr');
                const cells = [
                    'ç¬¬' + year + 'å¹´',
                    fmt(startAmount),
                    fmt(year === 1 ? P : yearlyInvestment),
                    fmt(yearlyInterest),
                    fmt(endAmount)
                ];
                cells.forEach(text => {
                    const td = document.createElement('td');
                    td.textContent = text;
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
                
                currentAmount = endAmount;
            }
        }
        
        calculate();
    </script>
</body>
</html>
