<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²¹è€—è®¡ç®—å™¨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        body { min-height: 100vh; padding: 2rem 1rem; }
        .container { max-width: 800px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        .tabs { display: flex; gap: 0.5rem; margin-bottom: 2rem; }
        .tabs button { flex: 1; }
        .tabs button.active { background: var(--pico-primary); color: var(--pico-primary-inverse); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .calc-box { background: var(--pico-muted-border-color); border-radius: var(--pico-border-radius); padding: 1.5rem; margin-bottom: 1.5rem; }
        .result-highlight { font-size: 2rem; font-weight: bold; color: var(--pico-primary); text-align: center; margin: 1rem 0; }
        .result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .result-card { background: var(--pico-background-color); border-radius: var(--pico-border-radius); padding: 1rem; text-align: center; }
        .result-card h5 { margin: 0 0 0.5rem; font-size: 0.85rem; color: var(--pico-muted-color); }
        .result-card .value { font-size: 1.3rem; font-weight: bold; }
        .input-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .compare-section { margin-top: 2rem; }
        .compare-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        @media (max-width: 600px) { .compare-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <main class="container">
        <a href="../../index.html" style="display:inline-block;margin-bottom:1rem;color:var(--pico-primary);text-decoration:none;">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>æ²¹è€—è®¡ç®—å™¨</h1>
            <button id="themeToggle" class="outline" onclick="toggleTheme()">ğŸŒ™</button>
        </header>

        <div class="tabs">
            <button class="active" onclick="showTab('consumption')">æ²¹è€—è®¡ç®—</button>
            <button onclick="showTab('cost')">è´¹ç”¨è®¡ç®—</button>
            <button onclick="showTab('trip')">è¡Œç¨‹è§„åˆ’</button>
            <button onclick="showTab('compare')">æ²¹ç”µå¯¹æ¯”</button>
        </div>

        <div id="consumption" class="tab-content active">
            <div class="calc-box">
                <h3>è®¡ç®—ç™¾å…¬é‡Œæ²¹è€—</h3>
                <div class="input-row">
                    <div>
                        <label>è¡Œé©¶é‡Œç¨‹ (å…¬é‡Œ)</label>
                        <input type="number" id="distance1" value="500" min="0" step="1">
                    </div>
                    <div>
                        <label>åŠ æ²¹é‡ (å‡)</label>
                        <input type="number" id="fuel1" value="40" min="0" step="0.1">
                    </div>
                </div>
                <button onclick="calcConsumption()" style="margin-top: 1rem;">è®¡ç®—æ²¹è€—</button>
                
                <div class="result-highlight" id="consumptionResult">0 L/100km</div>
                
                <div class="result-grid">
                    <div class="result-card">
                        <h5>æ¯å…¬é‡Œæ²¹è€—</h5>
                        <div class="value" id="perKm">0 L</div>
                    </div>
                    <div class="result-card">
                        <h5>æ¯å‡è¡Œé©¶</h5>
                        <div class="value" id="perLiter">0 km</div>
                    </div>
                    <div class="result-card">
                        <h5>MPG (è‹±åˆ¶)</h5>
                        <div class="value" id="mpg">0</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="cost" class="tab-content">
            <div class="calc-box">
                <h3>è®¡ç®—ç‡ƒæ²¹è´¹ç”¨</h3>
                <div class="input-row">
                    <div>
                        <label>è¡Œé©¶é‡Œç¨‹ (å…¬é‡Œ)</label>
                        <input type="number" id="distance2" value="1000" min="0" step="1">
                    </div>
                    <div>
                        <label>ç™¾å…¬é‡Œæ²¹è€— (L/100km)</label>
                        <input type="number" id="consumption2" value="8" min="0" step="0.1">
                    </div>
                    <div>
                        <label>æ²¹ä»· (å…ƒ/å‡)</label>
                        <input type="number" id="fuelPrice" value="7.5" min="0" step="0.01">
                    </div>
                </div>
                <button onclick="calcCost()" style="margin-top: 1rem;">è®¡ç®—è´¹ç”¨</button>
                
                <div class="result-highlight" id="costResult">Â¥0.00</div>
                
                <div class="result-grid">
                    <div class="result-card">
                        <h5>æ€»è€—æ²¹é‡</h5>
                        <div class="value" id="totalFuel">0 L</div>
                    </div>
                    <div class="result-card">
                        <h5>æ¯å…¬é‡Œæˆæœ¬</h5>
                        <div class="value" id="costPerKm">Â¥0.00</div>
                    </div>
                    <div class="result-card">
                        <h5>å¹´åº¦è´¹ç”¨ä¼°ç®—</h5>
                        <div class="value" id="yearCost">Â¥0</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="trip" class="tab-content">
            <div class="calc-box">
                <h3>è¡Œç¨‹è§„åˆ’</h3>
                <div class="input-row">
                    <div>
                        <label>è®¡åˆ’è¡Œé©¶ (å…¬é‡Œ)</label>
                        <input type="number" id="tripDistance" value="800" min="0">
                    </div>
                    <div>
                        <label>è½¦è¾†æ²¹è€— (L/100km)</label>
                        <input type="number" id="tripConsumption" value="8" min="0" step="0.1">
                    </div>
                    <div>
                        <label>æ²¹ç®±å®¹é‡ (å‡)</label>
                        <input type="number" id="tankSize" value="55" min="0">
                    </div>
                    <div>
                        <label>å½“å‰æ²¹é‡ (å‡)</label>
                        <input type="number" id="currentFuel" value="30" min="0">
                    </div>
                    <div>
                        <label>æ²¹ä»· (å…ƒ/å‡)</label>
                        <input type="number" id="tripFuelPrice" value="7.5" min="0" step="0.01">
                    </div>
                </div>
                <button onclick="calcTrip()" style="margin-top: 1rem;">è®¡ç®—</button>
                
                <div class="result-grid" style="margin-top: 1.5rem;">
                    <div class="result-card">
                        <h5>æ‰€éœ€æ²¹é‡</h5>
                        <div class="value" id="neededFuel">0 L</div>
                    </div>
                    <div class="result-card">
                        <h5>é¢„è®¡è´¹ç”¨</h5>
                        <div class="value" id="tripCost">Â¥0</div>
                    </div>
                    <div class="result-card">
                        <h5>å½“å‰ç»­èˆª</h5>
                        <div class="value" id="currentRange">0 km</div>
                    </div>
                    <div class="result-card">
                        <h5>æ»¡æ²¹ç»­èˆª</h5>
                        <div class="value" id="fullRange">0 km</div>
                    </div>
                    <div class="result-card">
                        <h5>éœ€åŠ æ²¹é‡</h5>
                        <div class="value" id="needToFill">0 L</div>
                    </div>
                    <div class="result-card">
                        <h5>åŠ æ²¹è´¹ç”¨</h5>
                        <div class="value" id="fillCost">Â¥0</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="compare" class="tab-content">
            <div class="calc-box">
                <h3>ç‡ƒæ²¹è½¦ vs ç”µåŠ¨è½¦ è´¹ç”¨å¯¹æ¯”</h3>
                <label>å¹´è¡Œé©¶é‡Œç¨‹ (å…¬é‡Œ)</label>
                <input type="number" id="yearlyDistance" value="15000" min="0">
                
                <div class="compare-grid" style="margin-top: 1rem;">
                    <div class="calc-box" style="background: var(--pico-background-color);">
                        <h4>ç‡ƒæ²¹è½¦</h4>
                        <label>ç™¾å…¬é‡Œæ²¹è€— (L)</label>
                        <input type="number" id="gasConsumption" value="8" min="0" step="0.1">
                        <label>æ²¹ä»· (å…ƒ/å‡)</label>
                        <input type="number" id="gasPrice" value="7.5" min="0" step="0.01">
                    </div>
                    <div class="calc-box" style="background: var(--pico-background-color);">
                        <h4>ç”µåŠ¨è½¦</h4>
                        <label>ç™¾å…¬é‡Œç”µè€— (kWh)</label>
                        <input type="number" id="evConsumption" value="15" min="0" step="0.1">
                        <label>ç”µä»· (å…ƒ/åº¦)</label>
                        <input type="number" id="electricityPrice" value="0.6" min="0" step="0.01">
                    </div>
                </div>
                <button onclick="calcCompare()" style="margin-top: 1rem;">å¯¹æ¯”è®¡ç®—</button>
                
                <div class="result-grid" style="margin-top: 1.5rem;">
                    <div class="result-card">
                        <h5>ç‡ƒæ²¹è½¦å¹´è´¹ç”¨</h5>
                        <div class="value" id="gasYearlyCost">Â¥0</div>
                    </div>
                    <div class="result-card">
                        <h5>ç”µåŠ¨è½¦å¹´è´¹ç”¨</h5>
                        <div class="value" id="evYearlyCost">Â¥0</div>
                    </div>
                    <div class="result-card">
                        <h5>å¹´èŠ‚çœ</h5>
                        <div class="value" id="yearlySaving">Â¥0</div>
                    </div>
                    <div class="result-card">
                        <h5>æ¯å…¬é‡Œå·®ä»·</h5>
                        <div class="value" id="perKmDiff">Â¥0</div>
                    </div>
                </div>
            </div>
        </div>

        <article style="margin-top: 2rem;">
            <h4>æ²¹è€—å‚è€ƒæ ‡å‡†</h4>
            <table>
                <thead><tr><th>è½¦å‹</th><th>åŸå¸‚æ²¹è€—</th><th>é«˜é€Ÿæ²¹è€—</th><th>ç»¼åˆæ²¹è€—</th></tr></thead>
                <tbody>
                    <tr><td>å°å‹è½¦ (1.0-1.5L)</td><td>7-9 L/100km</td><td>5-7 L/100km</td><td>6-8 L/100km</td></tr>
                    <tr><td>ç´§å‡‘å‹ (1.5-2.0L)</td><td>8-11 L/100km</td><td>6-8 L/100km</td><td>7-9 L/100km</td></tr>
                    <tr><td>ä¸­å‹è½¦ (2.0-2.5L)</td><td>10-13 L/100km</td><td>7-9 L/100km</td><td>8-11 L/100km</td></tr>
                    <tr><td>SUV (2.0-3.0L)</td><td>12-16 L/100km</td><td>8-11 L/100km</td><td>10-13 L/100km</td></tr>
                </tbody>
            </table>
        </article>
    </main>

    <script>
        window.toggleTheme = function() {
            const html = document.documentElement;
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            document.getElementById('themeToggle').textContent = newTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
            localStorage.setItem('theme', newTheme);
        };

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('themeToggle').textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        window.showTab = function(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        };

        window.calcConsumption = function() {
            const distance = parseFloat(document.getElementById('distance1').value) || 0;
            const fuel = parseFloat(document.getElementById('fuel1').value) || 0;
            
            if (distance <= 0) return;
            
            const consumption = (fuel / distance) * 100;
            const perKm = fuel / distance;
            const perLiter = distance / fuel;
            const mpg = 235.215 / consumption; // Convert L/100km to MPG

            document.getElementById('consumptionResult').textContent = consumption.toFixed(2) + ' L/100km';
            document.getElementById('perKm').textContent = perKm.toFixed(4) + ' L';
            document.getElementById('perLiter').textContent = perLiter.toFixed(2) + ' km';
            document.getElementById('mpg').textContent = mpg.toFixed(1);
        };

        window.calcCost = function() {
            const distance = parseFloat(document.getElementById('distance2').value) || 0;
            const consumption = parseFloat(document.getElementById('consumption2').value) || 0;
            const price = parseFloat(document.getElementById('fuelPrice').value) || 0;
            
            const totalFuel = (distance / 100) * consumption;
            const totalCost = totalFuel * price;
            const costPerKm = totalCost / distance;
            const yearCost = (15000 / 100) * consumption * price; // å‡è®¾å¹´è¡Œé©¶15000km

            document.getElementById('costResult').textContent = 'Â¥' + totalCost.toFixed(2);
            document.getElementById('totalFuel').textContent = totalFuel.toFixed(2) + ' L';
            document.getElementById('costPerKm').textContent = 'Â¥' + costPerKm.toFixed(2);
            document.getElementById('yearCost').textContent = 'Â¥' + Math.round(yearCost);
        };

        window.calcTrip = function() {
            const distance = parseFloat(document.getElementById('tripDistance').value) || 0;
            const consumption = parseFloat(document.getElementById('tripConsumption').value) || 0;
            const tankSize = parseFloat(document.getElementById('tankSize').value) || 0;
            const currentFuel = parseFloat(document.getElementById('currentFuel').value) || 0;
            const price = parseFloat(document.getElementById('tripFuelPrice').value) || 0;
            
            const neededFuel = (distance / 100) * consumption;
            const tripCost = neededFuel * price;
            const currentRange = (currentFuel / consumption) * 100;
            const fullRange = (tankSize / consumption) * 100;
            const needToFill = Math.max(0, neededFuel - currentFuel);
            const fillCost = needToFill * price;

            document.getElementById('neededFuel').textContent = neededFuel.toFixed(1) + ' L';
            document.getElementById('tripCost').textContent = 'Â¥' + tripCost.toFixed(2);
            document.getElementById('currentRange').textContent = Math.round(currentRange) + ' km';
            document.getElementById('fullRange').textContent = Math.round(fullRange) + ' km';
            document.getElementById('needToFill').textContent = needToFill.toFixed(1) + ' L';
            document.getElementById('fillCost').textContent = 'Â¥' + fillCost.toFixed(2);
        };

        window.calcCompare = function() {
            const yearlyDistance = parseFloat(document.getElementById('yearlyDistance').value) || 0;
            const gasConsumption = parseFloat(document.getElementById('gasConsumption').value) || 0;
            const gasPrice = parseFloat(document.getElementById('gasPrice').value) || 0;
            const evConsumption = parseFloat(document.getElementById('evConsumption').value) || 0;
            const electricityPrice = parseFloat(document.getElementById('electricityPrice').value) || 0;
            
            const gasCost = (yearlyDistance / 100) * gasConsumption * gasPrice;
            const evCost = (yearlyDistance / 100) * evConsumption * electricityPrice;
            const saving = gasCost - evCost;
            const perKmDiff = saving / yearlyDistance;

            document.getElementById('gasYearlyCost').textContent = 'Â¥' + Math.round(gasCost);
            document.getElementById('evYearlyCost').textContent = 'Â¥' + Math.round(evCost);
            document.getElementById('yearlySaving').textContent = 'Â¥' + Math.round(saving);
            document.getElementById('perKmDiff').textContent = 'Â¥' + perKmDiff.toFixed(2);
        };

        loadTheme();
    </script>
</body>
</html>
