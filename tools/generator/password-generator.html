<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯†ç ç”Ÿæˆå™¨ - WebUtils</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg-primary: #0a0a0f; --bg-secondary: #12121a; --bg-tertiary: #1a1a25; --text-primary: #fff; --text-secondary: #88a; --accent: #6366f1; --border: #2a2a3a; --success: #22c55e; --warning: #f59e0b; --danger: #ef4444; }
        [data-theme="light"] { --bg-primary: #f8fafc; --bg-secondary: #fff; --bg-tertiary: #f1f5f9; --text-primary: #1e293b; --text-secondary: #64748b; --border: #e2e8f0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; }
        .header { background: linear-gradient(135deg, #ef4444, #f97316); padding: 2rem; text-align: center; }
        .header h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
        .nav { display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto 1rem; }
        .back-link { color: rgba(255,255,255,0.9); text-decoration: none; }
        .theme-toggle { background: rgba(255,255,255,0.2); border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; color: white; cursor: pointer; }
        .container { max-width: 700px; margin: 0 auto; padding: 2rem; }
        .card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; }
        .password-display { background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 0.5rem; padding: 1rem; font-family: 'Courier New', monospace; font-size: 1.3rem; word-break: break-all; text-align: center; margin-bottom: 1rem; min-height: 60px; display: flex; align-items: center; justify-content: center; }
        .strength-bar { height: 6px; background: var(--bg-tertiary); border-radius: 3px; margin-bottom: 0.5rem; overflow: hidden; }
        .strength-fill { height: 100%; transition: all 0.3s; }
        .strength-text { font-size: 0.85rem; color: var(--text-secondary); text-align: center; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; }
        .btn { flex: 1; padding: 0.75rem 1rem; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 1rem; transition: all 0.2s; }
        .btn-primary { background: var(--accent); color: white; }
        .btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .option-group { margin-bottom: 1rem; }
        .option-group label { display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem; }
        .slider-row { display: flex; align-items: center; gap: 1rem; }
        .slider-row input[type="range"] { flex: 1; }
        .slider-row .value { min-width: 40px; text-align: center; font-weight: 600; }
        .checkbox-group { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; }
        .checkbox-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: var(--bg-tertiary); border-radius: 0.5rem; cursor: pointer; }
        .checkbox-item input { width: 18px; height: 18px; accent-color: var(--accent); }
        .checkbox-item span { font-size: 0.9rem; }
        .history { margin-top: 1rem; }
        .history-title { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .history-list { display: flex; flex-direction: column; gap: 0.5rem; max-height: 200px; overflow-y: auto; }
        .history-item { display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0.75rem; background: var(--bg-tertiary); border-radius: 0.25rem; font-family: monospace; font-size: 0.85rem; }
        .history-item button { background: none; border: none; color: var(--accent); cursor: pointer; font-size: 0.8rem; }
        .toast { position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--success); color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; opacity: 0; transition: all 0.3s; z-index: 1000; }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
    <nav class="breadcrumb"><a href="../../index.html">é¦–é¡µ</a><span>â€º</span><a href="../../index.html#generator">ç”Ÿæˆå™¨</a><span>â€º</span>å¯†ç ç”Ÿæˆå™¨</nav>
    <div class="header">
        <div class="nav">
            <a href="../../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“ ä¸»é¢˜</button>
        </div>
        <h1>ğŸ” å¯†ç ç”Ÿæˆå™¨</h1>
        <p>ç”Ÿæˆå®‰å…¨éšæœºå¯†ç ï¼Œæ”¯æŒå¤šç§å­—ç¬¦ç»„åˆ</p>
    </div>
    <div class="container">
        <div class="card">
            <div class="password-display" id="password">ç‚¹å‡»ç”ŸæˆæŒ‰é’®</div>
            <div class="strength-bar"><div class="strength-fill" id="strengthFill"></div></div>
            <div class="strength-text" id="strengthText">å¯†ç å¼ºåº¦</div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="generate()">ğŸ² ç”Ÿæˆå¯†ç </button>
                <button class="btn btn-secondary" onclick="copyPassword()">ğŸ“‹ å¤åˆ¶</button>
            </div>
            
            <div class="option-group">
                <label>å¯†ç é•¿åº¦: <span id="lengthValue">16</span></label>
                <div class="slider-row">
                    <input type="range" id="length" min="4" max="64" value="16" oninput="updateLength()">
                </div>
            </div>
            
            <div class="option-group">
                <label>åŒ…å«å­—ç¬¦ç±»å‹</label>
                <div class="checkbox-group">
                    <label class="checkbox-item"><input type="checkbox" id="uppercase" checked><span>å¤§å†™å­—æ¯ A-Z</span></label>
                    <label class="checkbox-item"><input type="checkbox" id="lowercase" checked><span>å°å†™å­—æ¯ a-z</span></label>
                    <label class="checkbox-item"><input type="checkbox" id="numbers" checked><span>æ•°å­— 0-9</span></label>
                    <label class="checkbox-item"><input type="checkbox" id="symbols" checked><span>ç‰¹æ®Šç¬¦å· !@#$</span></label>
                </div>
            </div>
            
            <div class="history">
                <div class="history-title">å†å²è®°å½•</div>
                <div class="history-list" id="historyList"></div>
            </div>
        </div>
    </div>
    <div class="toast" id="toast">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
    <script>
        const chars = {
            uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            lowercase: 'abcdefghijklmnopqrstuvwxyz',
            numbers: '0123456789',
            symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
        };
        let history = JSON.parse(localStorage.getItem('pwdHistory') || '[]');

        window.generate = function() {
            const length = parseInt(document.getElementById('length').value);
            let charset = '';
            
            if (document.getElementById('uppercase').checked) charset += chars.uppercase;
            if (document.getElementById('lowercase').checked) charset += chars.lowercase;
            if (document.getElementById('numbers').checked) charset += chars.numbers;
            if (document.getElementById('symbols').checked) charset += chars.symbols;
            
            if (!charset) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹');
                return;
            }
            
            let password = '';
            const array = new Uint32Array(length);
            crypto.getRandomValues(array);
            for (let i = 0; i < length; i++) {
                password += charset[array[i] % charset.length];
            }
            
            document.getElementById('password').textContent = password;
            updateStrength(password);
            
            history.unshift(password);
            if (history.length > 10) history.pop();
            localStorage.setItem('pwdHistory', JSON.stringify(history));
            renderHistory();
        };

        function updateStrength(password) {
            let score = 0;
            if (password.length >= 8) score++;
            if (password.length >= 12) score++;
            if (password.length >= 16) score++;
            if (/[a-z]/.test(password)) score++;
            if (/[A-Z]/.test(password)) score++;
            if (/[0-9]/.test(password)) score++;
            if (/[^a-zA-Z0-9]/.test(password)) score++;
            
            const fill = document.getElementById('strengthFill');
            const text = document.getElementById('strengthText');
            const percent = (score / 7) * 100;
            
            fill.style.width = percent + '%';
            if (score <= 2) { fill.style.background = '#ef4444'; text.textContent = 'å¼±'; }
            else if (score <= 4) { fill.style.background = '#f59e0b'; text.textContent = 'ä¸­ç­‰'; }
            else if (score <= 5) { fill.style.background = '#22c55e'; text.textContent = 'å¼º'; }
            else { fill.style.background = 'linear-gradient(90deg, #22c55e, #10b981)'; text.textContent = 'éå¸¸å¼º'; }
        }

        window.copyPassword = function() {
            const password = document.getElementById('password').textContent;
            if (password && password !== 'ç‚¹å‡»ç”ŸæˆæŒ‰é’®') {
                navigator.clipboard.writeText(password);
                showToast();
            }
        };

        window.copyHistoryItem = function(pwd) {
            navigator.clipboard.writeText(pwd);
            showToast();
        };

        window.updateLength = function() {
            document.getElementById('lengthValue').textContent = document.getElementById('length').value;
        };

        function renderHistory() {
            const list = document.getElementById('historyList');
            list.innerHTML = history.map(pwd => 
                `<div class="history-item"><span>${pwd.substring(0, 30)}${pwd.length > 30 ? '...' : ''}</span><button onclick="copyHistoryItem('${pwd}')">å¤åˆ¶</button></div>`
            ).join('');
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        window.toggleTheme = function() {
            const t = document.body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', t);
            localStorage.setItem('theme', t);
        };

        document.body.setAttribute('data-theme', localStorage.getItem('theme') || 'dark');
        renderHistory();
    </script>
</body>
</html>
