<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>占位图生成器 - WebUtils</title>
  <style>
    :root { --bg: #f8f9fa; --card-bg: #fff; --text: #212529; --text-muted: #6c757d; --border: #dee2e6; --primary: #0d6efd; --success: #198754; --danger: #dc3545; --shadow: 0 2px 8px rgb(0,0,0,0.08); --radius: 8px; }
    @media (prefers-color-scheme: dark) { :root { --bg: #1a1a2e; --card-bg: #16213e; --text: #eef0f2; --text-muted: #a0a4a8; --border: #2d3748; --primary: #4dabf7; --success: #51cf66; --danger: #ff6b6b; --shadow: 0 2px 8px rgb(0,0,0,0.3); } }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 2rem; }
    .container { max-width: 900px; margin: 0 auto; }
    .back-link { color: var(--primary); text-decoration: none; display: inline-block; margin-bottom: 1.5rem; }
    .back-link:hover { text-decoration: underline; }
    h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
    .desc { color: var(--text-muted); margin-bottom: 1.5rem; }
    .card { background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow); padding: 1.5rem; margin-bottom: 1rem; }
    .form-group { margin-bottom: 1rem; }
    label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
    input, select { width: 100%; padding: 0.75rem; border: 1px solid var(--border); border-radius: var(--radius); background: var(--bg); color: var(--text); font-size: 1rem; }
    .row { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; }
    .btn { padding: 0.75rem 1.5rem; border: none; border-radius: var(--radius); cursor: pointer; font-size: 1rem; transition: opacity 0.2s; }
    .btn:hover { opacity: 0.9; }
    .btn-primary { background: var(--primary); color: #fff; }
    .btn-success { background: var(--success); color: #fff; }
    .color-input { display: flex; gap: 0.5rem; align-items: center; }
    .color-input input[type="color"] { width: 50px; height: 38px; padding: 2px; }
    .color-input input[type="text"] { flex: 1; }
    .preview-area { margin-top: 1.5rem; text-align: center; }
    .preview-area img { max-width: 100%; border: 1px solid var(--border); border-radius: var(--radius); }
    .actions { display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; flex-wrap: wrap; }
    .presets { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
    .preset { padding: 0.5rem 1rem; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); cursor: pointer; font-size: 0.9rem; }
    .preset:hover { border-color: var(--primary); }
    footer { text-align: center; margin-top: 2rem; color: var(--text-muted); font-size: 0.9rem; }
    footer a { color: var(--primary); text-decoration: none; }
  </style>
</head>
<body>
  <div class="container">
    <a href="../../index.html" class="back-link">← 返回工具列表</a>
    <h1>占位图生成器</h1>
    <p class="desc">生成指定尺寸和颜色的占位图片，支持添加文字，可下载 PNG/SVG 格式</p>

    <div class="card">
      <div class="presets" id="presets"></div>

      <div class="row">
        <div class="form-group">
          <label>宽度 (px)</label>
          <input type="number" id="width" value="400" min="1" max="4000">
        </div>
        <div class="form-group">
          <label>高度 (px)</label>
          <input type="number" id="height" value="300" min="1" max="4000">
        </div>
        <div class="form-group">
          <label>格式</label>
          <select id="format">
            <option value="png">PNG</option>
            <option value="svg">SVG</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label>背景色</label>
          <div class="color-input">
            <input type="color" id="bgColorPicker" value="#cccccc">
            <input type="text" id="bgColor" value="#cccccc">
          </div>
        </div>
        <div class="form-group">
          <label>文字色</label>
          <div class="color-input">
            <input type="color" id="textColorPicker" value="#666666">
            <input type="text" id="textColor" value="#666666">
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>显示文字 (留空显示尺寸)</label>
        <input type="text" id="text" placeholder="例如: Logo 或 Banner">
      </div>

      <div class="form-group">
        <label>字体大小 (px, 0 为自动)</label>
        <input type="number" id="fontSize" value="0" min="0" max="500">
      </div>

      <div class="preview-area">
        <canvas id="canvas" style="display:none;"></canvas>
        <img id="preview" alt="预览">
      </div>

      <div class="actions">
        <button class="btn btn-primary" onclick="generate()">生成图片</button>
        <button class="btn btn-success" onclick="download()">下载图片</button>
      </div>
    </div>

    <footer>
      <a href="https://github.com/chicogong/html-tools" target="_blank">GitHub</a>
    </footer>
  </div>

  <script>
    const presets = [
      { name: 'Banner', w: 1200, h: 400 },
      { name: '正方形', w: 500, h: 500 },
      { name: '头像', w: 200, h: 200 },
      { name: '缩略图', w: 150, h: 150 },
      { name: '16:9', w: 1920, h: 1080 },
      { name: '4:3', w: 800, h: 600 },
      { name: '封面', w: 1200, h: 630 },
      { name: '微信', w: 900, h: 500 },
    ];

    const presetsEl = document.getElementById('presets');
    presets.forEach(p => {
      const btn = document.createElement('button');
      btn.className = 'preset';
      btn.textContent = p.name + ' (' + p.w + '×' + p.h + ')';
      btn.onclick = () => {
        document.getElementById('width').value = p.w;
        document.getElementById('height').value = p.h;
        generate();
      };
      presetsEl.appendChild(btn);
    });

    // Sync color pickers
    document.getElementById('bgColorPicker').oninput = e => {
      document.getElementById('bgColor').value = e.target.value;
      generate();
    };
    document.getElementById('bgColor').oninput = e => {
      document.getElementById('bgColorPicker').value = e.target.value;
      generate();
    };
    document.getElementById('textColorPicker').oninput = e => {
      document.getElementById('textColor').value = e.target.value;
      generate();
    };
    document.getElementById('textColor').oninput = e => {
      document.getElementById('textColorPicker').value = e.target.value;
      generate();
    };

    // Auto generate on input change
    ['width', 'height', 'text', 'fontSize', 'format'].forEach(id => {
      document.getElementById(id).oninput = generate;
    });

    function generate() {
      const w = parseInt(document.getElementById('width').value) || 400;
      const h = parseInt(document.getElementById('height').value) || 300;
      const bg = document.getElementById('bgColor').value || '#cccccc';
      const tc = document.getElementById('textColor').value || '#666666';
      const txt = document.getElementById('text').value || (w + ' × ' + h);
      let fs = parseInt(document.getElementById('fontSize').value) || 0;
      const format = document.getElementById('format').value;

      if (fs === 0) {
        fs = Math.min(w, h) / 8;
      }

      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = w;
      canvas.height = h;

      ctx.fillStyle = bg;
      ctx.fillRect(0, 0, w, h);

      ctx.fillStyle = tc;
      ctx.font = 'bold ' + fs + 'px -apple-system, BlinkMacSystemFont, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(txt, w / 2, h / 2);

      const preview = document.getElementById('preview');
      if (format === 'svg') {
        const escapedTxt = txt.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
        const svg = [
          '<svg xmlns="http://www.w3.org/2000/svg" width="' + w + '" height="' + h + '">',
          '<rect width="100%" height="100%" fill="' + bg + '"/>',
          '<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" ',
          'font-family="-apple-system, BlinkMacSystemFont, sans-serif" ',
          'font-size="' + fs + '" font-weight="bold" fill="' + tc + '">' + escapedTxt + '</text>',
          '</svg>'
        ].join('');
        preview.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svg)));
      } else {
        preview.src = canvas.toDataURL('image/png');
      }
    }

    function download() {
      const w = document.getElementById('width').value;
      const h = document.getElementById('height').value;
      const format = document.getElementById('format').value;
      const preview = document.getElementById('preview');

      const a = document.createElement('a');
      a.href = preview.src;
      a.download = 'placeholder-' + w + 'x' + h + '.' + format;
      a.click();
    }

    // Initial generate
    generate();
  </script>
</body>
</html>
