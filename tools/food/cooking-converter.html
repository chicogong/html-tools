<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>烹饪单位转换器 - WebUtils</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #f97316; --accent2: #fb923c; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-size: 0.9rem; color: var(--text2); }
        input, select { width: 100%; padding: 14px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1rem; }
        input:focus, select:focus { outline: none; border-color: var(--accent); }
        .converter-row { display: grid; grid-template-columns: 1fr auto 1fr; gap: 12px; align-items: end; margin-bottom: 20px; }
        .swap-btn { width: 48px; height: 48px; border-radius: 50%; border: 1px solid var(--border); background: var(--bg); color: var(--text); font-size: 1.2rem; cursor: pointer; margin-bottom: 4px; }
        .swap-btn:hover { border-color: var(--accent); background: var(--accent); color: white; }
        .result-box { background: linear-gradient(135deg, var(--accent), var(--accent2)); padding: 24px; border-radius: 12px; text-align: center; color: white; }
        .result-box .label { opacity: 0.9; font-size: 0.9rem; margin-bottom: 8px; }
        .result-box .value { font-size: 2rem; font-weight: 700; }
        .category-tabs { display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab-btn { padding: 10px 16px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); cursor: pointer; font-size: 0.9rem; }
        .tab-btn.active { background: var(--accent); border-color: var(--accent); color: white; }
        .tab-btn:hover { border-color: var(--accent); }
        .quick-ref { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .ref-item { padding: 12px; background: var(--bg); border-radius: 8px; font-size: 0.85rem; }
        .ref-item .title { color: var(--accent); font-weight: 600; margin-bottom: 4px; }
        .ref-item .desc { color: var(--text2); }
        @media (max-width: 500px) { .converter-row { grid-template-columns: 1fr; } .swap-btn { margin: 0 auto; transform: rotate(90deg); } }
            .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">← 返回</a>
        <h1>烹饪单位转换器</h1>
        <p class="subtitle">克/杯/汤匙/茶匙快速转换</p>
        
        <div class="card">
            <div class="category-tabs">
                <button class="tab-btn active" data-cat="volume" onclick="setCategory('volume')">容量</button>
                <button class="tab-btn" data-cat="weight" onclick="setCategory('weight')">重量</button>
                <button class="tab-btn" data-cat="temp" onclick="setCategory('temp')">温度</button>
            </div>
            
            <div class="converter-row">
                <div class="form-group">
                    <label>数值</label>
                    <input type="number" id="inputValue" value="1" oninput="convert()">
                </div>
                <button class="swap-btn" onclick="swapUnits()">⇄</button>
                <div class="form-group">
                    <label>结果</label>
                    <input type="text" id="outputValue" readonly>
                </div>
            </div>
            
            <div class="converter-row" style="margin-bottom: 0;">
                <div class="form-group" style="margin-bottom: 0;">
                    <label>从</label>
                    <select id="fromUnit" onchange="convert()"></select>
                </div>
                <div></div>
                <div class="form-group" style="margin-bottom: 0;">
                    <label>到</label>
                    <select id="toUnit" onchange="convert()"></select>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="result-box">
                <div class="label">转换结果</div>
                <div class="value" id="resultDisplay">1 茶匙 = 5 毫升</div>
            </div>
        </div>
        
        <div class="card">
            <h3 style="margin-bottom: 16px; font-size: 1rem;">常用换算参考</h3>
            <div class="quick-ref">
                <div class="ref-item">
                    <div class="title">1 杯 (美式)</div>
                    <div class="desc">= 240ml = 16汤匙</div>
                </div>
                <div class="ref-item">
                    <div class="title">1 汤匙</div>
                    <div class="desc">= 15ml = 3茶匙</div>
                </div>
                <div class="ref-item">
                    <div class="title">1 茶匙</div>
                    <div class="desc">= 5ml</div>
                </div>
                <div class="ref-item">
                    <div class="title">1 盎司</div>
                    <div class="desc">= 28.35克</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const units = {
            volume: [
                { id: 'tsp', name: '茶匙 (tsp)', toMl: 5 },
                { id: 'tbsp', name: '汤匙 (tbsp)', toMl: 15 },
                { id: 'cup_us', name: '杯 (美式)', toMl: 240 },
                { id: 'cup_metric', name: '杯 (公制)', toMl: 250 },
                { id: 'ml', name: '毫升 (ml)', toMl: 1 },
                { id: 'l', name: '升 (L)', toMl: 1000 },
                { id: 'fl_oz', name: '液体盎司', toMl: 29.5735 }
            ],
            weight: [
                { id: 'g', name: '克 (g)', toG: 1 },
                { id: 'kg', name: '千克 (kg)', toG: 1000 },
                { id: 'oz', name: '盎司 (oz)', toG: 28.3495 },
                { id: 'lb', name: '磅 (lb)', toG: 453.592 },
                { id: 'jin', name: '斤', toG: 500 },
                { id: 'liang', name: '两', toG: 50 }
            ],
            temp: [
                { id: 'c', name: '摄氏度 (°C)' },
                { id: 'f', name: '华氏度 (°F)' },
                { id: 'gas', name: '燃气刻度' }
            ]
        };
        
        let currentCategory = 'volume';
        
        function setCategory(cat) {
            currentCategory = cat;
            document.querySelectorAll('.tab-btn').forEach(function(btn) {
                btn.classList.toggle('active', btn.dataset.cat === cat);
            });
            populateSelects();
            convert();
        }
        
        function populateSelects() {
            const fromSelect = document.getElementById('fromUnit');
            const toSelect = document.getElementById('toUnit');
            const unitList = units[currentCategory];
            
            while (fromSelect.firstChild) fromSelect.removeChild(fromSelect.firstChild);
            while (toSelect.firstChild) toSelect.removeChild(toSelect.firstChild);
            
            unitList.forEach(function(unit, index) {
                const opt1 = document.createElement('option');
                opt1.value = unit.id;
                opt1.textContent = unit.name;
                fromSelect.appendChild(opt1);
                
                const opt2 = document.createElement('option');
                opt2.value = unit.id;
                opt2.textContent = unit.name;
                toSelect.appendChild(opt2);
            });
            
            if (unitList.length > 1) {
                toSelect.selectedIndex = 1;
            }
        }
        
        function swapUnits() {
            const fromSelect = document.getElementById('fromUnit');
            const toSelect = document.getElementById('toUnit');
            const temp = fromSelect.value;
            fromSelect.value = toSelect.value;
            toSelect.value = temp;
            convert();
        }
        
        function convert() {
            const value = parseFloat(document.getElementById('inputValue').value) || 0;
            const fromId = document.getElementById('fromUnit').value;
            const toId = document.getElementById('toUnit').value;
            
            let result = 0;
            const unitList = units[currentCategory];
            const fromUnit = unitList.find(function(u) { return u.id === fromId; });
            const toUnit = unitList.find(function(u) { return u.id === toId; });
            
            if (currentCategory === 'volume') {
                const ml = value * fromUnit.toMl;
                result = ml / toUnit.toMl;
            } else if (currentCategory === 'weight') {
                const g = value * fromUnit.toG;
                result = g / toUnit.toG;
            } else if (currentCategory === 'temp') {
                result = convertTemp(value, fromId, toId);
            }
            
            const formatted = result % 1 === 0 ? result.toString() : result.toFixed(4).replace(/\.?0+$/, '');
            document.getElementById('outputValue').value = formatted;
            document.getElementById('resultDisplay').textContent = value + ' ' + fromUnit.name + ' = ' + formatted + ' ' + toUnit.name;
        }
        
        function convertTemp(value, from, to) {
            let celsius;
            if (from === 'c') celsius = value;
            else if (from === 'f') celsius = (value - 32) * 5 / 9;
            else if (from === 'gas') celsius = gasToC(value);
            
            if (to === 'c') return celsius;
            if (to === 'f') return celsius * 9 / 5 + 32;
            if (to === 'gas') return cToGas(celsius);
        }
        
        function gasToC(gas) {
            const marks = { 0.25: 110, 0.5: 120, 1: 140, 2: 150, 3: 160, 4: 180, 5: 190, 6: 200, 7: 220, 8: 230, 9: 240, 10: 260 };
            return marks[gas] || 180;
        }
        
        function cToGas(c) {
            if (c <= 110) return 0.25;
            if (c <= 120) return 0.5;
            if (c <= 140) return 1;
            if (c <= 150) return 2;
            if (c <= 160) return 3;
            if (c <= 180) return 4;
            if (c <= 190) return 5;
            if (c <= 200) return 6;
            if (c <= 220) return 7;
            if (c <= 230) return 8;
            if (c <= 240) return 9;
            return 10;
        }
        
        populateSelects();
        convert();
    </script>
</body>
</html>
