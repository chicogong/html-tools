<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñ - WebUtils</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="35+ ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñÈ¢ÑËßàÔºåÊîØÊåÅ CSS„ÄÅJavaScript„ÄÅAnime.js„ÄÅGSAP Â§öÁßçÊ†ºÂºèÂØºÂá∫ÔºåÂÆûÊó∂Âä®ÁîªÂØπÊØî" />
  <meta name="keywords" content="easing ÁºìÂä® Âä®Áîª cubic-bezier Ë¥ùÂ°ûÂ∞î timing-function transition animation ease bounce elastic spring" />
  <meta name="author" content="WebUtils" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://tools.realtime-ai.chat/tools/animation/easing-visualizer.html" />
  
  <!-- Open Graph -->
  <meta property="og:title" content="ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñ - WebUtils" />
  <meta property="og:description" content="35+ ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñÈ¢ÑËßàÔºåÊîØÊåÅÂ§öÁßçÊ†ºÂºèÂØºÂá∫" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://tools.realtime-ai.chat/tools/animation/easing-visualizer.html" />
  <meta property="og:site_name" content="WebUtils" />
  <meta property="og:locale" content="zh_CN" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñ - WebUtils" />
  <meta name="twitter:description" content="35+ ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñÈ¢ÑËßàÔºåÊîØÊåÅÂ§öÁßçÊ†ºÂºèÂØºÂá∫" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --bg-card: #1a1a24;
      --bg-input: #0e0e14;
      --text-primary: #e8e8ed;
      --text-secondary: #8888a0;
      --text-muted: #55556a;
      --border-subtle: #2a2a3a;
      --border-hover: #3a3a4a;
      --accent-cyan: #00f5d4;
      --accent-magenta: #f72585;
      --accent-orange: #ff9f1c;
      --accent-green: #10b981;
      --accent-red: #f43f5e;
      --glow-cyan: rgba(0, 245, 212, 0.15);
      --glow-magenta: rgba(247, 37, 133, 0.15);
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 14px;
      --font-sans: 'Space Grotesk', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', ui-monospace, monospace;
    }

    [data-theme="light"] {
      --bg-deep: #f8f9fa;
      --bg-surface: #fff;
      --bg-card: #fff;
      --bg-input: #f1f3f4;
      --text-primary: #1a1a2e;
      --text-secondary: #5a5a7a;
      --text-muted: #9090a0;
      --border-subtle: #e0e0e8;
      --border-hover: #c0c0d0;
      --glow-cyan: rgba(0, 200, 180, 0.1);
      --glow-magenta: rgba(247, 37, 133, 0.1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-sans);
      background: var(--bg-deep);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }

    .bg-grid {
      position: fixed;
      inset: 0;
      background-image: 
        linear-gradient(rgba(0, 245, 212, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 245, 212, 0.03) 1px, transparent 1px);
      background-size: 50px 50px;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
    }

    /* Header */
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.9rem;
      margin-bottom: 20px;
      transition: color 0.2s;
    }
    .back-link:hover { color: var(--accent-cyan); }

    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 1px solid var(--border-subtle);
      background: var(--bg-card);
      color: var(--text-primary);
      font-size: 1.2rem;
      cursor: pointer;
      z-index: 100;
      transition: all 0.2s;
    }
    .theme-toggle:hover {
      border-color: var(--accent-cyan);
      transform: scale(1.05);
    }

    header {
      margin-bottom: 28px;
    }
    header h1 {
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 8px;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .desc {
      color: var(--text-secondary);
      font-size: 0.95rem;
    }

    /* Main Layout */
    .main-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 24px;
    }

    @media (max-width: 900px) {
      .main-layout {
        grid-template-columns: 1fr;
      }
    }

    /* Card */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: 20px;
    }

    .card-title {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    /* Sidebar - Categories & Presets */
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .category-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .category-tab {
      padding: 6px 12px;
      font-size: 0.8rem;
      border: 1px solid var(--border-subtle);
      border-radius: 20px;
      background: transparent;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }
    .category-tab:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }
    .category-tab.active {
      background: var(--accent-cyan);
      border-color: var(--accent-cyan);
      color: var(--bg-deep);
    }

    .preset-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-height: 400px;
      overflow-y: auto;
    }

    .preset-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border: 1px solid transparent;
      border-radius: var(--radius-sm);
      background: transparent;
      color: var(--text-primary);
      font-size: 0.85rem;
      font-family: var(--font-mono);
      cursor: pointer;
      transition: all 0.15s;
      text-align: left;
      width: 100%;
    }
    .preset-item:hover {
      background: var(--bg-surface);
      border-color: var(--border-subtle);
    }
    .preset-item.active {
      background: var(--glow-cyan);
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }

    .preset-mini-curve {
      width: 32px;
      height: 20px;
      flex-shrink: 0;
    }

    /* Custom Input */
    .custom-inputs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--border-subtle);
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .input-group label {
      font-size: 0.75rem;
      color: var(--text-muted);
      font-family: var(--font-mono);
    }
    .input-group input {
      padding: 8px 10px;
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      background: var(--bg-input);
      color: var(--text-primary);
      font-family: var(--font-mono);
      font-size: 0.85rem;
      text-align: center;
    }
    .input-group input:focus {
      outline: none;
      border-color: var(--accent-cyan);
    }

    /* Preview Area */
    .preview-area {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* Canvas Section */
    .canvas-section {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 24px;
      align-items: start;
    }

    @media (max-width: 700px) {
      .canvas-section {
        grid-template-columns: 1fr;
      }
    }

    .canvas-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    #easingCanvas {
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      cursor: crosshair;
    }

    .canvas-info {
      font-family: var(--font-mono);
      font-size: 0.85rem;
      color: var(--accent-cyan);
      text-align: center;
    }

    /* Animation Preview */
    .animation-section {
      flex: 1;
    }

    .preview-track {
      position: relative;
      height: 50px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      margin-bottom: 16px;
      overflow: hidden;
    }

    .preview-ball {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      width: 30px;
      height: 30px;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta));
      border-radius: 50%;
      transition-property: left;
    }
    .preview-ball.animate {
      left: calc(100% - 50px);
    }

    .controls-row {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 10px 18px;
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      background: var(--bg-card);
      color: var(--text-primary);
      font-family: var(--font-sans);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }
    .btn.primary {
      background: var(--accent-cyan);
      border-color: var(--accent-cyan);
      color: var(--bg-deep);
    }
    .btn.primary:hover {
      background: #00d4b8;
      border-color: #00d4b8;
    }

    .duration-control {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .duration-control label {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    .duration-control input[type="range"] {
      width: 120px;
      height: 4px;
      -webkit-appearance: none;
      background: var(--border-subtle);
      border-radius: 2px;
    }
    .duration-control input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      background: var(--accent-cyan);
      border-radius: 50%;
      cursor: pointer;
    }
    .duration-value {
      font-family: var(--font-mono);
      font-size: 0.85rem;
      color: var(--accent-cyan);
      min-width: 36px;
    }

    /* Export Section */
    .export-section {
      margin-top: 8px;
    }

    .export-tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 12px;
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 12px;
    }

    .export-tab {
      padding: 8px 16px;
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      background: transparent;
      color: var(--text-secondary);
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .export-tab:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }
    .export-tab.active {
      background: var(--accent-cyan);
      border-color: var(--accent-cyan);
      color: var(--bg-deep);
    }

    .code-output {
      background: var(--bg-input);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: 16px;
      font-family: var(--font-mono);
      font-size: 0.85rem;
      line-height: 1.7;
      white-space: pre-wrap;
      word-break: break-all;
      max-height: 200px;
      overflow-y: auto;
    }

    .export-actions {
      display: flex;
      gap: 10px;
      margin-top: 12px;
    }

    /* Comparison Section */
    .comparison-section {
      margin-top: 12px;
    }

    .comparison-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .comparison-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .comparison-toggle input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--accent-cyan);
    }
    .comparison-toggle label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      cursor: pointer;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }

    .comparison-item {
      padding: 12px;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
    }

    .comparison-label {
      font-size: 0.8rem;
      font-family: var(--font-mono);
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .comparison-track {
      position: relative;
      height: 28px;
      background: var(--bg-input);
      border-radius: 4px;
      overflow: hidden;
    }

    .comparison-ball {
      position: absolute;
      left: 8px;
      top: 50%;
      transform: translateY(-50%);
      width: 18px;
      height: 18px;
      background: var(--accent-cyan);
      border-radius: 50%;
      transition-property: left;
    }
    .comparison-ball.animate {
      left: calc(100% - 26px);
    }
    .comparison-ball.current {
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta));
    }

    /* Status */
    .status {
      font-size: 0.85rem;
      min-height: 20px;
      margin-top: 8px;
    }
    .status.success { color: var(--accent-green); }
    .status.error { color: var(--accent-red); }

    /* Footer */
    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--border-subtle);
      color: var(--text-muted);
      font-size: 0.85rem;
    }
    footer a {
      color: var(--accent-cyan);
      text-decoration: none;
    }
    footer a:hover { text-decoration: underline; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg-surface); }
    ::-webkit-scrollbar-thumb { background: var(--border-subtle); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
  
        .breadcrumb { position: fixed; top: 10px; left: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); font-size: 0.85rem; }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 5px; }
    </style>
</head>
<body>
    <nav class="breadcrumb"><a href="../../index.html">È¶ñÈ°µ</a><span>‚Ä∫</span><a href="../../index.html#dev">ÂºÄÂèëÂ∑•ÂÖ∑</a><span>‚Ä∫</span>ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñ</nav>
  <div class="bg-grid"></div>
  
  <div class="container">
    <a href="../../index.html" class="back-link">‚Üê ËøîÂõûÂ∑•ÂÖ∑ÂàóË°®</a>
    <button class="theme-toggle" onclick="toggleTheme()" title="ÂàáÊç¢‰∏ªÈ¢ò">üåô</button>
    
    <header>
      <h1>ÁºìÂä®ÂáΩÊï∞ÂèØËßÜÂåñ</h1>
      <p class="desc">35+ È¢ÑËÆæÁºìÂä®ÂáΩÊï∞ÔºåÂÆûÊó∂Êõ≤Á∫øÈ¢ÑËßàÔºåÊîØÊåÅ CSS / JavaScript / Anime.js / GSAP Â§öÁßçÊ†ºÂºèÂØºÂá∫</p>
    </header>

    <div class="main-layout">
      <!-- Sidebar: Categories & Presets -->
      <div class="sidebar">
        <div class="card">
          <div class="card-title">ÂàÜÁ±ª</div>
          <div class="category-tabs" id="categoryTabs">
            <button class="category-tab active" data-category="all">ÂÖ®ÈÉ®</button>
            <button class="category-tab" data-category="css">CSS</button>
            <button class="category-tab" data-category="sine">Sine</button>
            <button class="category-tab" data-category="quad">Quad</button>
            <button class="category-tab" data-category="cubic">Cubic</button>
            <button class="category-tab" data-category="quart">Quart</button>
            <button class="category-tab" data-category="quint">Quint</button>
            <button class="category-tab" data-category="expo">Expo</button>
            <button class="category-tab" data-category="circ">Circ</button>
            <button class="category-tab" data-category="back">Back</button>
            <button class="category-tab" data-category="elastic">Elastic</button>
            <button class="category-tab" data-category="bounce">Bounce</button>
          </div>
        </div>

        <div class="card">
          <div class="card-title">È¢ÑËÆæ (<span id="presetCount">0</span>)</div>
          <div class="preset-list" id="presetList"></div>
          
          <div class="custom-inputs">
            <div class="input-group">
              <label>x1</label>
              <input type="number" id="inputX1" value="0.25" min="0" max="1" step="0.01">
            </div>
            <div class="input-group">
              <label>y1</label>
              <input type="number" id="inputY1" value="0.1" min="-2" max="2" step="0.01">
            </div>
            <div class="input-group">
              <label>x2</label>
              <input type="number" id="inputX2" value="0.25" min="0" max="1" step="0.01">
            </div>
            <div class="input-group">
              <label>y2</label>
              <input type="number" id="inputY2" value="1" min="-2" max="2" step="0.01">
            </div>
          </div>
        </div>
      </div>

      <!-- Preview Area -->
      <div class="preview-area">
        <div class="card">
          <div class="canvas-section">
            <div class="canvas-wrapper">
              <canvas id="easingCanvas" width="260" height="260"></canvas>
              <div class="canvas-info" id="canvasInfo">cubic-bezier(0.25, 0.1, 0.25, 1)</div>
            </div>
            
            <div class="animation-section">
              <div class="card-title">Âä®ÁîªÈ¢ÑËßà</div>
              <div class="preview-track">
                <div class="preview-ball" id="previewBall"></div>
              </div>
              
              <div class="controls-row">
                <button class="btn primary" id="btnPlay">‚ñ∂ Êí≠Êîæ</button>
                <button class="btn" id="btnLoop">üîÑ Âæ™ÁéØ</button>
                
                <div class="duration-control">
                  <label>Êó∂Èïø</label>
                  <input type="range" id="durationRange" min="0.2" max="3" step="0.1" value="1">
                  <span class="duration-value" id="durationValue">1s</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card export-section">
          <div class="card-title">ÂØºÂá∫‰ª£Á†Å</div>
          
          <div class="export-tabs" id="exportTabs">
            <button class="export-tab active" data-format="css">CSS</button>
            <button class="export-tab" data-format="cssVar">CSS ÂèòÈáè</button>
            <button class="export-tab" data-format="js">JavaScript</button>
            <button class="export-tab" data-format="animejs">Anime.js</button>
            <button class="export-tab" data-format="gsap">GSAP</button>
          </div>
          
          <div class="code-output" id="codeOutput"></div>
          
          <div class="export-actions">
            <button class="btn" id="btnCopy">üìã Â§çÂà∂</button>
            <button class="btn" id="btnShare">üîó ÂàÜ‰∫´</button>
          </div>
          
          <div class="status" id="status"></div>
        </div>

        <div class="card comparison-section">
          <div class="comparison-header">
            <div class="card-title" style="margin-bottom: 0;">ÂØπÊØîÊ®°Âºè</div>
            <div class="comparison-toggle">
              <input type="checkbox" id="comparisonToggle" checked>
              <label for="comparisonToggle">ÂêØÁî®ÂØπÊØî</label>
            </div>
          </div>
          
          <div class="comparison-grid" id="comparisonGrid">
            <div class="comparison-item">
              <div class="comparison-label">ÂΩìÂâç</div>
              <div class="comparison-track">
                <div class="comparison-ball current" id="compCurrent"></div>
              </div>
            </div>
            <div class="comparison-item">
              <div class="comparison-label">linear</div>
              <div class="comparison-track">
                <div class="comparison-ball" data-easing="linear" style="transition-timing-function: linear;"></div>
              </div>
            </div>
            <div class="comparison-item">
              <div class="comparison-label">ease</div>
              <div class="comparison-track">
                <div class="comparison-ball" data-easing="ease" style="transition-timing-function: ease;"></div>
              </div>
            </div>
            <div class="comparison-item">
              <div class="comparison-label">ease-in-out</div>
              <div class="comparison-track">
                <div class="comparison-ball" data-easing="ease-in-out" style="transition-timing-function: ease-in-out;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <a href="https://github.com/chicogong/html-tools" target="_blank" rel="noreferrer">GitHub</a>
      ¬∑ Á∫ØÂâçÁ´ØÂ∑•ÂÖ∑ ¬∑ Êó†ÊúçÂä°Âô® ¬∑ 
      <a href="../../index.html">WebUtils</a>
    </footer>
  </div>

  <script>
    // ==================== EASING PRESETS ====================
    var EASING_PRESETS = [
      // CSS Native (5)
      { id: 'linear', name: 'linear', category: 'css', bezier: [0, 0, 1, 1] },
      { id: 'ease', name: 'ease', category: 'css', bezier: [0.25, 0.1, 0.25, 1] },
      { id: 'ease-in', name: 'ease-in', category: 'css', bezier: [0.42, 0, 1, 1] },
      { id: 'ease-out', name: 'ease-out', category: 'css', bezier: [0, 0, 0.58, 1] },
      { id: 'ease-in-out', name: 'ease-in-out', category: 'css', bezier: [0.42, 0, 0.58, 1] },
      
      // Sine (3)
      { id: 'easeInSine', name: 'easeInSine', category: 'sine', bezier: [0.47, 0, 0.745, 0.715] },
      { id: 'easeOutSine', name: 'easeOutSine', category: 'sine', bezier: [0.39, 0.575, 0.565, 1] },
      { id: 'easeInOutSine', name: 'easeInOutSine', category: 'sine', bezier: [0.445, 0.05, 0.55, 0.95] },
      
      // Quad (3)
      { id: 'easeInQuad', name: 'easeInQuad', category: 'quad', bezier: [0.55, 0.085, 0.68, 0.53] },
      { id: 'easeOutQuad', name: 'easeOutQuad', category: 'quad', bezier: [0.25, 0.46, 0.45, 0.94] },
      { id: 'easeInOutQuad', name: 'easeInOutQuad', category: 'quad', bezier: [0.455, 0.03, 0.515, 0.955] },
      
      // Cubic (3)
      { id: 'easeInCubic', name: 'easeInCubic', category: 'cubic', bezier: [0.55, 0.055, 0.675, 0.19] },
      { id: 'easeOutCubic', name: 'easeOutCubic', category: 'cubic', bezier: [0.215, 0.61, 0.355, 1] },
      { id: 'easeInOutCubic', name: 'easeInOutCubic', category: 'cubic', bezier: [0.645, 0.045, 0.355, 1] },
      
      // Quart (3)
      { id: 'easeInQuart', name: 'easeInQuart', category: 'quart', bezier: [0.895, 0.03, 0.685, 0.22] },
      { id: 'easeOutQuart', name: 'easeOutQuart', category: 'quart', bezier: [0.165, 0.84, 0.44, 1] },
      { id: 'easeInOutQuart', name: 'easeInOutQuart', category: 'quart', bezier: [0.77, 0, 0.175, 1] },
      
      // Quint (3)
      { id: 'easeInQuint', name: 'easeInQuint', category: 'quint', bezier: [0.755, 0.05, 0.855, 0.06] },
      { id: 'easeOutQuint', name: 'easeOutQuint', category: 'quint', bezier: [0.23, 1, 0.32, 1] },
      { id: 'easeInOutQuint', name: 'easeInOutQuint', category: 'quint', bezier: [0.86, 0, 0.07, 1] },
      
      // Expo (3)
      { id: 'easeInExpo', name: 'easeInExpo', category: 'expo', bezier: [0.95, 0.05, 0.795, 0.035] },
      { id: 'easeOutExpo', name: 'easeOutExpo', category: 'expo', bezier: [0.19, 1, 0.22, 1] },
      { id: 'easeInOutExpo', name: 'easeInOutExpo', category: 'expo', bezier: [1, 0, 0, 1] },
      
      // Circ (3)
      { id: 'easeInCirc', name: 'easeInCirc', category: 'circ', bezier: [0.6, 0.04, 0.98, 0.335] },
      { id: 'easeOutCirc', name: 'easeOutCirc', category: 'circ', bezier: [0.075, 0.82, 0.165, 1] },
      { id: 'easeInOutCirc', name: 'easeInOutCirc', category: 'circ', bezier: [0.785, 0.135, 0.15, 0.86] },
      
      // Back (3)
      { id: 'easeInBack', name: 'easeInBack', category: 'back', bezier: [0.6, -0.28, 0.735, 0.045] },
      { id: 'easeOutBack', name: 'easeOutBack', category: 'back', bezier: [0.175, 0.885, 0.32, 1.275] },
      { id: 'easeInOutBack', name: 'easeInOutBack', category: 'back', bezier: [0.68, -0.55, 0.265, 1.55] },
      
      // Elastic (3)
      { id: 'easeInElastic', name: 'easeInElastic', category: 'elastic', bezier: [0.5, -0.5, 0.75, -0.5], jsOnly: true },
      { id: 'easeOutElastic', name: 'easeOutElastic', category: 'elastic', bezier: [0.25, 1.5, 0.5, 1.5], jsOnly: true },
      { id: 'easeInOutElastic', name: 'easeInOutElastic', category: 'elastic', bezier: [0.5, -0.25, 0.5, 1.25], jsOnly: true },
      
      // Bounce (3)
      { id: 'easeInBounce', name: 'easeInBounce', category: 'bounce', bezier: [0.6, -0.28, 0.74, 0.05], jsOnly: true },
      { id: 'easeOutBounce', name: 'easeOutBounce', category: 'bounce', bezier: [0.28, 0.84, 0.42, 1], jsOnly: true },
      { id: 'easeInOutBounce', name: 'easeInOutBounce', category: 'bounce', bezier: [0.68, -0.55, 0.27, 1.55], jsOnly: true }
    ];

    // ==================== STATE ====================
    var state = {
      bezier: [0.25, 0.1, 0.25, 1],
      currentPreset: 'ease',
      duration: 1,
      activeCategory: 'all',
      activeExportFormat: 'css',
      isLooping: false,
      loopInterval: null
    };

    // ==================== DOM ELEMENTS ====================
    var canvas = document.getElementById('easingCanvas');
    var ctx = canvas.getContext('2d');
    var presetList = document.getElementById('presetList');
    var presetCount = document.getElementById('presetCount');
    var canvasInfo = document.getElementById('canvasInfo');
    var previewBall = document.getElementById('previewBall');
    var compCurrent = document.getElementById('compCurrent');
    var codeOutput = document.getElementById('codeOutput');
    var statusEl = document.getElementById('status');
    var durationRange = document.getElementById('durationRange');
    var durationValue = document.getElementById('durationValue');
    var inputX1 = document.getElementById('inputX1');
    var inputY1 = document.getElementById('inputY1');
    var inputX2 = document.getElementById('inputX2');
    var inputY2 = document.getElementById('inputY2');

    // ==================== CANVAS RENDERING ====================
    var padding = 30;
    var size = 200;
    var dragging = null;

    function toCanvasX(x) { return padding + x * size; }
    function toCanvasY(y) { return padding + (1 - y) * size; }
    function fromCanvasX(cx) { return (cx - padding) / size; }
    function fromCanvasY(cy) { return 1 - (cy - padding) / size; }

    function drawCurve() {
      var isDark = document.documentElement.getAttribute('data-theme') !== 'light';
      var x1 = state.bezier[0], y1 = state.bezier[1], x2 = state.bezier[2], y2 = state.bezier[3];
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Grid
      ctx.strokeStyle = isDark ? '#2a2a3a' : '#e0e0e8';
      ctx.lineWidth = 1;
      for (var i = 0; i <= 4; i++) {
        var pos = padding + (size / 4) * i;
        ctx.beginPath();
        ctx.moveTo(pos, padding);
        ctx.lineTo(pos, padding + size);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(padding, pos);
        ctx.lineTo(padding + size, pos);
        ctx.stroke();
      }

      // Border
      ctx.strokeStyle = isDark ? '#4a4a5a' : '#b0b0c0';
      ctx.lineWidth = 2;
      ctx.strokeRect(padding, padding, size, size);

      // Linear reference (diagonal)
      ctx.strokeStyle = isDark ? '#4a4a5a' : '#c0c0d0';
      ctx.lineWidth = 1;
      ctx.setLineDash([5, 5]);
      ctx.beginPath();
      ctx.moveTo(toCanvasX(0), toCanvasY(0));
      ctx.lineTo(toCanvasX(1), toCanvasY(1));
      ctx.stroke();
      ctx.setLineDash([]);

      // Control lines
      ctx.strokeStyle = isDark ? '#6a6a7a' : '#a0a0b0';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(toCanvasX(0), toCanvasY(0));
      ctx.lineTo(toCanvasX(x1), toCanvasY(y1));
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(toCanvasX(1), toCanvasY(1));
      ctx.lineTo(toCanvasX(x2), toCanvasY(y2));
      ctx.stroke();

      // Bezier curve
      ctx.strokeStyle = '#00f5d4';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(toCanvasX(0), toCanvasY(0));
      ctx.bezierCurveTo(
        toCanvasX(x1), toCanvasY(y1),
        toCanvasX(x2), toCanvasY(y2),
        toCanvasX(1), toCanvasY(1)
      );
      ctx.stroke();

      // Start/End points
      ctx.fillStyle = isDark ? '#5a5a6a' : '#8080a0';
      ctx.beginPath();
      ctx.arc(toCanvasX(0), toCanvasY(0), 5, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(toCanvasX(1), toCanvasY(1), 5, 0, Math.PI * 2);
      ctx.fill();

      // Control points
      ctx.fillStyle = '#f72585';
      ctx.beginPath();
      ctx.arc(toCanvasX(x1), toCanvasY(y1), 8, 0, Math.PI * 2);
      ctx.fill();

      ctx.fillStyle = '#00f5d4';
      ctx.beginPath();
      ctx.arc(toCanvasX(x2), toCanvasY(y2), 8, 0, Math.PI * 2);
      ctx.fill();
    }

    function drawMiniCurve(miniCanvas, bezier) {
      var mctx = miniCanvas.getContext('2d');
      var x1 = bezier[0], y1 = bezier[1], x2 = bezier[2], y2 = bezier[3];
      var w = miniCanvas.width;
      var h = miniCanvas.height;
      var p = 2;
      var s = w - p * 2;

      mctx.clearRect(0, 0, w, h);
      
      var isDark = document.documentElement.getAttribute('data-theme') !== 'light';
      mctx.strokeStyle = isDark ? '#00f5d4' : '#00c4a8';
      mctx.lineWidth = 1.5;
      mctx.beginPath();
      mctx.moveTo(p, h - p);
      mctx.bezierCurveTo(
        p + x1 * s, h - p - y1 * (h - p * 2),
        p + x2 * s, h - p - y2 * (h - p * 2),
        w - p, p
      );
      mctx.stroke();
    }

    // ==================== PRESET RENDERING ====================
    function renderPresets() {
      var category = state.activeCategory;
      var filtered = category === 'all' 
        ? EASING_PRESETS 
        : EASING_PRESETS.filter(function(p) { return p.category === category; });
      
      presetCount.textContent = filtered.length;
      
      // Clear list safely
      while (presetList.firstChild) {
        presetList.removeChild(presetList.firstChild);
      }

      filtered.forEach(function(preset) {
        var btn = document.createElement('button');
        btn.className = 'preset-item' + (state.currentPreset === preset.id ? ' active' : '');
        btn.dataset.id = preset.id;
        
        var miniCanvas = document.createElement('canvas');
        miniCanvas.className = 'preset-mini-curve';
        miniCanvas.width = 32;
        miniCanvas.height = 20;
        
        var nameSpan = document.createElement('span');
        nameSpan.textContent = preset.name;
        
        btn.appendChild(miniCanvas);
        btn.appendChild(nameSpan);
        
        btn.addEventListener('click', function() { selectPreset(preset.id); });
        presetList.appendChild(btn);
        
        drawMiniCurve(miniCanvas, preset.bezier);
      });
    }

    function selectPreset(presetId) {
      var preset = EASING_PRESETS.find(function(p) { return p.id === presetId; });
      if (!preset) return;
      
      state.currentPreset = presetId;
      state.bezier = preset.bezier.slice();
      
      updateInputs();
      drawCurve();
      updateCanvasInfo();
      updateExport();
      updatePresetButtons();
      updateAnimationTiming();
      saveToUrl();
    }

    function updatePresetButtons() {
      document.querySelectorAll('.preset-item').forEach(function(btn) {
        btn.classList.toggle('active', btn.dataset.id === state.currentPreset);
      });
    }

    // ==================== INPUT HANDLING ====================
    function updateInputs() {
      inputX1.value = state.bezier[0].toFixed(2);
      inputY1.value = state.bezier[1].toFixed(2);
      inputX2.value = state.bezier[2].toFixed(2);
      inputY2.value = state.bezier[3].toFixed(2);
    }

    function handleInputChange() {
      var x1 = Math.max(0, Math.min(1, parseFloat(inputX1.value) || 0));
      var y1 = Math.max(-2, Math.min(2, parseFloat(inputY1.value) || 0));
      var x2 = Math.max(0, Math.min(1, parseFloat(inputX2.value) || 0));
      var y2 = Math.max(-2, Math.min(2, parseFloat(inputY2.value) || 0));
      
      state.bezier = [x1, y1, x2, y2];
      state.currentPreset = findMatchingPreset() || 'custom';
      
      drawCurve();
      updateCanvasInfo();
      updateExport();
      updatePresetButtons();
      updateAnimationTiming();
      saveToUrl();
    }

    function findMatchingPreset() {
      var b = state.bezier;
      var found = EASING_PRESETS.find(function(p) {
        return Math.abs(p.bezier[0] - b[0]) < 0.01 &&
               Math.abs(p.bezier[1] - b[1]) < 0.01 &&
               Math.abs(p.bezier[2] - b[2]) < 0.01 &&
               Math.abs(p.bezier[3] - b[3]) < 0.01;
      });
      return found ? found.id : null;
    }

    [inputX1, inputY1, inputX2, inputY2].forEach(function(input) {
      input.addEventListener('input', handleInputChange);
    });

    // ==================== CANVAS DRAG ====================
    function getMousePos(e) {
      var rect = canvas.getBoundingClientRect();
      return { x: e.clientX - rect.left, y: e.clientY - rect.top };
    }

    function hitTest(pos, pointX, pointY) {
      var px = toCanvasX(pointX);
      var py = toCanvasY(pointY);
      var dx = pos.x - px;
      var dy = pos.y - py;
      return Math.sqrt(dx * dx + dy * dy) < 15;
    }

    canvas.addEventListener('mousedown', function(e) {
      var pos = getMousePos(e);
      if (hitTest(pos, state.bezier[0], state.bezier[1])) dragging = 'p1';
      else if (hitTest(pos, state.bezier[2], state.bezier[3])) dragging = 'p2';
    });

    canvas.addEventListener('mousemove', function(e) {
      if (!dragging) return;
      var pos = getMousePos(e);
      var x = Math.max(0, Math.min(1, fromCanvasX(pos.x)));
      var y = Math.max(-0.5, Math.min(1.5, fromCanvasY(pos.y)));
      
      if (dragging === 'p1') {
        state.bezier[0] = x;
        state.bezier[1] = y;
      } else {
        state.bezier[2] = x;
        state.bezier[3] = y;
      }
      
      state.currentPreset = findMatchingPreset() || 'custom';
      drawCurve();
      updateInputs();
      updateCanvasInfo();
      updateExport();
      updatePresetButtons();
      updateAnimationTiming();
    });

    canvas.addEventListener('mouseup', function() { dragging = null; saveToUrl(); });
    canvas.addEventListener('mouseleave', function() { dragging = null; saveToUrl(); });

    // Touch support
    canvas.addEventListener('touchstart', function(e) {
      e.preventDefault();
      var touch = e.touches[0];
      var pos = { x: touch.clientX - canvas.getBoundingClientRect().left, y: touch.clientY - canvas.getBoundingClientRect().top };
      if (hitTest(pos, state.bezier[0], state.bezier[1])) dragging = 'p1';
      else if (hitTest(pos, state.bezier[2], state.bezier[3])) dragging = 'p2';
    });

    canvas.addEventListener('touchmove', function(e) {
      e.preventDefault();
      if (!dragging) return;
      var touch = e.touches[0];
      var pos = { x: touch.clientX - canvas.getBoundingClientRect().left, y: touch.clientY - canvas.getBoundingClientRect().top };
      var x = Math.max(0, Math.min(1, fromCanvasX(pos.x)));
      var y = Math.max(-0.5, Math.min(1.5, fromCanvasY(pos.y)));
      if (dragging === 'p1') { state.bezier[0] = x; state.bezier[1] = y; }
      else { state.bezier[2] = x; state.bezier[3] = y; }
      state.currentPreset = findMatchingPreset() || 'custom';
      drawCurve(); updateInputs(); updateCanvasInfo(); updateExport(); updatePresetButtons(); updateAnimationTiming();
    });

    canvas.addEventListener('touchend', function() { dragging = null; saveToUrl(); });

    // ==================== ANIMATION ====================
    function updateCanvasInfo() {
      var b = state.bezier;
      canvasInfo.textContent = 'cubic-bezier(' + b[0].toFixed(2) + ', ' + b[1].toFixed(2) + ', ' + b[2].toFixed(2) + ', ' + b[3].toFixed(2) + ')';
    }

    function updateAnimationTiming() {
      var b = state.bezier;
      var timing = 'cubic-bezier(' + b[0] + ', ' + b[1] + ', ' + b[2] + ', ' + b[3] + ')';
      previewBall.style.transitionTimingFunction = timing;
      previewBall.style.transitionDuration = state.duration + 's';
      compCurrent.style.transitionTimingFunction = timing;
      compCurrent.style.transitionDuration = state.duration + 's';
    }

    function playAnimation() {
      var balls = [previewBall, compCurrent].concat(Array.from(document.querySelectorAll('.comparison-ball[data-easing]')));
      
      balls.forEach(function(ball) {
        ball.classList.remove('animate');
        ball.style.transitionDuration = state.duration + 's';
      });
      
      void previewBall.offsetWidth; // Force reflow
      
      balls.forEach(function(ball) { ball.classList.add('animate'); });
      
      setTimeout(function() {
        balls.forEach(function(ball) { ball.classList.remove('animate'); });
      }, state.duration * 1000 + 100);
    }

    document.getElementById('btnPlay').addEventListener('click', function() {
      if (state.isLooping) stopLoop();
      playAnimation();
    });

    document.getElementById('btnLoop').addEventListener('click', function() {
      if (state.isLooping) {
        stopLoop();
        this.textContent = 'üîÑ Âæ™ÁéØ';
      } else {
        startLoop();
        this.textContent = '‚èπ ÂÅúÊ≠¢';
      }
    });

    function startLoop() {
      state.isLooping = true;
      playAnimation();
      state.loopInterval = setInterval(playAnimation, state.duration * 1000 + 500);
    }

    function stopLoop() {
      state.isLooping = false;
      clearInterval(state.loopInterval);
    }

    durationRange.addEventListener('input', function() {
      state.duration = parseFloat(durationRange.value);
      durationValue.textContent = state.duration + 's';
      updateAnimationTiming();
      
      document.querySelectorAll('.comparison-ball[data-easing]').forEach(function(ball) {
        ball.style.transitionDuration = state.duration + 's';
      });
      
      // Â¶ÇÊûúÊ≠£Âú®Âæ™ÁéØÔºåÈáçÂêØ interval ‰ª•‰ΩøÁî®Êñ∞Êó∂Èïø
      if (state.isLooping) {
        clearInterval(state.loopInterval);
        state.loopInterval = setInterval(playAnimation, state.duration * 1000 + 500);
      }
    });

    // ==================== EXPORT FORMATS ====================
    var EXPORT_FORMATTERS = {
      css: function(bezier, name) {
        var value = 'cubic-bezier(' + bezier[0] + ', ' + bezier[1] + ', ' + bezier[2] + ', ' + bezier[3] + ')';
        return '/* ' + (name || 'Custom Easing') + ' */\n' +
          'transition-timing-function: ' + value + ';\n' +
          'animation-timing-function: ' + value + ';\n\n' +
          '/* ‰ΩøÁî®Á§∫‰æã */\n' +
          '.element {\n' +
          '  transition: all ' + state.duration + 's ' + value + ';\n' +
          '}';
      },
      
      cssVar: function(bezier, name) {
        var varName = (name || 'custom').replace(/[^a-zA-Z0-9]/g, '-').toLowerCase();
        return ':root {\n' +
          '  --easing-' + varName + ': cubic-bezier(' + bezier[0] + ', ' + bezier[1] + ', ' + bezier[2] + ', ' + bezier[3] + ');\n' +
          '  --duration: ' + state.duration + 's;\n' +
          '}\n\n' +
          '.element {\n' +
          '  transition: all var(--duration) var(--easing-' + varName + ');\n' +
          '}';
      },
      
      js: function(bezier, name) {
        var fnName = (name || 'customEasing').replace(/[^a-zA-Z0-9]/g, '');
        return '// ' + (name || 'Custom Easing') + ' - Cubic Bezier\n' +
          '// ÊéßÂà∂ÁÇπ: (' + bezier[0] + ', ' + bezier[1] + '), (' + bezier[2] + ', ' + bezier[3] + ')\n\n' +
          'function ' + fnName + '(t) {\n' +
          '  // ÁÆÄÂåñÁöÑ cubic-bezier ÂÆûÁé∞\n' +
          '  var x1 = ' + bezier[0] + ', y1 = ' + bezier[1] + ', x2 = ' + bezier[2] + ', y2 = ' + bezier[3] + ';\n\n' +
          '  // ÁâõÈ°øËø≠‰ª£Ê≥ïÊ±ÇËß£ t -> x\n' +
          '  var t2 = t;\n' +
          '  for (var i = 0; i < 8; i++) {\n' +
          '    var x = bezierX(t2) - t;\n' +
          '    if (Math.abs(x) < 0.001) break;\n' +
          '    t2 -= x / bezierXDerivative(t2);\n' +
          '  }\n' +
          '  return bezierY(t2);\n\n' +
          '  function bezierX(t) {\n' +
          '    return 3 * (1-t) * (1-t) * t * x1 + 3 * (1-t) * t * t * x2 + t * t * t;\n' +
          '  }\n' +
          '  function bezierY(t) {\n' +
          '    return 3 * (1-t) * (1-t) * t * y1 + 3 * (1-t) * t * t * y2 + t * t * t;\n' +
          '  }\n' +
          '  function bezierXDerivative(t) {\n' +
          '    return 3 * (1-t) * (1-t) * x1 + 6 * (1-t) * t * (x2 - x1) + 3 * t * t * (1 - x2);\n' +
          '  }\n' +
          '}\n\n' +
          '// ‰ΩøÁî®Á§∫‰æã: requestAnimationFrame Âä®Áîª\n' +
          'function animate(element, duration) {\n' +
          '  duration = duration || ' + (state.duration * 1000) + ';\n' +
          '  var start = performance.now();\n' +
          '  function frame(now) {\n' +
          '    var t = Math.min((now - start) / duration, 1);\n' +
          '    var progress = ' + fnName + '(t);\n' +
          '    element.style.transform = "translateX(" + (progress * 100) + "%)";\n' +
          '    if (t < 1) requestAnimationFrame(frame);\n' +
          '  }\n' +
          '  requestAnimationFrame(frame);\n' +
          '}';
      },
      
      animejs: function(bezier, name) {
        return '// Anime.js ÈÖçÁΩÆ\n' +
          '// ' + (name || 'Custom Easing') + '\n\n' +
          'import anime from \'animejs\';\n\n' +
          'anime({\n' +
          '  targets: \'.element\',\n' +
          '  translateX: 250,\n' +
          '  duration: ' + (state.duration * 1000) + ',\n' +
          '  easing: \'cubicBezier(' + bezier[0] + ', ' + bezier[1] + ', ' + bezier[2] + ', ' + bezier[3] + ')\'\n' +
          '});\n\n' +
          '// Êàñ‰ΩøÁî®ÂÜÖÁΩÆÁºìÂä®ÂêçÁß∞ (Â¶ÇÊûúÂåπÈÖç)\n' +
          '// easing: \'' + (name || 'easeOutQuad') + '\'\n\n' +
          '// ÊâπÈáèÂä®Áîª\n' +
          'anime({\n' +
          '  targets: \'.elements\',\n' +
          '  translateX: 250,\n' +
          '  duration: ' + (state.duration * 1000) + ',\n' +
          '  delay: anime.stagger(100),\n' +
          '  easing: \'cubicBezier(' + bezier[0] + ', ' + bezier[1] + ', ' + bezier[2] + ', ' + bezier[3] + ')\'\n' +
          '});';
      },
      
      gsap: function(bezier, name) {
        var easeName = (name || 'customEase').replace(/[^a-zA-Z0-9]/g, '');
        return '// GSAP ÈÖçÁΩÆ\n' +
          '// ' + (name || 'Custom Easing') + '\n\n' +
          'import { gsap } from \'gsap\';\n' +
          'import { CustomEase } from \'gsap/CustomEase\';\n\n' +
          'gsap.registerPlugin(CustomEase);\n\n' +
          '// ÂàõÂª∫Ëá™ÂÆö‰πâÁºìÂä®\n' +
          'CustomEase.create(\'' + easeName + '\', \n' +
          '  \'M0,0 C' + bezier[0] + ',' + bezier[1] + ' ' + bezier[2] + ',' + bezier[3] + ' 1,1\');\n\n' +
          '// ‰ΩøÁî®Ëá™ÂÆö‰πâÁºìÂä®\n' +
          'gsap.to(\'.element\', {\n' +
          '  x: 250,\n' +
          '  duration: ' + state.duration + ',\n' +
          '  ease: \'' + easeName + '\'\n' +
          '});\n\n' +
          '// ÊàñÁõ¥Êé•‰ΩøÁî® cubic-bezier Â≠óÁ¨¶‰∏≤ (ÈúÄË¶Å CustomEase Êèí‰ª∂)\n' +
          'gsap.to(\'.element\', {\n' +
          '  x: 250,\n' +
          '  duration: ' + state.duration + ',\n' +
          '  ease: \'M0,0 C' + bezier[0] + ',' + bezier[1] + ' ' + bezier[2] + ',' + bezier[3] + ' 1,1\'\n' +
          '});';
      }
    };

    function updateExport() {
      var formatter = EXPORT_FORMATTERS[state.activeExportFormat];
      var preset = EASING_PRESETS.find(function(p) { return p.id === state.currentPreset; });
      var name = preset ? preset.name : null;
      codeOutput.textContent = formatter(state.bezier, name);
    }

    document.getElementById('exportTabs').addEventListener('click', function(e) {
      if (!e.target.classList.contains('export-tab')) return;
      
      document.querySelectorAll('.export-tab').forEach(function(t) { t.classList.remove('active'); });
      e.target.classList.add('active');
      
      state.activeExportFormat = e.target.dataset.format;
      updateExport();
    });

    // ==================== ACTIONS ====================
    document.getElementById('btnCopy').addEventListener('click', async function() {
      try {
        await navigator.clipboard.writeText(codeOutput.textContent);
        showStatus('Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø', 'success');
      } catch (e) {
        showStatus('Â§çÂà∂Â§±Ë¥•', 'error');
      }
    });

    document.getElementById('btnShare').addEventListener('click', async function() {
      saveToUrl();
      try {
        await navigator.clipboard.writeText(location.href);
        showStatus('ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂', 'success');
      } catch (e) {
        showStatus('Â§çÂà∂Â§±Ë¥•', 'error');
      }
    });

    function showStatus(msg, type) {
      statusEl.textContent = msg;
      statusEl.className = 'status ' + (type || '');
      setTimeout(function() { statusEl.textContent = ''; }, 2000);
    }

    // ==================== CATEGORY TABS ====================
    document.getElementById('categoryTabs').addEventListener('click', function(e) {
      if (!e.target.classList.contains('category-tab')) return;
      
      document.querySelectorAll('.category-tab').forEach(function(t) { t.classList.remove('active'); });
      e.target.classList.add('active');
      
      state.activeCategory = e.target.dataset.category;
      renderPresets();
    });

    // ==================== COMPARISON ====================
    document.getElementById('comparisonToggle').addEventListener('change', function(e) {
      document.getElementById('comparisonGrid').style.display = e.target.checked ? 'grid' : 'none';
    });

    // ==================== URL STATE ====================
    function saveToUrl() {
      var data = {
        b: state.bezier,
        p: state.currentPreset,
        d: state.duration
      };
      try {
        history.replaceState(null, '', '#' + btoa(JSON.stringify(data)));
      } catch (e) {}
    }

    function loadFromUrl() {
      var hash = location.hash.slice(1);
      if (!hash) return false;
      try {
        var data = JSON.parse(atob(hash));
        if (data.b && Array.isArray(data.b) && data.b.length === 4) {
          // È™åËØÅÊâÄÊúâÂÄºÈÉΩÊòØÊúâÊïàÊï∞Â≠ó
          var isValid = data.b.every(function(v) {
            return typeof v === 'number' && isFinite(v);
          });
          if (!isValid) return false;
          
          // ÈôêÂà∂ËåÉÂõ¥: x ÂÄº [0,1], y ÂÄº [-2,2] (‰∏éËæìÂÖ•Ê°ÜÂíåÊãñÊãΩ‰∏ÄËá¥)
          state.bezier = [
            Math.max(0, Math.min(1, data.b[0])),
            Math.max(-2, Math.min(2, data.b[1])),
            Math.max(0, Math.min(1, data.b[2])),
            Math.max(-2, Math.min(2, data.b[3]))
          ];
          state.currentPreset = data.p || findMatchingPreset() || 'custom';
          state.duration = (typeof data.d === 'number' && isFinite(data.d) && data.d > 0) ? data.d : 1;
          return true;
        }
      } catch (e) {}
      return false;
    }

    // ==================== THEME ====================
    window.toggleTheme = function() {
      var html = document.documentElement;
      var btn = document.querySelector('.theme-toggle');
      var next = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      html.setAttribute('data-theme', next);
      btn.textContent = next === 'light' ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', next);
      drawCurve();
      renderPresets();
    };

    // ==================== INIT ====================
    (function init() {
      // Load theme
      var savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        document.documentElement.setAttribute('data-theme', savedTheme);
        document.querySelector('.theme-toggle').textContent = savedTheme === 'light' ? '‚òÄÔ∏è' : 'üåô';
      }
      
      // Load state from URL or use default
      if (!loadFromUrl()) {
        state.bezier = [0.25, 0.1, 0.25, 1];
        state.currentPreset = 'ease';
      }
      
      // Set duration
      durationRange.value = state.duration;
      durationValue.textContent = state.duration + 's';
      
      // Render
      renderPresets();
      updateInputs();
      drawCurve();
      updateCanvasInfo();
      updateExport();
      updateAnimationTiming();
    })();
  </script>
</body>
</html>
