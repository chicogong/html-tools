<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨ - WebUtils" />
    <meta name="keywords" content="debt-payoff,finance,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/finance/debt-payoff.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨ - WebUtils" />
    <meta property="og:description" content="å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/finance/debt-payoff.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨ - WebUtils" />
    <meta name="twitter:description" content="å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme="light"] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      :root {
        --bg: #0a0a0f;
        --card: #12121a;
        --border: #2a2a3a;
        --text: #fff;
        --text2: #888;
        --accent: #ef4444;
        --green: #10b981;
      }
      @media (prefers-color-scheme: light) {
        :root {
          --bg: #f5f5f5;
          --card: #fff;
          --border: #e0e0e0;
          --text: #333;
          --text2: #666;
        }
      }
      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        font-size: 16px;
        line-height: 1.6;
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
      }
      h1 {
        text-align: center;
        margin-bottom: 8px;
        font-size: 1.8rem;
      }
      .subtitle {
        text-align: center;
        color: var(--text2);
        margin-bottom: 24px;
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 20px;
      }
      .card-title {
        font-size: 1rem;
        color: var(--text2);
        margin-bottom: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .btn {
        padding: 8px 16px;
        border: 1px solid var(--border);
        border-radius: 6px;
        background: var(--bg);
        color: var(--text);
        cursor: pointer;
        font-size: 0.85rem;
      }
      .btn:hover {
        border-color: var(--accent);
      }
      .btn-primary {
        background: var(--accent);
        border-color: var(--accent);
        color: white;
      }
      .debt-item {
        background: var(--bg);
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 12px;
      }
      .debt-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }
      .debt-name {
        font-weight: 600;
      }
      .debt-fields {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
      }
      @media (max-width: 768px) {
        .debt-fields {
          grid-template-columns: 1fr;
        }
      }
      .field {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .field label {
        font-size: 0.8rem;
        color: var(--text2);
      }
      .field input {
        padding: 8px;
        border: 1px solid var(--border);
        border-radius: 4px;
        background: var(--card);
        color: var(--text);
        font-size: 0.9rem;
      }
      .summary-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
        margin-bottom: 20px;
      }
      @media (max-width: 768px) {
        .summary-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      .summary-item {
        background: var(--bg);
        padding: 16px;
        border-radius: 8px;
        text-align: center;
      }
      .summary-item .value {
        font-size: 1.3rem;
        font-weight: 700;
      }
      .summary-item .label {
        font-size: 0.8rem;
        color: var(--text2);
        margin-top: 4px;
      }
      .strategy-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 16px;
      }
      .strategy-tab {
        flex: 1;
        padding: 12px;
        border: 1px solid var(--border);
        border-radius: 8px;
        background: var(--bg);
        color: var(--text);
        cursor: pointer;
        text-align: center;
        font-size: 0.9rem;
      }
      .strategy-tab.active {
        background: var(--accent);
        border-color: var(--accent);
        color: white;
      }
      .timeline {
        margin-top: 16px;
      }
      .timeline-item {
        display: flex;
        gap: 16px;
        padding: 12px 0;
        border-bottom: 1px solid var(--border);
      }
      .timeline-item:last-child {
        border-bottom: none;
      }
      .timeline-month {
        min-width: 60px;
        font-weight: 600;
        color: var(--accent);
      }
      .timeline-content {
        flex: 1;
      }
      .timeline-debt {
        font-size: 0.9rem;
      }
      .timeline-amount {
        font-size: 0.85rem;
        color: var(--text2);
      }
      .paid-off {
        color: var(--green);
      }
      .remove-btn {
        background: none;
        border: none;
        color: var(--accent);
        cursor: pointer;
        font-size: 1.2rem;
      }
      .back-link {
        display: inline-block;
        margin-bottom: 16px;
        color: var(--accent);
        text-decoration: none;
        font-size: 0.9rem;
      }
      .back-link:hover {
        text-decoration: underline;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨
    </nav>
    <div class="container">
      <a href="../../index.html" class="back-link">â† è¿”å›</a>
      <h1>ğŸ’³ å€ºåŠ¡è¿˜æ¬¾è®¡ç®—å™¨</h1>
      <p class="subtitle">åˆ¶å®šå€ºåŠ¡è¿˜æ¬¾è®¡åˆ’ï¼Œæ¯”è¾ƒé›ªçƒæ³•ä¸é›ªå´©æ³•</p>

      <div class="summary-grid">
        <div class="summary-item">
          <div class="value" id="totalDebt">Â¥0</div>
          <div class="label">æ€»å€ºåŠ¡</div>
        </div>
        <div class="summary-item">
          <div class="value" id="totalInterest">Â¥0</div>
          <div class="label">é¢„è®¡æ€»åˆ©æ¯</div>
        </div>
        <div class="summary-item">
          <div class="value" id="monthsToPayoff">0</div>
          <div class="label">è¿˜æ¸…æœˆæ•°</div>
        </div>
        <div class="summary-item">
          <div class="value" id="payoffDate">-</div>
          <div class="label">é¢„è®¡è¿˜æ¸…æ—¥æœŸ</div>
        </div>
      </div>

      <div class="card">
        <div class="card-title">
          <span>å€ºåŠ¡åˆ—è¡¨</span>
          <button class="btn" onclick="addDebt()">+ æ·»åŠ å€ºåŠ¡</button>
        </div>
        <div id="debtList"></div>
      </div>

      <div class="card">
        <div class="card-title">æ¯æœˆå¯è¿˜æ¬¾é‡‘é¢</div>
        <div class="field" style="max-width: 300px">
          <label>æ¯æœˆè¿˜æ¬¾é¢„ç®— (å…ƒ)</label>
          <input type="number" id="monthlyBudget" value="5000" oninput="calculate()" />
        </div>
      </div>

      <div class="card">
        <div class="card-title">è¿˜æ¬¾ç­–ç•¥</div>
        <div class="strategy-tabs">
          <div
            class="strategy-tab active"
            data-strategy="avalanche"
            onclick="setStrategy('avalanche')"
          >
            <div style="font-weight: 600">é›ªå´©æ³•</div>
            <div style="font-size: 0.8rem; color: var(--text2)">å…ˆè¿˜é«˜åˆ©ç‡</div>
          </div>
          <div class="strategy-tab" data-strategy="snowball" onclick="setStrategy('snowball')">
            <div style="font-weight: 600">é›ªçƒæ³•</div>
            <div style="font-size: 0.8rem; color: var(--text2)">å…ˆè¿˜å°é¢åº¦</div>
          </div>
        </div>
        <div
          style="
            background: var(--bg);
            padding: 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--text2);
          "
        >
          <strong>é›ªå´©æ³•ï¼š</strong>
          ä¼˜å…ˆè¿˜åˆ©ç‡æœ€é«˜çš„å€ºåŠ¡ï¼Œå¯ä»¥èŠ‚çœæœ€å¤šåˆ©æ¯ã€‚
          <br />
          <strong>é›ªçƒæ³•ï¼š</strong>
          ä¼˜å…ˆè¿˜ä½™é¢æœ€å°çš„å€ºåŠ¡ï¼Œå¿«é€Ÿæ¶ˆé™¤å€ºåŠ¡æ•°é‡ï¼Œå¿ƒç†æ¿€åŠ±æ›´å¼ºã€‚
        </div>
      </div>

      <div class="card">
        <div class="card-title">è¿˜æ¬¾æ—¶é—´çº¿</div>
        <div class="timeline" id="timeline"></div>
      </div>
    </div>

    <script>
      let debts = [
        { id: 1, name: "ä¿¡ç”¨å¡A", balance: 15000, rate: 18.25, minPayment: 500 },
        { id: 2, name: "ä¿¡ç”¨å¡B", balance: 8000, rate: 15.6, minPayment: 300 },
        { id: 3, name: "æ¶ˆè´¹è´·", balance: 30000, rate: 9.0, minPayment: 1000 }
      ];
      let nextId = 4;
      let strategy = "avalanche";

      function renderDebts() {
        const container = document.getElementById("debtList");
        container.textContent = "";

        debts.forEach((debt) => {
          const div = document.createElement("div");
          div.className = "debt-item";

          const header = document.createElement("div");
          header.className = "debt-header";

          const nameInput = document.createElement("input");
          nameInput.type = "text";
          nameInput.value = debt.name;
          nameInput.style.cssText =
            "background: transparent; border: none; color: var(--text); font-weight: 600; font-size: 1rem;";
          nameInput.oninput = function () {
            debt.name = this.value;
            calculate();
          };

          const removeBtn = document.createElement("button");
          removeBtn.className = "remove-btn";
          removeBtn.textContent = "Ã—";
          removeBtn.onclick = function () {
            removeDebt(debt.id);
          };

          header.appendChild(nameInput);
          header.appendChild(removeBtn);

          const fields = document.createElement("div");
          fields.className = "debt-fields";

          const balanceField = createField("ä½™é¢ (å…ƒ)", debt.balance, function (v) {
            debt.balance = v;
            calculate();
          });
          const rateField = createField("å¹´åˆ©ç‡ (%)", debt.rate, function (v) {
            debt.rate = v;
            calculate();
          });
          const minField = createField("æœ€ä½è¿˜æ¬¾ (å…ƒ)", debt.minPayment, function (v) {
            debt.minPayment = v;
            calculate();
          });

          fields.appendChild(balanceField);
          fields.appendChild(rateField);
          fields.appendChild(minField);

          div.appendChild(header);
          div.appendChild(fields);
          container.appendChild(div);
        });
      }

      function createField(label, value, onChange) {
        const div = document.createElement("div");
        div.className = "field";

        const labelEl = document.createElement("label");
        labelEl.textContent = label;

        const input = document.createElement("input");
        input.type = "number";
        input.value = value;
        input.oninput = function () {
          onChange(parseFloat(this.value) || 0);
        };

        div.appendChild(labelEl);
        div.appendChild(input);
        return div;
      }

      function addDebt() {
        debts.push({ id: nextId++, name: "æ–°å€ºåŠ¡", balance: 10000, rate: 10, minPayment: 500 });
        renderDebts();
        calculate();
      }

      function removeDebt(id) {
        debts = debts.filter((d) => d.id !== id);
        renderDebts();
        calculate();
      }

      function setStrategy(s) {
        strategy = s;
        document.querySelectorAll(".strategy-tab").forEach((t) => t.classList.remove("active"));
        document.querySelector('[data-strategy="' + s + '"]').classList.add("active");
        calculate();
      }

      function calculate() {
        const monthlyBudget = parseFloat(document.getElementById("monthlyBudget").value) || 0;

        // å¤åˆ¶å€ºåŠ¡æ•°æ®è¿›è¡Œæ¨¡æ‹Ÿ
        let simDebts = debts.map((d) => ({ ...d }));

        // æŒ‰ç­–ç•¥æ’åº
        if (strategy === "avalanche") {
          simDebts.sort((a, b) => b.rate - a.rate); // é«˜åˆ©ç‡ä¼˜å…ˆ
        } else {
          simDebts.sort((a, b) => a.balance - b.balance); // å°ä½™é¢ä¼˜å…ˆ
        }

        const totalDebt = debts.reduce((sum, d) => sum + d.balance, 0);
        let totalInterest = 0;
        let month = 0;
        const timeline = [];

        while (simDebts.some((d) => d.balance > 0) && month < 360) {
          month++;
          let remaining = monthlyBudget;
          const monthEvents = [];

          // å…ˆä»˜æœ€ä½è¿˜æ¬¾
          simDebts.forEach((d) => {
            if (d.balance > 0) {
              const monthlyInterest = d.balance * (d.rate / 100 / 12);
              totalInterest += monthlyInterest;
              d.balance += monthlyInterest;

              const payment = Math.min(d.minPayment, d.balance, remaining);
              d.balance -= payment;
              remaining -= payment;
            }
          });

          // å‰©ä½™é¢„ç®—ç”¨äºä¼˜å…ˆå€ºåŠ¡
          for (const d of simDebts) {
            if (d.balance > 0 && remaining > 0) {
              const extra = Math.min(d.balance, remaining);
              d.balance -= extra;
              remaining -= extra;

              if (d.balance <= 0.01) {
                d.balance = 0;
                monthEvents.push({ name: d.name, type: "paid" });
              }
            }
          }

          if (monthEvents.length > 0) {
            timeline.push({ month, events: monthEvents });
          }
        }

        const fmt = (n) =>
          "Â¥" + n.toLocaleString("zh-CN", { minimumFractionDigits: 0, maximumFractionDigits: 0 });

        document.getElementById("totalDebt").textContent = fmt(totalDebt);
        document.getElementById("totalInterest").textContent = fmt(totalInterest);
        document.getElementById("monthsToPayoff").textContent = month + "ä¸ªæœˆ";

        const payoffDate = new Date();
        payoffDate.setMonth(payoffDate.getMonth() + month);
        document.getElementById("payoffDate").textContent =
          payoffDate.getFullYear() + "å¹´" + (payoffDate.getMonth() + 1) + "æœˆ";

        // æ¸²æŸ“æ—¶é—´çº¿
        const timelineContainer = document.getElementById("timeline");
        timelineContainer.textContent = "";

        if (timeline.length === 0) {
          const div = document.createElement("div");
          div.style.cssText = "text-align: center; color: var(--text2); padding: 20px;";
          div.textContent = "æš‚æ— è¿˜æ¬¾è®¡åˆ’";
          timelineContainer.appendChild(div);
        } else {
          timeline.forEach((item) => {
            const div = document.createElement("div");
            div.className = "timeline-item";

            const monthDiv = document.createElement("div");
            monthDiv.className = "timeline-month";
            monthDiv.textContent = "ç¬¬" + item.month + "æœˆ";

            const contentDiv = document.createElement("div");
            contentDiv.className = "timeline-content";

            item.events.forEach((event) => {
              const eventDiv = document.createElement("div");
              eventDiv.className = "timeline-debt paid-off";
              eventDiv.textContent = "âœ“ " + event.name + " è¿˜æ¸…ï¼";
              contentDiv.appendChild(eventDiv);
            });

            div.appendChild(monthDiv);
            div.appendChild(contentDiv);
            timelineContainer.appendChild(div);
          });
        }
      }

      renderDebts();
      calculate();

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "light" ? "dark" : "light";
        html.setAttribute("data-theme", newTheme);
        document.getElementById("theme-icon").textContent = newTheme === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", newTheme);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem("theme") || "dark";
      if (savedTheme === "light") {
        document.documentElement.setAttribute("data-theme", "light");
        document.getElementById("theme-icon").textContent = "â˜€ï¸";
      }
    </script>
  </body>
</html>
