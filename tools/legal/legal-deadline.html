<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>æ³•å¾‹æ—¶é™è®¡ç®—å™¨ - WebUtils</title>
    <meta name="description" content="è®¡ç®—è¯‰è®¼æ—¶æ•ˆã€ä¸Šè¯‰æœŸé™ã€ç­”è¾©æœŸé™ç­‰æ³•å¾‹æ—¶é™" />
    <meta name="keywords" content="æ³•å¾‹æ—¶é™ è¯‰è®¼æ—¶æ•ˆ ä¸Šè¯‰æœŸé™ ç­”è¾©æœŸ è®¡ç®—å™¨" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <meta property="og:title" content="æ³•å¾‹æ—¶é™è®¡ç®—å™¨ - WebUtils" />
    <meta property="og:description" content="è®¡ç®—è¯‰è®¼æ—¶æ•ˆã€ä¸Šè¯‰æœŸé™ã€ç­”è¾©æœŸé™ç­‰æ³•å¾‹æ—¶é™" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="æ³•å¾‹æ—¶é™è®¡ç®—å™¨ - WebUtils" />
    <meta name="twitter:description" content="è®¡ç®—è¯‰è®¼æ—¶æ•ˆã€ä¸Šè¯‰æœŸé™ã€ç­”è¾©æœŸé™ç­‰æ³•å¾‹æ—¶é™" />

    <style>
      :root {
        --bg: #f8f9fa;
        --card-bg: #fff;
        --text: #212529;
        --color-text-muted: #6c757d;
        --border: #dee2e6;
        --primary: #6366f1;
        --primary-hover: #4f46e5;
        --success: #198754;
        --warning: #ffc107;
        --danger: #dc3545;
        --shadow: 0 2px 8px rgb(0, 0, 0, 0.08);
        --radius: 8px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}

      [data-theme="dark"] {
        --bg: #0a0a0f;
        --card-bg: #1a1a24;
        --text: #e8e8ed;
        --color-text-muted: #9898a4;
        --border: #2a2a36;
        --primary: #818cf8;
        --primary-hover: #6366f1;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --shadow: 0 2px 8px rgb(0, 0, 0, 0.3);
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family:
          system-ui,
          -apple-system,
          "Segoe UI",
          Roboto,
          sans-serif;
        background: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 24px;
        min-height: 100vh;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
      }

      .back-link {
        display: inline-block;
        margin-bottom: 16px;
        color: var(--primary);
        text-decoration: none;
        font-size: 0.9rem;
      }

      .back-link:hover {
        text-decoration: underline;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border);
        background: var(--card-bg);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      h1 {
        font-size: 1.75rem;
        margin: 0 0 8px;
      }

      .desc {
        color: var(--color-text-muted);
        margin: 0 0 24px;
        font-size: 0.95rem;
      }

      .card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 20px;
        box-shadow: var(--shadow);
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 16px;
      }

      .form-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
        font-size: 0.9rem;
      }

      .form-group input,
      .form-group select {
        width: 100%;
        padding: 10px 12px;
        font-size: 0.95rem;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        background: var(--card-bg);
        color: var(--text);
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgb(99, 102, 241, 0.15);
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      @media (max-width: 640px) {
        .form-row {
          grid-template-columns: 1fr;
        }
      }

      .btn-row {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-top: 20px;
      }

      button {
        padding: 10px 20px;
        font-size: 0.95rem;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        background: var(--card-bg);
        color: var(--text);
        cursor: pointer;
        transition: all 0.2s;
      }

      button:hover {
        border-color: var(--primary);
        color: var(--primary);
      }

      button.primary {
        background: var(--primary);
        border-color: var(--primary);
        color: #fff;
      }

      button.primary:hover {
        background: var(--primary-hover);
        border-color: var(--primary-hover);
        color: #fff;
      }

      .result-card {
        background: var(--bg);
        border-radius: var(--radius);
        padding: 20px;
        margin-top: 20px;
        text-align: center;
      }

      .result-label {
        font-size: 0.9rem;
        color: var(--color-text-muted);
        margin-bottom: 8px;
      }

      .result-date {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 8px;
      }

      .result-date.expired {
        color: var(--danger);
      }

      .result-date.warning {
        color: var(--warning);
      }

      .result-date.safe {
        color: var(--success);
      }

      .result-countdown {
        font-size: 1rem;
        color: var(--color-text-muted);
      }

      .result-countdown.urgent {
        color: var(--danger);
        font-weight: 600;
      }

      .deadline-info {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid var(--border);
        text-align: left;
      }

      .deadline-info-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        font-size: 0.9rem;
      }

      .deadline-info-label {
        color: var(--color-text-muted);
      }

      .preset-list {
        margin-top: 24px;
      }

      .preset-title {
        font-weight: 600;
        margin-bottom: 12px;
        font-size: 0.95rem;
      }

      .preset-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 12px;
      }

      .preset-item {
        background: var(--bg);
        border-radius: var(--radius);
        padding: 12px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .preset-item:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
      }

      .preset-item-name {
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 4px;
      }

      .preset-item-desc {
        font-size: 0.8rem;
        color: var(--color-text-muted);
      }

      .status {
        font-size: 0.85rem;
        margin-top: 8px;
        min-height: 20px;
      }

      .status.success {
        color: var(--success);
      }

      .status.error {
        color: var(--danger);
      }

      .disclaimer {
        margin-top: 20px;
        padding: 12px;
        background: rgba(255, 193, 7, 0.1);
        border-radius: var(--radius);
        font-size: 0.85rem;
        color: var(--color-text-muted);
      }

      footer {
        text-align: center;
        margin-top: 32px;
        padding-top: 16px;
        border-top: 1px solid var(--border);
        color: var(--color-text-muted);
        font-size: 0.85rem;
      }

      footer a {
        color: var(--primary);
        text-decoration: none;
      }

      footer a:hover {
        text-decoration: underline;
      }
    </style>
    <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
  <body>
    <div class="container">
      <a href="../../index.html" class="back-link">â† è¿”å›å·¥å…·åˆ—è¡¨</a>
      <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>

      <h1>æ³•å¾‹æ—¶é™è®¡ç®—å™¨</h1>
      <p class="desc">è®¡ç®—è¯‰è®¼æ—¶æ•ˆã€ä¸Šè¯‰æœŸé™ã€ç­”è¾©æœŸé™ç­‰å„ç±»æ³•å¾‹æ—¶é™</p>

      <div class="card">
        <div class="form-row">
          <div class="form-group">
            <label for="deadlineType">æ—¶é™ç±»å‹</label>
            <select id="deadlineType" onchange="updatePeriod()">
              <option value="custom">è‡ªå®šä¹‰æ—¶é™</option>
              <optgroup label="è¯‰è®¼æ—¶æ•ˆ">
                <option value="limitation_3y">æ™®é€šè¯‰è®¼æ—¶æ•ˆï¼ˆ3å¹´ï¼‰</option>
                <option value="limitation_1y">ç‰¹æ®Šè¯‰è®¼æ—¶æ•ˆï¼ˆ1å¹´ï¼‰</option>
                <option value="limitation_20y">æœ€é•¿ä¿æŠ¤æœŸï¼ˆ20å¹´ï¼‰</option>
              </optgroup>
              <optgroup label="æ°‘äº‹è¯‰è®¼æœŸé™">
                <option value="appeal_civil">æ°‘äº‹ä¸Šè¯‰æœŸï¼ˆ15å¤©ï¼‰</option>
                <option value="defense_civil">æ°‘äº‹ç­”è¾©æœŸï¼ˆ15å¤©ï¼‰</option>
                <option value="enforcement">ç”³è¯·å¼ºåˆ¶æ‰§è¡Œï¼ˆ2å¹´ï¼‰</option>
              </optgroup>
              <optgroup label="åˆ‘äº‹è¯‰è®¼æœŸé™">
                <option value="appeal_criminal">åˆ‘äº‹ä¸Šè¯‰æœŸï¼ˆ10å¤©ï¼‰</option>
              </optgroup>
              <optgroup label="è¡Œæ”¿è¯‰è®¼æœŸé™">
                <option value="appeal_admin">è¡Œæ”¿ä¸Šè¯‰æœŸï¼ˆ15å¤©ï¼‰</option>
                <option value="admin_sue">è¡Œæ”¿è¯‰è®¼èµ·è¯‰æœŸï¼ˆ6ä¸ªæœˆï¼‰</option>
                <option value="admin_review">è¡Œæ”¿å¤è®®ç”³è¯·æœŸï¼ˆ60å¤©ï¼‰</option>
              </optgroup>
              <optgroup label="ä»²è£æœŸé™">
                <option value="arbitration_labor">åŠ³åŠ¨ä»²è£æ—¶æ•ˆï¼ˆ1å¹´ï¼‰</option>
                <option value="arbitration_commercial">å•†äº‹ä»²è£æ—¶æ•ˆï¼ˆå‚ç…§è¯‰è®¼æ—¶æ•ˆï¼‰</option>
              </optgroup>
              <optgroup label="åˆåŒæœŸé™">
                <option value="contract_7d">7å¤©å†·é™æœŸ</option>
                <option value="contract_30d">30å¤©é€šçŸ¥æœŸ</option>
                <option value="contract_90d">90å¤©è¯•ç”¨æœŸ</option>
              </optgroup>
            </select>
          </div>
          <div class="form-group">
            <label for="startDate">èµ·ç®—æ—¥æœŸ</label>
            <input type="date" id="startDate" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="periodValue">æœŸé™æ•°å€¼</label>
            <input type="number" id="periodValue" value="15" min="1" />
          </div>
          <div class="form-group">
            <label for="periodUnit">æœŸé™å•ä½</label>
            <select id="periodUnit">
              <option value="day">å¤©</option>
              <option value="month">æœˆ</option>
              <option value="year">å¹´</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="excludeHolidays" />
            èŠ‚å‡æ—¥é¡ºå»¶ï¼ˆæœŸé™æœ€åä¸€å¤©ä¸ºèŠ‚å‡æ—¥æ—¶é¡ºå»¶è‡³å·¥ä½œæ—¥ï¼‰
          </label>
        </div>

        <div class="btn-row">
          <button class="primary" onclick="calculate()">è®¡ç®—æˆªæ­¢æ—¥æœŸ</button>
          <button onclick="setToday()">è®¾ä¸ºä»Šå¤©</button>
          <button onclick="clearForm()">æ¸…ç©º</button>
        </div>

        <div id="status" class="status"></div>

        <div id="resultCard" class="result-card" style="display: none">
          <div class="result-label">æˆªæ­¢æ—¥æœŸ</div>
          <div id="resultDate" class="result-date"></div>
          <div id="resultCountdown" class="result-countdown"></div>

          <div class="deadline-info">
            <div class="deadline-info-item">
              <span class="deadline-info-label">èµ·ç®—æ—¥æœŸ</span>
              <span id="infoStartDate"></span>
            </div>
            <div class="deadline-info-item">
              <span class="deadline-info-label">æœŸé™</span>
              <span id="infoPeriod"></span>
            </div>
            <div class="deadline-info-item">
              <span class="deadline-info-label">æˆªæ­¢æ—¥æœŸ</span>
              <span id="infoEndDate"></span>
            </div>
            <div class="deadline-info-item">
              <span class="deadline-info-label">å‰©ä½™æ—¶é—´</span>
              <span id="infoRemaining"></span>
            </div>
          </div>
        </div>

        <div class="preset-list">
          <div class="preset-title">å¸¸ç”¨æ—¶é™å¿«æ·é€‰æ‹©</div>
          <div class="preset-grid">
            <div class="preset-item" onclick="selectPreset('limitation_3y')">
              <div class="preset-item-name">æ™®é€šè¯‰è®¼æ—¶æ•ˆ</div>
              <div class="preset-item-desc">3å¹´ - ä¸€èˆ¬æ°‘äº‹æƒåˆ©</div>
            </div>
            <div class="preset-item" onclick="selectPreset('appeal_civil')">
              <div class="preset-item-name">æ°‘äº‹ä¸Šè¯‰æœŸ</div>
              <div class="preset-item-desc">15å¤© - ä¸€å®¡åˆ¤å†³</div>
            </div>
            <div class="preset-item" onclick="selectPreset('admin_review')">
              <div class="preset-item-name">è¡Œæ”¿å¤è®®</div>
              <div class="preset-item-desc">60å¤© - çŸ¥é“è¡Œæ”¿è¡Œä¸ºä¹‹æ—¥èµ·</div>
            </div>
            <div class="preset-item" onclick="selectPreset('arbitration_labor')">
              <div class="preset-item-name">åŠ³åŠ¨ä»²è£</div>
              <div class="preset-item-desc">1å¹´ - çŸ¥é“æƒç›Šè¢«ä¾µå®³ä¹‹æ—¥èµ·</div>
            </div>
            <div class="preset-item" onclick="selectPreset('enforcement')">
              <div class="preset-item-name">ç”³è¯·æ‰§è¡Œ</div>
              <div class="preset-item-desc">2å¹´ - æ³•å¾‹æ–‡ä¹¦ç”Ÿæ•ˆä¹‹æ—¥èµ·</div>
            </div>
            <div class="preset-item" onclick="selectPreset('contract_7d')">
              <div class="preset-item-name">å†·é™æœŸ</div>
              <div class="preset-item-desc">7å¤© - æ¶ˆè´¹è€…æ— ç†ç”±é€€è´§</div>
            </div>
          </div>
        </div>

        <div class="disclaimer">
          <strong>å…è´£å£°æ˜ï¼š</strong>
          æœ¬å·¥å…·ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæ³•å¾‹å»ºè®®ã€‚å®é™…æ³•å¾‹æ—¶é™å¯èƒ½å—å¤šç§å› ç´ å½±å“ï¼ˆå¦‚ä¸­æ­¢ã€ä¸­æ–­ã€èŠ‚å‡æ—¥ç­‰ï¼‰ï¼Œè¯·ä»¥ä¸“ä¸šå¾‹å¸ˆæ„è§å’Œæœ€æ–°æ³•å¾‹è§„å®šä¸ºå‡†ã€‚
        </div>
      </div>

      <footer>
        çº¯å‰ç«¯å·¥å…· Â· æ— æœåŠ¡å™¨ Â·
        <a href="../../index.html">WebUtils</a>
      </footer>
    </div>

    <script>
      var LS_KEY = "legal_deadline_v1";

      var presets = {
        limitation_3y: { value: 3, unit: "year", name: "æ™®é€šè¯‰è®¼æ—¶æ•ˆï¼ˆ3å¹´ï¼‰" },
        limitation_1y: { value: 1, unit: "year", name: "ç‰¹æ®Šè¯‰è®¼æ—¶æ•ˆï¼ˆ1å¹´ï¼‰" },
        limitation_20y: { value: 20, unit: "year", name: "æœ€é•¿ä¿æŠ¤æœŸï¼ˆ20å¹´ï¼‰" },
        appeal_civil: { value: 15, unit: "day", name: "æ°‘äº‹ä¸Šè¯‰æœŸï¼ˆ15å¤©ï¼‰" },
        defense_civil: { value: 15, unit: "day", name: "æ°‘äº‹ç­”è¾©æœŸï¼ˆ15å¤©ï¼‰" },
        enforcement: { value: 2, unit: "year", name: "ç”³è¯·å¼ºåˆ¶æ‰§è¡Œï¼ˆ2å¹´ï¼‰" },
        appeal_criminal: { value: 10, unit: "day", name: "åˆ‘äº‹ä¸Šè¯‰æœŸï¼ˆ10å¤©ï¼‰" },
        appeal_admin: { value: 15, unit: "day", name: "è¡Œæ”¿ä¸Šè¯‰æœŸï¼ˆ15å¤©ï¼‰" },
        admin_sue: { value: 6, unit: "month", name: "è¡Œæ”¿è¯‰è®¼èµ·è¯‰æœŸï¼ˆ6ä¸ªæœˆï¼‰" },
        admin_review: { value: 60, unit: "day", name: "è¡Œæ”¿å¤è®®ç”³è¯·æœŸï¼ˆ60å¤©ï¼‰" },
        arbitration_labor: { value: 1, unit: "year", name: "åŠ³åŠ¨ä»²è£æ—¶æ•ˆï¼ˆ1å¹´ï¼‰" },
        arbitration_commercial: { value: 3, unit: "year", name: "å•†äº‹ä»²è£æ—¶æ•ˆ" },
        contract_7d: { value: 7, unit: "day", name: "7å¤©å†·é™æœŸ" },
        contract_30d: { value: 30, unit: "day", name: "30å¤©é€šçŸ¥æœŸ" },
        contract_90d: { value: 90, unit: "day", name: "90å¤©è¯•ç”¨æœŸ" }
      };

      function updatePeriod() {
        var type = document.getElementById("deadlineType").value;
        if (type !== "custom" && presets[type]) {
          var preset = presets[type];
          document.getElementById("periodValue").value = preset.value;
          document.getElementById("periodUnit").value = preset.unit;
        }
      }

      function selectPreset(type) {
        document.getElementById("deadlineType").value = type;
        updatePeriod();
        if (document.getElementById("startDate").value) {
          calculate();
        }
      }

      function setToday() {
        document.getElementById("startDate").value = new Date().toISOString().split("T")[0];
      }

      function calculate() {
        var startDateStr = document.getElementById("startDate").value;
        var periodValue = parseInt(document.getElementById("periodValue").value, 10);
        var periodUnit = document.getElementById("periodUnit").value;
        var excludeHolidays = document.getElementById("excludeHolidays").checked;

        if (!startDateStr) {
          showStatus("è¯·é€‰æ‹©èµ·ç®—æ—¥æœŸ", "error");
          return;
        }

        if (!periodValue || periodValue < 1) {
          showStatus("è¯·è¾“å…¥æœ‰æ•ˆçš„æœŸé™æ•°å€¼", "error");
          return;
        }

        var startDate = new Date(startDateStr);
        var endDate = new Date(startDate);

        // Calculate end date
        switch (periodUnit) {
          case "day":
            endDate.setDate(endDate.getDate() + periodValue);
            break;
          case "month":
            endDate.setMonth(endDate.getMonth() + periodValue);
            break;
          case "year":
            endDate.setFullYear(endDate.getFullYear() + periodValue);
            break;
        }

        // Check for holidays (simplified - just weekends)
        if (excludeHolidays) {
          while (endDate.getDay() === 0 || endDate.getDay() === 6) {
            endDate.setDate(endDate.getDate() + 1);
          }
        }

        // Calculate remaining days
        var today = new Date();
        today.setHours(0, 0, 0, 0);
        var diff = endDate.getTime() - today.getTime();
        var remainingDays = Math.ceil(diff / (1000 * 60 * 60 * 24));

        // Display results
        var resultCard = document.getElementById("resultCard");
        var resultDate = document.getElementById("resultDate");
        var resultCountdown = document.getElementById("resultCountdown");

        resultCard.style.display = "block";

        var dateStr =
          endDate.getFullYear() + "å¹´" + (endDate.getMonth() + 1) + "æœˆ" + endDate.getDate() + "æ—¥";
        resultDate.textContent = dateStr;

        resultDate.className = "result-date";
        resultCountdown.className = "result-countdown";

        if (remainingDays < 0) {
          resultDate.classList.add("expired");
          resultCountdown.textContent = "å·²è¿‡æœŸ " + Math.abs(remainingDays) + " å¤©";
          resultCountdown.classList.add("urgent");
        } else if (remainingDays <= 7) {
          resultDate.classList.add("warning");
          resultCountdown.textContent = "å‰©ä½™ " + remainingDays + " å¤©ï¼ˆç´§æ€¥ï¼‰";
          resultCountdown.classList.add("urgent");
        } else if (remainingDays <= 30) {
          resultDate.classList.add("warning");
          resultCountdown.textContent = "å‰©ä½™ " + remainingDays + " å¤©";
        } else {
          resultDate.classList.add("safe");
          resultCountdown.textContent = "å‰©ä½™ " + remainingDays + " å¤©";
        }

        // Info details
        document.getElementById("infoStartDate").textContent = formatDate(startDate);
        document.getElementById("infoPeriod").textContent =
          periodValue + " " + getUnitName(periodUnit);
        document.getElementById("infoEndDate").textContent = formatDate(endDate);

        var remainingText;
        if (remainingDays < 0) {
          remainingText = "å·²è¿‡æœŸ " + Math.abs(remainingDays) + " å¤©";
        } else if (remainingDays === 0) {
          remainingText = "ä»Šå¤©åˆ°æœŸ";
        } else {
          remainingText = remainingDays + " å¤©";
        }
        document.getElementById("infoRemaining").textContent = remainingText;

        saveToStorage();
        showStatus("è®¡ç®—å®Œæˆ", "success");
      }

      function formatDate(date) {
        return (
          date.getFullYear() +
          "-" +
          String(date.getMonth() + 1).padStart(2, "0") +
          "-" +
          String(date.getDate()).padStart(2, "0")
        );
      }

      function getUnitName(unit) {
        var names = {
          day: "å¤©",
          month: "ä¸ªæœˆ",
          year: "å¹´"
        };
        return names[unit] || unit;
      }

      function clearForm() {
        document.getElementById("startDate").value = "";
        document.getElementById("deadlineType").value = "custom";
        document.getElementById("periodValue").value = "15";
        document.getElementById("periodUnit").value = "day";
        document.getElementById("resultCard").style.display = "none";
        localStorage.removeItem(LS_KEY);
        showStatus("å·²æ¸…ç©º", "success");
      }

      function saveToStorage() {
        try {
          var data = {
            startDate: document.getElementById("startDate").value,
            deadlineType: document.getElementById("deadlineType").value,
            periodValue: document.getElementById("periodValue").value,
            periodUnit: document.getElementById("periodUnit").value,
            excludeHolidays: document.getElementById("excludeHolidays").checked
          };
          localStorage.setItem(LS_KEY, JSON.stringify(data));
        } catch (e) {}
      }

      function loadFromStorage() {
        try {
          var saved = localStorage.getItem(LS_KEY);
          if (saved) {
            var data = JSON.parse(saved);
            if (data.startDate) document.getElementById("startDate").value = data.startDate;
            if (data.deadlineType)
              document.getElementById("deadlineType").value = data.deadlineType;
            if (data.periodValue) document.getElementById("periodValue").value = data.periodValue;
            if (data.periodUnit) document.getElementById("periodUnit").value = data.periodUnit;
            if (data.excludeHolidays !== undefined)
              document.getElementById("excludeHolidays").checked = data.excludeHolidays;
          }
        } catch (e) {}
      }

      function showStatus(msg, type) {
        var el = document.getElementById("status");
        el.textContent = msg;
        el.className = "status " + (type || "");
      }

      function toggleTheme() {
        var html = document.documentElement;
        var btn = document.querySelector(".theme-toggle");
        var next = html.getAttribute("data-theme") === "dark" ? "light" : "dark";
        html.setAttribute("data-theme", next);
        btn.textContent = next === "dark" ? "ğŸŒ™" : "â˜€ï¸";
        localStorage.setItem("theme", next);
      }

      (function () {
        var savedTheme = localStorage.getItem("theme");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
          var btn = document.querySelector(".theme-toggle");
          if (btn) btn.textContent = savedTheme === "dark" ? "ğŸŒ™" : "â˜€ï¸";
        }
        loadFromStorage();
      })();
    </script>
  </body>
</html>
