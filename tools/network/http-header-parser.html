<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HTTP å¤´è§£æå™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="HTTP è¯·æ±‚å¤´è§£æ" />
    <meta name="keywords" content="http å¤´è§£æå™¨" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/network/http-header-parser.html"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="HTTP å¤´è§£æå™¨ - WebUtils" />
    <meta property="og:description" content="HTTP è¯·æ±‚å¤´è§£æ" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/network/http-header-parser.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="HTTP å¤´è§£æå™¨ - WebUtils" />
    <meta name="twitter:description" content="HTTP è¯·æ±‚å¤´è§£æ" />
    <!-- OG Image -->
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --bg-hover: #22222e;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-yellow: #fbbf24;
        --accent-red: #f43f5e;
        --color-accent-purple: #a855f7;
        --accent-blue: #3b82f6;
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f0f0f0;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --color-accent-cyan: #0891b2;
        --accent-green: #059669;
        --accent-yellow: #d97706;
        --accent-red: #dc2626;
        --color-accent-purple: #9333ea;
        --accent-blue: #2563eb;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgb(0, 245, 212, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgb(0, 245, 212, 0.03) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 1100px;
        margin: 0 auto;
        padding: 24px;
      }
      .header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }
      .back-link {
        display: inline-flex;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        color: var(--color-text-secondary);
        text-decoration: none;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        transition: all 0.2s;
      }
      .back-link:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }
      .title-section h1 {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .title-icon {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--color-accent-cyan), var(--accent-green));
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      }
      .title-section .desc {
        font-size: 0.9rem;
        color: var(--color-text-secondary);
        margin-top: 4px;
      }
      .main-card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
        margin-bottom: 20px;
      }
      .btn-row {
        display: flex;
        gap: 10px;
        margin-bottom: 16px;
        flex-wrap: wrap;
      }
      .btn {
        font-family: var(--font-mono);
        font-size: 0.85rem;
        padding: 10px 16px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--color-text-primary);
        cursor: pointer;
        transition: all 0.2s;
      }
      .btn:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      .btn:focus-visible {
        outline: 2px solid var(--color-accent-cyan);
        outline-offset: 2px;
      }
      .btn.primary {
        background: var(--color-accent-cyan);
        border-color: var(--color-accent-cyan);
        color: var(--color-bg-deep);
      }
      .btn.primary:hover {
        background: #00dfc4;
        border-color: #00dfc4;
      }
      textarea {
        width: 100%;
        min-height: 180px;
        padding: 14px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        background: var(--bg-input);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-md);
        color: var(--color-text-primary);
        resize: vertical;
        line-height: 1.6;
      }
      textarea:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
      }
      textarea::placeholder {
        color: var(--color-text-muted);
      }
      .status {
        font-family: var(--font-mono);
        font-size: 0.85rem;
        margin-top: 10px;
        min-height: 20px;
      }
      .status.success {
        color: var(--accent-green);
      }
      .status.error {
        color: var(--accent-red);
      }
      .section-title {
        font-family: var(--font-mono);
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .section-title .badge {
        font-size: 0.7rem;
        padding: 3px 8px;
        background: var(--color-accent-cyan);
        color: var(--color-bg-deep);
        border-radius: var(--radius-sm);
        font-weight: 500;
      }
      .badge-security {
        background: var(--accent-green) !important;
      }
      .badge-warning {
        background: var(--accent-yellow) !important;
        color: var(--color-text-primary) !important;
      }

      /* Security Status Panel */
      .security-panel {
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 16px;
        margin-bottom: 20px;
      }
      .security-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 12px;
      }
      .security-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        font-family: var(--font-mono);
        font-size: 0.8rem;
      }
      .security-item .icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        flex-shrink: 0;
      }
      .security-item.present .icon {
        background: var(--accent-green);
        color: #fff;
      }
      .security-item.missing .icon {
        background: var(--color-text-muted);
        color: var(--color-bg-deep);
      }
      .security-item .name {
        color: var(--color-text-secondary);
      }
      .security-item.present .name {
        color: var(--color-text-primary);
      }

      /* Headers Table */
      .table-wrap {
        max-height: 500px;
        overflow-y: auto;
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 12px 14px;
        text-align: left;
        border-bottom: 1px solid var(--border-subtle);
      }
      th {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
        background: var(--color-bg-surface);
        position: sticky;
        top: 0;
        z-index: 1;
      }
      td {
        font-family: var(--font-mono);
        font-size: 0.85rem;
        vertical-align: top;
      }
      tr:hover {
        background: var(--bg-hover);
      }
      tr:last-child td {
        border-bottom: none;
      }
      .header-name {
        color: var(--color-accent-cyan);
        font-weight: 500;
        white-space: nowrap;
      }
      .header-name.security {
        color: var(--accent-green);
      }
      .header-name.auth {
        color: var(--color-accent-purple);
      }
      .header-name.cache {
        color: var(--accent-blue);
      }
      .header-value {
        word-break: break-all;
        max-width: 400px;
      }
      .header-desc {
        color: var(--color-text-secondary);
        font-size: 0.8rem;
      }
      .copy-btn {
        padding: 4px 8px;
        font-family: var(--font-mono);
        font-size: 0.7rem;
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }
      .copy-btn:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      .tooltip {
        position: relative;
        cursor: help;
      }
      .tooltip::after {
        content: attr(data-tip);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        padding: 8px 12px;
        background: var(--color-bg-deep);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        font-size: 0.75rem;
        opacity: 0;
        visibility: hidden;
        transition: all 0.2s;
        z-index: 10;
        color: var(--color-text-primary);
        max-width: 300px;
        white-space: normal;
      }
      .tooltip:hover::after {
        opacity: 1;
        visibility: visible;
      }
      .no-results {
        text-align: center;
        padding: 40px;
        color: var(--color-text-muted);
        font-family: var(--font-mono);
      }
      .type-badge {
        display: inline-block;
        padding: 2px 6px;
        font-size: 0.7rem;
        border-radius: var(--radius-sm);
        margin-left: 8px;
        font-weight: 500;
      }
      .type-request {
        background: var(--accent-blue);
        color: #fff;
      }
      .type-response {
        background: var(--color-accent-purple);
        color: #fff;
      }
      footer {
        text-align: center;
        margin-top: 24px;
        padding-top: 16px;
        border-top: 1px solid var(--border-subtle);
      }
      footer p {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
      }
      footer a {
        color: var(--color-accent-cyan);
        text-decoration: none;
      }
      footer a:hover {
        text-decoration: underline;
      }
      @media (max-width: 640px) {
        .container {
          padding: 16px;
        }
        .main-card {
          padding: 16px;
        }
        .security-grid {
          grid-template-columns: 1fr;
        }
        .header-value {
          max-width: 200px;
        }
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      HTTP å¤´è§£æå™¨
    </nav>
    <div class="bg-grid"></div>
    <div class="container">
      <div class="header">
        <a href="../../index.html" class="back-link">â† è¿”å›</a>
        <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
        <div class="title-section">
          <h1>
            <span class="title-icon">ğŸ“¨</span>
            HTTP å¤´è§£æå™¨
          </h1>
          <p class="desc">è§£æ HTTP è¯·æ±‚/å“åº”å¤´ï¼Œæ˜¾ç¤ºè¯´æ˜å’Œå®‰å…¨çŠ¶æ€</p>
        </div>
      </div>

      <div class="main-card">
        <div class="btn-row">
          <button class="btn" id="btnPaste">ç²˜è´´</button>
          <button class="btn primary" id="btnParse">è§£æ</button>
          <button class="btn" id="btnSample">ç¤ºä¾‹</button>
          <button class="btn" id="btnShare">åˆ†äº«</button>
          <button class="btn" id="btnClear">æ¸…ç©º</button>
        </div>
        <textarea
          id="input"
          placeholder="ç²˜è´´åŸå§‹ HTTP å¤´...

ç¤ºä¾‹è¯·æ±‚å¤´:
GET /api/data HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0
Accept: application/json

ç¤ºä¾‹å“åº”å¤´:
HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: max-age=3600"
        ></textarea>
        <div id="status" class="status"></div>
      </div>

      <div id="securitySection" class="main-card" style="display: none">
        <div class="section-title">
          <span class="badge badge-security">SECURITY</span>
          å®‰å…¨å¤´çŠ¶æ€
        </div>
        <div class="security-panel">
          <div class="security-grid" id="securityGrid"></div>
        </div>
      </div>

      <div id="resultSection" class="main-card" style="display: none">
        <div class="section-title">
          <span class="badge">HEADERS</span>
          è§£æç»“æœ
          <span id="headerType" class="type-badge"></span>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th style="width: 180px">åç§°</th>
                <th>å€¼</th>
                <th style="width: 220px">è¯´æ˜</th>
                <th style="width: 60px"></th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
        <div id="noResults" class="no-results" style="display: none">æœªæ‰¾åˆ°æœ‰æ•ˆçš„ HTTP å¤´</div>
      </div>

      <footer>
        <p>
          <a href="https://github.com/chicogong/html-tools" target="_blank">GitHub</a>
          Â·
          <a href="../../index.html">WebUtils</a>
        </p>
      </footer>
    </div>

    <script>
      const LS_KEY = "http_header_parser_v1";

      // Header descriptions database
      const headerDescriptions = {
        // General Headers
        "cache-control": {
          desc: "ç¼“å­˜æŒ‡ä»¤",
          category: "cache",
          tip: "æ§åˆ¶ç¼“å­˜è¡Œä¸ºï¼Œå¦‚ max-age, no-cache, no-store ç­‰"
        },
        connection: {
          desc: "è¿æ¥ç®¡ç†",
          category: "general",
          tip: "æ§åˆ¶ç½‘ç»œè¿æ¥çš„é€‰é¡¹ï¼Œå¦‚ keep-alive æˆ– close"
        },
        date: { desc: "æ¶ˆæ¯æ—¥æœŸ", category: "general", tip: "æ¶ˆæ¯åˆ›å»ºçš„æ—¥æœŸå’Œæ—¶é—´" },
        pragma: {
          desc: "å…¼å®¹æ€§ç¼“å­˜",
          category: "cache",
          tip: "HTTP/1.0 ç¼“å­˜æ§åˆ¶ï¼Œå»ºè®®ä½¿ç”¨ Cache-Control"
        },
        trailer: { desc: "å°¾éƒ¨å­—æ®µ", category: "general", tip: "åœ¨åˆ†å—ä¼ è¾“ä¸­åŒ…å«çš„å°¾éƒ¨å¤´å­—æ®µ" },
        "transfer-encoding": {
          desc: "ä¼ è¾“ç¼–ç ",
          category: "general",
          tip: "æ¶ˆæ¯ä½“çš„ä¼ è¾“ç¼–ç æ–¹å¼ï¼Œå¦‚ chunked"
        },
        upgrade: { desc: "åè®®å‡çº§", category: "general", tip: "è¯·æ±‚å‡çº§åˆ°å…¶ä»–åè®®ï¼Œå¦‚ WebSocket" },
        via: { desc: "ä»£ç†ä¿¡æ¯", category: "general", tip: "ä¸­é—´ä»£ç†æœåŠ¡å™¨ä¿¡æ¯" },
        warning: { desc: "è­¦å‘Šä¿¡æ¯", category: "general", tip: "å…³äºæ¶ˆæ¯çŠ¶æ€çš„é¢å¤–è­¦å‘Šä¿¡æ¯" },

        // Request Headers
        accept: {
          desc: "å¯æ¥å—ç±»å‹",
          category: "request",
          tip: "å®¢æˆ·ç«¯å¯æ¥å—çš„å“åº”å†…å®¹ç±»å‹ (MIME)"
        },
        "accept-charset": {
          desc: "å¯æ¥å—å­—ç¬¦é›†",
          category: "request",
          tip: "å®¢æˆ·ç«¯å¯æ¥å—çš„å­—ç¬¦ç¼–ç "
        },
        "accept-encoding": {
          desc: "å¯æ¥å—ç¼–ç ",
          category: "request",
          tip: "å®¢æˆ·ç«¯å¯æ¥å—çš„å†…å®¹ç¼–ç ï¼Œå¦‚ gzip, deflate"
        },
        "accept-language": {
          desc: "å¯æ¥å—è¯­è¨€",
          category: "request",
          tip: "å®¢æˆ·ç«¯åå¥½çš„è¯­è¨€ï¼Œå¦‚ zh-CN, en-US"
        },
        authorization: {
          desc: "è®¤è¯å‡­è¯",
          category: "auth",
          tip: "å®¢æˆ·ç«¯è®¤è¯ä¿¡æ¯ï¼Œå¦‚ Bearer token æˆ– Basic è®¤è¯"
        },
        cookie: { desc: "Cookie", category: "auth", tip: "å®¢æˆ·ç«¯å‘é€çš„ Cookie æ•°æ®" },
        expect: { desc: "æœŸæœ›è¡Œä¸º", category: "request", tip: "å®¢æˆ·ç«¯æœŸæœ›æœåŠ¡å™¨çš„ç‰¹å®šè¡Œä¸º" },
        from: { desc: "ç”¨æˆ·é‚®ç®±", category: "request", tip: "å‘å‡ºè¯·æ±‚çš„ç”¨æˆ·çš„ç”µå­é‚®ä»¶åœ°å€" },
        host: { desc: "ç›®æ ‡ä¸»æœº", category: "request", tip: "è¯·æ±‚çš„ç›®æ ‡ä¸»æœºåå’Œç«¯å£å·" },
        "if-match": { desc: "æ¡ä»¶åŒ¹é…", category: "cache", tip: "æ¡ä»¶è¯·æ±‚ï¼šä»…å½“ ETag åŒ¹é…æ—¶æ‰§è¡Œ" },
        "if-modified-since": {
          desc: "æ¡ä»¶ä¿®æ”¹æ—¶é—´",
          category: "cache",
          tip: "æ¡ä»¶è¯·æ±‚ï¼šä»…å½“èµ„æºåœ¨æŒ‡å®šæ—¶é—´åä¿®æ”¹"
        },
        "if-none-match": {
          desc: "æ¡ä»¶ä¸åŒ¹é…",
          category: "cache",
          tip: "æ¡ä»¶è¯·æ±‚ï¼šä»…å½“ ETag ä¸åŒ¹é…æ—¶æ‰§è¡Œ"
        },
        "if-range": { desc: "æ¡ä»¶èŒƒå›´", category: "cache", tip: "æ¡ä»¶èŒƒå›´è¯·æ±‚" },
        "if-unmodified-since": {
          desc: "æ¡ä»¶æœªä¿®æ”¹",
          category: "cache",
          tip: "æ¡ä»¶è¯·æ±‚ï¼šä»…å½“èµ„æºæœªä¿®æ”¹æ—¶æ‰§è¡Œ"
        },
        "max-forwards": {
          desc: "æœ€å¤§è½¬å‘æ•°",
          category: "request",
          tip: "é™åˆ¶ä»£ç†æˆ–ç½‘å…³è½¬å‘çš„æœ€å¤§æ¬¡æ•°"
        },
        "proxy-authorization": {
          desc: "ä»£ç†è®¤è¯",
          category: "auth",
          tip: "å‘ä»£ç†æœåŠ¡å™¨æä¾›çš„è®¤è¯å‡­è¯"
        },
        range: { desc: "èŒƒå›´è¯·æ±‚", category: "request", tip: "è¯·æ±‚èµ„æºçš„éƒ¨åˆ†å†…å®¹ï¼Œç”¨äºæ–­ç‚¹ç»­ä¼ " },
        referer: { desc: "æ¥æºé¡µé¢", category: "request", tip: "å‘èµ·è¯·æ±‚çš„é¡µé¢ URL" },
        te: { desc: "ä¼ è¾“ç¼–ç æ¥å—", category: "request", tip: "å®¢æˆ·ç«¯å¯æ¥å—çš„ä¼ è¾“ç¼–ç " },
        "user-agent": {
          desc: "å®¢æˆ·ç«¯æ ‡è¯†",
          category: "request",
          tip: "å®¢æˆ·ç«¯è½¯ä»¶ä¿¡æ¯ï¼ˆæµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰"
        },

        // Response Headers
        "accept-ranges": { desc: "æ”¯æŒèŒƒå›´", category: "response", tip: "æœåŠ¡å™¨æ˜¯å¦æ”¯æŒèŒƒå›´è¯·æ±‚" },
        age: { desc: "ç¼“å­˜æ—¶é—´", category: "cache", tip: "å“åº”åœ¨ä»£ç†ç¼“å­˜ä¸­å­˜åœ¨çš„æ—¶é—´ï¼ˆç§’ï¼‰" },
        etag: { desc: "å®ä½“æ ‡ç­¾", category: "cache", tip: "èµ„æºç‰ˆæœ¬æ ‡è¯†ç¬¦ï¼Œç”¨äºç¼“å­˜éªŒè¯" },
        location: { desc: "é‡å®šå‘ä½ç½®", category: "response", tip: "é‡å®šå‘çš„ç›®æ ‡ URL" },
        "proxy-authenticate": {
          desc: "ä»£ç†è®¤è¯è¦æ±‚",
          category: "auth",
          tip: "ä»£ç†æœåŠ¡å™¨è¦æ±‚çš„è®¤è¯æ–¹å¼"
        },
        "retry-after": { desc: "é‡è¯•æ—¶é—´", category: "response", tip: "å®¢æˆ·ç«¯åº”åœ¨å¤šä¹…åé‡è¯•è¯·æ±‚" },
        server: { desc: "æœåŠ¡å™¨ä¿¡æ¯", category: "response", tip: "æœåŠ¡å™¨è½¯ä»¶ä¿¡æ¯" },
        "set-cookie": { desc: "è®¾ç½® Cookie", category: "auth", tip: "æœåŠ¡å™¨è®¾ç½®çš„ Cookie" },
        vary: { desc: "ç¼“å­˜å˜ä½“", category: "cache", tip: "å†³å®šç¼“å­˜å“åº”æ˜¯å¦å¯ç”¨çš„è¯·æ±‚å¤´" },
        "www-authenticate": { desc: "è®¤è¯è¦æ±‚", category: "auth", tip: "æœåŠ¡å™¨è¦æ±‚çš„è®¤è¯æ–¹å¼" },

        // Entity Headers
        allow: { desc: "å…è®¸æ–¹æ³•", category: "entity", tip: "èµ„æºå…è®¸çš„ HTTP æ–¹æ³•" },
        "content-encoding": {
          desc: "å†…å®¹ç¼–ç ",
          category: "entity",
          tip: "å“åº”ä½“çš„ç¼–ç æ–¹å¼ï¼Œå¦‚ gzip"
        },
        "content-language": { desc: "å†…å®¹è¯­è¨€", category: "entity", tip: "å“åº”å†…å®¹çš„è¯­è¨€" },
        "content-length": { desc: "å†…å®¹é•¿åº¦", category: "entity", tip: "å“åº”ä½“çš„å­—èŠ‚å¤§å°" },
        "content-location": { desc: "å†…å®¹ä½ç½®", category: "entity", tip: "å“åº”å†…å®¹çš„å¤‡ç”¨ä½ç½®" },
        "content-md5": { desc: "å†…å®¹æ ¡éªŒ", category: "entity", tip: "å“åº”ä½“çš„ MD5 æ ¡éªŒå€¼" },
        "content-range": { desc: "å†…å®¹èŒƒå›´", category: "entity", tip: "éƒ¨åˆ†å“åº”çš„èŒƒå›´ä¿¡æ¯" },
        "content-type": {
          desc: "MIME ç±»å‹",
          category: "entity",
          tip: "å“åº”ä½“çš„åª’ä½“ç±»å‹ï¼Œå¦‚ application/json"
        },
        expires: { desc: "è¿‡æœŸæ—¶é—´", category: "cache", tip: "å“åº”çš„è¿‡æœŸæ—¥æœŸ/æ—¶é—´" },
        "last-modified": { desc: "æœ€åä¿®æ”¹", category: "cache", tip: "èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´" },

        // Security Headers
        "strict-transport-security": {
          desc: "HSTS",
          category: "security",
          tip: "å¼ºåˆ¶ä½¿ç”¨ HTTPS è¿æ¥ï¼Œé˜²æ­¢é™çº§æ”»å‡»"
        },
        "content-security-policy": {
          desc: "CSP",
          category: "security",
          tip: "å†…å®¹å®‰å…¨ç­–ç•¥ï¼Œé˜²æ­¢ XSS å’Œæ•°æ®æ³¨å…¥æ”»å‡»"
        },
        "content-security-policy-report-only": {
          desc: "CSP æŠ¥å‘Š",
          category: "security",
          tip: "ä»…æŠ¥å‘Šè¿è§„ï¼Œä¸é˜»æ­¢"
        },
        "x-frame-options": {
          desc: "æ¡†æ¶é€‰é¡¹",
          category: "security",
          tip: "æ§åˆ¶é¡µé¢æ˜¯å¦å¯è¢« iframe åµŒå…¥ï¼Œé˜²æ­¢ç‚¹å‡»åŠ«æŒ"
        },
        "x-content-type-options": {
          desc: "ç±»å‹å—…æ¢",
          category: "security",
          tip: "ç¦æ­¢æµè§ˆå™¨ MIME ç±»å‹å—…æ¢"
        },
        "x-xss-protection": {
          desc: "XSS ä¿æŠ¤",
          category: "security",
          tip: "å¯ç”¨æµè§ˆå™¨çš„ XSS è¿‡æ»¤å™¨ï¼ˆå·²å¼ƒç”¨ï¼‰"
        },
        "x-permitted-cross-domain-policies": {
          desc: "è·¨åŸŸç­–ç•¥",
          category: "security",
          tip: "æ§åˆ¶ Flash/PDF è·¨åŸŸç­–ç•¥"
        },
        "referrer-policy": {
          desc: "Referer ç­–ç•¥",
          category: "security",
          tip: "æ§åˆ¶ Referer å¤´çš„å‘é€ç­–ç•¥"
        },
        "permissions-policy": {
          desc: "æƒé™ç­–ç•¥",
          category: "security",
          tip: "æ§åˆ¶æµè§ˆå™¨åŠŸèƒ½å’Œ API çš„ä½¿ç”¨æƒé™"
        },
        "feature-policy": {
          desc: "åŠŸèƒ½ç­–ç•¥",
          category: "security",
          tip: "æ—§ç‰ˆæƒé™ç­–ç•¥ï¼ˆå·²è¢« Permissions-Policy å–ä»£ï¼‰"
        },
        "cross-origin-embedder-policy": {
          desc: "COEP",
          category: "security",
          tip: "è·¨æºåµŒå…¥ç­–ç•¥ï¼Œæ§åˆ¶èµ„æºåŠ è½½"
        },
        "cross-origin-opener-policy": {
          desc: "COOP",
          category: "security",
          tip: "è·¨æºå¼€å¯è€…ç­–ç•¥ï¼Œæ§åˆ¶çª—å£è®¿é—®"
        },
        "cross-origin-resource-policy": {
          desc: "CORP",
          category: "security",
          tip: "è·¨æºèµ„æºç­–ç•¥ï¼Œæ§åˆ¶èµ„æºå…±äº«"
        },

        // CORS Headers
        "access-control-allow-origin": {
          desc: "CORS æ¥æº",
          category: "cors",
          tip: "å…è®¸è®¿é—®èµ„æºçš„æ¥æº"
        },
        "access-control-allow-credentials": {
          desc: "CORS å‡­è¯",
          category: "cors",
          tip: "æ˜¯å¦å…è®¸å‘é€å‡­è¯"
        },
        "access-control-allow-headers": {
          desc: "CORS å¤´",
          category: "cors",
          tip: "é¢„æ£€è¯·æ±‚ä¸­å…è®¸çš„è¯·æ±‚å¤´"
        },
        "access-control-allow-methods": {
          desc: "CORS æ–¹æ³•",
          category: "cors",
          tip: "é¢„æ£€è¯·æ±‚ä¸­å…è®¸çš„ HTTP æ–¹æ³•"
        },
        "access-control-expose-headers": {
          desc: "CORS æš´éœ²å¤´",
          category: "cors",
          tip: "å¯ä»¥æš´éœ²ç»™å®¢æˆ·ç«¯çš„å“åº”å¤´"
        },
        "access-control-max-age": {
          desc: "CORS ç¼“å­˜",
          category: "cors",
          tip: "é¢„æ£€è¯·æ±‚ç»“æœçš„ç¼“å­˜æ—¶é—´"
        },
        "access-control-request-headers": {
          desc: "CORS è¯·æ±‚å¤´",
          category: "cors",
          tip: "é¢„æ£€è¯·æ±‚ä¸­å°†ä½¿ç”¨çš„è¯·æ±‚å¤´"
        },
        "access-control-request-method": {
          desc: "CORS è¯·æ±‚æ–¹æ³•",
          category: "cors",
          tip: "é¢„æ£€è¯·æ±‚ä¸­å°†ä½¿ç”¨çš„æ–¹æ³•"
        },
        origin: { desc: "è¯·æ±‚æ¥æº", category: "cors", tip: "å‘èµ·è¯·æ±‚çš„æ¥æº" }
      };

      // Security headers to check
      const securityHeaders = [
        { name: "strict-transport-security", label: "HSTS" },
        { name: "content-security-policy", label: "CSP" },
        { name: "x-frame-options", label: "X-Frame-Options" },
        { name: "x-content-type-options", label: "X-Content-Type-Options" },
        { name: "referrer-policy", label: "Referrer-Policy" },
        { name: "permissions-policy", label: "Permissions-Policy" }
      ];

      // Sample headers
      const sampleRequest =
        "GET /api/users HTTP/1.1\n" +
        "Host: api.example.com\n" +
        "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\n" +
        "Accept: application/json\n" +
        "Accept-Language: zh-CN,zh;q=0.9,en;q=0.8\n" +
        "Accept-Encoding: gzip, deflate, br\n" +
        "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\n" +
        "Cookie: session_id=abc123; user_pref=dark\n" +
        "Connection: keep-alive\n" +
        "Cache-Control: no-cache";

      const sampleResponse =
        "HTTP/1.1 200 OK\n" +
        "Date: Thu, 26 Dec 2024 10:00:00 GMT\n" +
        "Content-Type: application/json; charset=utf-8\n" +
        "Content-Length: 1234\n" +
        "Connection: keep-alive\n" +
        "Server: nginx/1.24.0\n" +
        "Cache-Control: max-age=3600, public\n" +
        'ETag: "abc123def456"\n' +
        "Last-Modified: Wed, 25 Dec 2024 08:00:00 GMT\n" +
        "Strict-Transport-Security: max-age=31536000; includeSubDomains; preload\n" +
        "Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline'\n" +
        "X-Frame-Options: DENY\n" +
        "X-Content-Type-Options: nosniff\n" +
        "X-XSS-Protection: 1; mode=block\n" +
        "Referrer-Policy: strict-origin-when-cross-origin\n" +
        "Access-Control-Allow-Origin: https://example.com\n" +
        "Set-Cookie: session=xyz789; Path=/; HttpOnly; Secure; SameSite=Strict";

      let sampleIndex = 0;

      function parseHeaders(rawText) {
        const lines = rawText.trim().split(/\r?\n/);
        const headers = [];
        let headerType = "unknown";

        for (let i = 0; i < lines.length; i++) {
          const line = lines[i].trim();
          if (!line) continue;

          // Check for request/response line
          if (i === 0) {
            if (/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS|TRACE|CONNECT)\s+/i.test(line)) {
              headerType = "request";
              continue;
            } else if (/^HTTP\/[\d.]+\s+\d+/i.test(line)) {
              headerType = "response";
              continue;
            }
          }

          // Parse header line
          const colonIndex = line.indexOf(":");
          if (colonIndex > 0) {
            const name = line.substring(0, colonIndex).trim();
            const value = line.substring(colonIndex + 1).trim();
            headers.push({ name: name, value: value });
          }
        }

        return { headers: headers, headerType: headerType };
      }

      function getCategoryClass(name) {
        const info = headerDescriptions[name.toLowerCase()];
        if (!info) return "";
        if (info.category === "security") return "security";
        if (info.category === "auth") return "auth";
        if (info.category === "cache") return "cache";
        return "";
      }

      function getHeaderInfo(name) {
        const info = headerDescriptions[name.toLowerCase()];
        return info || { desc: "-", tip: "" };
      }

      function renderHeaders(headers) {
        const tbody = document.getElementById("tbody");
        tbody.textContent = "";

        if (headers.length === 0) {
          document.getElementById("noResults").style.display = "block";
          return;
        }

        document.getElementById("noResults").style.display = "none";

        headers.forEach(function (header) {
          const info = getHeaderInfo(header.name);
          const categoryClass = getCategoryClass(header.name);
          const tr = document.createElement("tr");

          // Name cell
          const tdName = document.createElement("td");
          tdName.className = "header-name " + categoryClass;
          tdName.textContent = header.name;
          tr.appendChild(tdName);

          // Value cell
          const tdValue = document.createElement("td");
          tdValue.className = "header-value";
          tdValue.textContent = header.value;
          tr.appendChild(tdValue);

          // Description cell
          const tdDesc = document.createElement("td");
          tdDesc.className = "header-desc";
          if (info.tip) {
            const tooltip = document.createElement("span");
            tooltip.className = "tooltip";
            tooltip.setAttribute("data-tip", info.tip);
            tooltip.textContent = info.desc;
            tdDesc.appendChild(tooltip);
          } else {
            tdDesc.textContent = info.desc;
          }
          tr.appendChild(tdDesc);

          // Copy button cell
          const tdCopy = document.createElement("td");
          const copyBtn = document.createElement("button");
          copyBtn.className = "copy-btn";
          copyBtn.textContent = "å¤åˆ¶";
          copyBtn.onclick = function () {
            copyToClipboard(header.value);
          };
          tdCopy.appendChild(copyBtn);
          tr.appendChild(tdCopy);

          tbody.appendChild(tr);
        });
      }

      function renderSecurityStatus(headers) {
        const grid = document.getElementById("securityGrid");
        grid.textContent = "";
        const headerMap = {};

        headers.forEach(function (h) {
          headerMap[h.name.toLowerCase()] = h.value;
        });

        securityHeaders.forEach(function (sh) {
          const present = sh.name in headerMap;
          const item = document.createElement("div");
          item.className = "security-item " + (present ? "present" : "missing");

          const icon = document.createElement("span");
          icon.className = "icon";
          icon.textContent = present ? "âœ“" : "âœ—";
          item.appendChild(icon);

          const name = document.createElement("span");
          name.className = "name";
          name.textContent = sh.label;
          item.appendChild(name);

          grid.appendChild(item);
        });
      }

      function parse() {
        const input = document.getElementById("input").value.trim();
        if (!input) {
          showStatus("è¯·è¾“å…¥ HTTP å¤´", "error");
          return;
        }

        const result = parseHeaders(input);

        if (result.headers.length === 0) {
          showStatus("æœªæ‰¾åˆ°æœ‰æ•ˆçš„ HTTP å¤´", "error");
          document.getElementById("resultSection").style.display = "none";
          document.getElementById("securitySection").style.display = "none";
          return;
        }

        renderHeaders(result.headers);
        renderSecurityStatus(result.headers);

        // Update header type badge
        const typeEl = document.getElementById("headerType");
        if (result.headerType === "request") {
          typeEl.textContent = "REQUEST";
          typeEl.className = "type-badge type-request";
        } else if (result.headerType === "response") {
          typeEl.textContent = "RESPONSE";
          typeEl.className = "type-badge type-response";
        } else {
          typeEl.textContent = "";
          typeEl.className = "type-badge";
        }

        document.getElementById("resultSection").style.display = "block";
        document.getElementById("securitySection").style.display = "block";

        showStatus("è§£ææˆåŠŸï¼Œå…± " + result.headers.length + " ä¸ªå¤´", "success");
        saveToStorage();
        saveToUrl();
      }

      function showStatus(msg, type) {
        const el = document.getElementById("status");
        el.textContent = msg;
        el.className = "status " + (type || "");
      }

      window.copyToClipboard = async function (text) {
        try {
          await navigator.clipboard.writeText(text);
          showStatus("å·²å¤åˆ¶", "success");
        } catch (e) {
          showStatus("å¤åˆ¶å¤±è´¥", "error");
        }
      };

      // URL state
      window.loadFromUrl = function () {
        const hash = location.hash.slice(1);
        if (!hash) return false;
        try {
          document.getElementById("input").value = decodeURIComponent(atob(hash));
          return true;
        } catch (e) {
          return false;
        }
      };

      function saveToUrl() {
        try {
          const input = document.getElementById("input").value;
          if (input.length > 2000) return;
          const encoded = btoa(encodeURIComponent(input));
          history.replaceState(null, "", "#" + encoded);
        } catch (e) {
          // ignore encoding errors
        }
      }

      // localStorage
      function loadFromStorage() {
        const saved = localStorage.getItem(LS_KEY);
        if (saved) {
          document.getElementById("input").value = saved;
        }
      }

      function saveToStorage() {
        localStorage.setItem(LS_KEY, document.getElementById("input").value);
      }

      // Event listeners
      document.getElementById("btnPaste").onclick = async function () {
        try {
          const text = await navigator.clipboard.readText();
          document.getElementById("input").value = text;
          saveToStorage();
          showStatus("å·²ç²˜è´´", "success");
          parse();
        } catch (e) {
          showStatus("æ— æ³•è®¿é—®å‰ªè´´æ¿", "error");
        }
      };

      document.getElementById("btnParse").onclick = parse;

      document.getElementById("btnSample").onclick = function () {
        var samples = [sampleResponse, sampleRequest];
        document.getElementById("input").value = samples[sampleIndex % 2];
        sampleIndex++;
        saveToStorage();
        parse();
      };

      document.getElementById("btnShare").onclick = async function () {
        saveToUrl();
        try {
          await navigator.clipboard.writeText(location.href);
          showStatus("åˆ†äº«é“¾æ¥å·²å¤åˆ¶", "success");
        } catch (e) {
          showStatus("å¤åˆ¶å¤±è´¥", "error");
        }
      };

      document.getElementById("btnClear").onclick = function () {
        document.getElementById("input").value = "";
        document.getElementById("resultSection").style.display = "none";
        document.getElementById("securitySection").style.display = "none";
        localStorage.removeItem(LS_KEY);
        history.replaceState(null, "", location.pathname);
        showStatus("å·²æ¸…ç©º", "success");
      };

      document.getElementById("input").addEventListener("input", function () {
        saveToStorage();
      });

      // Auto-parse on input change (debounced)
      var parseTimeout;
      document.getElementById("input").addEventListener("input", function () {
        clearTimeout(parseTimeout);
        parseTimeout = setTimeout(function () {
          var input = document.getElementById("input").value.trim();
          if (input && input.indexOf(":") !== -1) {
            parse();
          }
        }, 500);
      });

      // Theme toggle
      window.toggleTheme = function () {
        var html = document.documentElement;
        var btn = document.querySelector(".theme-toggle");
        var next = html.getAttribute("data-theme") === "light" ? "dark" : "light";

        if (next === "light") {
          html.setAttribute("data-theme", "light");
        } else {
          html.removeAttribute("data-theme");
        }

        btn.textContent = next === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", next);
      };

      // Initialize theme
      (function () {
        var saved = localStorage.getItem("theme");
        if (saved === "light") {
          document.documentElement.setAttribute("data-theme", "light");
          var btn = document.querySelector(".theme-toggle");
          if (btn) btn.textContent = "â˜€ï¸";
        }
      })();

      // Initialize
      if (loadFromUrl()) {
        parse();
      } else {
        loadFromStorage();
        if (document.getElementById("input").value.trim()) {
          parse();
        }
      }
    </script>
  </body>
</html>
