<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>理想体重计算器 - HTML Tools</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg: #0a0a0f; --card: #12121a; --border: #2a2a3a; --text: #fff; --text2: #888; --accent: #10b981; --accent2: #06b6d4; }
        @media (prefers-color-scheme: light) { :root { --bg: #f5f5f5; --card: #fff; --border: #e0e0e0; --text: #333; --text2: #666; } }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 8px; font-size: 1.8rem; }
        .subtitle { text-align: center; color: var(--text2); margin-bottom: 24px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .card-title { font-size: 1rem; color: var(--text2); margin-bottom: 16px; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 6px; font-size: 0.9rem; color: var(--text2); }
        input, select { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1rem; }
        input:focus, select:focus { outline: none; border-color: var(--accent); }
        .radio-group { display: flex; gap: 12px; }
        .radio-btn { flex: 1; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); cursor: pointer; text-align: center; transition: all 0.2s; }
        .radio-btn.active { background: var(--accent); border-color: var(--accent); color: white; }
        .result-hero { background: linear-gradient(135deg, var(--accent), var(--accent2)); padding: 28px; border-radius: 12px; text-align: center; color: white; margin-bottom: 20px; }
        .result-hero .label { opacity: 0.9; margin-bottom: 4px; }
        .result-hero .big { font-size: 2.5rem; font-weight: 700; }
        .result-hero .unit { font-size: 1rem; opacity: 0.8; }
        .result-hero .range { margin-top: 8px; font-size: 0.9rem; opacity: 0.9; }
        .weight-range { position: relative; height: 40px; margin: 24px 0; border-radius: 20px; overflow: hidden; display: flex; }
        .weight-segment { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; color: white; font-weight: 500; }
        .weight-marker { position: absolute; top: -8px; bottom: -8px; width: 4px; background: white; border: 2px solid var(--card); border-radius: 2px; z-index: 10; }
        .weight-labels { display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text2); margin-top: 4px; }
        .formula-card { padding: 16px; background: var(--bg); border-radius: 12px; margin-bottom: 12px; }
        .formula-name { font-weight: 600; margin-bottom: 4px; }
        .formula-result { font-size: 1.3rem; font-weight: 700; color: var(--accent); }
        .formula-desc { font-size: 0.8rem; color: var(--text2); margin-top: 4px; }
        .result-row { display: flex; justify-content: space-between; padding: 12px; background: var(--bg); border-radius: 8px; margin-bottom: 8px; }
        .result-row .label { color: var(--text2); }
        .result-row .value { font-weight: 600; }
        .comparison { margin-top: 16px; }
        .comparison-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg); border-radius: 8px; margin-bottom: 8px; }
        .comparison-bar { flex: 1; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden; }
        .comparison-fill { height: 100%; border-radius: 4px; }
        .comparison-value { min-width: 60px; text-align: right; font-weight: 600; }
        .tips { margin-top: 16px; }
        .tip { padding: 12px; background: var(--bg); border-radius: 8px; margin-bottom: 8px; font-size: 0.9rem; }
        .tip-title { font-weight: 600; color: var(--accent); margin-bottom: 4px; }
        .note { margin-top: 16px; padding: 12px; background: var(--bg); border-radius: 8px; font-size: 0.85rem; color: var(--text2); }
            .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../../index.html" class="back-link">← 返回</a>
        <h1>理想体重计算器</h1>
        <p class="subtitle">多种公式计算您的理想体重范围</p>
        
        <div class="grid">
            <div class="card">
                <div class="card-title">基本信息</div>
                <div class="form-group">
                    <label>性别</label>
                    <div class="radio-group">
                        <div class="radio-btn active" data-value="male" onclick="setGender('male')">男性</div>
                        <div class="radio-btn" data-value="female" onclick="setGender('female')">女性</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>身高 (cm)</label>
                    <input type="number" id="height" value="170" min="100" max="250" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>当前体重 (kg)</label>
                    <input type="number" id="currentWeight" value="70" min="30" max="200" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>年龄 (岁)</label>
                    <input type="number" id="age" value="25" min="10" max="100" oninput="calculate()">
                </div>
                <div class="form-group">
                    <label>体型骨架</label>
                    <select id="frame" onchange="calculate()">
                        <option value="small">小骨架</option>
                        <option value="medium" selected>中等骨架</option>
                        <option value="large">大骨架</option>
                    </select>
                </div>
            </div>
            
            <div>
                <div class="result-hero">
                    <div class="label">理想体重范围</div>
                    <div class="big"><span id="idealWeight">0</span><span class="unit"> kg</span></div>
                    <div class="range" id="weightRange">范围: 0 - 0 kg</div>
                </div>
                
                <div class="card">
                    <div class="card-title">体重状态</div>
                    <div class="weight-range" id="weightRangeBar"></div>
                    <div class="weight-labels" id="weightLabels"></div>
                    <div class="result-row" style="margin-top: 16px;">
                        <span class="label">当前BMI</span>
                        <span class="value" id="currentBMI">0</span>
                    </div>
                    <div class="result-row">
                        <span class="label">与理想体重差距</span>
                        <span class="value" id="weightDiff">0 kg</span>
                    </div>
                    <div class="result-row">
                        <span class="label">健康体重范围</span>
                        <span class="value" id="healthyRange">0 - 0 kg</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">各公式计算结果</div>
            <div class="grid" id="formulas"></div>
        </div>
        
        <div class="grid">
            <div class="card">
                <div class="card-title">体重对比</div>
                <div class="comparison" id="comparison"></div>
            </div>
            
            <div class="card">
                <div class="card-title">健康建议</div>
                <div class="tips" id="tips"></div>
            </div>
        </div>
        
        <div class="note">
            理想体重因人而异，受肌肉量、骨骼密度、年龄等多种因素影响。本计算器提供多种公式的参考值，实际健康状况应结合体脂率、腰围等指标综合评估。
        </div>
    </div>
    
    <script>
        let gender = 'male';
        
        function setGender(g) {
            gender = g;
            document.querySelectorAll('.radio-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.value === g);
            });
            calculate();
        }
        
        function calculate() {
            const height = parseFloat(document.getElementById('height').value) || 170;
            const currentWeight = parseFloat(document.getElementById('currentWeight').value) || 70;
            const age = parseInt(document.getElementById('age').value) || 25;
            const frame = document.getElementById('frame').value;
            
            const heightM = height / 100;
            const heightIn = height / 2.54;
            
            // 各种公式计算理想体重
            const formulas = [];
            
            // 1. BMI公式 (BMI=22)
            const bmiIdeal = 22 * heightM * heightM;
            formulas.push({
                name: 'BMI标准法',
                result: bmiIdeal,
                desc: '基于BMI=22计算，适用于大多数亚洲人'
            });
            
            // 2. Devine公式
            let devineIdeal;
            if (gender === 'male') {
                devineIdeal = 50 + 2.3 * (heightIn - 60);
            } else {
                devineIdeal = 45.5 + 2.3 * (heightIn - 60);
            }
            formulas.push({
                name: 'Devine公式',
                result: devineIdeal,
                desc: '药物剂量计算中广泛使用的标准'
            });
            
            // 3. Robinson公式
            let robinsonIdeal;
            if (gender === 'male') {
                robinsonIdeal = 52 + 1.9 * (heightIn - 60);
            } else {
                robinsonIdeal = 49 + 1.7 * (heightIn - 60);
            }
            formulas.push({
                name: 'Robinson公式',
                result: robinsonIdeal,
                desc: '1983年修订的临床标准公式'
            });
            
            // 4. Miller公式
            let millerIdeal;
            if (gender === 'male') {
                millerIdeal = 56.2 + 1.41 * (heightIn - 60);
            } else {
                millerIdeal = 53.1 + 1.36 * (heightIn - 60);
            }
            formulas.push({
                name: 'Miller公式',
                result: millerIdeal,
                desc: '1983年发表，考虑了现代人体型'
            });
            
            // 5. Hamwi公式
            let hamwiIdeal;
            if (gender === 'male') {
                hamwiIdeal = 48 + 2.7 * (heightIn - 60);
            } else {
                hamwiIdeal = 45.5 + 2.2 * (heightIn - 60);
            }
            formulas.push({
                name: 'Hamwi公式',
                result: hamwiIdeal,
                desc: '营养学中常用的快速估算方法'
            });
            
            // 6. Broca公式 (亚洲版)
            const brocaIdeal = (height - 100) * 0.9;
            formulas.push({
                name: 'Broca公式',
                result: brocaIdeal,
                desc: '亚洲地区常用的简易计算法'
            });
            
            // 计算平均理想体重
            const avgIdeal = formulas.reduce((sum, f) => sum + f.result, 0) / formulas.length;
            
            // 根据体型调整
            let frameAdjust = 1;
            if (frame === 'small') frameAdjust = 0.9;
            else if (frame === 'large') frameAdjust = 1.1;
            
            const adjustedIdeal = avgIdeal * frameAdjust;
            const minIdeal = Math.min(...formulas.map(f => f.result)) * frameAdjust;
            const maxIdeal = Math.max(...formulas.map(f => f.result)) * frameAdjust;
            
            // BMI健康范围
            const healthyMin = 18.5 * heightM * heightM;
            const healthyMax = 24 * heightM * heightM;
            
            // 当前BMI
            const currentBMI = currentWeight / (heightM * heightM);
            
            // 更新显示
            document.getElementById('idealWeight').textContent = adjustedIdeal.toFixed(1);
            document.getElementById('weightRange').textContent = '范围: ' + minIdeal.toFixed(1) + ' - ' + maxIdeal.toFixed(1) + ' kg';
            document.getElementById('currentBMI').textContent = currentBMI.toFixed(1);
            document.getElementById('healthyRange').textContent = healthyMin.toFixed(1) + ' - ' + healthyMax.toFixed(1) + ' kg';
            
            const diff = currentWeight - adjustedIdeal;
            const diffText = diff > 0 ? '+' + diff.toFixed(1) : diff.toFixed(1);
            document.getElementById('weightDiff').textContent = diffText + ' kg';
            
            // 渲染体重范围条
            renderWeightRange(currentWeight, healthyMin, healthyMax, adjustedIdeal);
            
            // 渲染公式结果
            renderFormulas(formulas, frameAdjust);
            
            // 渲染对比
            renderComparison(currentWeight, adjustedIdeal, healthyMin, healthyMax);
            
            // 渲染建议
            renderTips(currentWeight, adjustedIdeal, currentBMI);
        }
        
        function renderWeightRange(current, min, max, ideal) {
            const bar = document.getElementById('weightRangeBar');
            const labels = document.getElementById('weightLabels');
            bar.textContent = '';
            labels.textContent = '';
            
            const rangeMin = min * 0.7;
            const rangeMax = max * 1.3;
            const total = rangeMax - rangeMin;
            
            const segments = [
                { label: '偏瘦', end: min, color: '#3b82f6' },
                { label: '健康', end: max, color: '#22c55e' },
                { label: '偏重', end: rangeMax, color: '#f97316' }
            ];
            
            let lastEnd = rangeMin;
            segments.forEach(seg => {
                const width = ((seg.end - lastEnd) / total) * 100;
                const div = document.createElement('div');
                div.className = 'weight-segment';
                div.style.width = width + '%';
                div.style.background = seg.color;
                div.textContent = seg.label;
                bar.appendChild(div);
                lastEnd = seg.end;
            });
            
            // 当前体重标记
            const markerPos = Math.min(100, Math.max(0, ((current - rangeMin) / total) * 100));
            const marker = document.createElement('div');
            marker.className = 'weight-marker';
            marker.style.left = markerPos + '%';
            bar.appendChild(marker);
            
            // 标签
            const labelValues = [Math.round(rangeMin), Math.round(min), Math.round(max), Math.round(rangeMax)];
            labelValues.forEach(val => {
                const span = document.createElement('span');
                span.textContent = val + 'kg';
                labels.appendChild(span);
            });
        }
        
        function renderFormulas(formulas, frameAdjust) {
            const container = document.getElementById('formulas');
            container.textContent = '';
            
            formulas.forEach(formula => {
                const div = document.createElement('div');
                div.className = 'formula-card';
                
                const name = document.createElement('div');
                name.className = 'formula-name';
                name.textContent = formula.name;
                
                const result = document.createElement('div');
                result.className = 'formula-result';
                result.textContent = (formula.result * frameAdjust).toFixed(1) + ' kg';
                
                const desc = document.createElement('div');
                desc.className = 'formula-desc';
                desc.textContent = formula.desc;
                
                div.appendChild(name);
                div.appendChild(result);
                div.appendChild(desc);
                container.appendChild(div);
            });
        }
        
        function renderComparison(current, ideal, min, max) {
            const container = document.getElementById('comparison');
            container.textContent = '';
            
            const maxVal = Math.max(current, ideal, max) * 1.1;
            
            const items = [
                { label: '当前体重', value: current, color: '#f97316' },
                { label: '理想体重', value: ideal, color: '#10b981' },
                { label: '健康下限', value: min, color: '#3b82f6' },
                { label: '健康上限', value: max, color: '#eab308' }
            ];
            
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'comparison-item';
                
                const label = document.createElement('span');
                label.style.minWidth = '80px';
                label.textContent = item.label;
                
                const barContainer = document.createElement('div');
                barContainer.className = 'comparison-bar';
                
                const fill = document.createElement('div');
                fill.className = 'comparison-fill';
                fill.style.width = (item.value / maxVal * 100) + '%';
                fill.style.background = item.color;
                barContainer.appendChild(fill);
                
                const value = document.createElement('span');
                value.className = 'comparison-value';
                value.textContent = item.value.toFixed(1) + ' kg';
                
                div.appendChild(label);
                div.appendChild(barContainer);
                div.appendChild(value);
                container.appendChild(div);
            });
        }
        
        function renderTips(current, ideal, bmi) {
            const container = document.getElementById('tips');
            container.textContent = '';
            
            const diff = current - ideal;
            let tips = [];
            
            if (bmi < 18.5) {
                tips = [
                    { title: '增加热量摄入', text: '每天增加300-500千卡热量，选择营养密度高的食物' },
                    { title: '蛋白质补充', text: '每公斤体重摄入1.2-1.5克蛋白质，促进肌肉增长' },
                    { title: '力量训练', text: '进行适度力量训练，增加肌肉量而非单纯增脂' }
                ];
            } else if (bmi >= 18.5 && bmi < 24) {
                tips = [
                    { title: '保持现状', text: '您的体重处于健康范围，继续保持均衡饮食和适量运动' },
                    { title: '定期监测', text: '每月称重1-2次，关注体重变化趋势' }
                ];
            } else if (bmi >= 24 && bmi < 28) {
                tips = [
                    { title: '控制饮食', text: '每天减少300-500千卡热量，避免高糖高脂食物' },
                    { title: '增加运动', text: '每周进行150分钟以上中等强度有氧运动' },
                    { title: '渐进减重', text: '每周减重0.5-1kg为健康速度，避免极端节食' }
                ];
            } else {
                tips = [
                    { title: '咨询专业人士', text: '建议咨询医生或营养师，制定科学的减重计划' },
                    { title: '饮食调整', text: '低热量、高蛋白、高纤维饮食，控制碳水摄入' },
                    { title: '规律运动', text: '每天30-60分钟有氧运动，配合力量训练' }
                ];
            }
            
            tips.forEach(tip => {
                const div = document.createElement('div');
                div.className = 'tip';
                
                const title = document.createElement('div');
                title.className = 'tip-title';
                title.textContent = tip.title;
                
                const text = document.createElement('div');
                text.textContent = tip.text;
                
                div.appendChild(title);
                div.appendChild(text);
                container.appendChild(div);
            });
        }
        
        calculate();
    </script>
</body>
</html>
