<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON ËΩ¨ TypeScript - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="JSON ËΩ¨ TypeScript - WebUtils" />
    <meta name="keywords" content="json-to-typescript,dev,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/dev/json-to-typescript.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="JSON ËΩ¨ TypeScript - WebUtils" />
    <meta property="og:description" content="JSON ËΩ¨ TypeScript - WebUtils" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/dev/json-to-typescript.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="JSON ËΩ¨ TypeScript - WebUtils" />
    <meta name="twitter:description" content="JSON ËΩ¨ TypeScript - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <meta
      name="description"
      content="Âú®Á∫øÂ∞Ü JSON Êï∞ÊçÆËΩ¨Êç¢‰∏∫ TypeScript Êé•Âè£ÂÆö‰πâÔºåÊîØÊåÅÂµåÂ•óÂØπË±°ÂíåÊï∞ÁªÑ"
    />
    <meta name="keywords" content="JSON,TypeScript,interface,Á±ªÂûãÂÆö‰πâ,ËΩ¨Êç¢" />
    <link rel="canonical" href="https://html-tools.cnb.cool/tools/dev/json-to-typescript.html" />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;

        /* Â≠ó‰ΩìÂèòÈáè */
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
      }

      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      :root {
        --bg-color: var(--color-bg-card);
        --text-color: #333;
        --border-color: #ddd;
        --card-bg: #fff;
        --primary-color: #3178c6;
        --primary-hover: #2563eb;
        --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        --success-color: #4caf50;
      }
      [data-theme="dark"] {
        --bg-color: var(--color-text-primary);
        --text-color: #e0e0e0;
        --border-color: #444;
        --card-bg: #2d2d2d;
        --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--bg-color);
        color: var(--text-color);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      header {
        text-align: center;
        margin-bottom: 30px;
      }
      h1 {
        font-size: 1.8rem;
        margin-bottom: 10px;
        color: var(--primary-color);
      }
      .subtitle {
        color: var(--text-color);
        opacity: 0.7;
        font-size: 0.95rem;
      }
      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 8px 16px;
        border: 1px solid var(--border-color);
        border-radius: 20px;
        background: var(--card-bg);
        color: var(--text-color);
        cursor: pointer;
        font-size: 14px;
      }
      .card {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 24px;
        box-shadow: var(--shadow);
        margin-bottom: 20px;
      }
      .options {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }
      .option-group {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .option-group label {
        font-size: 14px;
        cursor: pointer;
      }
      input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
      }
      input[type="text"] {
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        font-size: 14px;
        background: var(--bg-color);
        color: var(--text-color);
        width: 150px;
      }
      .editor-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        min-height: 400px;
      }
      @media (max-width: 768px) {
        .editor-container {
          grid-template-columns: 1fr;
        }
      }
      .editor-panel {
        display: flex;
        flex-direction: column;
      }
      .editor-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        background: var(--bg-color);
        border-radius: 8px 8px 0 0;
        border: 1px solid var(--border-color);
        border-bottom: none;
      }
      .editor-title {
        font-size: 14px;
        font-weight: 600;
      }
      .editor-actions {
        display: flex;
        gap: 8px;
      }
      .btn {
        padding: 6px 14px;
        border: none;
        border-radius: 6px;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.3s;
      }
      .btn-primary {
        background: var(--primary-color);
        color: white;
      }
      .btn-primary:hover {
        background: var(--primary-hover);
      }
      .btn-secondary {
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-color);
      }
      .btn-secondary:hover {
        border-color: var(--primary-color);
      }
      textarea {
        flex: 1;
        padding: 16px;
        border: 1px solid var(--border-color);
        border-radius: 0 0 8px 8px;
        font-family: Consolas, Monaco, monospace;
        font-size: 14px;
        resize: none;
        background: var(--bg-color);
        color: var(--text-color);
        line-height: 1.5;
      }
      textarea:focus {
        outline: none;
        border-color: var(--primary-color);
      }
      .error-msg {
        color: #f44336;
        font-size: 13px;
        padding: 10px;
        background: rgba(244, 67, 54, 0.1);
        border-radius: 6px;
        margin-top: 10px;
        display: none;
      }
      .error-msg.show {
        display: block;
      }
      .sample-btns {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-bottom: 16px;
      }
      .sample-btn {
        padding: 6px 14px;
        border: 1px solid var(--border-color);
        border-radius: 20px;
        background: transparent;
        color: var(--text-color);
        font-size: 12px;
        cursor: pointer;
        transition: all 0.3s;
      }
      .sample-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }
      .copy-toast {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--success-color);
        color: white;
        padding: 10px 20px;
        border-radius: 8px;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .copy-toast.show {
        opacity: 1;
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="breadcrumb">
      <a href="../../index.html">È¶ñÈ°µ</a>
      <span>‚Ä∫</span>
      JSON ËΩ¨ TypeScript
    </nav>
    <button class="theme-toggle" onclick="toggleTheme()">üåì ‰∏ªÈ¢ò</button>

    <div class="container">
      <header>
        <h1>üî∑ JSON ËΩ¨ TypeScript</h1>
        <p class="subtitle">Â∞Ü JSON Êï∞ÊçÆËá™Âä®ËΩ¨Êç¢‰∏∫ TypeScript Êé•Âè£ÂÆö‰πâ</p>
      </header>

      <div class="card">
        <div class="sample-btns">
          <button class="sample-btn" onclick="loadSample('user')">Áî®Êà∑Êï∞ÊçÆ</button>
          <button class="sample-btn" onclick="loadSample('api')">API ÂìçÂ∫î</button>
          <button class="sample-btn" onclick="loadSample('config')">ÈÖçÁΩÆÊñá‰ª∂</button>
          <button class="sample-btn" onclick="loadSample('nested')">ÂµåÂ•óÂØπË±°</button>
        </div>
        <div class="options">
          <div class="option-group">
            <label>Êé•Âè£ÂêçÁß∞:</label>
            <input type="text" id="rootName" value="RootObject" oninput="convert()" />
          </div>
          <div class="option-group">
            <input type="checkbox" id="optExport" checked onchange="convert()" />
            <label for="optExport">Ê∑ªÂä† export</label>
          </div>
          <div class="option-group">
            <input type="checkbox" id="optOptional" onchange="convert()" />
            <label for="optOptional">ÊâÄÊúâÂ±ûÊÄßÂèØÈÄâ</label>
          </div>
          <div class="option-group">
            <input type="checkbox" id="optReadonly" onchange="convert()" />
            <label for="optReadonly">Âè™ËØªÂ±ûÊÄß</label>
          </div>
          <div class="option-group">
            <input type="checkbox" id="optType" onchange="convert()" />
            <label for="optType">‰ΩøÁî® type Êõø‰ª£ interface</label>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="editor-container">
          <div class="editor-panel">
            <div class="editor-header">
              <span class="editor-title">üì• JSON ËæìÂÖ•</span>
              <div class="editor-actions">
                <button class="btn btn-secondary" onclick="formatJson()">Ê†ºÂºèÂåñ</button>
                <button class="btn btn-secondary" onclick="clearInput()">Ê∏ÖÁ©∫</button>
              </div>
            </div>
            <textarea id="jsonInput" placeholder="Á≤òË¥¥ JSON Êï∞ÊçÆ...">
{
  "id": 1,
  "name": "John Doe",
  "email": "john@example.com",
  "age": 30,
  "isActive": true,
  "tags": ["developer", "designer"],
  "address": {
    "street": "123 Main St",
    "city": "New York",
    "zipCode": "10001"
  },
  "createdAt": "2024-01-15T10:30:00Z"
}</textarea
            >
            <div class="error-msg" id="errorMsg"></div>
          </div>
          <div class="editor-panel">
            <div class="editor-header">
              <span class="editor-title">üì§ TypeScript ËæìÂá∫</span>
              <div class="editor-actions">
                <button class="btn btn-primary" onclick="copyOutput()">Â§çÂà∂</button>
                <button class="btn btn-secondary" onclick="downloadOutput()">‰∏ãËΩΩ</button>
              </div>
            </div>
            <textarea id="tsOutput" readonly placeholder="TypeScript Êé•Âè£Â∞ÜÂú®Ê≠§ÊòæÁ§∫..."></textarea>
          </div>
        </div>
      </div>
    </div>

    <div class="copy-toast" id="toast">Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø</div>

    <script>
      window.toggleTheme = function () {
        const html = document.documentElement;
        const newTheme = html.getAttribute("data-theme") === "dark" ? "light" : "dark";
        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
      };
      (function () {
        const savedTheme =
          localStorage.getItem("theme") ||
          (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
        document.documentElement.setAttribute("data-theme", savedTheme);
      })();

      const samples = {
        user: {
          id: 1,
          name: "John Doe",
          email: "john@example.com",
          age: 30,
          isActive: true,
          tags: ["developer", "designer"],
          address: { street: "123 Main St", city: "New York", zipCode: "10001" },
          createdAt: "2024-01-15T10:30:00Z"
        },
        api: {
          success: true,
          code: 200,
          message: "Success",
          data: {
            items: [{ id: 1, title: "Item 1", price: 29.99 }],
            pagination: { page: 1, pageSize: 10, total: 100 }
          },
          timestamp: 1705312200000
        },
        config: {
          appName: "MyApp",
          version: "1.0.0",
          debug: false,
          features: { darkMode: true, notifications: true, analytics: false },
          api: { baseUrl: "https://api.example.com", timeout: 5000 }
        },
        nested: {
          level1: {
            level2: {
              level3: { value: "deep", items: [1, 2, 3] }
            },
            siblings: [{ name: "a" }, { name: "b" }]
          }
        }
      };

      window.loadSample = function (name) {
        document.getElementById("jsonInput").value = JSON.stringify(samples[name], null, 2);
        convert();
      };

      window.formatJson = function () {
        try {
          const json = JSON.parse(document.getElementById("jsonInput").value);
          document.getElementById("jsonInput").value = JSON.stringify(json, null, 2);
          hideError();
        } catch (e) {
          showError("JSON Ê†ºÂºèÈîôËØØ: " + e.message);
        }
      };

      window.clearInput = function () {
        document.getElementById("jsonInput").value = "";
        document.getElementById("tsOutput").value = "";
        hideError();
      };

      function showError(msg) {
        const el = document.getElementById("errorMsg");
        el.textContent = msg;
        el.classList.add("show");
      }

      function hideError() {
        document.getElementById("errorMsg").classList.remove("show");
      }

      function capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      }

      function getType(value, key, interfaces) {
        if (value === null) return "null";
        if (value === undefined) return "undefined";

        const type = typeof value;

        if (type === "string") {
          // Check for date string
          if (/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2})?/.test(value)) {
            return "string"; // Could return 'Date' with a comment
          }
          return "string";
        }
        if (type === "number") return "number";
        if (type === "boolean") return "boolean";

        if (Array.isArray(value)) {
          if (value.length === 0) return "unknown[]";

          // Check if all items are same type
          const itemTypes = new Set(
            value.map((item) => {
              if (typeof item === "object" && item !== null && !Array.isArray(item)) {
                const interfaceName = capitalize(key.replace(/s$/, "")) + "Item";
                generateInterface(item, interfaceName, interfaces);
                return interfaceName;
              }
              return getType(item, key, interfaces);
            })
          );

          if (itemTypes.size === 1) {
            return [...itemTypes][0] + "[]";
          }
          return "(" + [...itemTypes].join(" | ") + ")[]";
        }

        if (type === "object") {
          const interfaceName = capitalize(key);
          generateInterface(value, interfaceName, interfaces);
          return interfaceName;
        }

        return "unknown";
      }

      function generateInterface(obj, name, interfaces) {
        const useExport = document.getElementById("optExport").checked;
        const allOptional = document.getElementById("optOptional").checked;
        const readonly = document.getElementById("optReadonly").checked;
        const useType = document.getElementById("optType").checked;

        const exportPrefix = useExport ? "export " : "";
        const optionalMark = allOptional ? "?" : "";
        const readonlyPrefix = readonly ? "readonly " : "";

        const properties = Object.entries(obj).map(([key, value]) => {
          const propType = getType(value, key, interfaces);
          const safeName = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(key) ? key : `"${key}"`;
          return `  ${readonlyPrefix}${safeName}${optionalMark}: ${propType};`;
        });

        let definition;
        if (useType) {
          definition = `${exportPrefix}type ${name} = {\n${properties.join("\n")}\n};`;
        } else {
          definition = `${exportPrefix}interface ${name} {\n${properties.join("\n")}\n}`;
        }

        // Avoid duplicates
        if (!interfaces.some((i) => i.name === name)) {
          interfaces.push({ name, definition });
        }
      }

      function convert() {
        const input = document.getElementById("jsonInput").value.trim();
        if (!input) {
          document.getElementById("tsOutput").value = "";
          hideError();
          return;
        }

        try {
          const json = JSON.parse(input);
          hideError();

          const interfaces = [];
          const rootName = document.getElementById("rootName").value || "RootObject";

          if (Array.isArray(json)) {
            if (json.length > 0 && typeof json[0] === "object") {
              generateInterface(json[0], rootName, interfaces);
              const useExport = document.getElementById("optExport").checked;
              interfaces.push({
                name: rootName + "Array",
                definition: `${useExport ? "export " : ""}type ${rootName}Array = ${rootName}[];`
              });
            } else {
              const itemType = json.length > 0 ? typeof json[0] : "unknown";
              const useExport = document.getElementById("optExport").checked;
              interfaces.push({
                name: rootName,
                definition: `${useExport ? "export " : ""}type ${rootName} = ${itemType}[];`
              });
            }
          } else if (typeof json === "object" && json !== null) {
            generateInterface(json, rootName, interfaces);
          } else {
            const useExport = document.getElementById("optExport").checked;
            interfaces.push({
              name: rootName,
              definition: `${useExport ? "export " : ""}type ${rootName} = ${typeof json};`
            });
          }

          // Reverse to put root interface first, then nested ones
          const output = interfaces
            .reverse()
            .map((i) => i.definition)
            .join("\n\n");
          document.getElementById("tsOutput").value = output;
        } catch (e) {
          showError("JSON Ëß£ÊûêÈîôËØØ: " + e.message);
          document.getElementById("tsOutput").value = "";
        }
      }

      window.copyOutput = function () {
        const output = document.getElementById("tsOutput").value;
        if (output) {
          navigator.clipboard.writeText(output);
          showToast();
        }
      };

      window.downloadOutput = function () {
        const output = document.getElementById("tsOutput").value;
        if (!output) return;

        const blob = new Blob([output], { type: "text/typescript" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "types.ts";
        a.click();
        URL.revokeObjectURL(url);
      };

      function showToast() {
        const toast = document.getElementById("toast");
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 2000);
      }

      // Auto convert on input
      document.getElementById("jsonInput").addEventListener("input", convert);

      // Initial convert
      convert();
    </script>
  </body>
</html>
