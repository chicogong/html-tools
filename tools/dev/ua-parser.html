<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>User Agent 解析器 - WebUtils</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #12121a;
      --bg-card: #1a1a24;
      --bg-input: #0e0e14;
      --text-primary: #e8e8ed;
      --text-secondary: #8888a0;
      --text-muted: #55556a;
      --border-subtle: #2a2a3a;
      --accent-cyan: #00f5d4;
      --accent-green: #10b981;
      --accent-red: #f43f5e;
      --glow-cyan: rgb(0, 245, 212, 0.15);
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      background: var(--bg-deep);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }
    .bg-grid {
      position: fixed; inset: 0;
      background-image: linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none; z-index: 0;
    }
    .container {
      position: relative; z-index: 1;
      max-width: 900px; margin: 0 auto; padding: 24px;
    }
    .header {
      display: flex; align-items: center; gap: 20px;
      margin-bottom: 24px; flex-wrap: wrap;
    }
    .back-link {
      display: inline-flex; align-items: center; gap: 8px;
      font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;
      color: var(--text-secondary); text-decoration: none;
      padding: 8px 14px; background: var(--bg-surface);
      border: 1px solid var(--border-subtle); border-radius: var(--radius-sm);
    }
    .back-link:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    .title-section { flex: 1; }
    .title-section h1 {
      font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; font-weight: 600;
      display: flex; align-items: center; gap: 12px;
    }
    .title-icon {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, var(--accent-cyan), #4cc9f0);
      border-radius: var(--radius-sm);
      display: flex; align-items: center; justify-content: center;
      font-size: 18px; color: var(--bg-deep);
    }
    .title-section .desc { font-size: 0.9rem; color: var(--text-secondary); margin-top: 4px; }
    .main-card {
      background: var(--bg-card); border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg); padding: 24px;
    }
    .toolbar {
      display: flex; gap: 10px; flex-wrap: wrap;
      margin-bottom: 20px; padding-bottom: 20px;
      border-bottom: 1px solid var(--border-subtle);
    }
    button {
      font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: 500;
      padding: 10px 16px; background: var(--bg-surface);
      border: 1px solid var(--border-subtle); border-radius: var(--radius-sm);
      color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease;
    }
    button:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    button.primary { background: var(--accent-cyan); color: var(--bg-deep); border: none; }
    button.primary:hover { background: #00dfc4; box-shadow: 0 0 20px var(--glow-cyan); }
    textarea {
      width: 100%; min-height: 100px; padding: 16px;
      font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;
      background: var(--bg-input); border: 2px solid var(--border-subtle);
      border-radius: var(--radius-md); color: var(--text-primary);
      resize: vertical; margin-bottom: 20px;
    }
    textarea:focus { outline: none; border-color: var(--accent-cyan); box-shadow: 0 0 0 4px var(--glow-cyan); }
    textarea::placeholder { color: var(--text-muted); }
    .result-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }
    .result-card {
      background: var(--bg-surface); border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md); padding: 20px;
    }
    .result-card h3 {
      font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;
      color: var(--text-muted); text-transform: uppercase;
      letter-spacing: 0.1em; margin-bottom: 12px;
    }
    .result-item {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 0; border-bottom: 1px solid var(--border-subtle);
    }
    .result-item:last-child { border-bottom: none; }
    .result-label { font-size: 0.85rem; color: var(--text-secondary); }
    .result-value {
      font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;
      color: var(--accent-cyan); font-weight: 500;
    }
    .result-value.unknown { color: var(--text-muted); }
    .current-ua {
      background: var(--bg-surface); border-radius: var(--radius-md);
      padding: 16px; margin-bottom: 20px;
    }
    .current-ua h4 {
      font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;
      color: var(--text-muted); margin-bottom: 8px;
    }
    .current-ua code {
      font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;
      color: var(--text-secondary); word-break: break-all;
    }
    footer {
      text-align: center; margin-top: 24px; padding-top: 16px;
      border-top: 1px solid var(--border-subtle);
    }
    footer p {
      font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text-muted);
      display: flex; align-items: center; justify-content: center; gap: 8px;
    }
    footer a { color: var(--accent-cyan); text-decoration: none; }
  </style>
</head>
<body>
  <div class="bg-grid"></div>
  <div class="container">
    <div class="header">
      <a href="../../index.html" class="back-link">← 返回</a>
      <div class="title-section">
        <h1><span class="title-icon">UA</span>User Agent 解析器</h1>
        <p class="desc">解析浏览器 UA 字符串，显示浏览器、操作系统、设备信息</p>
      </div>
    </div>

    <div class="main-card">
      <div class="current-ua">
        <h4>当前浏览器 UA</h4>
        <code id="currentUA"></code>
      </div>

      <div class="toolbar">
        <button id="btnPaste">粘贴</button>
        <button id="btnParse" class="primary">解析</button>
        <button id="btnUseCurrent">使用当前 UA</button>
        <button id="btnClear">清空</button>
      </div>

      <textarea id="input" placeholder="粘贴 User-Agent 字符串..." spellcheck="false"></textarea>

      <div class="result-grid" id="results">
        <div class="result-card">
          <h3>浏览器</h3>
          <div class="result-item">
            <span class="result-label">名称</span>
            <span class="result-value" id="browserName">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">版本</span>
            <span class="result-value" id="browserVersion">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">引擎</span>
            <span class="result-value" id="browserEngine">-</span>
          </div>
        </div>
        <div class="result-card">
          <h3>操作系统</h3>
          <div class="result-item">
            <span class="result-label">名称</span>
            <span class="result-value" id="osName">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">版本</span>
            <span class="result-value" id="osVersion">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">架构</span>
            <span class="result-value" id="osArch">-</span>
          </div>
        </div>
        <div class="result-card">
          <h3>设备</h3>
          <div class="result-item">
            <span class="result-label">类型</span>
            <span class="result-value" id="deviceType">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">品牌</span>
            <span class="result-value" id="deviceVendor">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">型号</span>
            <span class="result-value" id="deviceModel">-</span>
          </div>
        </div>
        <div class="result-card">
          <h3>其他</h3>
          <div class="result-item">
            <span class="result-label">是否移动端</span>
            <span class="result-value" id="isMobile">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">是否机器人</span>
            <span class="result-value" id="isBot">-</span>
          </div>
          <div class="result-item">
            <span class="result-label">CPU 架构</span>
            <span class="result-value" id="cpuArch">-</span>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <p>
        <a href="https://github.com/chicogong/html-tools" target="_blank">GitHub</a>
        <span>·</span><span>纯前端 · 无服务器</span><span>·</span>
        <a href="../../index.html">WebUtils</a>
      </p>
    </footer>
  </div>

  <script>
    const inputEl = document.getElementById('input');
    const currentUAEl = document.getElementById('currentUA');

    currentUAEl.textContent = navigator.userAgent;

    function parseUA(ua) {
      const result = {
        browser: { name: null, version: null, engine: null },
        os: { name: null, version: null, arch: null },
        device: { type: 'Desktop', vendor: null, model: null },
        isMobile: false,
        isBot: false,
        cpuArch: null
      };

      // Browser detection
      if (/Edg\//i.test(ua)) {
        result.browser.name = 'Edge';
        result.browser.version = ua.match(/Edg\/(\d+[\d.]*)/)?.[1];
        result.browser.engine = 'Blink';
      } else if (/OPR\//i.test(ua) || /Opera/i.test(ua)) {
        result.browser.name = 'Opera';
        result.browser.version = ua.match(/(?:OPR|Opera)\/(\d+[\d.]*)/)?.[1];
        result.browser.engine = 'Blink';
      } else if (/Chrome/i.test(ua) && !/Chromium/i.test(ua)) {
        result.browser.name = 'Chrome';
        result.browser.version = ua.match(/Chrome\/(\d+[\d.]*)/)?.[1];
        result.browser.engine = 'Blink';
      } else if (/Firefox/i.test(ua)) {
        result.browser.name = 'Firefox';
        result.browser.version = ua.match(/Firefox\/(\d+[\d.]*)/)?.[1];
        result.browser.engine = 'Gecko';
      } else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) {
        result.browser.name = 'Safari';
        result.browser.version = ua.match(/Version\/(\d+[\d.]*)/)?.[1];
        result.browser.engine = 'WebKit';
      } else if (/MSIE|Trident/i.test(ua)) {
        result.browser.name = 'Internet Explorer';
        result.browser.version = ua.match(/(?:MSIE |rv:)(\d+[\d.]*)/)?.[1];
        result.browser.engine = 'Trident';
      }

      // OS detection
      if (/Windows NT/i.test(ua)) {
        result.os.name = 'Windows';
        const ntVersion = ua.match(/Windows NT (\d+\.\d+)/)?.[1];
        const versionMap = { '10.0': '10/11', '6.3': '8.1', '6.2': '8', '6.1': '7', '6.0': 'Vista', '5.1': 'XP' };
        result.os.version = versionMap[ntVersion] || ntVersion;
      } else if (/Mac OS X/i.test(ua)) {
        result.os.name = 'macOS';
        result.os.version = ua.match(/Mac OS X (\d+[._]\d+[._]?\d*)/)?.[1]?.replace(/_/g, '.');
      } else if (/iPhone|iPad|iPod/i.test(ua)) {
        result.os.name = 'iOS';
        result.os.version = ua.match(/OS (\d+[._]\d+[._]?\d*)/)?.[1]?.replace(/_/g, '.');
      } else if (/Android/i.test(ua)) {
        result.os.name = 'Android';
        result.os.version = ua.match(/Android (\d+[\d.]*)/)?.[1];
      } else if (/Linux/i.test(ua)) {
        result.os.name = 'Linux';
      }

      // Device detection
      if (/iPhone/i.test(ua)) {
        result.device = { type: 'Mobile', vendor: 'Apple', model: 'iPhone' };
        result.isMobile = true;
      } else if (/iPad/i.test(ua)) {
        result.device = { type: 'Tablet', vendor: 'Apple', model: 'iPad' };
        result.isMobile = true;
      } else if (/Android/i.test(ua)) {
        result.isMobile = true;
        result.device.type = /Mobile/i.test(ua) ? 'Mobile' : 'Tablet';
        const model = ua.match(/;\s*([^;)]+)\s*Build\//)?.[1]?.trim();
        if (model) {
          result.device.model = model;
          if (/Samsung/i.test(model)) result.device.vendor = 'Samsung';
          else if (/Huawei/i.test(model)) result.device.vendor = 'Huawei';
          else if (/Xiaomi|Redmi|POCO/i.test(model)) result.device.vendor = 'Xiaomi';
          else if (/OPPO/i.test(model)) result.device.vendor = 'OPPO';
          else if (/vivo/i.test(model)) result.device.vendor = 'Vivo';
        }
      }

      // Bot detection
      if (/bot|crawler|spider|scraper|googlebot|bingbot|slurp|duckduck/i.test(ua)) {
        result.isBot = true;
        result.device.type = 'Bot';
      }

      // CPU Architecture
      if (/x64|x86_64|Win64|WOW64|amd64/i.test(ua)) {
        result.cpuArch = 'x86_64';
        result.os.arch = '64-bit';
      } else if (/arm64|aarch64/i.test(ua)) {
        result.cpuArch = 'ARM64';
        result.os.arch = '64-bit';
      } else if (/arm/i.test(ua)) {
        result.cpuArch = 'ARM';
        result.os.arch = '32-bit';
      } else if (/i686|i386|x86/i.test(ua)) {
        result.cpuArch = 'x86';
        result.os.arch = '32-bit';
      }

      return result;
    }

    function displayResult(result) {
      document.getElementById('browserName').textContent = result.browser.name || '-';
      document.getElementById('browserVersion').textContent = result.browser.version || '-';
      document.getElementById('browserEngine').textContent = result.browser.engine || '-';
      document.getElementById('osName').textContent = result.os.name || '-';
      document.getElementById('osVersion').textContent = result.os.version || '-';
      document.getElementById('osArch').textContent = result.os.arch || '-';
      document.getElementById('deviceType').textContent = result.device.type || '-';
      document.getElementById('deviceVendor').textContent = result.device.vendor || '-';
      document.getElementById('deviceModel').textContent = result.device.model || '-';
      document.getElementById('isMobile').textContent = result.isMobile ? '是' : '否';
      document.getElementById('isBot').textContent = result.isBot ? '是' : '否';
      document.getElementById('cpuArch').textContent = result.cpuArch || '-';
    }

    function parse() {
      const ua = inputEl.value.trim();
      if (!ua) return;
      const result = parseUA(ua);
      displayResult(result);
    }

    document.getElementById('btnParse').onclick = parse;
    
    document.getElementById('btnPaste').onclick = async function() {
      try {
        inputEl.value = await navigator.clipboard.readText();
        parse();
      } catch (e) {}
    };

    document.getElementById('btnUseCurrent').onclick = function() {
      inputEl.value = navigator.userAgent;
      parse();
    };

    document.getElementById('btnClear').onclick = function() {
      inputEl.value = '';
      document.querySelectorAll('.result-value').forEach(function(el) {
        el.textContent = '-';
      });
    };

    inputEl.addEventListener('input', function() {
      if (inputEl.value.trim()) parse();
    });

    // Parse current UA on load
    inputEl.value = navigator.userAgent;
    parse();
  </script>
</body>
</html>
