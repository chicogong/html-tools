<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>é©¾é©¶æ–¹å‘æŸ¥è¯¢ - WebUtils</title>
    <meta name="description" content="æŸ¥è¯¢å„å›½é å·¦è¿˜æ˜¯é å³è¡Œé©¶ï¼Œç§Ÿè½¦æ—…è¡Œå¿…å¤‡ä¿¡æ¯" />
    <meta name="keywords" content="driving side left right å·¦è¡Œ å³è¡Œ é©¾é©¶ ç§Ÿè½¦ æ—…è¡Œ" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --bg-hover: #22222e;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-blue: #3b82f6;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
        --font-sans: "Space Grotesk", -apple-system, blinkmacsystemfont, sans-serif;
        --font-mono: "JetBrains Mono", monospace;
      }
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f0f0f0;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgb(0, 245, 212, 0.02) 1px, transparent 1px),
          linear-gradient(90deg, rgb(0, 245, 212, 0.02) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
        z-index: 0;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover { transform: scale(1.1); }
      .container {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 24px;
        min-height: 100vh;
      }
      .header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
      }
      .breadcrumb a {
        color: var(--color-text-secondary);
        text-decoration: none;
        transition: color 0.2s;
      }
      .breadcrumb a:hover { color: var(--color-accent-cyan); }
      .breadcrumb-separator { color: var(--color-text-muted); }
      .breadcrumb-current { color: var(--color-text-primary); font-weight: 500; }
      .title-section { flex: 1; }
      .title-section h1 {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .title-section p {
        color: var(--color-text-secondary);
        margin-top: 4px;
        font-size: 0.9rem;
      }

      /* Statistics Cards */
      .stats-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 24px;
      }
      .stat-card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 20px;
        text-align: center;
      }
      .stat-card.left-drive {
        border-left: 4px solid var(--accent-blue);
      }
      .stat-card.right-drive {
        border-left: 4px solid var(--accent-yellow);
      }
      .stat-number {
        font-family: var(--font-mono);
        font-size: 2.5rem;
        font-weight: 700;
      }
      .stat-card.left-drive .stat-number { color: var(--accent-blue); }
      .stat-card.right-drive .stat-number { color: var(--accent-yellow); }
      .stat-label {
        font-size: 0.85rem;
        color: var(--color-text-secondary);
        margin-top: 4px;
      }

      .main-content {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
      }
      .section-title {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--color-text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 1px solid var(--border-subtle);
      }
      .input-group { margin-bottom: 20px; }
      .input-label {
        display: block;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        color: var(--color-text-secondary);
        margin-bottom: 8px;
      }

      /* Search Input */
      .search-wrapper {
        position: relative;
        margin-bottom: 12px;
      }
      .search-icon {
        position: absolute;
        left: 14px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--color-text-muted);
        pointer-events: none;
      }
      .search-input {
        width: 100%;
        padding: 12px 14px 12px 42px;
        font-family: var(--font-mono);
        font-size: 0.9rem;
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-primary);
        transition: border-color 0.2s;
      }
      .search-input:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
      }
      .search-input::placeholder {
        color: var(--color-text-muted);
      }

      select {
        width: 100%;
        padding: 12px 14px;
        font-family: var(--font-mono);
        font-size: 0.9rem;
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-primary);
        cursor: pointer;
      }
      select:focus {
        outline: none;
        border-color: var(--color-accent-cyan);
      }
      .result-card {
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 32px;
        margin-top: 20px;
        text-align: center;
      }
      .result-header {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 16px;
        margin-bottom: 24px;
      }
      .country-flag {
        font-size: 3rem;
      }
      .country-name {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 600;
      }
      .driving-side {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin: 24px 0;
      }
      .side-indicator {
        padding: 24px 48px;
        border-radius: var(--radius-md);
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 700;
      }
      .side-left {
        background: rgba(59, 130, 246, 0.2);
        border: 2px solid var(--accent-blue);
        color: var(--accent-blue);
      }
      .side-right {
        background: rgba(251, 191, 36, 0.2);
        border: 2px solid var(--accent-yellow);
        color: var(--accent-yellow);
      }
      .side-icon {
        font-size: 3rem;
        margin-bottom: 8px;
      }

      /* Car Visual */
      .car-visual {
        margin: 24px 0;
        padding: 20px;
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
      }
      .road {
        display: flex;
        justify-content: center;
        gap: 4px;
        padding: 20px;
        background: #333;
        border-radius: var(--radius-sm);
        position: relative;
      }
      [data-theme="light"] .road {
        background: #555;
      }
      .road::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 10%;
        right: 10%;
        height: 3px;
        background: repeating-linear-gradient(
          90deg,
          #fff 0,
          #fff 20px,
          transparent 20px,
          transparent 40px
        );
        transform: translateY(-50%);
      }
      .lane {
        width: 80px;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }
      .car-icon {
        font-size: 2.5rem;
        transition: transform 0.3s;
      }
      .car-icon.left-side {
        transform: scaleX(-1);
      }
      .lane-label {
        position: absolute;
        bottom: -24px;
        font-size: 0.7rem;
        color: var(--color-text-muted);
        white-space: nowrap;
      }
      .road-label {
        text-align: center;
        font-size: 0.8rem;
        color: var(--color-text-muted);
        margin-bottom: 8px;
      }

      .steering-info {
        margin-top: 16px;
        padding: 16px;
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
      }
      .steering-label {
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
        text-transform: uppercase;
      }
      .steering-value {
        font-family: var(--font-mono);
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--color-accent-cyan);
        margin-top: 4px;
      }

      /* Filter Tabs */
      .filter-section {
        margin-top: 32px;
      }
      .filter-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
        flex-wrap: wrap;
        gap: 12px;
      }
      .filter-title {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--color-text-secondary);
      }
      .filter-tabs {
        display: flex;
        gap: 8px;
      }
      .filter-tab {
        padding: 6px 14px;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }
      .filter-tab:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      .filter-tab.active {
        background: var(--color-accent-cyan);
        border-color: var(--color-accent-cyan);
        color: var(--color-bg-deep);
      }

      .country-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        max-height: 300px;
        overflow-y: auto;
        padding: 4px;
      }
      .country-list::-webkit-scrollbar {
        width: 6px;
      }
      .country-list::-webkit-scrollbar-track {
        background: var(--bg-input);
        border-radius: 3px;
      }
      .country-list::-webkit-scrollbar-thumb {
        background: var(--border-strong);
        border-radius: 3px;
      }
      .country-tag {
        padding: 6px 12px;
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.2s;
      }
      .country-tag:hover {
        border-color: var(--color-accent-cyan);
        color: var(--color-accent-cyan);
      }
      .country-tag.left-side {
        border-left: 3px solid var(--accent-blue);
      }
      .country-tag.right-side {
        border-left: 3px solid var(--accent-yellow);
      }
      .no-results {
        text-align: center;
        padding: 32px;
        color: var(--color-text-muted);
      }

      .toast {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: var(--accent-green);
        color: var(--color-bg-deep);
        padding: 12px 24px;
        border-radius: var(--radius-md);
        font-family: var(--font-mono);
        font-size: 0.85rem;
        opacity: 0;
        transition: all 0.3s;
        z-index: 1000;
      }
      .toast.show {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }
      @media (max-width: 600px) {
        .container { padding: 16px; }
        .stats-grid { gap: 12px; }
        .stat-number { font-size: 1.8rem; }
        .side-indicator { padding: 16px 32px; font-size: 1.2rem; }
        .lane { width: 60px; height: 80px; }
        .car-icon { font-size: 2rem; }
      }
    </style>
  </head>
  <body>
    <div class="bg-grid"></div>
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>

    <div class="container">
      <header class="header">
        <nav class="breadcrumb">
          <a href="../../index.html">é¦–é¡µ</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">é©¾é©¶æ–¹å‘æŸ¥è¯¢</span>
        </nav>
        <div class="title-section">
          <h1>ğŸš— é©¾é©¶æ–¹å‘æŸ¥è¯¢</h1>
          <p>æŸ¥è¯¢å„å›½é å·¦è¿˜æ˜¯é å³è¡Œé©¶ï¼Œç§Ÿè½¦å‡ºè¡Œå¿…å¤‡ä¿¡æ¯</p>
        </div>
      </header>

      <!-- Statistics -->
      <div class="stats-grid">
        <div class="stat-card left-drive">
          <div class="stat-number" id="leftCount">--</div>
          <div class="stat-label">é å·¦è¡Œé©¶å›½å®¶/åœ°åŒº</div>
        </div>
        <div class="stat-card right-drive">
          <div class="stat-number" id="rightCount">--</div>
          <div class="stat-label">é å³è¡Œé©¶å›½å®¶/åœ°åŒº</div>
        </div>
      </div>

      <main class="main-content">
        <div class="section-title">é€‰æ‹©å›½å®¶</div>
        
        <div class="input-group">
          <label class="input-label">æœç´¢æˆ–é€‰æ‹©å›½å®¶</label>
          <div class="search-wrapper">
            <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" class="search-input" id="searchInput" placeholder="è¾“å…¥å›½å®¶åç§°æœç´¢..." autocomplete="off" />
          </div>
          <select id="countrySelect" onchange="updateResult()">
            <option value="">-- è¯·é€‰æ‹©å›½å®¶ --</option>
          </select>
        </div>

        <div id="resultCard" class="result-card" style="display: none;">
          <div class="result-header">
            <span class="country-flag" id="countryFlag"></span>
            <span class="country-name" id="countryName"></span>
          </div>
          
          <div class="driving-side">
            <div class="side-indicator" id="sideIndicator">
              <div class="side-icon" id="sideIcon"></div>
              <div id="sideText"></div>
            </div>
          </div>

          <!-- Car Visual -->
          <div class="car-visual">
            <div class="road-label">é“è·¯è¡Œé©¶ç¤ºæ„å›¾</div>
            <div class="road">
              <div class="lane">
                <span class="car-icon" id="carIcon">ğŸš—</span>
                <span class="lane-label" id="laneLabel"></span>
              </div>
            </div>
          </div>
          
          <div class="steering-info">
            <div class="steering-label">æ–¹å‘ç›˜ä½ç½®</div>
            <div class="steering-value" id="steeringPosition">-</div>
          </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
          <div class="filter-header">
            <div class="filter-title">å›½å®¶/åœ°åŒºåˆ—è¡¨</div>
            <div class="filter-tabs">
              <button class="filter-tab active" data-filter="all">å…¨éƒ¨</button>
              <button class="filter-tab" data-filter="left">é å·¦è¡Œé©¶</button>
              <button class="filter-tab" data-filter="right">é å³è¡Œé©¶</button>
            </div>
          </div>
          <div class="country-list" id="countryList"></div>
        </div>
      </main>
    </div>

    <div class="toast" id="toast"></div>

    <script>
      // Country data - "left" means drives on left side
      var COUNTRIES = {
        // Right-hand traffic (most countries)
        US: { name: "ç¾å›½", flag: "ğŸ‡ºğŸ‡¸", side: "right" },
        CA: { name: "åŠ æ‹¿å¤§", flag: "ğŸ‡¨ğŸ‡¦", side: "right" },
        MX: { name: "å¢¨è¥¿å“¥", flag: "ğŸ‡²ğŸ‡½", side: "right" },
        BR: { name: "å·´è¥¿", flag: "ğŸ‡§ğŸ‡·", side: "right" },
        AR: { name: "é˜¿æ ¹å»·", flag: "ğŸ‡¦ğŸ‡·", side: "right" },
        CL: { name: "æ™ºåˆ©", flag: "ğŸ‡¨ğŸ‡±", side: "right" },
        PE: { name: "ç§˜é²", flag: "ğŸ‡µğŸ‡ª", side: "right" },
        CO: { name: "å“¥ä¼¦æ¯”äºš", flag: "ğŸ‡¨ğŸ‡´", side: "right" },
        VE: { name: "å§”å†…ç‘æ‹‰", flag: "ğŸ‡»ğŸ‡ª", side: "right" },
        EC: { name: "å„ç“œå¤šå°”", flag: "ğŸ‡ªğŸ‡¨", side: "right" },
        DE: { name: "å¾·å›½", flag: "ğŸ‡©ğŸ‡ª", side: "right" },
        FR: { name: "æ³•å›½", flag: "ğŸ‡«ğŸ‡·", side: "right" },
        IT: { name: "æ„å¤§åˆ©", flag: "ğŸ‡®ğŸ‡¹", side: "right" },
        ES: { name: "è¥¿ç­ç‰™", flag: "ğŸ‡ªğŸ‡¸", side: "right" },
        PT: { name: "è‘¡è„ç‰™", flag: "ğŸ‡µğŸ‡¹", side: "right" },
        NL: { name: "è·å…°", flag: "ğŸ‡³ğŸ‡±", side: "right" },
        BE: { name: "æ¯”åˆ©æ—¶", flag: "ğŸ‡§ğŸ‡ª", side: "right" },
        CH: { name: "ç‘å£«", flag: "ğŸ‡¨ğŸ‡­", side: "right" },
        AT: { name: "å¥¥åœ°åˆ©", flag: "ğŸ‡¦ğŸ‡¹", side: "right" },
        SE: { name: "ç‘å…¸", flag: "ğŸ‡¸ğŸ‡ª", side: "right" },
        NO: { name: "æŒªå¨", flag: "ğŸ‡³ğŸ‡´", side: "right" },
        DK: { name: "ä¸¹éº¦", flag: "ğŸ‡©ğŸ‡°", side: "right" },
        FI: { name: "èŠ¬å…°", flag: "ğŸ‡«ğŸ‡®", side: "right" },
        IS: { name: "å†°å²›", flag: "ğŸ‡®ğŸ‡¸", side: "right" },
        GR: { name: "å¸Œè…Š", flag: "ğŸ‡¬ğŸ‡·", side: "right" },
        PL: { name: "æ³¢å…°", flag: "ğŸ‡µğŸ‡±", side: "right" },
        CZ: { name: "æ·å…‹", flag: "ğŸ‡¨ğŸ‡¿", side: "right" },
        HU: { name: "åŒˆç‰™åˆ©", flag: "ğŸ‡­ğŸ‡º", side: "right" },
        RO: { name: "ç½—é©¬å°¼äºš", flag: "ğŸ‡·ğŸ‡´", side: "right" },
        BG: { name: "ä¿åŠ åˆ©äºš", flag: "ğŸ‡§ğŸ‡¬", side: "right" },
        HR: { name: "å…‹ç½—åœ°äºš", flag: "ğŸ‡­ğŸ‡·", side: "right" },
        RS: { name: "å¡å°”ç»´äºš", flag: "ğŸ‡·ğŸ‡¸", side: "right" },
        SK: { name: "æ–¯æ´›ä¼å…‹", flag: "ğŸ‡¸ğŸ‡°", side: "right" },
        SI: { name: "æ–¯æ´›æ–‡å°¼äºš", flag: "ğŸ‡¸ğŸ‡®", side: "right" },
        EE: { name: "çˆ±æ²™å°¼äºš", flag: "ğŸ‡ªğŸ‡ª", side: "right" },
        LV: { name: "æ‹‰è„±ç»´äºš", flag: "ğŸ‡±ğŸ‡»", side: "right" },
        LT: { name: "ç«‹é™¶å®›", flag: "ğŸ‡±ğŸ‡¹", side: "right" },
        RU: { name: "ä¿„ç½—æ–¯", flag: "ğŸ‡·ğŸ‡º", side: "right" },
        UA: { name: "ä¹Œå…‹å…°", flag: "ğŸ‡ºğŸ‡¦", side: "right" },
        BY: { name: "ç™½ä¿„ç½—æ–¯", flag: "ğŸ‡§ğŸ‡¾", side: "right" },
        TR: { name: "åœŸè€³å…¶", flag: "ğŸ‡¹ğŸ‡·", side: "right" },
        CN: { name: "ä¸­å›½", flag: "ğŸ‡¨ğŸ‡³", side: "right" },
        TW: { name: "ä¸­å›½å°æ¹¾", flag: "ğŸ‡¹ğŸ‡¼", side: "right" },
        KR: { name: "éŸ©å›½", flag: "ğŸ‡°ğŸ‡·", side: "right" },
        KP: { name: "æœé²œ", flag: "ğŸ‡°ğŸ‡µ", side: "right" },
        MN: { name: "è’™å¤", flag: "ğŸ‡²ğŸ‡³", side: "right" },
        VN: { name: "è¶Šå—", flag: "ğŸ‡»ğŸ‡³", side: "right" },
        PH: { name: "è²å¾‹å®¾", flag: "ğŸ‡µğŸ‡­", side: "right" },
        KH: { name: "æŸ¬åŸ”å¯¨", flag: "ğŸ‡°ğŸ‡­", side: "right" },
        LA: { name: "è€æŒ", flag: "ğŸ‡±ğŸ‡¦", side: "right" },
        MM: { name: "ç¼…ç”¸", flag: "ğŸ‡²ğŸ‡²", side: "right" },
        AE: { name: "é˜¿è”é…‹", flag: "ğŸ‡¦ğŸ‡ª", side: "right" },
        SA: { name: "æ²™ç‰¹é˜¿æ‹‰ä¼¯", flag: "ğŸ‡¸ğŸ‡¦", side: "right" },
        QA: { name: "å¡å¡”å°”", flag: "ğŸ‡¶ğŸ‡¦", side: "right" },
        KW: { name: "ç§‘å¨ç‰¹", flag: "ğŸ‡°ğŸ‡¼", side: "right" },
        BH: { name: "å·´æ—", flag: "ğŸ‡§ğŸ‡­", side: "right" },
        OM: { name: "é˜¿æ›¼", flag: "ğŸ‡´ğŸ‡²", side: "right" },
        JO: { name: "çº¦æ—¦", flag: "ğŸ‡¯ğŸ‡´", side: "right" },
        LB: { name: "é»å·´å«©", flag: "ğŸ‡±ğŸ‡§", side: "right" },
        EG: { name: "åŸƒåŠ", flag: "ğŸ‡ªğŸ‡¬", side: "right" },
        MA: { name: "æ‘©æ´›å“¥", flag: "ğŸ‡²ğŸ‡¦", side: "right" },
        TN: { name: "çªå°¼æ–¯", flag: "ğŸ‡¹ğŸ‡³", side: "right" },
        DZ: { name: "é˜¿å°”åŠåˆ©äºš", flag: "ğŸ‡©ğŸ‡¿", side: "right" },
        IL: { name: "ä»¥è‰²åˆ—", flag: "ğŸ‡®ğŸ‡±", side: "right" },
        IR: { name: "ä¼Šæœ—", flag: "ğŸ‡®ğŸ‡·", side: "right" },
        IQ: { name: "ä¼Šæ‹‰å…‹", flag: "ğŸ‡®ğŸ‡¶", side: "right" },
        AF: { name: "é˜¿å¯Œæ±—", flag: "ğŸ‡¦ğŸ‡«", side: "right" },
        NG: { name: "å°¼æ—¥åˆ©äºš", flag: "ğŸ‡³ğŸ‡¬", side: "right" },
        GH: { name: "åŠ çº³", flag: "ğŸ‡¬ğŸ‡­", side: "right" },
        ET: { name: "åŸƒå¡ä¿„æ¯”äºš", flag: "ğŸ‡ªğŸ‡¹", side: "right" },
        SN: { name: "å¡å†…åŠ å°”", flag: "ğŸ‡¸ğŸ‡³", side: "right" },
        CI: { name: "ç§‘ç‰¹è¿ªç“¦", flag: "ğŸ‡¨ğŸ‡®", side: "right" },
        CM: { name: "å–€éº¦éš†", flag: "ğŸ‡¨ğŸ‡²", side: "right" },
        AO: { name: "å®‰å“¥æ‹‰", flag: "ğŸ‡¦ğŸ‡´", side: "right" },
        SD: { name: "è‹ä¸¹", flag: "ğŸ‡¸ğŸ‡©", side: "right" },
        LY: { name: "åˆ©æ¯”äºš", flag: "ğŸ‡±ğŸ‡¾", side: "right" },
        CU: { name: "å¤å·´", flag: "ğŸ‡¨ğŸ‡º", side: "right" },
        DO: { name: "å¤šç±³å°¼åŠ ", flag: "ğŸ‡©ğŸ‡´", side: "right" },
        HT: { name: "æµ·åœ°", flag: "ğŸ‡­ğŸ‡¹", side: "right" },
        PA: { name: "å·´æ‹¿é©¬", flag: "ğŸ‡µğŸ‡¦", side: "right" },
        CR: { name: "å“¥æ–¯è¾¾é»åŠ ", flag: "ğŸ‡¨ğŸ‡·", side: "right" },
        GT: { name: "å±åœ°é©¬æ‹‰", flag: "ğŸ‡¬ğŸ‡¹", side: "right" },
        HN: { name: "æ´ªéƒ½æ‹‰æ–¯", flag: "ğŸ‡­ğŸ‡³", side: "right" },
        NI: { name: "å°¼åŠ æ‹‰ç“œ", flag: "ğŸ‡³ğŸ‡®", side: "right" },
        SV: { name: "è¨å°”ç“¦å¤š", flag: "ğŸ‡¸ğŸ‡»", side: "right" },
        PY: { name: "å·´æ‹‰åœ­", flag: "ğŸ‡µğŸ‡¾", side: "right" },
        UY: { name: "ä¹Œæ‹‰åœ­", flag: "ğŸ‡ºğŸ‡¾", side: "right" },
        BO: { name: "ç»åˆ©ç»´äºš", flag: "ğŸ‡§ğŸ‡´", side: "right" },
        // Left-hand traffic
        GB: { name: "è‹±å›½", flag: "ğŸ‡¬ğŸ‡§", side: "left" },
        IE: { name: "çˆ±å°”å…°", flag: "ğŸ‡®ğŸ‡ª", side: "left" },
        JP: { name: "æ—¥æœ¬", flag: "ğŸ‡¯ğŸ‡µ", side: "left" },
        AU: { name: "æ¾³å¤§åˆ©äºš", flag: "ğŸ‡¦ğŸ‡º", side: "left" },
        NZ: { name: "æ–°è¥¿å…°", flag: "ğŸ‡³ğŸ‡¿", side: "left" },
        HK: { name: "ä¸­å›½é¦™æ¸¯", flag: "ğŸ‡­ğŸ‡°", side: "left" },
        MO: { name: "ä¸­å›½æ¾³é—¨", flag: "ğŸ‡²ğŸ‡´", side: "left" },
        SG: { name: "æ–°åŠ å¡", flag: "ğŸ‡¸ğŸ‡¬", side: "left" },
        MY: { name: "é©¬æ¥è¥¿äºš", flag: "ğŸ‡²ğŸ‡¾", side: "left" },
        TH: { name: "æ³°å›½", flag: "ğŸ‡¹ğŸ‡­", side: "left" },
        ID: { name: "å°åº¦å°¼è¥¿äºš", flag: "ğŸ‡®ğŸ‡©", side: "left" },
        IN: { name: "å°åº¦", flag: "ğŸ‡®ğŸ‡³", side: "left" },
        PK: { name: "å·´åŸºæ–¯å¦", flag: "ğŸ‡µğŸ‡°", side: "left" },
        BD: { name: "å­ŸåŠ æ‹‰å›½", flag: "ğŸ‡§ğŸ‡©", side: "left" },
        LK: { name: "æ–¯é‡Œå…°å¡", flag: "ğŸ‡±ğŸ‡°", side: "left" },
        NP: { name: "å°¼æ³Šå°”", flag: "ğŸ‡³ğŸ‡µ", side: "left" },
        BT: { name: "ä¸ä¸¹", flag: "ğŸ‡§ğŸ‡¹", side: "left" },
        MV: { name: "é©¬å°”ä»£å¤«", flag: "ğŸ‡²ğŸ‡»", side: "left" },
        ZA: { name: "å—é", flag: "ğŸ‡¿ğŸ‡¦", side: "left" },
        KE: { name: "è‚¯å°¼äºš", flag: "ğŸ‡°ğŸ‡ª", side: "left" },
        TZ: { name: "å¦æ¡‘å°¼äºš", flag: "ğŸ‡¹ğŸ‡¿", side: "left" },
        UG: { name: "ä¹Œå¹²è¾¾", flag: "ğŸ‡ºğŸ‡¬", side: "left" },
        ZW: { name: "æ´¥å·´å¸ƒéŸ¦", flag: "ğŸ‡¿ğŸ‡¼", side: "left" },
        BW: { name: "åšèŒ¨ç“¦çº³", flag: "ğŸ‡§ğŸ‡¼", side: "left" },
        NA: { name: "çº³ç±³æ¯”äºš", flag: "ğŸ‡³ğŸ‡¦", side: "left" },
        MU: { name: "æ¯›é‡Œæ±‚æ–¯", flag: "ğŸ‡²ğŸ‡º", side: "left" },
        SC: { name: "å¡èˆŒå°”", flag: "ğŸ‡¸ğŸ‡¨", side: "left" },
        CY: { name: "å¡æµ¦è·¯æ–¯", flag: "ğŸ‡¨ğŸ‡¾", side: "left" },
        MT: { name: "é©¬è€³ä»–", flag: "ğŸ‡²ğŸ‡¹", side: "left" },
        JM: { name: "ç‰™ä¹°åŠ ", flag: "ğŸ‡¯ğŸ‡²", side: "left" },
        TT: { name: "ç‰¹ç«‹å°¼è¾¾å’Œå¤šå·´å“¥", flag: "ğŸ‡¹ğŸ‡¹", side: "left" },
        BB: { name: "å·´å·´å¤šæ–¯", flag: "ğŸ‡§ğŸ‡§", side: "left" },
        BS: { name: "å·´å“ˆé©¬", flag: "ğŸ‡§ğŸ‡¸", side: "left" },
        AG: { name: "å®‰æç“œå’Œå·´å¸ƒè¾¾", flag: "ğŸ‡¦ğŸ‡¬", side: "left" },
        LC: { name: "åœ£å¢è¥¿äºš", flag: "ğŸ‡±ğŸ‡¨", side: "left" },
        VC: { name: "åœ£æ–‡æ£®ç‰¹å’Œæ ¼æ—çº³ä¸æ–¯", flag: "ğŸ‡»ğŸ‡¨", side: "left" },
        GD: { name: "æ ¼æ—çº³è¾¾", flag: "ğŸ‡¬ğŸ‡©", side: "left" },
        KN: { name: "åœ£åŸºèŒ¨å’Œå°¼ç»´æ–¯", flag: "ğŸ‡°ğŸ‡³", side: "left" },
        FJ: { name: "æ–æµ", flag: "ğŸ‡«ğŸ‡¯", side: "left" },
        TO: { name: "æ±¤åŠ ", flag: "ğŸ‡¹ğŸ‡´", side: "left" },
        WS: { name: "è¨æ‘©äºš", flag: "ğŸ‡¼ğŸ‡¸", side: "left" },
        KI: { name: "åŸºé‡Œå·´æ–¯", flag: "ğŸ‡°ğŸ‡®", side: "left" },
        NR: { name: "ç‘™é²", flag: "ğŸ‡³ğŸ‡·", side: "left" },
        PG: { name: "å·´å¸ƒäºšæ–°å‡ å†…äºš", flag: "ğŸ‡µğŸ‡¬", side: "left" },
        SB: { name: "æ‰€ç½—é—¨ç¾¤å²›", flag: "ğŸ‡¸ğŸ‡§", side: "left" },
        BN: { name: "æ–‡è±", flag: "ğŸ‡§ğŸ‡³", side: "left" },
        TL: { name: "ä¸œå¸æ±¶", flag: "ğŸ‡¹ğŸ‡±", side: "left" },
        SZ: { name: "æ–¯å¨å£«å…°", flag: "ğŸ‡¸ğŸ‡¿", side: "left" },
        LS: { name: "è±ç´¢æ‰˜", flag: "ğŸ‡±ğŸ‡¸", side: "left" },
        MZ: { name: "è«æ¡‘æ¯”å…‹", flag: "ğŸ‡²ğŸ‡¿", side: "left" },
        MW: { name: "é©¬æ‹‰ç»´", flag: "ğŸ‡²ğŸ‡¼", side: "left" },
        ZM: { name: "èµæ¯”äºš", flag: "ğŸ‡¿ğŸ‡²", side: "left" },
        GY: { name: "åœ­äºšé‚£", flag: "ğŸ‡¬ğŸ‡¾", side: "left" },
        SR: { name: "è‹é‡Œå—", flag: "ğŸ‡¸ğŸ‡·", side: "left" }
      };

      var currentFilter = "all";
      var searchTerm = "";

      // Theme toggle
      function toggleTheme() {
        var isDark = document.body.getAttribute("data-theme") !== "light";
        document.body.setAttribute("data-theme", isDark ? "light" : "dark");
        localStorage.setItem("theme", isDark ? "light" : "dark");
      }

      // Load theme
      (function() {
        var saved = localStorage.getItem("theme");
        if (saved === "light") {
          document.body.setAttribute("data-theme", "light");
        }
      })();

      // Toast
      function showToast(msg) {
        var toast = document.getElementById("toast");
        toast.textContent = msg;
        toast.classList.add("show");
        setTimeout(function() { toast.classList.remove("show"); }, 2000);
      }

      // Update statistics
      function updateStats() {
        var leftCount = 0;
        var rightCount = 0;
        Object.keys(COUNTRIES).forEach(function(code) {
          if (COUNTRIES[code].side === "left") {
            leftCount++;
          } else {
            rightCount++;
          }
        });
        document.getElementById("leftCount").textContent = leftCount;
        document.getElementById("rightCount").textContent = rightCount;
      }

      // Initialize country select
      function initCountrySelect() {
        var select = document.getElementById("countrySelect");
        select.innerHTML = '<option value="">-- è¯·é€‰æ‹©å›½å®¶ --</option>';
        
        var countries = Object.keys(COUNTRIES).map(function(code) {
          return { code: code, data: COUNTRIES[code] };
        });
        countries.sort(function(a, b) {
          return a.data.name.localeCompare(b.data.name, "zh-CN");
        });
        
        countries.forEach(function(item) {
          var option = document.createElement("option");
          option.value = item.code;
          option.textContent = item.data.flag + " " + item.data.name;
          select.appendChild(option);
        });
      }

      // Filter and render country list
      function renderCountryList() {
        var list = document.getElementById("countryList");
        list.innerHTML = "";
        
        var countries = Object.keys(COUNTRIES).map(function(code) {
          return { code: code, data: COUNTRIES[code] };
        });
        
        // Filter by side
        if (currentFilter !== "all") {
          countries = countries.filter(function(item) {
            return item.data.side === currentFilter;
          });
        }
        
        // Filter by search term
        if (searchTerm) {
          var term = searchTerm.toLowerCase();
          countries = countries.filter(function(item) {
            return item.data.name.toLowerCase().indexOf(term) !== -1 ||
                   item.code.toLowerCase().indexOf(term) !== -1;
          });
        }
        
        countries.sort(function(a, b) {
          return a.data.name.localeCompare(b.data.name, "zh-CN");
        });
        
        if (countries.length === 0) {
          list.innerHTML = '<div class="no-results">æœªæ‰¾åˆ°åŒ¹é…çš„å›½å®¶</div>';
          return;
        }
        
        countries.forEach(function(item) {
          var tag = document.createElement("span");
          tag.className = "country-tag " + item.data.side + "-side";
          tag.textContent = item.data.flag + " " + item.data.name;
          tag.onclick = function() {
            document.getElementById("countrySelect").value = item.code;
            updateResult();
            document.getElementById("resultCard").scrollIntoView({ behavior: "smooth", block: "center" });
          };
          list.appendChild(tag);
        });
      }

      // Select country
      function selectCountry(code) {
        document.getElementById("countrySelect").value = code;
        updateResult();
      }

      // Update result
      function updateResult() {
        var code = document.getElementById("countrySelect").value;
        var resultCard = document.getElementById("resultCard");
        
        if (!code || !COUNTRIES[code]) {
          resultCard.style.display = "none";
          return;
        }

        var country = COUNTRIES[code];
        resultCard.style.display = "block";
        
        document.getElementById("countryFlag").textContent = country.flag;
        document.getElementById("countryName").textContent = country.name;
        
        var indicator = document.getElementById("sideIndicator");
        var icon = document.getElementById("sideIcon");
        var text = document.getElementById("sideText");
        var steering = document.getElementById("steeringPosition");
        var carIcon = document.getElementById("carIcon");
        var laneLabel = document.getElementById("laneLabel");
        
        if (country.side === "left") {
          indicator.className = "side-indicator side-left";
          icon.textContent = "â¬…ï¸";
          text.textContent = "é å·¦è¡Œé©¶";
          steering.textContent = "å³èˆµè½¦ (æ–¹å‘ç›˜åœ¨å³ä¾§)";
          carIcon.className = "car-icon left-side";
          laneLabel.textContent = "â† è¡Œé©¶æ–¹å‘";
        } else {
          indicator.className = "side-indicator side-right";
          icon.textContent = "â¡ï¸";
          text.textContent = "é å³è¡Œé©¶";
          steering.textContent = "å·¦èˆµè½¦ (æ–¹å‘ç›˜åœ¨å·¦ä¾§)";
          carIcon.className = "car-icon";
          laneLabel.textContent = "è¡Œé©¶æ–¹å‘ â†’";
        }

        // Save to localStorage and URL
        localStorage.setItem("driving_side_country", code);
        history.replaceState(null, "", "#" + code);
      }

      // Search input handler
      document.getElementById("searchInput").addEventListener("input", function(e) {
        searchTerm = e.target.value;
        renderCountryList();
        
        // Also filter the select dropdown
        var select = document.getElementById("countrySelect");
        var options = select.querySelectorAll("option");
        var term = searchTerm.toLowerCase();
        
        options.forEach(function(opt) {
          if (opt.value === "") return;
          var country = COUNTRIES[opt.value];
          if (country) {
            var match = country.name.toLowerCase().indexOf(term) !== -1 ||
                       opt.value.toLowerCase().indexOf(term) !== -1;
            opt.style.display = match || !searchTerm ? "" : "none";
          }
        });
      });

      // Filter tabs
      document.querySelectorAll(".filter-tab").forEach(function(tab) {
        tab.addEventListener("click", function() {
          document.querySelectorAll(".filter-tab").forEach(function(t) {
            t.classList.remove("active");
          });
          this.classList.add("active");
          currentFilter = this.getAttribute("data-filter");
          renderCountryList();
        });
      });

      // Load from URL hash
      function loadFromHash() {
        var hash = window.location.hash.slice(1);
        if (hash && COUNTRIES[hash]) {
          selectCountry(hash);
        }
      }

      // Initialize
      (function() {
        updateStats();
        initCountrySelect();
        renderCountryList();
        
        // Load from URL hash first, then localStorage
        var hash = window.location.hash.slice(1);
        if (hash && COUNTRIES[hash]) {
          selectCountry(hash);
        } else {
          var saved = localStorage.getItem("driving_side_country");
          if (saved && COUNTRIES[saved]) {
            selectCountry(saved);
          }
        }
      })();

      // Listen for hash changes
      window.addEventListener("hashchange", loadFromHash);
    </script>
  </body>
</html>
