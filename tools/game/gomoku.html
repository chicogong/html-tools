<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>‰∫îÂ≠êÊ£ã - WebUtils</title>
    <meta name="description" content="ÁªèÂÖ∏‰∫îÂ≠êÊ£ãÊ∏∏ÊàèÔºåÊîØÊåÅÂèå‰∫∫ÂØπÊàò" />
    <meta name="keywords" content="‰∫îÂ≠êÊ£ã gomoku Ê∏∏Êàè game Âèå‰∫∫ Ê£ãÁ±ª" />
    <meta name="author" content="WebUtils" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/game/gomoku.html" />

    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #9898a4;
        --color-text-muted: #5c5c66;
        --accent-blue: #4d9fff;
        --color-accent-cyan: #00f5d4;
        --border-subtle: #2a2a36;
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 14px;
      
  /* Â≠ó‰ΩìÂèòÈáè */
  --font-sans: 'Space Grotesk', -apple-system, blinkmacsystemfont, 'Segoe UI', roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgba(77, 159, 255, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(77, 159, 255, 0.03) 1px, transparent 1px);
        background-size: 50px 50px;
        pointer-events: none;
        z-index: 0;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 600px;
        margin: 0 auto;
        padding: 2rem 1.5rem;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        border-color: var(--color-accent-cyan);
        transform: scale(1.1);
      }
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.85rem;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }
      .breadcrumb a {
        color: var(--color-text-secondary);
        text-decoration: none;
      }
      .breadcrumb a:hover {
        color: var(--color-accent-cyan);
      }
      .breadcrumb-separator {
        color: var(--color-text-muted);
      }
      .breadcrumb-current {
        color: var(--color-text-primary);
        font-weight: 500;
      }
      h1 {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        background: linear-gradient(135deg, var(--color-text-primary), var(--color-accent-cyan));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-align: center;
      }
      .subtitle {
        color: var(--color-text-secondary);
        margin-bottom: 2rem;
        text-align: center;
      }
      .game-card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
      }
      .status {
        text-align: center;
        margin-bottom: 1rem;
        font-size: 1.1rem;
      }
      .status .black {
        color: #333;
      }
      .status .white {
        color: #ddd;
      }
      [data-theme="light"] .status .black {
        color: #000;
      }
      [data-theme="light"] .status .white {
        color: #666;
      }
      .board-container {
        display: flex;
        justify-content: center;
        margin-bottom: 1rem;
      }
      .board {
        background: #dcb35c;
        border-radius: 4px;
        padding: 10px;
        position: relative;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(15, 24px);
        grid-template-rows: repeat(15, 24px);
        gap: 0;
      }
      .cell {
        width: 24px;
        height: 24px;
        position: relative;
        cursor: pointer;
      }
      .cell::before,
      .cell::after {
        content: "";
        position: absolute;
        background: #8b6914;
      }
      .cell::before {
        width: 1px;
        height: 100%;
        left: 50%;
        top: 0;
      }
      .cell::after {
        height: 1px;
        width: 100%;
        top: 50%;
        left: 0;
      }
      .cell:first-child::after,
      .cell:nth-child(15n + 1)::after {
        width: 50%;
        left: 50%;
      }
      .cell:nth-child(-n + 15)::before {
        height: 50%;
        top: 50%;
      }
      .cell:nth-child(15n)::after {
        width: 50%;
      }
      .cell:nth-last-child(-n + 15)::before {
        height: 50%;
      }
      .stone {
        position: absolute;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1;
        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }
      .stone.black {
        background: radial-gradient(circle at 30% 30%, #666, #000);
      }
      .stone.white {
        background: radial-gradient(circle at 30% 30%, #fff, #ccc);
      }
      .stone.last::after {
        content: "";
        position: absolute;
        width: 6px;
        height: 6px;
        background: red;
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .stone.win {
        animation: pulse 0.5s ease-in-out infinite alternate;
      }
      @keyframes pulse {
        from {
          transform: translate(-50%, -50%) scale(1);
        }
        to {
          transform: translate(-50%, -50%) scale(1.1);
        }
      }
      .star {
        position: absolute;
        width: 6px;
        height: 6px;
        background: #8b6914;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        z-index: 0;
      }
      .controls {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1rem;
      }
      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: var(--radius-sm);
        cursor: pointer;
        font-family: inherit;
        font-size: 0.95rem;
        font-weight: 500;
        transition: all 0.2s;
      }
      .btn-primary {
        background: linear-gradient(135deg, var(--accent-blue), var(--color-accent-cyan));
        color: #000;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
      }
      .btn-secondary {
        background: var(--color-bg-surface);
        color: var(--color-text-primary);
        border: 1px solid var(--border-subtle);
      }
      .btn-secondary:hover {
        border-color: var(--color-accent-cyan);
      }
      footer {
        margin-top: 3rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--border-subtle);
        text-align: center;
        color: var(--color-text-muted);
        font-size: 0.85rem;
      }
      footer a {
        color: var(--accent-blue);
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <div class="bg-grid"></div>
    <div class="container">
      <button class="theme-toggle" onclick="toggleTheme()" title="ÂàáÊç¢‰∏ªÈ¢ò">üåô</button>

      <nav class="breadcrumb">
        <a href="../../index.html">È¶ñÈ°µ</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current">‰∫îÂ≠êÊ£ã</span>
      </nav>

      <h1>‰∫îÂ≠êÊ£ã</h1>
      <p class="subtitle">ÂÖàËøûÊàê‰∫îÂ≠êËÄÖËé∑ËÉú</p>

      <div class="game-card">
        <div class="status" id="status">
          <span class="black">‚óè</span>
          ÈªëÊ£ãÂÖàË°å
        </div>

        <div class="board-container">
          <div class="board">
            <div class="grid" id="board"></div>
          </div>
        </div>

        <div class="controls">
          <button class="btn btn-primary" onclick="resetGame()">Êñ∞Ê∏∏Êàè</button>
          <button class="btn btn-secondary" onclick="undoMove()">ÊÇîÊ£ã</button>
        </div>
      </div>

      <footer>
        <a href="https://github.com/chicogong/html-tools" target="_blank">GitHub</a>
      </footer>
    </div>

    <script>
      const BOARD_SIZE = 15;
      let board = [];
      let currentPlayer = "black";
      let gameOver = false;
      let history = [];
      let lastMove = null;

      // Star points (Â§©ÂÖÉÂíåÊòü‰Ωç)
      const starPoints = [
        [3, 3],
        [3, 7],
        [3, 11],
        [7, 3],
        [7, 7],
        [7, 11],
        [11, 3],
        [11, 7],
        [11, 11]
      ];

      function initBoard() {
        const boardEl = document.getElementById("board");
        boardEl.innerHTML = "";
        board = [];

        for (let i = 0; i < BOARD_SIZE; i++) {
          board[i] = [];
          for (let j = 0; j < BOARD_SIZE; j++) {
            board[i][j] = null;
            const cell = document.createElement("div");
            cell.className = "cell";
            cell.dataset.row = i;
            cell.dataset.col = j;
            cell.onclick = () => makeMove(i, j);
            boardEl.appendChild(cell);

            // Add star points
            if (starPoints.some(([r, c]) => r === i && c === j)) {
              const star = document.createElement("div");
              star.className = "star";
              star.style.top = "50%";
              star.style.left = "50%";
              cell.appendChild(star);
            }
          }
        }
      }

      function makeMove(row, col) {
        if (gameOver || board[row][col]) return;

        board[row][col] = currentPlayer;
        history.push({ row, col, player: currentPlayer });

        // Remove last marker
        if (lastMove) {
          const lastCell = document.querySelector(
            `[data-row="${lastMove.row}"][data-col="${lastMove.col}"] .stone`
          );
          if (lastCell) lastCell.classList.remove("last");
        }

        // Add stone
        const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
        const stone = document.createElement("div");
        stone.className = `stone ${currentPlayer} last`;
        cell.appendChild(stone);

        lastMove = { row, col };

        // Check win
        const winCells = checkWin(row, col);
        if (winCells) {
          gameOver = true;
          winCells.forEach(([r, c]) => {
            const winStone = document.querySelector(`[data-row="${r}"][data-col="${c}"] .stone`);
            if (winStone) winStone.classList.add("win");
          });
          updateStatus(
            `<span class="${currentPlayer}">${currentPlayer === "black" ? "‚óè" : "‚óã"}</span> ${currentPlayer === "black" ? "ÈªëÊ£ã" : "ÁôΩÊ£ã"}Ëé∑ËÉú!`
          );
          return;
        }

        // Check draw
        if (history.length === BOARD_SIZE * BOARD_SIZE) {
          gameOver = true;
          updateStatus("Âπ≥Â±Ä!");
          return;
        }

        // Switch player
        currentPlayer = currentPlayer === "black" ? "white" : "black";
        updateStatus(
          `<span class="${currentPlayer}">${currentPlayer === "black" ? "‚óè" : "‚óã"}</span> ${currentPlayer === "black" ? "ÈªëÊ£ã" : "ÁôΩÊ£ã"}ÂõûÂêà`
        );
      }

      function checkWin(row, col) {
        const player = board[row][col];
        const directions = [
          [
            [0, 1],
            [0, -1]
          ], // horizontal
          [
            [1, 0],
            [-1, 0]
          ], // vertical
          [
            [1, 1],
            [-1, -1]
          ], // diagonal
          [
            [1, -1],
            [-1, 1]
          ] // anti-diagonal
        ];

        for (let [dir1, dir2] of directions) {
          let cells = [[row, col]];

          for (let [dr, dc] of [dir1, dir2]) {
            let r = row + dr,
              c = col + dc;
            while (r >= 0 && r < BOARD_SIZE && c >= 0 && c < BOARD_SIZE && board[r][c] === player) {
              cells.push([r, c]);
              r += dr;
              c += dc;
            }
          }

          if (cells.length >= 5) return cells;
        }
        return null;
      }

      function undoMove() {
        if (history.length === 0 || gameOver) return;

        const last = history.pop();
        board[last.row][last.col] = null;

        const cell = document.querySelector(`[data-row="${last.row}"][data-col="${last.col}"]`);
        const stone = cell.querySelector(".stone");
        if (stone) stone.remove();

        currentPlayer = last.player;

        // Update last marker
        if (history.length > 0) {
          const prev = history[history.length - 1];
          const prevStone = document.querySelector(
            `[data-row="${prev.row}"][data-col="${prev.col}"] .stone`
          );
          if (prevStone) prevStone.classList.add("last");
          lastMove = prev;
        } else {
          lastMove = null;
        }

        updateStatus(
          `<span class="${currentPlayer}">${currentPlayer === "black" ? "‚óè" : "‚óã"}</span> ${currentPlayer === "black" ? "ÈªëÊ£ã" : "ÁôΩÊ£ã"}ÂõûÂêà`
        );
      }

      function resetGame() {
        gameOver = false;
        currentPlayer = "black";
        history = [];
        lastMove = null;
        initBoard();
        updateStatus('<span class="black">‚óè</span> ÈªëÊ£ãÂÖàË°å');
      }

      function updateStatus(html) {
        document.getElementById("status").innerHTML = html;
      }

      // Initialize
      initBoard();

      window.toggleTheme = function () {
        const html = document.documentElement;
        const btn = document.querySelector(".theme-toggle");
        const current = html.getAttribute("data-theme");
        const next = current === "light" ? "dark" : "light";
        html.setAttribute("data-theme", next);
        btn.textContent = next === "light" ? "‚òÄÔ∏è" : "üåô";
        localStorage.setItem("theme", next);
      };

      (function () {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.setAttribute("data-theme", saved);
          document.querySelector(".theme-toggle").textContent = saved === "light" ? "‚òÄÔ∏è" : "üåô";
        }
      })();
    </script>
  </body>
</html>
