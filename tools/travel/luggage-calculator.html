<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>è¡Œæé™é¢è®¡ç®— - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="èˆªç­è¡Œæé‡é‡è®¡ç®—å™¨ï¼Œæ”¯æŒå¤šèˆªç©ºå…¬å¸é™é¢ï¼Œç‰©å“æ¸…å•ç®¡ç†" />
    <meta name="keywords" content="luggage è¡Œæ weight é‡é‡ èˆªç©ºå…¬å¸ æ‰˜è¿" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/travel/luggage-calculator.html"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="è¡Œæé™é¢è®¡ç®— - WebUtils" />
    <meta property="og:description" content="èˆªç­è¡Œæé‡é‡è®¡ç®—å™¨ï¼Œæ”¯æŒå¤šèˆªç©ºå…¬å¸é™é¢ï¼Œç‰©å“æ¸…å•ç®¡ç†" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://tools.realtime-ai.chat/tools/travel/luggage-calculator.html"
    />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="è¡Œæé™é¢è®¡ç®— - WebUtils" />
    <meta name="twitter:description" content="èˆªç­è¡Œæé‡é‡è®¡ç®—å™¨ï¼Œæ”¯æŒå¤šèˆªç©ºå…¬å¸é™é¢ï¼Œç‰©å“æ¸…å•ç®¡ç†" />
    <!-- OG Image -->
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <!-- JSON-LD BreadcrumbList Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "é¦–é¡µ",
            "item": "https://tools.realtime-ai.chat/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "æ—…è¡Œå·¥å…·",
            "item": "https://tools.realtime-ai.chat/#travel"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "è¡Œæé™é¢è®¡ç®—",
            "item": "https://tools.realtime-ai.chat/tools/travel/luggage-calculator.html"
          }
        ]
      }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --bg-hover: #252532;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #8888a0;
        --color-text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --color-accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --color-accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
        --font-sans:
          "Space Grotesk", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, sans-serif;
        --font-mono: "JetBrains Mono", "Courier New", monospace;
      }
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f0f0f0;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }

      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgba(0, 245, 212, 0.02) 1px, transparent 1px),
          linear-gradient(90deg, rgba(0, 245, 212, 0.02) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
        z-index: 0;
      }

      .container {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 24px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }

      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        flex-wrap: wrap;
      }

      .breadcrumb a {
        color: var(--color-text-secondary);
        text-decoration: none;
        transition: color 0.2s ease;
      }

      .breadcrumb a:hover {
        color: var(--accent-green);
      }

      .breadcrumb-separator {
        color: var(--color-text-muted);
        user-select: none;
      }

      .breadcrumb-current {
        color: var(--color-text-primary);
        font-weight: 500;
      }

      .title-section {
        flex: 1;
      }

      .title-section h1 {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .title-section h1 .icon {
        font-size: 1.8rem;
      }

      .title-section p {
        color: var(--color-text-secondary);
        margin-top: 4px;
        font-size: 0.9rem;
      }

      .main-content {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 24px;
        flex: 1;
      }

      .tool-section {
        margin-bottom: 24px;
      }

      .tool-section:last-child {
        margin-bottom: 0;
      }

      .section-title {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--color-text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 1px solid var(--border-subtle);
      }

      .input-group {
        margin-bottom: 16px;
      }

      .input-label {
        display: block;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        color: var(--color-text-secondary);
        margin-bottom: 8px;
      }

      input[type="text"],
      input[type="number"],
      select {
        width: 100%;
        padding: 10px 14px;
        font-family: var(--font-mono);
        font-size: 0.9rem;
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        color: var(--color-text-primary);
        transition: border-color 0.2s;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: var(--accent-green);
      }

      .input-row {
        display: grid;
        grid-template-columns: 1fr 120px auto;
        gap: 12px;
        align-items: end;
      }

      .btn-row {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .btn {
        padding: 10px 18px;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        font-weight: 500;
        border: none;
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .btn-primary {
        background: var(--accent-green);
        color: var(--color-bg-deep);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px var(--glow-green);
      }

      .btn-secondary {
        background: var(--color-bg-surface);
        color: var(--color-text-primary);
        border: 1px solid var(--border-subtle);
      }

      .btn-secondary:hover {
        border-color: var(--accent-green);
        color: var(--accent-green);
      }

      .btn-danger {
        background: transparent;
        color: var(--accent-red);
        border: 1px solid var(--accent-red);
        padding: 8px 12px;
      }

      .btn-danger:hover {
        background: var(--accent-red);
        color: #fff;
      }

      .btn-icon {
        width: 36px;
        height: 36px;
        padding: 0;
        font-size: 1rem;
      }

      /* Airline selector */
      .airline-info {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        margin-top: 12px;
      }

      .airline-info .limit-badge {
        font-family: var(--font-mono);
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--color-accent-cyan);
      }

      .airline-info .limit-label {
        color: var(--color-text-secondary);
        font-size: 0.85rem;
      }

      /* Items list */
      .items-list {
        margin-top: 16px;
      }

      .item-row {
        display: grid;
        grid-template-columns: 1fr 100px auto;
        gap: 12px;
        align-items: center;
        padding: 12px 16px;
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        margin-bottom: 8px;
        transition: all 0.2s;
      }

      .item-row:hover {
        background: var(--bg-hover);
        border-color: var(--border-strong);
      }

      .item-name {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        color: var(--color-text-primary);
        overflow-wrap: break-word;
      }

      .item-weight {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        color: var(--color-accent-cyan);
        text-align: right;
      }

      .empty-state {
        text-align: center;
        padding: 32px 16px;
        color: var(--color-text-muted);
        font-size: 0.9rem;
      }

      /* Summary */
      .summary-card {
        background: var(--bg-input);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-md);
        padding: 20px;
      }

      .summary-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid var(--border-subtle);
      }

      .summary-row:last-child {
        border-bottom: none;
        padding-top: 16px;
        margin-top: 8px;
      }

      .summary-label {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        color: var(--color-text-secondary);
      }

      .summary-value {
        font-family: var(--font-mono);
        font-size: 1rem;
        font-weight: 600;
        color: var(--color-text-primary);
      }

      .summary-total {
        font-size: 1.5rem;
        color: var(--color-accent-cyan);
      }

      .remaining-ok {
        color: var(--accent-green);
      }

      .remaining-warning {
        color: var(--accent-yellow);
      }

      .remaining-over {
        color: var(--accent-red);
      }

      /* Warning banner */
      .warning-banner {
        display: none;
        align-items: center;
        gap: 12px;
        padding: 14px 18px;
        background: rgba(244, 63, 94, 0.1);
        border: 1px solid var(--accent-red);
        border-radius: var(--radius-md);
        margin-bottom: 16px;
        animation: pulse 2s ease-in-out infinite;
      }

      .warning-banner.show {
        display: flex;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .warning-icon {
        font-size: 1.5rem;
      }

      .warning-text {
        flex: 1;
        font-family: var(--font-mono);
        font-size: 0.9rem;
        color: var(--accent-red);
      }

      .warning-amount {
        font-weight: 700;
      }

      /* Progress bar */
      .progress-container {
        margin: 16px 0;
      }

      .progress-bar {
        height: 12px;
        background: var(--border-subtle);
        border-radius: var(--radius-sm);
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: var(--accent-green);
        border-radius: var(--radius-sm);
        transition: all 0.3s ease;
      }

      .progress-fill.warning {
        background: var(--accent-yellow);
      }

      .progress-fill.over {
        background: var(--accent-red);
      }

      .progress-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
        font-family: var(--font-mono);
        font-size: 0.8rem;
        color: var(--color-text-muted);
      }

      .toast {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: var(--accent-green);
        color: var(--color-bg-deep);
        padding: 12px 24px;
        border-radius: var(--radius-md);
        font-family: var(--font-mono);
        font-size: 0.85rem;
        font-weight: 500;
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .toast.show {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }

      .toast.error {
        background: var(--accent-red);
        color: #fff;
      }

      @media (max-width: 600px) {
        .container {
          padding: 16px;
        }

        .input-row {
          grid-template-columns: 1fr;
        }

        .item-row {
          grid-template-columns: 1fr auto auto;
          gap: 8px;
        }

        .btn-row {
          flex-direction: column;
        }

        .btn {
          width: 100%;
        }

        .airline-info {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-grid"></div>
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>

    <div class="container">
      <header class="header">
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <a href="../../index.html">é¦–é¡µ</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">è¡Œæé™é¢è®¡ç®—</span>
        </nav>
        <div class="title-section">
          <h1>
            <span class="icon">ğŸ§³</span>
            è¡Œæé™é¢è®¡ç®—
          </h1>
          <p>èˆªç­è¡Œæé‡é‡è®¡ç®—å™¨ï¼Œé¿å…è¶…é‡ç½šæ¬¾</p>
        </div>
      </header>

      <main class="main-content">
        <!-- Warning Banner -->
        <div class="warning-banner" id="warningBanner">
          <span class="warning-icon">âš ï¸</span>
          <span class="warning-text">
            è¡Œæè¶…é‡ <span class="warning-amount" id="overweightAmount">0</span> kgï¼Œå¯èƒ½éœ€è¦æ”¯ä»˜é¢å¤–è´¹ç”¨ï¼
          </span>
        </div>

        <!-- Airline Selection -->
        <div class="tool-section">
          <div class="section-title">é€‰æ‹©èˆªç©ºå…¬å¸</div>
          <div class="input-group">
            <label class="input-label">èˆªç©ºå…¬å¸</label>
            <select id="airlineSelect" onchange="updateAirlineLimit()">
              <option value="23">ä¸­å›½å›½èˆª (CA) - 23kg</option>
              <option value="23">ä¸­å›½ä¸œæ–¹èˆªç©º (MU) - 23kg</option>
              <option value="23">ä¸­å›½å—æ–¹èˆªç©º (CZ) - 23kg</option>
              <option value="20">æµ·å—èˆªç©º (HU) - 20kg</option>
              <option value="23">å¦é—¨èˆªç©º (MF) - 23kg</option>
              <option value="20">æ·±åœ³èˆªç©º (ZH) - 20kg</option>
              <option value="20">å››å·èˆªç©º (3U) - 20kg</option>
              <option value="20">å±±ä¸œèˆªç©º (SC) - 20kg</option>
              <option value="15">æ˜¥ç§‹èˆªç©º (9C) - 15kg</option>
              <option value="10">å‰ç¥¥èˆªç©º (HO) - 10kg</option>
              <option value="23">å›½æ³°èˆªç©º (CX) - 23kg</option>
              <option value="30">é˜¿è”é…‹èˆªç©º (EK) - 30kg</option>
              <option value="23">æ–°åŠ å¡èˆªç©º (SQ) - 23kg</option>
              <option value="23">å…¨æ—¥ç©º (NH) - 23kg</option>
              <option value="23">æ—¥æœ¬èˆªç©º (JL) - 23kg</option>
              <option value="23">å¤§éŸ©èˆªç©º (KE) - 23kg</option>
              <option value="23">éŸ©äºšèˆªç©º (OZ) - 23kg</option>
              <option value="23">ç¾å›½èˆªç©º (AA) - 23kg</option>
              <option value="23">ç¾è”èˆª (UA) - 23kg</option>
              <option value="23">è¾¾ç¾èˆªç©º (DL) - 23kg</option>
              <option value="23">è‹±å›½èˆªç©º (BA) - 23kg</option>
              <option value="23">æ³•å›½èˆªç©º (AF) - 23kg</option>
              <option value="23">å¾·å›½æ±‰è (LH) - 23kg</option>
              <option value="30">å¡å¡”å°”èˆªç©º (QR) - 30kg</option>
              <option value="30">åœŸè€³å…¶èˆªç©º (TK) - 30kg</option>
              <option value="23">æ¾³æ´²èˆªç©º (QF) - 23kg</option>
              <option value="7">äºšèˆª (AK) - 7kg (ä»…æ‰‹æ)</option>
              <option value="custom">è‡ªå®šä¹‰é™é¢...</option>
            </select>
          </div>
          <div class="input-group" id="customLimitGroup" style="display: none">
            <label class="input-label">è‡ªå®šä¹‰é™é¢ (kg)</label>
            <input
              type="number"
              id="customLimit"
              min="1"
              max="100"
              value="23"
              onchange="updateAirlineLimit()"
            />
          </div>
          <div class="airline-info">
            <span class="limit-badge" id="limitBadge">23 kg</span>
            <span class="limit-label">æ‰˜è¿è¡Œæé™é¢</span>
          </div>
        </div>

        <!-- Add Item -->
        <div class="tool-section">
          <div class="section-title">æ·»åŠ ç‰©å“</div>
          <div class="input-row">
            <div class="input-group" style="margin-bottom: 0">
              <label class="input-label">ç‰©å“åç§°</label>
              <input
                type="text"
                id="itemName"
                placeholder="ä¾‹å¦‚ï¼šè¡£ç‰©ã€ç”µè„‘..."
                onkeypress="handleEnter(event)"
              />
            </div>
            <div class="input-group" style="margin-bottom: 0">
              <label class="input-label">é‡é‡ (kg)</label>
              <input
                type="number"
                id="itemWeight"
                min="0.1"
                step="0.1"
                placeholder="0.0"
                onkeypress="handleEnter(event)"
              />
            </div>
            <button class="btn btn-primary btn-icon" onclick="addItem()" title="æ·»åŠ ç‰©å“">+</button>
          </div>
        </div>

        <!-- Items List -->
        <div class="tool-section">
          <div class="section-title">ç‰©å“æ¸…å• (<span id="itemCount">0</span> ä»¶)</div>
          <div class="items-list" id="itemsList">
            <div class="empty-state" id="emptyState">è¿˜æ²¡æœ‰æ·»åŠ ç‰©å“ï¼Œå¼€å§‹æ·»åŠ ä½ çš„è¡Œæå§</div>
          </div>
          <div class="btn-row" style="margin-top: 16px">
            <button class="btn btn-secondary" onclick="clearAll()">æ¸…ç©ºæ‰€æœ‰</button>
          </div>
        </div>

        <!-- Summary -->
        <div class="tool-section">
          <div class="section-title">é‡é‡ç»Ÿè®¡</div>
          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-labels">
              <span>0 kg</span>
              <span id="progressLimit">23 kg</span>
            </div>
          </div>
          <div class="summary-card">
            <div class="summary-row">
              <span class="summary-label">è¡Œæé™é¢</span>
              <span class="summary-value" id="summaryLimit">23 kg</span>
            </div>
            <div class="summary-row">
              <span class="summary-label">å·²ç”¨é‡é‡</span>
              <span class="summary-value" id="summaryUsed">0 kg</span>
            </div>
            <div class="summary-row">
              <span class="summary-label">å‰©ä½™é¢åº¦</span>
              <span class="summary-value remaining-ok" id="summaryRemaining">23 kg</span>
            </div>
            <div class="summary-row">
              <span class="summary-label">æ€»é‡é‡</span>
              <span class="summary-value summary-total" id="summaryTotal">0 kg</span>
            </div>
          </div>
        </div>
      </main>
    </div>

    <div class="toast" id="toast">æ“ä½œæˆåŠŸ</div>

    <script>
      var LS_KEY = "luggage_calculator_v1";

      // State
      var items = [];
      var limit = 23;

      // DOM Elements
      var airlineSelect = document.getElementById("airlineSelect");
      var customLimitGroup = document.getElementById("customLimitGroup");
      var customLimitInput = document.getElementById("customLimit");
      var limitBadge = document.getElementById("limitBadge");
      var itemNameInput = document.getElementById("itemName");
      var itemWeightInput = document.getElementById("itemWeight");
      var itemsList = document.getElementById("itemsList");
      var itemCount = document.getElementById("itemCount");
      var warningBanner = document.getElementById("warningBanner");
      var overweightAmount = document.getElementById("overweightAmount");
      var progressFill = document.getElementById("progressFill");
      var progressLimit = document.getElementById("progressLimit");
      var summaryLimit = document.getElementById("summaryLimit");
      var summaryUsed = document.getElementById("summaryUsed");
      var summaryRemaining = document.getElementById("summaryRemaining");
      var summaryTotal = document.getElementById("summaryTotal");

      // Theme toggle
      function toggleTheme() {
        var body = document.body;
        var isDark = body.getAttribute("data-theme") !== "light";
        body.setAttribute("data-theme", isDark ? "light" : "dark");
        localStorage.setItem("theme", isDark ? "light" : "dark");
      }

      // Load theme
      (function () {
        var saved = localStorage.getItem("theme");
        if (saved === "light") {
          document.body.setAttribute("data-theme", "light");
        }
      })();

      // Update airline limit
      function updateAirlineLimit() {
        var value = airlineSelect.value;

        if (value === "custom") {
          customLimitGroup.style.display = "block";
          limit = parseFloat(customLimitInput.value) || 23;
        } else {
          customLimitGroup.style.display = "none";
          limit = parseInt(value, 10);
        }

        limitBadge.textContent = limit + " kg";
        saveToStorage();
        updateSummary();
      }

      // Handle enter key
      function handleEnter(event) {
        if (event.key === "Enter") {
          addItem();
        }
      }

      // Add item
      function addItem() {
        var name = itemNameInput.value.trim();
        var weight = parseFloat(itemWeightInput.value);

        if (!name) {
          showToast("è¯·è¾“å…¥ç‰©å“åç§°", "error");
          itemNameInput.focus();
          return;
        }

        if (!weight || weight <= 0) {
          showToast("è¯·è¾“å…¥æœ‰æ•ˆçš„é‡é‡", "error");
          itemWeightInput.focus();
          return;
        }

        items.push({
          id: Date.now(),
          name: name,
          weight: weight,
        });

        itemNameInput.value = "";
        itemWeightInput.value = "";
        itemNameInput.focus();

        saveToStorage();
        renderItems();
        updateSummary();
        showToast("å·²æ·»åŠ : " + name);
      }

      // Delete item
      function deleteItem(id) {
        var item = items.find(function (i) {
          return i.id === id;
        });
        items = items.filter(function (i) {
          return i.id !== id;
        });
        saveToStorage();
        renderItems();
        updateSummary();
        if (item) {
          showToast("å·²åˆ é™¤: " + item.name);
        }
      }

      // Clear all items
      function clearAll() {
        if (items.length === 0) {
          showToast("æ¸…å•å·²ç»æ˜¯ç©ºçš„", "error");
          return;
        }

        if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç‰©å“å—ï¼Ÿ")) {
          items = [];
          saveToStorage();
          renderItems();
          updateSummary();
          showToast("å·²æ¸…ç©ºæ‰€æœ‰ç‰©å“");
        }
      }

      // Create item row element
      function createItemRow(item) {
        var row = document.createElement("div");
        row.className = "item-row";

        var nameSpan = document.createElement("span");
        nameSpan.className = "item-name";
        nameSpan.textContent = item.name;

        var weightSpan = document.createElement("span");
        weightSpan.className = "item-weight";
        weightSpan.textContent = item.weight.toFixed(1) + " kg";

        var deleteBtn = document.createElement("button");
        deleteBtn.className = "btn btn-danger btn-icon";
        deleteBtn.textContent = "Ã—";
        deleteBtn.title = "åˆ é™¤";
        deleteBtn.onclick = function () {
          deleteItem(item.id);
        };

        row.appendChild(nameSpan);
        row.appendChild(weightSpan);
        row.appendChild(deleteBtn);

        return row;
      }

      // Render items list
      function renderItems() {
        // Clear the list
        while (itemsList.firstChild) {
          itemsList.removeChild(itemsList.firstChild);
        }

        if (items.length === 0) {
          var emptyDiv = document.createElement("div");
          emptyDiv.className = "empty-state";
          emptyDiv.id = "emptyState";
          emptyDiv.textContent = "è¿˜æ²¡æœ‰æ·»åŠ ç‰©å“ï¼Œå¼€å§‹æ·»åŠ ä½ çš„è¡Œæå§";
          itemsList.appendChild(emptyDiv);
          itemCount.textContent = "0";
          return;
        }

        itemCount.textContent = items.length;

        items.forEach(function (item) {
          itemsList.appendChild(createItemRow(item));
        });
      }

      // Update summary
      function updateSummary() {
        var totalWeight = items.reduce(function (sum, item) {
          return sum + item.weight;
        }, 0);
        var remaining = limit - totalWeight;
        var percentage = (totalWeight / limit) * 100;

        // Update progress bar
        progressFill.style.width = Math.min(percentage, 100) + "%";
        progressFill.classList.remove("warning", "over");
        if (percentage > 100) {
          progressFill.classList.add("over");
        } else if (percentage > 80) {
          progressFill.classList.add("warning");
        }

        progressLimit.textContent = limit + " kg";

        // Update summary card
        summaryLimit.textContent = limit + " kg";
        summaryUsed.textContent = totalWeight.toFixed(1) + " kg";
        summaryTotal.textContent = totalWeight.toFixed(1) + " kg";

        // Update remaining with color
        summaryRemaining.textContent = remaining.toFixed(1) + " kg";
        summaryRemaining.classList.remove("remaining-ok", "remaining-warning", "remaining-over");

        if (remaining < 0) {
          summaryRemaining.classList.add("remaining-over");
          summaryRemaining.textContent = remaining.toFixed(1) + " kg (è¶…é‡!)";
        } else if (remaining < limit * 0.2) {
          summaryRemaining.classList.add("remaining-warning");
        } else {
          summaryRemaining.classList.add("remaining-ok");
        }

        // Show/hide warning banner
        if (remaining < 0) {
          warningBanner.classList.add("show");
          overweightAmount.textContent = Math.abs(remaining).toFixed(1);
        } else {
          warningBanner.classList.remove("show");
        }
      }

      // Save to localStorage
      function saveToStorage() {
        var data = {
          items: items,
          limit: limit,
          airlineValue: airlineSelect.value,
          customLimit: customLimitInput.value,
        };
        localStorage.setItem(LS_KEY, JSON.stringify(data));
      }

      // Load from localStorage
      function loadFromStorage() {
        try {
          var saved = localStorage.getItem(LS_KEY);
          if (saved) {
            var data = JSON.parse(saved);
            items = data.items || [];
            limit = data.limit || 23;

            if (data.airlineValue) {
              airlineSelect.value = data.airlineValue;
              if (data.airlineValue === "custom") {
                customLimitGroup.style.display = "block";
                customLimitInput.value = data.customLimit || 23;
              }
            }

            limitBadge.textContent = limit + " kg";
            renderItems();
            updateSummary();
          }
        } catch (e) {
          console.error("Failed to load from storage:", e);
        }
      }

      // Show toast
      function showToast(msg, type) {
        var toast = document.getElementById("toast");
        toast.textContent = msg;
        toast.classList.remove("error");
        if (type === "error") {
          toast.classList.add("error");
        }
        toast.classList.add("show");
        setTimeout(function () {
          toast.classList.remove("show");
        }, 2000);
      }

      // Initialize
      loadFromStorage();
    </script>
  </body>
</html>
