<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CHANGELOG ç”Ÿæˆå™¨ - WebUtils</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="CHANGELOG ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="keywords" content="changelog-gen,dev,tools,webutils" />
    <meta name="author" content="WebUtils" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://tools.realtime-ai.chat/tools/dev/changelog-gen.html" />

    <!-- Open Graph -->
    <meta property="og:title" content="CHANGELOG ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:description" content="CHANGELOG ç”Ÿæˆå™¨ - WebUtils" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://tools.realtime-ai.chat/tools/dev/changelog-gen.html" />
    <meta property="og:site_name" content="WebUtils" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:image" content="https://tools.realtime-ai.chat/social-preview.png" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="640" />
    <meta property="og:image:type" content="image/png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="CHANGELOG ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:description" content="CHANGELOG ç”Ÿæˆå™¨ - WebUtils" />
    <meta name="twitter:image" content="https://tools.realtime-ai.chat/social-preview.png" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <style>
      :root {
        --bg-deep: #0a0a0f;
        --bg-surface: #12121a;
        --bg-card: #1a1a24;
        --bg-input: #0e0e14;
        --text-primary: #e8e8ed;
        --text-secondary: #8888a0;
        --text-muted: #55556a;
        --border-subtle: #2a2a3a;
        --border-strong: #3a3a4a;
        --accent-cyan: #00f5d4;
        --accent-green: #10b981;
        --accent-red: #f43f5e;
        --accent-yellow: #fbbf24;
        --accent-purple: #a855f7;
        --glow-cyan: rgb(0, 245, 212, 0.15);
        --glow-green: rgb(16, 185, 129, 0.15);
        --glow-red: rgb(244, 63, 94, 0.15);
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
      }

      [data-theme='light'] {
        --bg-deep: #fafafa;
        --bg-surface: #fff;
        --bg-card: #fff;
        --bg-input: #f5f5f5;
        --bg-hover: #f5f5f5;
        --text-primary: #1a1a1a;
        --text-secondary: #666;
        --text-muted: #999;
        --border-subtle: #e5e5e5;
        --border-strong: #d5d5d5;
      }

      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      .container {
        max-width: 1200px;
        padding: 20px;
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }
      .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
      }
      @media (max-width: 900px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }
      .panel {
        border: 1px solid var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
        padding: 1rem;
        background: var(--pico-card-background-color);
      }
      .panel h3 {
        margin-top: 0;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--pico-muted-border-color);
      }
      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }
      .form-row.full {
        grid-template-columns: 1fr;
      }
      .entry-list {
        max-height: 300px;
        overflow-y: auto;
        margin-bottom: 1rem;
      }
      .entry-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem;
        margin-bottom: 0.5rem;
        background: var(--pico-background-color);
        border-radius: var(--pico-border-radius);
        border-left: 4px solid var(--pico-primary);
      }
      .entry-item.added {
        border-left-color: #22c55e;
      }
      .entry-item.changed {
        border-left-color: #3b82f6;
      }
      .entry-item.deprecated {
        border-left-color: #f59e0b;
      }
      .entry-item.removed {
        border-left-color: #ef4444;
      }
      .entry-item.fixed {
        border-left-color: #8b5cf6;
      }
      .entry-item.security {
        border-left-color: #ec4899;
      }
      .entry-content {
        flex: 1;
        margin-right: 0.5rem;
      }
      .entry-type {
        font-size: 0.75rem;
        padding: 0.1rem 0.4rem;
        border-radius: 3px;
        margin-right: 0.5rem;
        text-transform: uppercase;
        font-weight: bold;
      }
      .entry-type.added {
        background: #dcfce7;
        color: #166534;
      }
      .entry-type.changed {
        background: #dbeafe;
        color: #1e40af;
      }
      .entry-type.deprecated {
        background: #fef3c7;
        color: #92400e;
      }
      .entry-type.removed {
        background: #fee2e2;
        color: #991b1b;
      }
      .entry-type.fixed {
        background: #ede9fe;
        color: #5b21b6;
      }
      .entry-type.security {
        background: #fce7f3;
        color: #9d174d;
      }
      [data-theme='dark'] .entry-type.added {
        background: #166534;
        color: #dcfce7;
      }
      [data-theme='dark'] .entry-type.changed {
        background: #1e40af;
        color: #dbeafe;
      }
      [data-theme='dark'] .entry-type.deprecated {
        background: #92400e;
        color: #fef3c7;
      }
      [data-theme='dark'] .entry-type.removed {
        background: #991b1b;
        color: #fee2e2;
      }
      [data-theme='dark'] .entry-type.fixed {
        background: #5b21b6;
        color: #ede9fe;
      }
      [data-theme='dark'] .entry-type.security {
        background: #9d174d;
        color: #fce7f3;
      }
      .btn-delete {
        padding: 0.2rem 0.5rem;
        font-size: 0.8rem;
        background: transparent;
        border: 1px solid var(--pico-muted-border-color);
        cursor: pointer;
      }
      .btn-delete:hover {
        background: var(--pico-del-color);
        color: white;
      }
      .preview-area {
        background: var(--pico-background-color);
        border: 1px solid var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
        padding: 1rem;
        min-height: 400px;
        max-height: 600px;
        overflow-y: auto;
        font-family: Monaco, Menlo, 'Ubuntu Mono', monospace;
        font-size: 13px;
        white-space: pre-wrap;
        overflow-wrap: break-word;
      }
      .toolbar {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }
      .toolbar button {
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
        margin: 0;
      }
      .version-list {
        margin-bottom: 1rem;
      }
      .version-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem;
        background: var(--pico-background-color);
        border-radius: var(--pico-border-radius);
        margin-bottom: 0.5rem;
        cursor: pointer;
      }
      .version-item:hover {
        background: var(--pico-primary-focus);
      }
      .version-item.active {
        background: var(--pico-primary);
        color: white;
      }
      .empty-state {
        text-align: center;
        color: var(--pico-muted-color);
        padding: 2rem;
      }
      small {
        display: block;
        margin-top: 0.25rem;
        color: var(--pico-muted-color);
      }

      .breadcrumb {
        background: rgba(255, 255, 255, 0.95);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 0.85rem;
      }
      .breadcrumb a {
        color: #667eea;
        text-decoration: none;
      }
      .breadcrumb a:hover {
        text-decoration: underline;
      }
      .breadcrumb span {
        color: #999;
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <nav class="breadcrumb">
      <a href="../../index.html">é¦–é¡µ</a>
      <span>â€º</span>
      CHANGELOG ç”Ÿæˆå™¨
    </nav>
    <main class="container">
      <a
        href="../../index.html"
        style="
          display: inline-block;
          margin-bottom: 1rem;
          color: var(--pico-primary);
          text-decoration: none;
        "
      >
        â† è¿”å›é¦–é¡µ
      </a>
      <div class="header">
        <h1>CHANGELOG ç”Ÿæˆå™¨</h1>
        <button id="themeToggle" class="outline">æ·±è‰²æ¨¡å¼</button>
      </div>

      <div class="main-content">
        <div class="left-panel">
          <div class="panel">
            <h3>ç‰ˆæœ¬ä¿¡æ¯</h3>
            <div class="form-row">
              <label>
                ç‰ˆæœ¬å·
                <input type="text" id="version" placeholder="1.0.0" />
              </label>
              <label>
                å‘å¸ƒæ—¥æœŸ
                <input type="date" id="releaseDate" />
              </label>
            </div>
            <button onclick="addVersion()" style="width: 100%">æ·»åŠ ç‰ˆæœ¬</button>
          </div>

          <div class="panel" style="margin-top: 1rem">
            <h3>ç‰ˆæœ¬åˆ—è¡¨</h3>
            <div class="version-list" id="versionList">
              <div class="empty-state">æš‚æ— ç‰ˆæœ¬ï¼Œè¯·å…ˆæ·»åŠ ç‰ˆæœ¬</div>
            </div>
          </div>

          <div class="panel" style="margin-top: 1rem; display: none" id="entryPanel">
            <h3>æ·»åŠ å˜æ›´è®°å½•</h3>
            <label>
              å˜æ›´ç±»å‹
              <select id="changeType">
                <option value="added">Added - æ–°å¢åŠŸèƒ½</option>
                <option value="changed">Changed - åŠŸèƒ½å˜æ›´</option>
                <option value="deprecated">Deprecated - å³å°†åºŸå¼ƒ</option>
                <option value="removed">Removed - å·²åˆ é™¤</option>
                <option value="fixed">Fixed - Bugä¿®å¤</option>
                <option value="security">Security - å®‰å…¨æ›´æ–°</option>
              </select>
            </label>
            <label>
              å˜æ›´æè¿°
              <input type="text" id="changeDesc" placeholder="æè¿°å˜æ›´å†…å®¹..." />
            </label>
            <button onclick="addEntry()" style="width: 100%">æ·»åŠ è®°å½•</button>
          </div>

          <div class="panel" style="margin-top: 1rem" id="entriesPanel">
            <h3>
              å½“å‰ç‰ˆæœ¬å˜æ›´
              <span id="currentVersionLabel"></span>
            </h3>
            <div class="entry-list" id="entryList">
              <div class="empty-state">è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬</div>
            </div>
          </div>
        </div>

        <div class="right-panel">
          <div class="panel">
            <h3>é¢„è§ˆè¾“å‡º</h3>
            <div class="toolbar">
              <button class="secondary" onclick="copyChangelog()">å¤åˆ¶å†…å®¹</button>
              <button class="secondary" onclick="downloadChangelog()">ä¸‹è½½æ–‡ä»¶</button>
              <button class="secondary" onclick="clearAll()">æ¸…ç©ºå…¨éƒ¨</button>
              <button class="secondary" onclick="loadExample()">åŠ è½½ç¤ºä¾‹</button>
            </div>
            <div class="preview-area" id="preview">
              # Changelog æ‰€æœ‰é¡¹ç›®çš„æ˜¾è‘—å˜æ›´éƒ½å°†è®°å½•åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚ æ ¼å¼åŸºäº [Keep a
              Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼Œ æœ¬é¡¹ç›®éµå¾ª
              [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ã€‚
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      const themeToggle = document.getElementById('themeToggle');
      const versionInput = document.getElementById('version');
      const releaseDateInput = document.getElementById('releaseDate');
      const changeTypeSelect = document.getElementById('changeType');
      const changeDescInput = document.getElementById('changeDesc');
      const versionListEl = document.getElementById('versionList');
      const entryListEl = document.getElementById('entryList');
      const previewEl = document.getElementById('preview');
      const currentVersionLabel = document.getElementById('currentVersionLabel');

      let versions = [];
      let currentVersionIndex = -1;

      // åˆå§‹åŒ–æ—¥æœŸ
      releaseDateInput.value = new Date().toISOString().split('T')[0];

      // ä¸»é¢˜åˆ‡æ¢
      function initTheme() {
        const savedTheme = localStorage.getItem('changelog-gen-theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeButton(savedTheme);
      }

      function updateThemeButton(theme) {
        themeToggle.textContent = theme === 'dark' ? 'æµ…è‰²æ¨¡å¼' : 'æ·±è‰²æ¨¡å¼';
      }

      themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('changelog-gen-theme', newTheme);
        updateThemeButton(newTheme);
      });

      // æ·»åŠ ç‰ˆæœ¬
      function addVersion() {
        const version = versionInput.value.trim();
        const date = releaseDateInput.value;

        if (!version) {
          alert('è¯·è¾“å…¥ç‰ˆæœ¬å·ï¼');
          return;
        }

        if (versions.find((v) => v.version === version)) {
          alert('ç‰ˆæœ¬å·å·²å­˜åœ¨ï¼');
          return;
        }

        versions.unshift({
          version,
          date,
          entries: {
            added: [],
            changed: [],
            deprecated: [],
            removed: [],
            fixed: [],
            security: []
          }
        });

        versionInput.value = '';
        currentVersionIndex = 0;
        renderVersionList();
        renderEntries();
        updatePreview();
        saveToStorage();
      }

      // æ¸²æŸ“ç‰ˆæœ¬åˆ—è¡¨
      function renderVersionList() {
        if (versions.length === 0) {
          versionListEl.innerHTML = '<div class="empty-state">æš‚æ— ç‰ˆæœ¬ï¼Œè¯·å…ˆæ·»åŠ ç‰ˆæœ¬</div>';
          return;
        }

        versionListEl.innerHTML = versions
          .map(
            (v, i) => `
                <div class="version-item ${i === currentVersionIndex ? 'active' : ''}" onclick="selectVersion(${i})">
                    <span><strong>v${v.version}</strong> - ${v.date}</span>
                    <button class="btn-delete" onclick="event.stopPropagation(); deleteVersion(${i})">åˆ é™¤</button>
                </div>
            `
          )
          .join('');
      }

      // é€‰æ‹©ç‰ˆæœ¬
      window.selectVersion = function (index) {
        currentVersionIndex = index;
        renderVersionList();
        renderEntries();
      };

      // åˆ é™¤ç‰ˆæœ¬
      window.deleteVersion = function (index) {
        if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç‰ˆæœ¬å—ï¼Ÿ')) {
          versions.splice(index, 1);
          if (currentVersionIndex >= versions.length) {
            currentVersionIndex = versions.length - 1;
          }
          renderVersionList();
          renderEntries();
          updatePreview();
          saveToStorage();
        }
      };

      // æ·»åŠ æ¡ç›®
      function addEntry() {
        if (currentVersionIndex < 0) {
          alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬ï¼');
          return;
        }

        const type = changeTypeSelect.value;
        const desc = changeDescInput.value.trim();

        if (!desc) {
          alert('è¯·è¾“å…¥å˜æ›´æè¿°ï¼');
          return;
        }

        versions[currentVersionIndex].entries[type].push(desc);
        changeDescInput.value = '';
        renderEntries();
        updatePreview();
        saveToStorage();
      }

      // æ¸²æŸ“æ¡ç›®åˆ—è¡¨
      function renderEntries() {
        if (currentVersionIndex < 0) {
          entryListEl.innerHTML = '<div class="empty-state">è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬</div>';
          currentVersionLabel.textContent = '';
          return;
        }

        const ver = versions[currentVersionIndex];
        currentVersionLabel.textContent = `(v${ver.version})`;

        const allEntries = [];
        const typeNames = {
          added: 'Added',
          changed: 'Changed',
          deprecated: 'Deprecated',
          removed: 'Removed',
          fixed: 'Fixed',
          security: 'Security'
        };

        Object.keys(ver.entries).forEach((type) => {
          ver.entries[type].forEach((entry, idx) => {
            allEntries.push({ type, entry, idx });
          });
        });

        if (allEntries.length === 0) {
          entryListEl.innerHTML = '<div class="empty-state">æš‚æ— å˜æ›´è®°å½•</div>';
          return;
        }

        entryListEl.innerHTML = allEntries
          .map(
            (item) => `
                <div class="entry-item ${item.type}">
                    <div class="entry-content">
                        <span class="entry-type ${item.type}">${typeNames[item.type]}</span>
                        ${item.entry}
                    </div>
                    <button class="btn-delete" onclick="deleteEntry('${item.type}', ${item.idx})">åˆ é™¤</button>
                </div>
            `
          )
          .join('');
      }

      // åˆ é™¤æ¡ç›®
      window.deleteEntry = function (type, idx) {
        versions[currentVersionIndex].entries[type].splice(idx, 1);
        renderEntries();
        updatePreview();
        saveToStorage();
      };

      // æ›´æ–°é¢„è§ˆ
      window.updatePreview = function () {
        let md = `# Changelog

æ‰€æœ‰é¡¹ç›®çš„æ˜¾è‘—å˜æ›´éƒ½å°†è®°å½•åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚

æ ¼å¼åŸºäº [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼Œ
æœ¬é¡¹ç›®éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ã€‚

`;

        const typeHeaders = {
          added: '### Added',
          changed: '### Changed',
          deprecated: '### Deprecated',
          removed: '### Removed',
          fixed: '### Fixed',
          security: '### Security'
        };

        versions.forEach((ver) => {
          md += `## [${ver.version}] - ${ver.date}\n\n`;

          Object.keys(ver.entries).forEach((type) => {
            if (ver.entries[type].length > 0) {
              md += `${typeHeaders[type]}\n\n`;
              ver.entries[type].forEach((entry) => {
                md += `- ${entry}\n`;
              });
              md += '\n';
            }
          });
        });

        previewEl.textContent = md;
      };

      // å¤åˆ¶
      window.copyChangelog = function () {
        navigator.clipboard.writeText(previewEl.textContent).then(() => {
          alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        });
      };

      // ä¸‹è½½
      window.downloadChangelog = function () {
        const content = previewEl.textContent;
        const blob = new Blob([content], { type: 'text/markdown' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'CHANGELOG.md';
        a.click();
        URL.revokeObjectURL(url);
      };

      // æ¸…ç©º
      window.clearAll = function () {
        if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿ')) {
          versions = [];
          currentVersionIndex = -1;
          renderVersionList();
          renderEntries();
          updatePreview();
          saveToStorage();
        }
      };

      // åŠ è½½ç¤ºä¾‹
      window.loadExample = function () {
        if (versions.length > 0 && !confirm('è¿™å°†æ›¿æ¢å½“å‰æ•°æ®ï¼Œç¡®å®šç»§ç»­å—ï¼Ÿ')) {
          return;
        }

        versions = [
          {
            version: '1.1.0',
            date: '2024-01-15',
            entries: {
              added: ['æ–°å¢ç”¨æˆ·ä¸ªäººèµ„æ–™é¡µé¢', 'æ”¯æŒæš—é»‘æ¨¡å¼åˆ‡æ¢'],
              changed: ['ä¼˜åŒ–é¦–é¡µåŠ è½½é€Ÿåº¦'],
              deprecated: [],
              removed: [],
              fixed: ['ä¿®å¤ç™»å½•é¡µé¢æ ·å¼é—®é¢˜'],
              security: []
            }
          },
          {
            version: '1.0.0',
            date: '2024-01-01',
            entries: {
              added: ['ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½', 'åŸºç¡€æ•°æ®å±•ç¤ºé¡µé¢', 'å“åº”å¼å¸ƒå±€æ”¯æŒ'],
              changed: [],
              deprecated: [],
              removed: [],
              fixed: [],
              security: ['ä½¿ç”¨ HTTPS åŠ å¯†ä¼ è¾“']
            }
          }
        ];

        currentVersionIndex = 0;
        renderVersionList();
        renderEntries();
        updatePreview();
        saveToStorage();
      };

      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
      function saveToStorage() {
        localStorage.setItem('changelog-gen-data', JSON.stringify(versions));
      }

      // ä»æœ¬åœ°å­˜å‚¨åŠ è½½
      function loadFromStorage() {
        const saved = localStorage.getItem('changelog-gen-data');
        if (saved) {
          try {
            versions = JSON.parse(saved);
            if (versions.length > 0) {
              currentVersionIndex = 0;
            }
            renderVersionList();
            renderEntries();
            updatePreview();
          } catch (e) {
            console.error('Failed to load saved data:', e);
          }
        }
      }

      // å¿«æ·é”®
      changeDescInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          addEntry();
        }
      });

      versionInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          addVersion();
        }
      });

      // åˆå§‹åŒ–
      initTheme();
      loadFromStorage();

      // Theme toggle
      function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        html.setAttribute('data-theme', newTheme);
        document.getElementById('theme-icon').textContent = newTheme === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
        localStorage.setItem('theme', newTheme);
      }

      // Load saved theme
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        document.getElementById('theme-icon').textContent = 'â˜€ï¸';
      }
    </script>
  </body>
</html>
