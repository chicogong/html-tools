<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ä¹ æƒ¯æ‰“å¡è¿½è¸ªå™¨ - WebUtils</title>
    <meta name="description" content="è¿½è¸ªæ¯æ—¥ä¹ æƒ¯ï¼Œå»ºç«‹è‰¯å¥½ç”Ÿæ´»æ–¹å¼ï¼ŒåšæŒæ‰“å¡è®°å½•" />
    <meta name="keywords" content="ä¹ æƒ¯ æ‰“å¡ è¿½è¸ª ç›®æ ‡ habit tracker daily routine goal" />
    <meta name="author" content="WebUtils" />
    <link
      rel="canonical"
      href="https://tools.realtime-ai.chat/tools/lifestyle/habit-tracker.html"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --color-bg-deep: #0a0a0f;
        --color-bg-surface: #12121a;
        --color-bg-card: #1a1a24;
        --color-text-primary: #e8e8ed;
        --color-text-secondary: #9898a4;
        --color-text-muted: #5c5c66;
        --accent-blue: #4d9fff;
        --color-accent-cyan: #00f5d4;
        --accent-green: #00d26a;
        --accent-orange: #ff9f43;
        --accent-red: #ff6b6b;
        --border-subtle: #2a2a36;
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 14px;
      
  /* å­—ä½“å˜é‡ */
  --font-sans: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Courier New', monospace;
}
      [data-theme="light"] {
        --color-bg-deep: #fafafa;
        --color-bg-surface: #fff;
        --color-bg-card: #fff;
        --color-text-primary: #1a1a1a;
        --color-text-secondary: #666;
        --color-text-muted: #999;
        --border-subtle: #e5e5e5;
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-sans);
        background: var(--color-bg-deep);
        color: var(--color-text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }
      .bg-grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(rgba(77, 159, 255, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(77, 159, 255, 0.03) 1px, transparent 1px);
        background-size: 50px 50px;
        pointer-events: none;
        z-index: 0;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem 1.5rem;
      }
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid var(--border-subtle);
        background: var(--color-bg-card);
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 100;
        transition: all 0.2s;
      }
      .theme-toggle:hover {
        border-color: var(--color-accent-cyan);
        transform: scale(1.1);
      }
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.85rem;
        padding: 8px 14px;
        background: var(--color-bg-surface);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }
      .breadcrumb a {
        color: var(--color-text-secondary);
        text-decoration: none;
      }
      .breadcrumb a:hover {
        color: var(--color-accent-cyan);
      }
      .breadcrumb-separator {
        color: var(--color-text-muted);
      }
      .breadcrumb-current {
        color: var(--color-text-primary);
        font-weight: 500;
      }
      h1 {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        background: linear-gradient(135deg, var(--color-text-primary), var(--accent-green));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-align: center;
      }
      .subtitle {
        color: var(--color-text-secondary);
        margin-bottom: 2rem;
        text-align: center;
      }
      .add-habit {
        display: flex;
        gap: 1rem;
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }
      .add-habit input {
        flex: 1;
        padding: 0.75rem;
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        background: var(--color-bg-surface);
        color: var(--color-text-primary);
        font-family: inherit;
        font-size: 1rem;
      }
      .add-habit input:focus {
        outline: none;
        border-color: var(--accent-blue);
      }
      .add-habit button {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: var(--radius-sm);
        background: var(--accent-green);
        color: #000;
        font-family: inherit;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      .add-habit button:hover {
        background: var(--color-accent-cyan);
        transform: translateY(-2px);
      }
      .habits-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .habit-card {
        background: var(--color-bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
      }
      .habit-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }
      .habit-title {
        font-size: 1.1rem;
        font-weight: 600;
      }
      .habit-streak {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--accent-orange);
      }
      .habit-streak .icon {
        font-size: 1.2rem;
      }
      .habit-delete {
        background: none;
        border: none;
        color: var(--color-text-muted);
        cursor: pointer;
        padding: 0.5rem;
        font-size: 1.2rem;
        transition: all 0.2s;
      }
      .habit-delete:hover {
        color: var(--accent-red);
        transform: scale(1.2);
      }
      .calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 8px;
      }
      .calendar-day {
        aspect-ratio: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--color-bg-surface);
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.85rem;
        position: relative;
      }
      .calendar-day:hover {
        border-color: var(--color-accent-cyan);
      }
      .calendar-day.checked {
        background: var(--accent-green);
        border-color: var(--accent-green);
        color: #000;
      }
      .calendar-day.checked::after {
        content: "âœ“";
        font-weight: 700;
        font-size: 1.2rem;
      }
      .calendar-day.future {
        opacity: 0.3;
        cursor: not-allowed;
      }
      .calendar-labels {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 8px;
        margin-bottom: 0.5rem;
        font-size: 0.75rem;
        color: var(--color-text-muted);
        text-align: center;
      }
      .stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border-subtle);
      }
      .stat-item {
        text-align: center;
      }
      .stat-value {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-accent-cyan);
      }
      .stat-label {
        font-size: 0.85rem;
        color: var(--color-text-muted);
        margin-top: 0.25rem;
      }
      .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        color: var(--color-text-muted);
      }
      .empty-state .icon {
        font-size: 3rem;
        margin-bottom: 1rem;
      }
      footer {
        margin-top: 3rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--border-subtle);
        text-align: center;
        color: var(--color-text-muted);
        font-size: 0.85rem;
      }
      footer a {
        color: var(--accent-blue);
        text-decoration: none;
      }
      @media (max-width: 600px) {
        .add-habit {
          flex-direction: column;
        }
        .calendar {
          grid-template-columns: repeat(7, 1fr);
          gap: 4px;
        }
        .calendar-day {
          font-size: 0.7rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-grid"></div>
    <div class="container">
      <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>

      <nav class="breadcrumb">
        <a href="../../index.html">é¦–é¡µ</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current">ä¹ æƒ¯è¿½è¸ª</span>
      </nav>

      <h1>âœ… ä¹ æƒ¯æ‰“å¡è¿½è¸ªå™¨</h1>
      <p class="subtitle">åšæŒæ¯æ—¥æ‰“å¡ï¼Œå…»æˆè‰¯å¥½ä¹ æƒ¯</p>

      <div class="add-habit">
        <input
          type="text"
          id="newHabitInput"
          placeholder="è¾“å…¥æ–°ä¹ æƒ¯ï¼Œå¦‚ï¼šæ¯æ—¥é˜…è¯»30åˆ†é’Ÿ"
          onkeypress="handleEnter(event)"
        />
        <button onclick="addHabit()">+ æ·»åŠ ä¹ æƒ¯</button>
      </div>

      <div class="habits-list" id="habitsList">
        <div class="empty-state">
          <div class="icon">ğŸ“</div>
          <div>
            è¿˜æ²¡æœ‰æ·»åŠ ä¹ æƒ¯
            <br />
            å¼€å§‹æ·»åŠ ä½ æƒ³è¦åšæŒçš„å¥½ä¹ æƒ¯å§ï¼
          </div>
        </div>
      </div>

      <footer>
        <a href="https://github.com/nicexe/html-tools" target="_blank">GitHub</a>
      </footer>
    </div>

    <script>
      const STORAGE_KEY = "html_tools_habits_v1";
      let habits = [];

      function loadHabits() {
        try {
          const saved = localStorage.getItem(STORAGE_KEY);
          habits = saved ? JSON.parse(saved) : [];
        } catch (e) {
          habits = [];
        }
        renderHabits();
      }

      function saveHabits() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(habits));
      }

      function handleEnter(event) {
        if (event.key === "Enter") {
          addHabit();
        }
      }

      function addHabit() {
        const input = document.getElementById("newHabitInput");
        const name = input.value.trim();

        if (!name) return;

        habits.push({
          id: Date.now(),
          name: name,
          checks: {} // { '2024-01-15': true }
        });

        input.value = "";
        saveHabits();
        renderHabits();
      }

      function deleteHabit(id) {
        if (!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¹ æƒ¯å—ï¼Ÿ")) return;

        habits = habits.filter((h) => h.id !== id);
        saveHabits();
        renderHabits();
      }

      function toggleCheck(habitId, dateStr) {
        const habit = habits.find((h) => h.id === habitId);
        if (!habit) return;

        // Don't allow checking future dates
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const checkDate = new Date(dateStr);
        if (checkDate > today) return;

        if (habit.checks[dateStr]) {
          delete habit.checks[dateStr];
        } else {
          habit.checks[dateStr] = true;
        }

        saveHabits();
        renderHabits();
      }

      function getDateString(date) {
        return date.toISOString().split("T")[0];
      }

      function getLast30Days() {
        const days = [];
        const today = new Date();

        for (let i = 29; i >= 0; i--) {
          const date = new Date(today);
          date.setDate(date.getDate() - i);
          days.push(date);
        }

        return days;
      }

      function calculateStreak(habit) {
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        let streak = 0;

        for (let i = 0; i < 365; i++) {
          const date = new Date(today);
          date.setDate(date.getDate() - i);
          const dateStr = getDateString(date);

          if (habit.checks[dateStr]) {
            streak++;
          } else {
            break;
          }
        }

        return streak;
      }

      function calculateStats(habit) {
        const days = getLast30Days();
        const checked = days.filter((d) => habit.checks[getDateString(d)]).length;
        const rate = ((checked / 30) * 100).toFixed(0);
        const streak = calculateStreak(habit);

        return { checked, rate, streak };
      }

      function renderHabits() {
        const container = document.getElementById("habitsList");

        if (habits.length === 0) {
          container.innerHTML = `
          <div class="empty-state">
            <div class="icon">ğŸ“</div>
            <div>è¿˜æ²¡æœ‰æ·»åŠ ä¹ æƒ¯<br>å¼€å§‹æ·»åŠ ä½ æƒ³è¦åšæŒçš„å¥½ä¹ æƒ¯å§ï¼</div>
          </div>
        `;
          return;
        }

        const days = getLast30Days();
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        container.innerHTML = habits
          .map((habit) => {
            const stats = calculateStats(habit);

            return `
          <div class="habit-card">
            <div class="habit-header">
              <div class="habit-title">${habit.name}</div>
              <div style="display:flex;align-items:center;gap:1rem">
                <div class="habit-streak">
                  <span class="icon">ğŸ”¥</span>
                  <span>${stats.streak} å¤©è¿ç»­æ‰“å¡</span>
                </div>
                <button class="habit-delete" onclick="deleteHabit(${habit.id})">Ã—</button>
              </div>
            </div>

            <div class="calendar-labels">
              <div>ä¸€</div>
              <div>äºŒ</div>
              <div>ä¸‰</div>
              <div>å››</div>
              <div>äº”</div>
              <div>å…­</div>
              <div>æ—¥</div>
            </div>

            <div class="calendar">
              ${days
                .map((day) => {
                  const dateStr = getDateString(day);
                  const isChecked = habit.checks[dateStr];
                  const isFuture = day > today;
                  const dayOfMonth = day.getDate();

                  return `
                  <div
                    class="calendar-day ${isChecked ? "checked" : ""} ${isFuture ? "future" : ""}"
                    onclick="${isFuture ? "" : `toggleCheck(${habit.id}, '${dateStr}')`}"
                    title="${day.toLocaleDateString("zh-CN")}"
                  >
                    ${isChecked ? "" : dayOfMonth}
                  </div>
                `;
                })
                .join("")}
            </div>

            <div class="stats">
              <div class="stat-item">
                <div class="stat-value">${stats.checked}</div>
                <div class="stat-label">30å¤©å†…æ‰“å¡</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${stats.rate}%</div>
                <div class="stat-label">å®Œæˆç‡</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${Object.keys(habit.checks).length}</div>
                <div class="stat-label">æ€»æ‰“å¡å¤©æ•°</div>
              </div>
            </div>
          </div>
        `;
          })
          .join("");
      }

      // Initialize
      loadHabits();

      window.toggleTheme = function () {
        const html = document.documentElement;
        const btn = document.querySelector(".theme-toggle");
        const current = html.getAttribute("data-theme");
        const next = current === "light" ? "dark" : "light";
        html.setAttribute("data-theme", next);
        btn.textContent = next === "light" ? "â˜€ï¸" : "ğŸŒ™";
        localStorage.setItem("theme", next);
      };

      (function () {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.documentElement.setAttribute("data-theme", saved);
          document.querySelector(".theme-toggle").textContent = saved === "light" ? "â˜€ï¸" : "ğŸŒ™";
        }
      })();
    </script>
  </body>
</html>
